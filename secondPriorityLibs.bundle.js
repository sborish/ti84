/*! For license information please see secondPriorityLibs.bundle.js.LICENSE.txt */
(self.webpackChunktestnav8_client_build=self.webpackChunktestnav8_client_build||[]).push([[4851,6963,9127,1969,1086,4691,6903,8525,6936],{6963:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(4523),o=n(3270);const i=new function(){var e={};return{init:function(){r.bindAll(this,r.functions(this)),this._registerEvents()},_registerEvents:function(){TN8.fnOn("inform.testSubmitted",this._testSubmitted),TN8.fnOn("navigate.availableTest",this._refreshShowAvailable),TN8.fnOn("perform.AfterAuthSuccessful",this._afterAuthSuccessfulHandler),TN8.fnOn("navigate.secondWindowRefreshForm",this._refreshFormSecondWin),TN8.fnOn("nagivate.startTest",this._startTestIfUnlockSchedule)},_unregisterEvents:function(){o(document).off("inform.testSubmitted",this._testSubmitted),o(document).off("navigate.availableTest",this._refreshShowAvailable),o(document).off("perform.AfterAuthSuccessful",this._afterAuthSuccessfulHandler),o(document).off("navigate.AfterAuthSuccessfulSecondWindow",this._refreshFormIE),o(document).off("nagivate.startTest",this._startTestIfUnlockSchedule)},_testSubmitted:function(){TN8.Application.DataProvider.hasGameBreak()?o(document).trigger("tn.route.to","gameBreakTestOver"):TN8.Application.DataProvider.isSingleUser()?o(document).trigger("tn.route.to","logout"):this._refreshAfrerSubmit()},_afterAuthSuccessfulHandler:function(e,t){this._afterAuthSuccessful(t)},_refreshFormSecondWin:function(e,t){(e={}).forms=[t],this._startTestWithForm(t,e)},_refreshShowAvailable:function(){this._refreshForms(this._showAvailableTestPage)},_refreshAfrerSubmit:function(){this._refreshForms(this._isAnytestLeft)},_startTestIfUnlockSchedule:function(e,t){this._refreshForms(this._isUnlockSchedule.bind(this,t.formId))},_refreshForms:function(e){var t=this;o(document).trigger("tn.loadingModal.on"),"function"==typeof e&&TestEngine.getAuthentication().refreshForms((function(n){t._isAuthSuccess(n)&&e.call(t,n)}))},_showAvailableTestPage:function(e){TN8.Application.availableTests(this._getCompleteForms(e),this._getIncompleteForms(e))},_isAnytestLeft:function(e){TN8.Application.DataProvider.isTestFinished(this._getFormsFromEvent(e))?o(document).trigger("tn.route.to","logout"):TN8.Application.DataProvider.isSingleUser()?TN8.Application.loadTest(this._getIncompleteForms(e)[0]):this._showAvailableTestPage(e)},_isUnlockSchedule:function(e,t){if(this._isAuthSuccess(t)){var n=t.forms&&t.forms[e];if(n&&n.unlockTest&&n.validSchedule&&"E"!==n.testStatusInd)TN8.Application.loadTest(n);else if(n&&"E"!==n.testStatusInd){var r=n.validSchedule?TN8.errorType.TEST_LOCKED:TN8.errorType.TEST_UNSCHEDULED;TN8.throw("",r),this._showAvailableTestPage(t)}else n&&"E"===n.testStatusInd?(TN8.throw("",TN8.errorType.TEST_EXITED),this._showAvailableTestPage(t)):(TN8.throw("",TN8.errorType.TEST_NO_LONGER_AVAILABLE),this._showAvailableTestPage(t))}},_startTestWithForm:function(e,t){TN8.log("authenticationController._startTestWithForm  . ",TN8.CRITICAL),o(document).trigger("tn.login.successful",t),this._setSealCodes(this._getFormsFromEvent(t)),TN8.Application.loadTest(e)},_afterAuthSuccessful:function(e){this._isAuthSuccess(e)&&(TN8.log("authenticationController._afterAuthSuccessful  . ",TN8.CRITICAL),o(document).trigger("tn.login.successful",e),this._setSealCodes(this._getFormsFromEvent(e)),TN8.Application.DataProvider.isSingleUser()?TN8.Application.loadTest(this._getIncompleteForms(e)[0]):TN8.Application.availableTests(this._getCompleteForms(e),this._getIncompleteForms(e)))},_setSealCodes:function(t){for(var n=0;n<t.length;n++){var r=t[n];r.sealCodes&&(e[r.formId]=r.sealCodes.split(","))}},getSealCodes:function(t){return e[t]},_isAuthSuccess:function(e){var t=this._getDataFromEvent(e);return!!TN8.Application.error.successCheck(t,this._handler_refreshSuccessNo)||(o(document).trigger("perform.logoutCleanup"),o(document).trigger("tn.route.to","login"),!1)},_handler_refreshSuccessNo:function(e){TN8.log("authenticationController._handler_refreshSuccessNo  . ",TN8.CRITICAL),o(document).trigger("perform.logoutCleanup"),o(document).trigger("tn.route.to","login")},_isComplete:function(e){return"C"===e.testStatusInd},_getIncompleteForms:function(e){var t=this._getFormsFromEvent(e);return r.reject(t,this._isComplete)},_getCompleteForms:function(e){var t=this._getFormsFromEvent(e);return r.filter(t,this._isComplete)},_getFormsFromEvent:function(e){var t=this._getDataFromEvent(e);return r.toArray(t.forms)},_getDataFromEvent:function(e){return e.getTarget?e.getTarget():e}}}},9127:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(927),o=n(4523),i=n(3270);const s=function(){var e=null;return{thisClassName:"CommandCenter",CommandCenterStatus:{BUSY:1,IDLE:2},init:function(){return e=this,o.bindAll(this,"_registerEvents","_unregisterEvents","_handleScoreMe"),this._startEndTestListener(),this},_applicationStatusInit:function(){r.default.registerEvent(r.default.actionNames.obeyCommand,"DoObeyCommand","ErrObeyCommand",TN8.Dispatcher),TN8.Dispatcher.off("DoObeyCommand").on("DoObeyCommand",this.obeyCommand,this),TN8.Dispatcher.off("ErrObeyCommand").on("ErrObeyCommand",this.obeyCommandFailed,this),r.default.subscribeCondition(r.default.actionNames.obeyCommand,this.thisClassName,this.CommandCenterStatus.IDLE),this.idleStatus()},_startEndTestListener:function(){TN8.fnOn("tn.test.start",this._registerEvents),TN8.fnOn("cleanup.betweenTest",this._unregisterEvents)},_registerEvents:function(){TN8.fnOn("TN8.Application.NavNext",this._handleNavNext),TN8.fnOn("TN8.Application.NavPrev",this._handleNavPrev),TN8.fnOn("TN8.Application.NavTo",this._handleNavTo),TN8.fnOn("TN8.Application.ScoreMe",this._handleScoreMe),TN8.fnOn("tn.scoreController.ScoreDone",this._handleScoreDone),TN8.fnOn("TN8.Application.IsItemAnswered",this._handleIsItemAnswered),TN8.fnOn("tn.dataProvider.IsItemAnsweredDone",this._handleIsItemAnsweredDone),this._applicationStatusInit()},_unregisterEvents:function(){i(document).off("TN8.Application.NavNext"),i(document).off("TN8.Application.NavPrev"),i(document).off("TN8.Application.NavTo"),i(document).off("TN8.Application.ScoreMe"),i(document).off("tn.scoreController.ScoreDone"),i(document).off("tn.dataProvider.IsItemAnsweredDone"),i(document).off("TN8.Application.IsItemAnswered")},_handleNavNext:function(){i(document).trigger("tn.do.nav.next")},_handleNavPrev:function(){i(document).trigger("tn.do.nav.prev")},_handleNavTo:function(e,t){i(document).trigger("tn.do.nav.toItem",t)},_handleScoreMe:function(){e.execute((function(){e.busyStatus(),i(document).trigger("tn.score.me")}))},_handleScoreDone:function(t,n){e.idleStatus(),i(document).trigger("TN8.Application.ScoreDone",n)},_handleIsItemAnswered:function(t,n){e.execute((function(){e.busyStatus(),i(document).trigger("tn.dataProvider.IsItemAnswered",n)}))},_handleIsItemAnsweredDone:function(t,n){e.idleStatus(),i(document).trigger("TN8.Application.IsItemAnsweredDone",n)},execute:function(e){r.default.execute(r.default.actionNames.obeyCommand,e)},obeyCommand:function(e){e.call(this)},obeyCommandFailed:function(e){var t=e&&e.toString();TN8.Application.error.logError("CommandCenter.obeyCommandFailed  "+t,TN8.Application.error.logLevel.IMPORTANT)},busyStatus:function(){r.default.statusChange(this.thisClassName,this.CommandCenterStatus.BUSY)},idleStatus:function(){r.default.statusChange(this.thisClassName,this.CommandCenterStatus.IDLE)}}}},1969:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={pnp:{},init:function(e){try{this.pnp=e.pnp?JSON.parse(e.pnp):{}}catch(e){this.pnp={},TN8.log("pnpOverride.init  . pnp is not JSON : "+e,TN8.CRITICAL)}return this},isSpellCheck:function(e){var t;try{t=-1!==this.pnp.accessForAllUser.content.supportTool.indexOf("spell checker")}catch(e){}return t||e},cleanUp:function(){this.pnp={}}}},6651:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(4523),o=n(3270),i=n(3503);const s=new function(){var e=null;return{thisClassName:"ProctorViewController",proctorViewWebsocketURL:"",proctorViewEnabled:!1,proctorViewCloudfrontURL:"",proctorViewFallbackURL:"",proctorViewFallbackPollingTime:"",proctorViewWebsocketHeartbeatTime:"",proctorViewPnp:!1,MAX_RETRIES:5,BACKOff_TIME:1e4,FALLBACK_MAX_RETRY:3,FALLBACK_BACKOff_TIME:1e4,WEBSOCKET_TIMEOUT:3e4,NORMAL_CLOSURE_CODE:1e3,retries:1,idleTime:0,websocketConnection:null,setIntervalVar:null,setFallbackInterval:null,fallbackUserData:{},externalGroupKey:"",externalLoginKey:"",customerCode:"",testnavEnv:"",forceLogoutCalled:!1,init:function(){return e=this,r.bindAll(this,"_registerEvents","_unregisterEvents"),this._startEndTestListener(),this},_startEndTestListener:function(){TN8.fnOn("tn.testStart.render",this._registerEvents),TN8.fnOn("perform.logoutCleanup",this._unregisterEvents)},_registerEvents:function(){e.proctorViewEnabled=TN8.Application.config.proctorViewEnabled,e.proctorViewCloudfrontURL=TN8.Application.config.proctorViewCloudfrontURL,e.proctorViewFallbackPollingTime=TN8.Application.config.proctorViewFallbackPollingTime,e.proctorViewFallbackURL=TN8.Application.config.proctorViewFallbackURL,e.proctorViewWebsocketHeartbeatTime=TN8.Application.config.proctorViewWebsocketHeartbeatTime,e.proctorViewWebsocketURL=TN8.Application.config.proctorViewWebsocketURL;try{e.proctorViewPnp=TN8.PnpController.pnp.proctorView.active}catch(t){e.proctorViewPnp=!1}!e.proctorViewWebsocketURL||!0!==e.proctorViewEnabled&&!0!==e.proctorViewPnp||(e.externalGroupKey=TestEngine.getAuthentication().getExternalGroupKey(),e.externalLoginKey=TestEngine.getAuthentication().getExternalLoginKey(),e.customerCode=TestEngine.getAuthentication().getContentCustomerCode(),e.testnavEnv=new URL(TestEngine.getAuthentication()._apiBaseUrl).host,this._createWebsocketConnection())},_unregisterEvents:function(){!0!==e.proctorViewEnabled&&!0!==e.proctorViewPnp||!e.proctorViewWebsocketURL||(e.websocketConnection&&e._sendDisconnect(),e.setFallbackInterval&&(e._reset(),e._fallbackDeleteStudent()),e.externalGroupKey="",e.externalLoginKey="",e.customerCode="",e.testnavEnv=""),e.proctorViewWebsocketURL="",e.proctorViewEnabled=!1,e.proctorViewCloudfrontURL="",e.proctorViewFallbackPollingTime="",e.proctorViewFallbackURL="",e.proctorViewWebsocketHeartbeatTime="",e.proctorViewPnp=!1,e.forceLogoutCalled=!1},_connect:function(){return new Promise((function(t,n){const r=e.proctorViewWebsocketURL+"?sess="+TestEngine.getAuthentication().getSessionToken()+"&u_sess="+TestEngine.getAuthentication().getLoginToken()+"&externalLoginKey="+e.externalLoginKey+"&customerCode="+e.customerCode+"&testnavEnv="+e.testnavEnv;var o=new WebSocket(r);setTimeout((function(){o.readyState!==WebSocket.OPEN&&(o.close(),n("timeout"))}),e.WEBSOCKET_TIMEOUT),o.onopen=function(){t(o)},o.onerror=function(e){n(e)}}))},_createWebsocketConnection:function(){e._connect().then((function(t){TN8.log("ProctorViewController._createWebsocketConnection successful  timestamp : "+(new Date).toString(),TN8.IMPORTANT),e.websocketConnection=t,e.retries=1,e._sendInitialMessage(),e._checkHeartbeat(),e.websocketConnection.onmessage=t=>{e.idleTime=0;const n=JSON.parse(t.data);"pauseEvent"===n.type&&n.pause&&e._callForceLogout()},e.websocketConnection.onerror=e=>{TN8.log("ProctorViewController.onerror: "+JSON.stringify(e),TN8.IMPORTANT)},e.websocketConnection.onclose=t=>{TN8.log("ProctorViewController.onclose: WebSocket close! "+JSON.stringify(t)+" timestamp : "+(new Date).toString()+" event code : "+t.code,TN8.IMPORTANT),t.code!==e.NORMAL_CLOSURE_CODE&&e._retryConnection()}})).catch((function(t){TN8.log("ProctorViewController._createWebsocketConnection error : "+JSON.stringify(t),TN8.IMPORTANT),e._retryConnection()}))},_sendInitialMessage:function(){var t={action:"initStudent",externalGroupKey:e.externalGroupKey,externalLoginKey:e.externalLoginKey,customerCode:e.customerCode,testnavEnv:e.testnavEnv};e._sendMessage(t)},_checkHeartbeat:function(){e.setIntervalVar=setInterval((()=>{e._sendMessage({action:"ping",externalGroupKey:e.externalGroupKey,externalLoginKey:e.externalLoginKey,customerCode:e.customerCode,testnavEnv:e.testnavEnv}),e._checkMessageReceived()}),e.proctorViewWebsocketHeartbeatTime)},_retryConnection:function(){clearInterval(e.setIntervalVar),e.idleTime=0,e.retries<=e.MAX_RETRIES?setTimeout((function(){TN8.log("ProctorViewController._retryConnection retry - "+e.retries,TN8.IMPORTANT),e.retries++,e._createWebsocketConnection()}),e.BACKOff_TIME*e.retries):e.retries>e.MAX_RETRIES&&(e.retries=1,e._fallbackInitStudent(),e._sendLogToSplunk())},_sendDisconnect:function(){e._sendMessage({action:"disconnect",externalGroupKey:e.externalGroupKey,externalLoginKey:e.externalLoginKey,customerCode:e.customerCode,testnavEnv:e.testnavEnv}),e.websocketConnection.close(e.NORMAL_CLOSURE_CODE),e._reset()},_reset:function(){clearInterval(e.setIntervalVar),clearInterval(e.setFallbackInterval),e.retries=1,e.idleTime=0},_sendMessage:function(t){if(null!==e.websocketConnection){const n=JSON.stringify(t);e.websocketConnection.send(n)}},_checkMessageReceived:function(){e.idleTime++,e.idleTime>2&&e.websocketConnection.close()},_sendLogToSplunk:function(){try{var t="Unable to make websocket connection";TN8.log(t,TN8.IMPORTANT);var n=window.TN8.Application.config.logsURL||"https://tn-logs.pearsondev.com/Logs",r={event:"websocketConnectionFailed",agent:navigator.userAgent,customerCode:e.customerCode,cv:TN8.Application.clientVersion,origin:window.location.origin,loginId:TestEngine.getAuthentication().getLoginId(),message:t};o.ajax({url:n,type:"POST",data:"Log="+encodeURIComponent(JSON.stringify(r))})}catch(e){TN8.log("ProctorViewController._sendLogToSplunk error : "+JSON.stringify(e),TN8.IMPORTANT)}},_fallbackInitStudent:async function(t){t||(t=1);const n=e.proctorViewFallbackURL+"/init-student?sess="+TestEngine.getAuthentication().getSessionToken()+"&u_sess="+TestEngine.getAuthentication().getLoginToken()+"&externalLoginKey="+e.externalLoginKey+"&customerCode="+e.customerCode+"&testnavEnv="+e.testnavEnv;await fetch(n,e._requestBody()).then((t=>{TN8.log("ProctorViewController._fallbackInitStudent successful "+JSON.stringify(t),TN8.IMPORTANT),e._initiateFallback()})).catch((n=>{TN8.log("ProctorViewController._fallbackInitStudent : Error while calling api - "+JSON.stringify(n),TN8.CRITICAL),t<=e.FALLBACK_MAX_RETRY&&setTimeout((function(){TN8.log("ProctorViewController._fallbackInitStudent retry - "+t,TN8.IMPORTANT),t++,e._fallbackInitStudent(t)}),e.FALLBACK_BACKOff_TIME*t)}))},_fallbackDeleteStudent:async function(t){t||(t=1);var n=e.fallbackUserData;const r=e.proctorViewFallbackURL+"/delete-student?sess="+n.sess+"&u_sess="+n.u_sess+"&externalLoginKey="+n.externalLoginKey+"&customerCode="+n.customerCode+"&testnavEnv="+n.testnavEnv;await fetch(r,e._requestBody()).then((t=>{TN8.log("ProctorViewController._fallbackDeleteStudent successful "+JSON.stringify(t),TN8.IMPORTANT),e.fallbackUserData={}})).catch((n=>{TN8.log("ProctorViewController._fallbackDeleteStudent : Error while calling api - "+JSON.stringify(n),TN8.CRITICAL),TN8.log("ProctorViewController._fallbackDeleteStudent : deleteStudentURL - "+r,TN8.CRITICAL),t<=e.FALLBACK_MAX_RETRY&&setTimeout((function(){TN8.log("ProctorViewController._fallbackDeleteStudent retry - "+t,TN8.IMPORTANT),t++,e._fallbackDeleteStudent(t)}),0)}))},_fallbackCheckPauseStatus:async function(){if(e.testnavEnv&&e.customerCode&&e.externalGroupKey&&e.externalLoginKey&&this.proctorViewCloudfrontURL){var t=i(e.testnavEnv+e.customerCode+e.externalGroupKey+e.externalLoginKey);await fetch(this.proctorViewCloudfrontURL+"/"+t,{method:"GET"}).then((t=>{t&&200===t.status&&e._callForceLogout()})).catch((e=>TN8.log("ProctorViewController._fallbackCheckPauseStatus : Error while calling api - "+JSON.stringify(e),TN8.CRITICAL)))}else TN8.log("ProctorViewController._fallbackCheckPauseStatus has empty values"),clearInterval(e.setFallbackInterval)},_callForceLogout:function(){e.forceLogoutCalled||(e.forceLogoutCalled=!0,TN8.log("ProctorView controller.forceLogoutTest"),o(document).trigger("forceLogoutTest"))},_initiateFallback:function(){e.proctorViewFallbackPollingTime&&(e.setFallbackInterval=setInterval((()=>{e._fallbackCheckPauseStatus()}),e.proctorViewFallbackPollingTime),e.fallbackUserData={sess:TestEngine.getAuthentication().getSessionToken(),u_sess:TestEngine.getAuthentication().getLoginToken(),externalLoginKey:e.externalLoginKey,customerCode:e.customerCode,testnavEnv:e.testnavEnv})},_requestBody:function(){var t={};return t.externalGroupKey=e.externalGroupKey,t.externalLoginKey=e.externalLoginKey,t.customerCode=e.customerCode,t.testnavEnv=e.testnavEnv,{method:"POST",body:JSON.stringify(t)}}}}},3670:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(7785),o=n(3270),i=function(){this.analytics=[],o(document).off("tn.progressBar.off",o.proxy(this.saveTracker,this)).on("tn.progressBar.off",o.proxy(this.saveTracker,this)),o(document).off("collectEndTestData",o.proxy(this.getEndTestAnalytics,this)).on("collectEndTestData",o.proxy(this.getEndTestAnalytics,this))};i.prototype.initTracker=function(e){this.currentTracker={type:e,events:[]},this.currentTracker.events.push({PROGRESS_START:(new Date).getTime()})},i.prototype.updateTracker=function(e){if(this.currentTracker){var t={};t[e]=(new Date).getTime(),this.currentTracker.events.push(t)}},i.prototype.saveTracker=function(){this.currentTracker&&("firstItem"!==this.currentTracker.type&&"item"!==this.currentTracker.type||(this.currentTracker.itemId=TestEngine.getNavigation().getCurrentItem()._identifier),this.currentTracker.events.push({PROGRESS_END:(new Date).getTime()}),this.analytics.push(this.currentTracker),this.currentTracker=null)},i.prototype.getAvgTime=function(){var e=0,t=0;return this.analytics.forEach((function(n,r){"item"===n.type&&(t++,e+=n.events[n.events.length-1].PROGRESS_END-n.events[0].PROGRESS_START)})),e/t},i.prototype.getEndTestAnalytics=function(e,t){this.analytics.length&&t(this.analytics,"progressMetrics");var n=this.getAvgTime();n&&t(n,"progressBarAvgTime"),this.analytics=[]};const s=new i;var a=n(4523),c=n(3270),l={_view:r.A,_tracker:s,_createEvents:"inform.startTestRendering inform.navToFirstItem inform.loadFirstItem inform.navToRL inform.navToItem inform.networkcheck",_updateEvents:"inform.diagnosticsDone inform.authSelectTestSuccess inform.testDefRecieved inform.sessionInit inform.preloadInit inform.testLocked navigated.startTest navigated.settings inform.gotCurResponse inform.gotCatItem inform.itemSaved inform.preloadDone inform.flavorFetched inform.loadToolLibsReady ItemController.ItemLoaded tn.endsection.loaded tn.endsection.exit tn.endtest.loaded inform.availablePartsLoaded inform.networkcheckprogress navigated.remoteProctoringSysChk",_progressBars:null,_progressUpdates:null,addListeners:function(){a.bindAll(this,a.functions(this)),this._createProgressEvents(),this._view.initialize(),c(document).on(this._createEvents,this._createProgressBar),c(document).on(this._updateEvents,this._updateProgressBar)},_createProgressEvents:function(){this._progressBars={"inform.startTestRendering":["login",25],"inform.navToFirstItem":["firstItem",12],"inform.loadFirstItem":["firstItem",12],"inform.navToRL":["firstItem",12],"inform.navToItem":["item",15],"inform.networkcheck":["networkcheck",2]},this._progressUpdates={"inform.diagnosticsDone":["PROGRESS_DIAGNOSTICS",4],"inform.authSelectTestSuccess":["PROGRESS_AUTH_SELECT",3],"inform.testDefRecieved":["PROGRESS_TESTDEFINE",1],"inform.sessionInit":["PROGRESS_SESSION_INITIALISATION",5],"inform.preloadInit":["PROGRESS_PRELOAD_INIT",2],"inform.testLocked":["PROGRESS_LOCK",10],"navigated.settings":["PROGRESS_TEST_LOADED",26],"navigated.startTest":["PROGRESS_TEST_LOADED",26],"inform.availablePartsLoaded":["PROGRESS_PARTS_LOADED",26],"inform.gotCurResponse":["PROGRESS_GET_CURRENT_RESPONSE",2],"inform.gotCatItem":["PROGRESS_CAT_GET_ITEM",3],"inform.itemSaved":["PROGRESS_SAVE_RESPONSE",3],"inform.preloadDone":["PROGRESS_PRELOAD_ITEM",3],"inform.flavorFetched":["PROGRESS_GET_FLAVOR",3],"inform.loadToolLibsReady":["PROGRESS_LOAD_TOOL_LIBS",1],"ItemController.ItemLoaded":["PROGRESS_ITEM_LOADED",16],"tn.endsection.loaded":["PROGRESS_ENDSECTION_LOADED",16],"tn.endsection.exit":["PROGRESS_ENDSECTION_EXIT",16],"tn.endtest.loaded":["PROGRESS_ENDTEST_LOADED",16],"inform.networkcheckprogress":["PROGRESS_NETWORK_CHECK",.1],"navigated.remoteProctoringSysChk":["PROGRESS_REMOTEPROCTORING_SYSTEMCHECK",26]}},_createProgressBar:function(e){var t=this._getReceivedEvent(e),n=this._progressBars[t];this._tracker.initTracker(n[0]),this._view.initProgressBar(n[1])},_updateProgressBar:function(e){var t=this._getReceivedEvent(e),n=this._progressUpdates[t],r=this._determineDestroyImmediately(n);this._tracker.updateTracker(n[0]),this._view.updateProgress(n[1],r)},_getReceivedEvent:function(e){return e.type+"."+e.namespace},_determineDestroyImmediately:function(e){return"PROGRESS_ENDSECTION_EXIT"===e[0]}};l.addListeners();const u=l},1086:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(3270);const o=new function(){let e=null;return{rtpaasScriptUrl:"",init:function(t){e=this,this._registerEvents(),this._callback=t,this._startRemoteTestProctoring()},_registerEvents:function(){TN8.fnOn("perform.logoutCleanup",this._destroy),r(window).on("rtpError",this._handleRtpErrors),r(window).on("noProctorAvailable",this._handleNoProctorAvailable)},_unregisterEvents:function(){r(document).off("perform.logoutCleanup",this._destroy),r(window).off("rtpError",this._handleRtpErrors),r(window).off("noProctorAvailable",this._handleNoProctorAvailable)},_startRemoteTestProctoring:async function(){if(!0===TN8.PnpController.isRemoteTestProctoringEnabled()){TN8.Application.config&&void 0!==TN8.Application.config.remoteTestProctorUrl&&(this.rtpaasScriptUrl=TN8.Application.config.remoteTestProctorUrl);var e=document.createElement("script");e.type="text/javascript",e.src=this.rtpaasScriptUrl,e.onerror=this._handleRtpScriptLoadFail.bind(this),document.getElementsByTagName("head")[0].appendChild(e);const n={authCallback:this._requestAblyToken};var t=this;e.addEventListener("load",(function(){const e=TestEngine.getAuthentication().getExternalLoginKey();void 0!==typeof RTPaaS?(t._rtpaasWidget=new RTPaaS.RTPaaSTester(e,n,"02c64c56c8804a62a6456e534dd3dc1d",null,{}),t._initSystemCheck(),r(document).trigger("navigated.remoteProctoringSysChk")):_handleRtpScriptLoadFail()}))}},_initSystemCheck:function(){this._rtpaasWidget.initSystemCheck({systemCheckViewElement:"content"}).then((t=>{window.TN8.MicDeviceId=t.micId,e._callback()}),(e=>{TN8.log("RTPaaS system check failed with code:  "+e.failureCode+" : "+e.failureMsg),TN8.throw("",TN8.errorType.REMOTE_PROCTORING_SYSTEM_CHECK,null,null,{failureCode:e.failureCode,failureMsg:e.failureMsg,timeCounter:7,typeOfExit:"RTPForcedExit"})}))},_requestAblyToken:async function(e,t){try{t(null,await TestEngine.getRemoteTestProctoringAblyToken())}catch(e){t(e,null)}},_handleRtpErrors:function(t){TN8.log("RTPaaS system check failed with code: "+t.detail.code+" : "+t.detail.message),e._forceExit(TN8.errorType.REMOTE_PROCTORING_HELP_TOOL,t.detail.code,t.detail.message)},_handleRtpScriptLoadFail:function(){document.getElementById("rtpaasBundleScript")&&document.getElementById("rtpaasBundleScript").remove();const t="RTPaaS script failed to load at URL: "+this.rtpaasScriptUrl;TN8.log(t),e._forceExit(TN8.errorType.REMOTE_PROCTORING_HELP_TOOL,TN8.errorType.REMOTE_PROCTORING_HELP_TOOL,t)},_handleNoProctorAvailable:function(){const t="RTPaaS no proctor available. Forced exit with code: "+TN8.errorType.REMOTE_PROCTORING_NO_PROCTOR;TN8.log(t),e._forceExit(TN8.errorType.REMOTE_PROCTORING_NO_PROCTOR,TN8.errorType.REMOTE_PROCTORING_NO_PROCTOR,t)},_forceExit:function(e,t,n){var o={failureCode:t,failureMsg:n,timeCounter:7,typeOfExit:"RTPForcedExit"};0===r("#force-logout-modal:visible").length&&TN8.throw("",e,null,null,o)},_destroy:function(t,n){"testnavLoginBtn"!==n&&(e._unregisterEvents(),e._rtpaasWidget&&e._rtpaasWidget.cleanupController())}}}},4691:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(920),o=n(1573),i=n(4523),s=n(3270);const a=function(){return{init:function(){return i.bindAll(this,"_registerEvents","_destroy","_initDropdown","_createDropdown","_toggleDropdown"),this._registerEvents(),this},_registerEvents:function(){TN8.fnOn("tn.header.render.complete",this._initDropdown),TN8.fnOn("cleanup.betweenTest",this._destroy),TN8.fnOn("tn.ews.on",this._closeDropdown),TN8.fnOn("inform.timeoutModalOn",this._closeDropdown),s(document).on("tn.reviewdropdown.close",s.proxy(this._handleReviewClose,this))},_getJsonReady:function(){return TN8.Application.DataProvider.getOverviewRows()},_initDropdown:function(){var e=this,t=s(".btn-tn8-review");t.keydown((function(t){if(40===t.which&&!s(this).hasClass("disabled"))return e._createDropdown(),s("#btnOverview").reviewDropdown("show"),s(this).addClass("active"),t.preventDefault(),!1;9===t.which&&e._closeDropdown()})),t.off("click touchstart touchend"),t.on("click touchstart",this._toggleDropdown),t.on("touchend",this._cancelClick)},_handleReviewClose:function(){s(".btn-tn8-review").removeClass("active"),s("#btnOverview").attr("aria-expanded",!1),o.A.block("home"),o.A.block("end")},_toggleDropdown:function(e){s(".btn-tn8-review").hasClass("disabled")||(s(".btn-tn8-review").hasClass("active")?this._closeDropdown():(s(".btn-tn8-review").addClass("active"),this._createDropdown(),s("#btnOverview").attr("aria-expanded",!0),s("#btnOverview").reviewDropdown("show"),s(document).trigger("do.WindowRepaint"),s(document).trigger("tn.reviewdropdown.open"))),this._isIOS12()&&e.preventDefault()},_isIOS12:function(){var e=s.isIdevice()?navigator.userAgent.toLowerCase().match(/(\d+)_(\d+)_?(\d+)?/).slice(1):"";return""!==e&&12===parseInt(e[0])},_cancelClick:function(e){e.preventDefault()},_createDropdown:function(){void 0!==s("#btnOverview").data("pearson-reviewDropdown")&&s("#btnOverview").reviewDropdown("destroy"),s("#btnOverview").reviewDropdown({dataSource:this._getJsonReady()}),r.A.isMobile&&s(".review-dropdown:not(.review-dropdown-popup)").css("position","absolute"),o.A.unblock("home"),o.A.unblock("end"),s(".review-dropdown").off("deepZoomLayer.hide",this._closeDropdown).on("deepZoomLayer.hide",this._closeDropdown)},_unregisterEvents:function(){s(".review-dropdown").off("deepZoomLayer.hide",this._closeDropdown),s(document).off("tn.header.render.complete",this._initDropdown),s(document).off("cleanup.betweenTest",this._destroy),s(document).off("tn.ews.on",this._closeDropdown),s(document).off("inform.timeoutModalOn",this._closeDropdown)},_closeDropdown:function(){void 0!==s("#btnOverview").data("pearson-reviewDropdown")&&s("#btnOverview").reviewDropdown("close")},_destroy:function(){s(document).off("tn.reviewdropdown.close",s.proxy(this._handleReviewClose,this)),void 0!==s("#btnOverview").data("pearson-reviewDropdown")&&(s("#btnOverview").reviewDropdown("destroy"),this._unregisterEvents())}}}},6903:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(5977),o=n(6963);r.A.on("test.state.ready",(function(){i={};var e=TestEngine.getAuthentication().getFormId(),t=o.default.getSealCodes(e);if((t=t&&t.slice())&&!(t.length<1))for(var n=TestEngine.getTestDefine().getTestParts(),r=0;r<n.length;r++)for(var s=n[r].getAssessmentSections(),a=0;a<s.length;a++)s[a].getSealCode()&&t.length>0&&(i[s[a].getIdentifier()]=t.shift())}));var i={};const s={getSealCode:function(e){return i[e]||""}}},8525:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(3270);const o=new function(){return{_testStateRestored:!1,init:function(){this._testStateRestored=!1,TN8.Dispatcher.off("saveTestState"),TN8.Dispatcher.on("saveTestState",this.saveTest,this),TN8.Dispatcher.off("test.state.ready",this.testStateRestored,this).on("test.state.ready",this.testStateRestored,this)},testStateRestored:function(){this._testStateRestored=!0},saveTest:function(e){var t=!1;if(this._testStateRestored){TN8.log("TestStateSaver.saveTest . Sending TestState to engine to be saved.",TN8.CRITICAL);var n=TN8.TestStateController.assembleTestState();e&&"isLastCall"in e&&!0===e.isLastCall&&(t=!0),TestEngine.getStateComponent().setTestState(TestEngine.selectedTestId,n,this.handler_saveTestStateCallback.bind(this,e),t,e)}},closeAllGrowls:function(){r(".jGrowl-notification").trigger("jGrowl.beforeClose")},handler_saveTestStateCallback:function(e,t){TN8.Application.error.successCheck(t)&&(TN8.log("TestStateSaver.handler_saveTestStateCallback .  ",TN8.CRITICAL),TN8.Dispatcher.trigger("performNavigation"),r(document).trigger("tn.save.success"))},handler_testSaveFailure:function(e){r(document).trigger("tn.loadingModal.off"),TN8.throw("Connection Lost",TN8.errorType.LOST_CONNECTION_IN_TEST)},navigateLogout:function(e){TN8.Dispatcher.trigger("ClearSlate"),TN8.Dispatcher.trigger("CleanUpItemController"),r(document).trigger("tn.route.to","logout")}}}},6936:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(920);const o={VARIABLE_TYPE_TOOLS:"tools",checkDataAuthoring:function(e,t){e>1&&TN8.log("VariableFactory...checkDataAuthoring: "+t,TN8.CRITICAL)},globalVars:{odVars:[],opBehaviors:[],getSetBehavior:function(e,t,n){for(var o=[],i=0;i<this.opBehaviors.length;i++)"setoutcomeval"===this.opBehaviors[i].behavior&&o.push(this.opBehaviors[i]);var s,a=e.getIdentifier(),c=t.getItemSet(),l=!1;for(i=0;i<o.length;i++)if((""===(s=o[i]).sectionIdentifier||s.sectionIdentifier===a)&&!(""!==s.includeCat&&s.includeCat!==c||""!==s.excludeCat&&s.excludeCat===c))for(var u=0;u<n.length;u++)this.opBehaviors[i].variableIdentifier==r.A.trimID(n[u].did)&&(l||(l=[]),l.push(s));return l},setGlobalVars:function(e,t,n){for(var o=this.getSetBehavior(e,t,n),i=0;i<o.length;i++){var s=o[i];if(n.type&&n.type===TN8.VariableFactory.VARIABLE_TYPE_TOOLS)this.setTool(s.identifier,n.state);else for(var a=0;a<n.length;a++)if(r.A.trimID(n[a].did)===s.variableIdentifier){this.setVar(s.identifier,n[a].r);break}}},setVar:function(e,t){for(var n=0;n<this.odVars.length;n++)if(this.odVars[n].identifier===e){this.odVars[n].value=t;break}},getVar:function(e){for(var t=[],n=0;n<this.odVars.length;n++)this.odVars[n].identifier===e&&t.push(this.odVars[n]);return TN8.VariableFactory.checkDataAuthoring(t.length,"A tpl behavior's gid mapped to more than one."),t[0].value},setTool:function(e,t){for(var n=0;n<this.odVars.length;n++)this.odVars[n].identifier===e&&(this.odVars[n].tool=t)}},templateVars:{tdVars:[],tplBehaviors:[],loadVar:function(e){this.tdVars.push(e)},loadBehavior:function(e){this.tplBehaviors.push(e)},applyGetDataBehaviors:function(){for(var e=0;e<this.tplBehaviors.length;e++)"behavior-getglobal"==this.tplBehaviors[e].behavior&&this.setVar(this.tplBehaviors[e].tplIdent,TN8.VariableFactory.globalVars.getVar(this.tplBehaviors[e].gblIdent))},setVar:function(e,t){for(var n=0;n<this.tdVars.length;n++)if(this.tdVars[n].identifier===e){this.tdVars[n].value=t;break}},checkGetGlobalState:function(e){var t=this.getBehaviorByIdentifier("behavior-setdata",r.A.trimID(e));return t.length>0?this.getVar(t[0].tplIdent):[]},getBehaviorByIdentifier:function(e,t){for(var n=[],r=null,o=0;o<this.tplBehaviors.length;o++)(r=this.tplBehaviors[o]).behavior===e&&r.respIdent===t&&n.push(r);return TN8.VariableFactory.checkDataAuthoring(n.length,"An interaction's id mapped to more than one template behavior"),n},getVar:function(e){for(var t=[],n=0;n<this.tdVars.length;n++)this.tdVars[n].identifier===e&&t.push(this.tdVars[n]);return TN8.VariableFactory.checkDataAuthoring(t.length,"An interaction's id mapped to more than one globalVar."),t},reset:function(){for(;this.tdVars.length>0;)this.tdVars.pop();for(;this.tplBehaviors.length>0;)this.tplBehaviors.pop()}}}},692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xn});var r=n(1508),o=n(3270);const i={interactions:new Array,htmlNodes:new Array,configurations:new Array,configs:new Array,properties:new Array,register:function(e){this.interactions.push(e)},setConfiguration:function(e,t){this.configurations[e]?o.extend(this.configurations[e],t):this.configurations[e]=t},getConfiguration:function(e){return this.configurations[e]},getConfigurationByIdentifier:function(e){for(var t=null,n=0;n<this.interactions.length;n++)if((t=this.interactions[n]).identifier==e)return t;return null},setPCIConfiguration:function(e,t){this.configs[e]=t},getPCIConfiguration:function(e){return this.configs[e]?this.configs[e]:{markup:"",bridge:""}},setPCIProperties:function(e,t){this.properties[e]?o.extend(this.properties[e],t):this.properties[e]=t},getPCIProperties:function(e){return this.properties[e]?this.properties[e]:{}},initialize:function(e){for(var t=new Object,n=0;n<this.interactions.length;n++){var r=this.interactions[n];if(!t[r.getTypeIdentifier()]){var i,s=(i=document.getElementsByClassName?document.getElementsByClassName(r.getTypeIdentifier()):o("."+r.getTypeIdentifier()))[0].id;this.htmlNodes[s]=i[0],t[r.getTypeIdentifier()]=1,void 0===(l=o(this.htmlNodes[s]).data("identifier"))&&(l=r.identifier);var a=this.getPCIProperties(l);null!==e&&QTI_PCI_Platform.LoadAsyncPCIState(l,this.htmlNodes[s],e),!0===o("#"+s).data("pciIframed")&&(r.isPCIiFrame=!0),this.interactions[s]=r,o(document).off("tn.nav.start",o.proxy(this.interactionEndSession,this)).on("tn.nav.start",o.proxy(this.interactionEndSession,this)),o(document).off("do.lockItem",o.proxy(this.disableInteraction,this)).on("do.lockItem",o.proxy(this.disableInteraction,this)),r.initialize(s,i[0],a);for(var c=1;c<i.length;c++){var l,u=o.extend({},r,{id:i[c].id}),d=i[c].id;this.htmlNodes[d]=i[c],u.identifier=o(this.htmlNodes[d]).data("identifier"),void 0===(l=o(this.htmlNodes[d]).data("identifier"))&&(l=r.identifier),u.identifier=l,a=this.getPCIProperties(l),null!==e&&QTI_PCI_Platform.LoadAsyncPCIState(l,this.htmlNodes[d],e),!0===o("#"+d).data("pciIframed")&&(u.isPCIiFrame=!0,this.interactions[c].isPCIiFrame=!0),this.interactions[d]=u,u.initialize(d,i[c],a)}}}},interactionEndSession:function(){if(this.interactions.length>0)for(var e=0;e<this.interactions.length;e++){var t=this.interactions[e];t.hasOwnProperty("interactionEndSession")&&"function"==typeof t.interactionEndSession?t.interactionEndSession():t.isPCIiFrame&&QTI_PCI_Platform.Interaction_EndTelemetrySession_Request(t.identifier)}},disableInteraction:function(){if(this.interactions.length>0)for(var e=0;e<this.interactions.length;e++){var t=this.interactions[e];t.isPCIiFrame&&QTI_PCI_Platform.Interaction_Disable_Request(t.identifier,t.id)}},reset:function(){if(o(document).off("tn.nav.start",o.proxy(this.interactionEndSession,this)),o(document).off("do.lockItem",o.proxy(this.disableInteraction,this)),this.interactions.length>0){for(var e=0;e<this.interactions.length;e++){var t=this.interactions[e];t.hasOwnProperty("interactionFinished")&&"function"==typeof t.interactionFinished&&t.interactionFinished(),this.interactions[t.id]&&(this.interactions[t.id]=null),this.htmlNodes[t.id]&&(this.htmlNodes[t.id]=null),this.configurations[t.id]&&(this.configurations[t.id]=null),this.properties[t.identifier]&&(this.properties[t.identifier]=null)}this.interactions.splice(0,this.interactions.length),QTI_PCI_Platform.Reset()}this.htmlNodes.length>0&&this.htmlNodes.splice(0,this.htmlNodes.length),this.configurations.length>0&&this.configurations.splice(0,this.configurations.length),this.properties.length>0&&this.properties.splice(0,this.properties.length)},notifyReady:function(e){var t=this.interactions[e],n=t.identifier+"_pciLoaded",r={pciIdentifier:t.getTypeIdentifier()};TN8.log("interactiveObjectRegister.notifyReady id:"+e,TN8.IMPORTANT),o(document).trigger(n,r)},notifyDone:function(e){},notifyUpdate:function(e){}},s={getSupportedMediaFormats:function(e){var t,n=navigator.userAgent,r=[];switch(e){case"audio":r=/TestNavDesktopApp/.test(n)||(t=!1,-1===n.indexOf("MSIE")&&-1===n.indexOf("IE 11")&&-1===n.indexOf("Trident")||(t=!0),t)?[".mp3",".m4a",".ogg"]:[".m4a",".mp3",".ogg"];break;case"video":navigator.oscpu,r=function(){if(window.TestEngine.isJXBrowserApp())return!0;if(-1!=n.indexOf("Firefox")){var e=navigator.oscpu;if(-1!=e.indexOf("Windows")&&(-1!=e.indexOf(";")?parseFloat(e.substring(11,e.indexOf(";",11))):parseFloat(e.substring(11)))<6)return!0}return!1}()?[".webm",".mp4",".m4v",".f4v",".mov",".flv"]:[".mp4",".m4v",".f4v",".mov",".webm",".flv"]}return r}};var a=n(9127),c=n(6493),l=n(6936),u=n(7477),d=n(7704),f=n(925),p=n(7186),h=n(3270),m=n(4523);const g=p.View.extend({initialize:function(){this.el=document.getElementById("content"),this.$el=h(this.el),this.template=m.template(h(f.A).filter("#logouttemplate").html())},render:async function(e){if(h(document).trigger("perform.addFTListener"),e){const i=h("#menuDrop");if(h(document).trigger("tn.loadingModal.on"),i.attr("disabled","disabled"),this.$el.hide(),h(document).trigger("tn.navigate.returnURL.redirect"),window.TestEngine.isWebView()&&window.TestEngine.isIdevice())window._testNavBridge.setStartURL(e),window.location.href=e;else if(TestEngine.isJXBrowserApp()||TestEngine.isChromeApp()&&TestEngine._native._appWindow){let t=new URL(e);TestEngine._native.chooseNewCustomer(t)}else if(!await this.tryUrl(e)){var t=window.location.protocol+"//"+window.location.host+"/client/tpl/pwaErrorPage.html",n=await fetch(t),r=await n.text(),o=(new DOMParser).parseFromString(r,"text/html");o.querySelector("link[href='errorPage.css']").href="./tpl/errorPage.css",o.querySelector("script[src='errorPage.js']").src="./tpl/errorPage.js",o.getElementById("retry_button").setAttribute("onClick",'javascript:returnUrlRetryButtonClick(this, "'+e+'");'),o.getElementById("home_button").setAttribute("onClick","returnUrlHomeButtonClick(this);"),document.open("text/html","replace"),document.write((new XMLSerializer).serializeToString(o)),document.close()}}else this.$el.html(this.template()),this.$("#login-link").off("click",this.signinHandler).on("click",this.signinHandler);return h(document).trigger("tn.loadingModal.off"),this},tryUrl:async function(e){var t;try{t=void 0!==await fetch(e,{mode:"no-cors",cache:"reload"})}catch(e){t=!1}if(t){var n=new URL(e);return!window.TestEngine.isWebView()&&window.TestEngine.isIdevice()&&n.searchParams.append("nocache",(new Date).getTime()),window.location.href=n.href,!0}return!1},signinHandler:function(){h(document).trigger("perform.removeFTListener"),TestEngine._isAppMode()?(window.location.search&&window.history.pushState({},"",window.location.pathname),h(document).trigger("tn.route.to","login"),h(".jGrowl-close")&&h(".jGrowl-close").click()):window.location.href=window.location.protocol+"//"+window.location.host+"/client/index.html"},getSaveToLocation:function(){return""}});var _=n(920),v=n(7186),b=n(4523),y=n(3270);const w=v.View.extend({initialize:function(){b.bindAll(this,"setIframeSize","loginWithCreds","practiceErrorGrowl","addListeners","cleanUp"),this.template=b.template(y(f.A).filter("#practicetemplate").html()),this.el=this.template()},render:function(){var e=this;y("#content").html(this.el),TN8.Application.config;var t=y("#practice-test-iframe");return this._frameSrc=TN8.Application.config.practiceURL,t[0].onload=function(){e.addListeners()},(TestEngine.isIdevice()||y("body").hasClass("safari"))&&this.checkInternetConnection(),t[0].src=this._frameSrc,this.setIframeSize(),this.removeAndroidHack(),y(document).trigger("perform.addFTListener"),y(document).trigger("navigated.practiceTest"),this},checkInternetConnection:function(){y.ajax({url:document.location.origin,error:this.addListeners})},setIframeSize:function(e){var t=y("#practice-test-iframe");t.css("height",_.A.getViewPortSize().height-t.offset().top-25)},loginWithCreds:function(e){e.originalEvent&&e.originalEvent.data&&e.originalEvent.data.user&&e.originalEvent.data.pass&&(y(document).trigger("tn.loadingModal.on"),y(document).trigger("tn.login.with.creds",e.originalEvent.data))},goToLogin:function(){y(document).trigger("tn.route.to","login")},practiceErrorGrowl:function(){TN8.throw("",TN8.errorType.PRACTICE_LOGIN_ERROR)},removeAndroidHack:function(){TestEngine.isAndroidOS()&&y("#androidKeyboardHack").remove()},addListeners:function(){y("#sign-in-btn").off("click",this.goToLogin).on("click",this.goToLogin),y(window).off("message",this.loginWithCreds).on("message",this.loginWithCreds),y(document).off("tn.login.error",this.practiceErrorGrowl).on("tn.login.error",this.practiceErrorGrowl),y(document).off("tn.navigate.login inform.startTestRendering",this.cleanUp).on("tn.navigate.login inform.startTestRendering",this.cleanUp),y(window).off("resize",this.setIframeSize).on("resize",this.setIframeSize),y(document).trigger("tn.loadingModal.off"),this.sendIframeMessage()},cleanUp:function(){y("#sign-in-btn").off("click",this.goToLogin),y(window).off("message",this.loginWithCreds),y(document).off("tn.login.error",this.practiceErrorGrowl),y(document).off("tn.navigate.login inform.startTestRendering",this.cleanUp),y(window).off("resize",this.setIframeSize)},sendIframeMessage:function(){var e,t=this;e="/client/pracTest.html"===this._frameSrc?window.location.protocol+"//"+window.location.hostname+this._frameSrc:window.location.protocol+this._frameSrc,setTimeout((function(){var n;(TestEngine.isChromeApp()||TestEngine.isAndroidApp())&&(n=t.buildKeyEvents()),y("#practice-test-iframe")[0].contentWindow.postMessage({command:"parentInfo",url:window.location.origin,isBrowser:!TestEngine._isAppMode(),keyEvents:n},e)}),0)},getAllCombindationsForKey:function(e){var t=new Array;return t.push({ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:e,which:e}),t.push({ctrlKey:!0,shiftKey:!1,altKey:!1,keyCode:e,which:e}),t.push({ctrlKey:!1,shiftKey:!0,altKey:!1,keyCode:e,which:e}),t.push({ctrlKey:!1,shiftKey:!1,altKey:!0,keyCode:e,which:e}),t.push({ctrlKey:!0,shiftKey:!0,altKey:!1,keyCode:e,which:e}),t.push({ctrlKey:!1,shiftKey:!0,altKey:!0,keyCode:e,which:e}),t.push({ctrlKey:!0,shiftKey:!1,altKey:!0,keyCode:e,which:e}),t.push({ctrlKey:!0,shiftKey:!0,altKey:!0,keyCode:e,which:e}),t},buildKeyEvents:function(){var e={blockKeys:{}};return e.blockKeys.keydown=[],e.blockKeys.keydown=this.getAllCombindationsForKey(166),e}});var S=n(4523),E=n(3270);const T={init:function(){S.bindAll(this,"generateMarkup","generateSuccessMarkup","generateFailureMarkup","generateBulletsFromDetails")},generateMarkup:function(e){var t=e.test;return this.keyTypeIsSupported(t)?e.status?this.generateSuccessMarkup(e):this.generateFailureMarkup(e):""},keyTypeIsSupported:function(e){return-1!=e.search(/(kioskMode|connectivity|proctorCache|blocklist|blocklistSiri|blocklistGameBar|blocklistDictation|blocklistAirplay|BlocklistDitto|BlocklistClipMate|BlocklistCopyQ|SRFTest|CloudClipboardHistory|CloudClipboardRoaming)/i)},generateSuccessMarkup:function(e){var t=e.test;return'<div class="alert alert-success result-appcheck"><i class="icon-ok appCheckIcon"></i><b> '+((/SRFTest/i.test(t)?this.i18nstr(e.type):"")+this.i18nstr(t+"Success"))+"</b></div>"},generateFailureMarkup:function(e){var t=e.test,n=[];return n.push('<div class="alert alert-danger result-appcheck">'),n.push('<i class="icon-exclamation-sign appCheckIcon"></i>'),n.push("<b> "),/SRFTest/i.test(t)?n.push(this.i18nstr(t+"FailureTitle").replace(/srfreportname/i,this.i18nstr(e.type))):n.push(this.i18nstr(t+"FailureTitle")),n.push("</b>"),n.push(this.getFailureMessage(e,t)),n.push("</br>"),/SRFTest/i.test(t)||/BlocklistSiri/i.test(t)||/BlocklistGameBar/i.test(t)||/BlocklistDictation/i.test(t)||/BlocklistDitto/i.test(t)||/BlocklistClipMate/i.test(t)||/BlocklistCopyQ/i.test(t)||/BlocklistAirplay/i.test(t)||/CloudClipboardHistory/i.test(t)||/CloudClipboardRoaming/i.test(t)||/BlocklistAppleVncAgent/i.test(t)||/BlocklistScreenSharingAgent/i.test(t)||/BlocklistFaceTime/i.test(t)||/BlocklistSideCar/i.test(t)||/BlocklistPipAgent/i.test(t)||/BlocklistScreenCapture/i.test(t)||/BlocklistGrammarly/i.test(t)||/BlocklistTextSuggestions/i.test(t)||(n.push('<ul class="appCheckResultBullet">'),/blocklist/i.test(t)&&n.push(this.generateBulletsFromDetails(e)),/ConnectivityToTestNav/i.test(t)?n.push(this.generateBulletsFromDetails(e)):n.push("<li>"+this.i18nstr(t+"FailureBullet")+"</li>"),n.push("</ul>")),n.push("</div>"),n.join("")},getFailureMessage:function(e,t){var n=this.getFailureUrlList(e);return this.i18nstr(t+"FailureMessage",n.length)},getFailureUrlList:function(e){return e.details.split(",")},generateBulletsFromDetails:function(e){return this.getFailureUrlList(e).map((function(e){return"<li>"+this.replaceBulletExceptionText(e)+"<br>("+e+") </li>"}),this).join("")},replaceBulletExceptionText:function(e){return e.match(/version\.txt/i)?this.i18nstr("VersionFile"):e.match(/S3CheckFile\.txt/i)?this.i18nstr("S3CheckFile"):this.getFileNameFromUrl(e)},getFileNameFromUrl:function(e){return e.includes("app-check/")&&(e=e.substring(e.indexOf("app-check/")+10,e.length)),e},i18nstr:function(e,t){return E.i18n.t("appCheck:"+e,{count:t})}};var A=n(7186),x=n(4523),L=n(3270);const P=A.View.extend({el:"#appCheckResultsContainer",initialize:function(e){x.bindAll(this,"render","cleanUp","createResultsMarkup"),e&&e.length&&this.render(e)},render:function(e){var t=this.generateTitle(e);return this.$el.addClass("well appCheckResultsContainerVisible").append('<div id="appCheckResultsTitle" tabindex="-1">'+L.i18n.t("appCheck:appCheck"+t)+"</div>").append(L('<div id="appCheckResults"></div>').html(this.createResultsMarkup(e))),this},generateTitle:function(e){return e.every((function(e){return e.status}))?"ReportSuccessTitle":"ReportFailureTitle"},createResultsMarkup:function(e){return T.init(),e.map(T.generateMarkup).join("")},cleanUp:function(){this.$el.empty().removeClass("well appCheckResultsContainerVisible")}});var k=n(1568),C=n.n(k),R=n(1083),G=n.n(R),F=n(3270),I=n(6763);function D(){}D.prototype._factor=10,D.prototype.$downloadresults=null,D.prototype.$testresults=null,D.prototype.$testresultscontainer=null,D.prototype.$testcapacity=null,D.prototype.$summarystatus=null,D.prototype.$testsummary=null,D.prototype.$testingmessage=null,D.prototype.$summarynote=null,D.prototype.$runbutton=null,D.prototype.$totalcomputers=null,D.prototype.lastBytesLoaded=null,D.prototype.resourceDownloadStatus=null,D.prototype.urlArr=null,D.prototype.resultantSpeed=null,D.prototype.resourceProgress=0,D.prototype.lastSpeedTestIndex=0,D.prototype.successruns=0,D.prototype.responseStatus,D.prototype.responseBadge=["fa-check","fa-check","fa-close"],D.prototype.responseStyles=["text-success","text-warning","text-danger","text-danger"],D.prototype.responseMessages,D.prototype.responseRecommendations,D.prototype.networkCheckLimit=150,D.prototype.networkCheckReset=function(){this.$totalcomputers.value=100,this.$testcapacity.style.display="none",this.$testresults.style.display="none",this.$downloadresults.textContent=""},D.prototype.networkCheckInit=function(){F.i18n&&(this.responseStatus=[F.i18n.t("appCheck:NetworkCheck_TestResultTitle_Pass"),F.i18n.t("appCheck:NetworkCheck_TestResultTitle_Warning"),F.i18n.t("appCheck:NetworkCheck_TestResultTitle_Warning"),F.i18n.t("appCheck:NetworkCheck_TestResultTitle_Error")],this.responseMessages=[F.i18n.t("appCheck:NetworkCheck_Test_Success_Msg"),F.i18n.t("appCheck:NetworkCheck_Test_Near_Capacity_Msg"),F.i18n.t("appCheck:NetworkCheck_Test_Fail_Msg"),F.i18n.t("appCheck:NetworkCheck_Error")],this.responseRecommendations=[F.i18n.t("appCheck:Proctor_Cache_Not_Recommended"),F.i18n.t("appCheck:Proctor_Cache_Recommended"),F.i18n.t("appCheck:Proctor_Cache_Recommended"),F.i18n.t("appCheck:Proctor_Cache_Recommended")]),F(document).off("NETWORK_CHECK_INIT",F.proxy(N.networkCheckInit,this)).on("NETWORK_CHECK_INIT",F.proxy(N.networkCheckInit,this)),F(document).off("NETWORK_CHECK_RESET",F.proxy(N.networkCheckReset,this)).on("NETWORK_CHECK_RESET",F.proxy(N.networkCheckReset,this)),this.$downloadresults=document.getElementById("downloadResults"),this.$testresults=document.getElementById("test-results"),this.$testresultscontainer=document.getElementById("networkCheckTestResultsCont"),this.$testcapacity=document.querySelector(".test-capacity"),this.$summarystatus=document.getElementById("summary-status"),this.$testsummary=document.getElementById("test-summary"),this.$testingmessage=document.getElementById("testing-message"),this.$summarynote=document.getElementById("summary-note"),this.$testing=document.getElementById("testing"),this.$runbutton=document.getElementById("runButton"),this.$totalcomputers=document.getElementById("totalComputers"),this.$testtakers=document.getElementById("test-takers"),this.$texttesttakers=document.getElementById("text-test-takers"),this.$totalcomputers&&(this.$totalcomputers.value=100),this.$runbutton&&(this.$totalcomputers.onkeydown=function(e){switch(e.keyCode){case 69:case 189:case 190:return!1;default:return!0}},F(this.$runbutton).off("click",F.proxy(this.onRunBtnClicked,this)).on("click",F.proxy(this.onRunBtnClicked,this)))},D.prototype.onRunBtnClicked=function(e){var t=this;e.preventDefault(),e.stopPropagation(),t.$testcapacity.style.display="none",t.$testresults.style.display="none",t.$downloadresults.textContent="";var n=document.createElement("i"),r=n.className.split(" ");-1==r.indexOf("fa")&&(n.className+=" fa"),-1==r.indexOf("fa-spinner")&&(n.className+=" fa-spinner"),-1==r.indexOf("fa-spin")&&(n.className+=" fa-spin"),t.$downloadresults.appendChild(n),I.log("starting performance tests"),t.ShowProgressMessage("Loading content, please wait...");var o=document.createElement("div");return o.textContent="Testing speed from your device to our network…",t.$testingmessage.appendChild(o),t.beginNetworkCheck(),!1},D.prototype.beginNetworkCheck=function(){this.resultantSpeed=Array(),this.urlArr=[{url:"public/files/networkcheck/file20mb.txt",timeout:1e4},{url:"public/files/networkcheck/file20mb.txt",timeout:1e4},{url:"public/files/networkcheck/file20mb.txt",timeout:1e4},{url:"public/files/networkcheck/file20mb.txt",timeout:1e4},{url:"public/files/networkcheck/file20mb.txt",timeout:1e4}],this.successruns=30/this.urlArr.length,F(document).trigger("NETWORK_CHECK_START"),this.checkNetworkConnection()},D.prototype.addTime=function(e){return-1!==e.indexOf("?")?e+"&tnt="+this.timer():e+"?tnt="+this.timer()},D.prototype.timer=function(){return(new Date).getTime()},D.prototype.evaluateProgress=function(e,t){var n=parseInt(e/t*10),r=n-this.resourceProgress;this.resourceProgress=n,this.triggerProgressBarEvents(r)},D.prototype.triggerProgressBarEvents=function(e){for(var t=0;t<e;t++)F(document).trigger("NETWORK_CHECK_PROGRESS")},D.prototype.onError=function(){var e={bandwidth:{}};e.bandwidth.mbps=0,e.bandwidth.kbps=0,e.bandwidth.bps=0,this.resourceProgress=0,this.completeProgressBar(),this.dislayPerfTestResults(e)},D.prototype.completeProgressBar=function(){this.triggerProgressBarEvents(30)},D.prototype.buildResult=function(){I.log(JSON.stringify(this.resultantSpeed));var e={bandwidth:{}};e.bandwidth.mbps=this.resultantSpeed.mbps,e.bandwidth.kbps=this.resultantSpeed.kbps,e.bandwidth.bps=this.resultantSpeed.bps,this.dislayPerfTestResults(e)},D.prototype.checkNetworkConnection=function(){var e=this.urlArr.pop(),t=this.addTime(e.url);this.getNetworkDownloadSpeed({url:t}).then((e=>{this.resultantSpeed=e,this.completeTests=!0,this.buildResult()})).catch((()=>this.onError()))},D.prototype._protocol=function(e){return"http:"===e.trim().split("/")[0]?C():G()},D.prototype.checkDownloadSpeed=function(e,t){let n,r=this._protocol(e);return new Promise(((o,i)=>{const s=r.get(e,(e=>{e.once("data",(()=>{n=(new Date).getTime()})),e.once("end",(()=>{const e=(new Date).getTime(),r=(8*t/((e-n)/1e3)).toFixed(2),i=(r/1e3).toFixed(2),s=(i/1e3).toFixed(2);o({bps:r,kbps:i,mbps:s})}))}));return s.on("error",(e=>{i(e)})),s})).catch((e=>{throw e}))},D.prototype.getNetworkDownloadSpeed=function(e={}){const t=e.url?e.url:`public/files/networkcheck/file20mb.txt?tnt=${(new Date).getTime()}`,n=e.fileSize?e.fileSize:20971520;return this.checkDownloadSpeed(t,n).then((e=>e)).catch((e=>{I.error(e.message),this.onError()}))},D.prototype.max=function(e){return Number((this._factor*e).toFixed(0))},D.prototype.score=function(e){return 0===e?3:e>Number(this.$totalcomputers.value)?0:2},D.prototype.ShowProgressMessage=function(e){"d"!==e[3]&&(e[3],this.$downloadresults.textContent=e[3])},D.prototype.getResponseStatus=function(e){return this.responseStatus[e]},D.prototype.getResponseStyles=function(e){return this.responseStyles[e]},D.prototype.getResponseMessages=function(e){return this.responseMessages[e]},D.prototype.getResponseBadge=function(e){return this.responseBadge[e]},D.prototype.getResponseRecommendations=function(e){return'<div class="alert alert-primary" role="alert" style="margin-bottom:1px">'+this.responseRecommendations[e]+"</div>"},D.prototype.dislayPerfTestResults=function(e){var t=this.max(e.bandwidth.mbps),n=this.score(t);F("#speed-note").hide(),e.bandwidth.mbps>this.networkCheckLimit&&F("#speed-note").show(),this.ShowProgressMessage(["Your connection speed is:",e.bandwidth.bps+" bps",e.bandwidth.kbps+" kbps",e.bandwidth.mbps+" Mbps"]),this.dislayTestResults(n),this.completeProgressBar(),F(document).trigger("NETWORK_CHECK_COMPLETE")},D.prototype.dislayTestResults=function(e){var t=this.getResponseStatus(e),n=(this.getResponseStyles(e),this.getResponseMessages(e)),r=(this.getResponseBadge(e),this.getResponseRecommendations(e));this.$testresults.style.display="block",this.$testresultscontainer.style.display="block",this.$testingmessage.textContent="",this.$summarystatus.innerHTML=t,this.$testsummary.innerHTML=n,this.$summarynote.innerHTML=3!==e?r:""};var N=new D;N.networkCheckInit();const M=N;var O=n(7186),B=n(4523),H=n(3270);const U=O.View.extend({initialize:function(){B.bindAll(this,"runAppCheck","addListeners","cleanUp","createAppCheckResult","handleAppCheck","onNetworkCheck","onNetworkCheckComplete","onNetworkCheckStarted"),this.template=B.template(H(f.A).filter("#appchecktemplate").html()),this.el=this.template()},render:function(){return H("#content").html(this.el),H(document).trigger("NETWORK_CHECK_INIT"),this.addListeners(),H(document).trigger("perform.addFTListener"),H(document).trigger("appCheck.render"),H(document).trigger("tn.loadingModal.off"),this},goToLogin:function(){H(document).trigger("tn.route.to","login")},handleAppCheck:function(e){var t=e.success,n=e.msgCode,r=e.report,o=H("#configIdentifier").val();switch(t){case"yes":this.createAppCheckResult(r);break;case"no":var i=H.i18n.t("errorMessages:"+n);H("#configIdentifier").addClass("configError"),H(".configErrorMsg").html("<b>"+H.i18n.t("appCheck:errorText")+": </b>"+i),TN8.log("APPCHECK: "+e.msg,TN8.CRITICAL),H(".configErrorMsg").focus();break;default:TN8.log("APPCHECK: Incorrect response format from TestEngine.",TN8.IMPORTANT)}H(document).trigger("snitch.sendOut",{event:"AppCheckData",successState:t,errorCode:n,configId:o}),H(document).trigger("appCheck.off")},createAppCheckResult:function(e){this.resultsView&&this.resultsView.cleanUp(),this.resultsView=new P(e)},shouldRunAppCheck:function(e){"keydown"==e.type&&13===e.which&&H("#runAppCheck").click()},runAppCheck:function(){H("#networkCheckResultsContainer").hide(),this.resultsView&&this.resultsView.cleanUp(),this.cleanUpError(),H(document).trigger("appCheck.on");var e=H("#configIdentifier").val();const t=window.TestEngine,n=()=>{t.appCheck(this.handleAppCheck,e)};t.isJXBrowserApp()&&this.shouldEnableAssessmentMode()?t.getNativeComponent().enableAssessmentMode(n):n()},shouldEnableAssessmentMode:function(){let e=!1;try{if(TN8.utils.isMac()){const t=navigator.userAgent.toLowerCase();let n=null;-1!==t.indexOf("mac os x")&&(n=-1!==t.indexOf("firefox")?t.match(/mac os x (\w+.\w+)/)[1].split("."):t.match(/mac os x (\w+)/)[1].split("_")),TN8.Application.config.minVersion.forEach((function(t,r){if(t.am){const r=t.am.split(".");this.isMacVersionGreaterOrEqual(n,r)&&(e=!0)}}),this)}}catch(t){e=!1}return e},isMacVersionGreaterOrEqual:function(e,t){return parseInt(e[0])>parseInt(t[0])||parseInt(e[0])===parseInt(t[0])&&parseInt(e[1])>=parseInt(t[1])},addListeners:function(){H("#sign-in-btn").on("click",this.goToLogin),H("#runAppCheck").on("click",this.runAppCheck),H("#configIdentifier").on("keydown",this.shouldRunAppCheck),H("#networkCon").on("click",this.onNetworkCheck),H("#totalComputers").on("keyup",this.onTotalComputersTyped),H("#totalComputers").on("keydown",this.onTotalComputersFocus)},onTotalComputersFocus:function(e){e.target.oldvalue=e.target.value},onTotalComputersTyped:function(e){return isNaN(parseInt(H("#totalComputers").val()))||parseInt(H("#totalComputers").val())<1||parseInt(H("#totalComputers").val())>1e6?(e.target.value=e.target.oldvalue,!1):void 0},onNetworkCheck:function(){this.resultsView&&this.resultsView.cleanUp(),H(document).trigger("NETWORK_CHECK_RESET"),H("#networkConnModal").modal("show"),H(document).on("NETWORK_CHECK_COMPLETE",this.onNetworkCheckComplete),H(document).on("NETWORK_CHECK_START",this.onNetworkCheckStarted),H(document).on("NETWORK_CHECK_PROGRESS",this.onNetworkCheckProgress),TN8.utils.referenceProctorCache()||H("#summary-note").hide()},onNetworkCheckStarted:function(){H(document).trigger("inform.networkcheck")},onNetworkCheckProgress:function(){H(document).trigger("inform.networkcheckprogress")},onNetworkCheckComplete:function(){H(document).off("NETWORK_CHECK_COMPLETE",this.onNetworkCheckComplete),H(document).off("NETWORK_CHECK_START",this.onNetworkCheckStarted),H(document).off("NETWORK_CHECK_PROGRESS",this.onNetworkCheckProgress),H("#networkCheckResultsContainer").show()},cleanUpError:function(){H("#configIdentifier").removeClass("configError"),H(".configErrorMsg").html("")},cleanUp:function(){H("#sign-in-btn").off("click",this.goToLogin),H("#runAppCheck").off("click",this.runAppCheck),H("#configIdentifier").off("keydown",this.shouldRunAppCheck),H("#networkCon").off("click",this.onNetworkCheck),H("#totalComputers").off("keyup",this.onTotalComputersTyped),H("#totalComputers").off("keydown",this.onTotalComputersFocus),this.cleanUpError(),this.resultsView&&this.resultsView.cleanUp()}});var j=n(6763),V=n(3270);class W{constructor(){this.FIREFOX="Firefox",this.SAFARI="Safari",this.CHROME="Chrome",this.EDGE="Edge",this.IE="IE",this.MAC_OS="Mac OS",this.WINDOWS="Windows",this.CHROME_OS="Chrome OS",this.IOS="iOS",this.ANDROID="Android",this.FEDORA="Fedora",this.UBUNTU="Ubuntu",this.UNSUPPORTED="Unsupported Browser",this.networkRequirements={minimumBandwithMbps:.1},this.domainCheckUrlList=[`https://${window.location.host}/${window.TN8.getNoneCacheableFName()}`,"https://download.testnav.com/app-check/example.png","https://download.testnav.com/app-check/example.mp3","https://download.testnav.com/app-check/example.ogg","https://download.testnav.com/app-check/example.mp4","https://download.testnav.com/app-check/example.svgz","https://download.testnav.com/app-check/example.gif","https://download.testnav.com/app-check/example.jpg","https://download.testnav.com/app-check/example.par"],this.results={os:{status:"pending",data:"",message:"Operating System test has not been run."},browser:{status:"pending",data:"",message:"Browser test has not been run."},network:{status:"pending",data:"",message:"Network test has not been run."},domainCheck:{status:"pending",data:"",message:"Domain check has not been run."}},this.userAgent=navigator.userAgent,this.browser=void 0,this.os=void 0,this._publishContentDirBase="",this.clientConfigUrl="https://"+window.location.host+"/api/8.8/config/client/id"}async initialize(){await this.getPublishContentDirBase(),await this.runAllTests()}async runAllTests(){this.runOSTest(),this.runBrowserTest(),await this.runNetworkTest(),await this.runDomainTest()}allTestsPassed(){return Object.keys(this.results).every((e=>"passed"===this.results[e].status))}constructBrowserFromUserAgent(e){let t,n;if(-1!==e.indexOf("Firefox")){t=this.FIREFOX;const r=e.match(/Firefox\/[\d.]{2,}/)[0].split("/")[1].match(/\d{1,}\.\d{1,}/)[0];n=Number(r)}else if(-1!==e.indexOf("Edg")){t=this.EDGE;const r=e.match(/Edge?\/[\d.]{2,}/)[0].split("/")[1].match(/\d{1,}\.\d{1,}/)[0];n=Number(r)}else if(-1!==e.indexOf("Chrome")||-1!==e.indexOf("CriOS")){t=this.CHROME;var r="";e.match(/Chrome\/[\d.]{2,}/)?r=e.match(/Chrome\/[\d.]{2,}/)[0].split("/")[1]:e.match(/CriOS\/[\d.]{2,}/)&&(r=e.match(/CriOS\/[\d.]{2,}/)[0].split("/")[1]);const o=r.match(/\d{1,}\.\d{1,}/)[0];n=Number(o)}else if(-1!==e.indexOf("Safari")){t=this.SAFARI;const r=e.match(/Version\/[0-9]{1,2}\.[0-9]{1,3}/)[0].match(/[0-9]{1,2}\.[0-9]{1,3}/)[0];n=Number(r)}else t=-1!==e.indexOf("Trident")||-1!==e.indexOf("MSIE")?this.IE:this.UNSUPPORTED;return{name:t,version:n}}constructOSFromUserAgent(e){let t,n;if(-1!==e.indexOf("Windows NT")){t=this.WINDOWS;const r=e.match(/Windows NT [0-9]{1,2}\.[0-9]{1,3}/)[0].match(/[0-9]{1,2}\.[0-9]{1,3}/)[0];switch(r){case"6.1":n=Number("7");break;case"6.2":n=Number("8");break;case"10.0":n=Number("10");break;default:n=Number(r)}}else if(-1!==e.indexOf("CrOS")){t=this.CHROME_OS;const r=e.match(/Chrome\/[\d.]{2,}/)[0].split("/")[1].match(/\d{1,}\.\d{1,}/)[0];n=Number(r)}else if(-1===e.indexOf("Mac OS X")||-1===e.indexOf("iPad")&&-1===e.indexOf("iPhone"))if(-1!==e.indexOf("Mac OS X")&&-1===e.indexOf("iPad")&&-1===e.indexOf("iPhone")){t="ontouchstart"in window?this.IOS:this.MAC_OS;const r=e.match(/Mac OS X [0-9]{1,2}[_.][0-9]{1,2}([_.][0-9]{1,2})?/)[0].match(/([_.]?[0-9]{1,2}){1,2}/)[0].replace(/_/g,".");n=Number(r)}else if(-1!==e.indexOf("Linux")&&-1!==e.indexOf("Fedora")){t=this.FEDORA;const r=e.match(/Fedora\/[0-9]{1,2}/)[0].match(/[0-9]{1,2}/)[0];n=Number(r)}else if(-1!==e.indexOf("Linux")&&-1!==e.indexOf("Ubuntu")){t=this.UBUNTU;const r=e.match(/Ubuntu\s[0-9]{1,2}\.[0-9]{1,2}/)[0].match(/[0-9]{1,2}\.[0-9]{1,2}/)[0];n=Number(r)}else if(-1!==e.indexOf("Android")){t=this.ANDROID;const r=e.match(/Android\s[0-9]{1,2}/)[0].match(/[0-9]{1,2}/)[0];n=Number(r)}else t=this.UNSUPPORTED;else{t=this.IOS;const r=e.match(/CPU\sOS\s(\d{1,2}_?\d){1,2}/)[0].match(/(\d{1,2}_?){1,2}/)[0].replace(/_/g,".");n=Number(r)}return{name:t,version:n}}runOSTest(){const e=this.constructOSFromUserAgent(this.userAgent);this.os=e,this.results.os={status:"passed",data:`${e.name} ${e.version}`,message:"Operating system, and version, are supported."}}runBrowserTest(){const e=this.constructBrowserFromUserAgent(this.userAgent);this.results.browser={status:"passed",data:`${e.name} ${e.version}`,message:"Browser, and version, are supported."}}async runNetworkTest(){try{const e=await M.getNetworkDownloadSpeed();if(this.networkRequirements.minimumBandwithMbps<=e.mbps){const t="Infinity"!==e.mbps?e.mbps:">1000";return this.results.network={status:"passed",data:`${t} Mbps`,message:"Network bandwidth is sufficient."}}return this.results.network={status:"failed",data:`${e.mbps} Mbps`,message:"Bandwidth is less than minimum required."}}catch(e){return j.error(e.message),this.results.network={status:"failed",data:"Failed to connect to the network.",message:"Error: Failed to connect to the network."}}}allSettled(e){let t=e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e})))));return Promise.all(t)}async getPublishContentDirBase(){let e;try{e=await V.ajax({url:this.clientConfigUrl,type:"GET",timeout:15e3,dataType:"json"}),this._publishContentDirBase=e.publishContentDirBase}catch(e){j.log(e.statusText)}}getS3FileUrl(){var e=[];if(""==this._publishContentDirBase)e.push({status:"failed",url:this.clientConfigUrl});else{var t=`https://${this._publishContentDirBase}/${window.TestEngine.getS3FileName()}`;this.domainCheckUrlList.push(t)}return e}async runDomainTest(){try{var e=this.getS3FileUrl();let t=(await this.allSettled(this.domainCheckUrlList.map((e=>fetch(e))))).map(((e,t)=>({status:"fulfilled"===e.status?"passed":"failed",url:this.domainCheckUrlList[t]})));return t=[...t,...e],t.every((e=>"passed"===e.status))?this.results.domainCheck={status:"passed",data:t,message:"Domain check passed."}:this.results.domainCheck={status:"failed",data:t,message:"One or more URL's failed the domain check."}}catch(e){j.log(e)}}getStatusBadge(e){return"passed"===e?'\n          <span class="badge rounded-pill bg-success">Passed</span>\n        ':'\n          <span class="badge rounded-pill bg-danger">Failed</span>\n        '}}var z=n(7186),q=n(4523),$=n(3270);const X=z.View.extend({initialize:function(){q.bindAll(this,"addListeners","cleanUp","render"),this.browsercheck=new W,this.template=q.template($(f.A).filter("#browserchecktemplate").html())},render:async function(e){return await this.browsercheck.initialize(),this.el=this.template({browsercheck:this.browsercheck}),$("#content").html(this.el),this.addListeners(e),$(document).trigger("tn.loadingModal.off"),this},goToLogin:function(){$(document).trigger("tn.route.to",["login","browserCheck"])},goToTestStart:function(){$(document).trigger("tn.route.to",["testLoaded","browserCheck"])},goToPracticeTest:function(){$(document).trigger("tn.route.to","practiceTest")},addListeners:function(e){e===TN8.Application.CONTENT_TEST_START?$("#sign-in-btn").on("click",this.goToTestStart):e===TN8.Application.CONTENT_PRACTICETEST?$("#sign-in-btn").on("click",this.goToPracticeTest):$("#sign-in-btn").on("click",this.goToLogin)},cleanUp:function(){$("#sign-in-btn").off("click",this.goToLogin)}});var K=n(7186),Y=n(3270),J=n(4523),Z=n(6763),Q=K.View.extend({template:Y('<script type="text/template" id="scorableEpatReportTemplate">\n\t<h1 id="itemCanvasTitle" class="sr-only visuallyhidden" tabindex="-1"><%= $.i18n.t("epat:summaryReport") %></h1>\n\t<form action="" method="POST" target="scorable-epat-iframe">\n\t\t<input type="hidden" name="responseInfo" id="responseInfo" value=\'\' />\n\t\t<input type="hidden" name="formId" id="formId" value="" />\n\t</form>\n\t<div style="width: 70%; margin-left: auto; margin-right: auto;">\n\t\t<% if (isLoginMultiTest) { %>\n\t    <button class="btn btn-primary epat-finish" id="epat-finish" aria-label="<%= $.i18n.t(\'generalWords:continue\')%>"><%= $.i18n.t("generalWords:continue")%></button><br><br>\n\t\t<% } else { %>\n\t\t<button class="btn btn-primary epat-finish" id="epat-finish" aria-label="<%= $.i18n.t(\'generalWords:logout\')%>"><%= $.i18n.t("generalWords:logout")%></button><br><br>\n\t\t<% } %>\n\t</div>\n\t<div id="epatReportContainer">\n        <iframe id="scorable-epat-iframe" name="scorable-epat-iframe" frameBorder="0" scrolling="yes"></iframe>\n        <div class="iframe-shadow shadow-top"></div>\n\t</div>\n<\/script>').html(),initialize:function(){J.bindAll(this,J.functions(this))},makeRootData:function(){var e=TestEngine.getNavigation(),t=TestEngine.getAuthentication(),n={};return n.loginId=t.getLoginId(),n.formId=t.getFormId(),n.formName=t.getCurrentForm()._name,n.formNumber=t.getCurrentForm()._num,n.testName=t.getCurrentForm()._testName,n.studentName=TN8.Application.epatStudentName,n.testId=e.getTestId(),n.language=Y.i18n.lng(),n.clientVersion=isNaN(TN8.Application.clientVersion)?TestEngine.getVersion():TN8.Application.clientVersion,n.altScoreReport=TestEngine.getTestDefine()._sourceJson.altScoreReport,TestEngine.getTestDefine()._sourceJson.vsr&&(n.sess=t._sessionToken,n.u_sess=t._userToken),n.items=[],n},makeAllResponses:function(e){for(var t=0;t<this.testParts.length;t++)for(var n=this.testParts[t].getState().part.sections,r=0;r<n.length;r++)for(var o=n[r].section,i=o.id,s=0;s<o.items.length;s++){var a={},c=o.items[s].itemRef;a.itemRef={},a.itemRef.id=c.id,a.itemRef.externalItemId=this.testParts[t].getItemById(c.id).getItemName(),a.itemRef.sid=i,a.itemRef.wc=c.wc,a.state=null,e.items.push(a)}return e},makeVisitedResponses:function(e){var t=TestEngine.getAllItemResponses();for(var n in t)for(var r=t[n],o=J.keys(r)[0],i=0;i<e.items.length;i++)e.items[i].itemRef.id===o&&(e.items[i].state=r[o].state);return e},makeSectionData:function(e){e.reportId="1",e.parts=[];for(var t=0;t<this.testParts.length;t++){var n=this.testParts[t].getState().part.sections;e.parts[t]={section:[]};for(var r=0;r<n.length;r++){var o={};o.sectionId=n[r].section.id,o.sectionTitle=n[r].section.title,e.parts[t].section.push(o)}}return e},setIframeSize:function(e){var t=Y("#scorable-epat-iframe");t.css("height",_.A.getViewPortSize().height-t.offset().top-25)},renderTemplate:function(e){var t=J.template(this.template);Y("#content").html(t({isLoginMultiTest:e}))},render:function(){var e=TestEngine.getAuthentication();this.testDef=TestEngine.getTestDefine(),this.testParts=this.testDef.getTestParts();var t="multi-test"===e.getLoginType()||TN8.Application.DataProvider.isMultiPartUser();J.template(this.template),this.renderTemplate(t);var n=Y("#content").find("form"),r=Y(n).find("input#formId"),o=Y(n).find("#responseInfo");Y(r).val(e.getFormId());var i=this.makeRootData();i=this.makeAllResponses(i),i=this.makeVisitedResponses(i),i=this.makeSectionData(i);var s=JSON.stringify(i);return Y(o).val(s),this.setIframeSize(),Y("#epatReportContainer").ready(this.callEPATScore),Y(document).trigger("tn.epatReport.render",[Y.i18n.t("epat:summaryReport")]),this},callEPATScore:function(){var e=Y("#content").find("form"),t=TestEngine.getProtocol()+"//"+window.location.hostname+"/vsr/8.0/score";Y.post({url:t,data:Y(e).serialize(),timeout:6e4,success:this.renderIFrame,error:e=>{this.renderTimeout(e)}})},renderIFrame:function(e){let t;const r=Y("#scorable-epat-iframe").contents().find("html");r.html('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <title></title>\n    <style type="text/css">\n        html {\n            font-family: "Helvetica Neue Light", Helvetica, Verdana, Arial;\n            font-size: 15px;\n            line-height: 18px;\n            width: 99%;\n        }\n\n        .container {\n             margin: 20px\n         }\n\n        .boldFontWeight {\n            font-weight: bold;\n        }\n\n        h4 {\n            font-size: 24px;\n            font-weight: normal;\n            color: #40657a;\n        }\n\n        .styledButton8 {\n            background-color: #ffffff;\n            background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#e0e0e0));\n            background-image: -webkit-linear-gradient(top, #ffffff, #e0e0e0);\n            background-image: -moz-linear-gradient(top, #ffffff, #e0e0e0);\n            background-image: -ms-linear-gradient(top, #ffffff, #e0e0e0);\n            background-image: -o-linear-gradient(top, #ffffff, #e0e0e0);\n            background-image: linear-gradient(to bottom, #ffffff, #e0e0e0);\n            filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#ffffff, endColorstr=#e0e0e0);\n            padding: 8px 13px;\n            color: #333333;\n            font-family: "Helvetica Neue Light", sans-serif;\n            font-size: 15px;\n            border-radius: 4px;\n            -moz-border-radius: 4px;\n            -webkit-border-radius: 4px;\n            border: 1px solid #d0d0d0\n        }\n\n        hr {\n            width: 100%;\n            height: 1px solid;\n            color: #f1f1f1;\n        }\n\n        .container .secondParagraph p {\n            display: contents;\n        }\n\n        .text-left {\n            text-align: left;\n        }\n\n        .text-center {\n            text-align: center;\n        }\n\n        .text-right {\n            text-align: right;\n        }\n\n        .test {\n            font-size: 18px;\n            color: #333333;\n            font-weight: 200;\n        }\n\n        .table {\n            background-color: transparent;\n            border-spacing: 0;\n            border-collapse: collapse;\n            width: 100%;\n            max-width: 100%;\n        }\n\n        caption {\n            padding-top: 8px;\n            padding-bottom: 8px;\n            background: #335061;\n            font-weight: bold;\n            color: white;\n            border: #d0d0d0 1px solid;\n        }\n\n        th {\n            text-align: left;\n        }\n\n        .table>thead>tr>th {\n            background-color: #40657a;\n            color: #fff;\n        }\n\n        .table>tbody>tr>td, .table>tbody>tr>th, .table>thead>tr>td, .table>thead>tr>th\n        {\n            padding: 8px;\n            vertical-align: top;\n        }\n\n        .table tbody tr td:first-child {\n            font-weight: bold;\n        }\n\n        .table-striped>tbody>tr:nth-of-type(even) {\n            background-color: #f1f1f1;\n        }\n\n        .table-bordered {\n            border: 1px solid #d0d0d0;\n        }\n\n        .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th,\n        .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th,\n        .table-bordered>thead>tr>td, .table-bordered>thead>tr>th {\n            border: 1px solid #d0d0d0;\n        }\n\n        .table-header-1 {\n            width: 25%;\n        }\n\n        .hidden {\n            display: none;\n        }\n\n        @media print and (color) {\n            * {\n                -webkit-print-color-adjust: exact;\n                print-color-adjust: exact;\n                font-size: 15px;\n            }\n        }\n    </style>\n</head>\n<body role="document">\n<div data-component="EpatReportBody"></div>\n</body>\n</html>'),r.find("title").text(Y.i18n.t("epat:summaryReport"));const o=Y("#content").find("form").find("#responseInfo").val();o?t=JSON.parse(o):this.renderTimeout(new Error("Form information missing",{cause:"The form information is not in the form."})),t&&Promise.all([n.e(3777),n.e(6021)]).then(n.bind(n,7382)).then((n=>{Z.log("Done loading reactEpat!!!!!!!!!!!"),Y(document).trigger("reactEpat.loadTables",[e,t])})),this.addListeners(),Y(document).trigger("tn.loadingModal.off")},renderTimeout:function(e){const t=e&&e.hasOwnProperty("responseJSON");let n=Y.i18n&&TN8&&TN8.errorType?Y.i18n.t("errorMessages:"+TN8.errorType.CANNOT_CREATING_REPORT):"Error creating the report.",r=Y.i18n&&Y.i18n.t("errorMessages:errorCode")?Y.i18n.t("errorMessages:errorCode"):"Error Code",o='<div><div class="msg">'+n+'</div><div class="errorCode">'+r+": 9088</div></div>";t&&(o+='<div><div class="msg">'+n+'</div><div class="errorCode">'+r+": "+e.responseJSON.msgCode+"</div></div>"),Y("#scorable-epat-iframe").contents().find("body").html(o),this.addListeners(),Y(document).trigger("tn.loadingModal.off")},eventRepeater:function(e){Y(document).trigger(e)},addListeners:function(){Y(window).off("resize",this.setIframeSize).on("resize",this.setIframeSize),Y(document).off("tn.nav.start  exitWithoutAsking focuslost",this.removeListeners).on("tn.nav.start  exitWithoutAsking focuslost",this.removeListeners),Y("#epat-finish").off("click",this.handler_EpatLogout).on("click",this.handler_EpatLogout),Y(Y("#scorable-epat-iframe")[0].contentDocument).off("mousemove mousedown mouseup click touchstart touchend touchmove keydown keyup keypress",this.eventRepeater).on("mousemove mousedown mouseup click touchstart touchend touchmove keydown keyup keypress",this.eventRepeater)},removeListeners:function(){Y(Y("#scorable-epat-iframe")[0].contentDocument).off("mousemove mousedown mouseup click touchstart touchend touchmove keydown keyup keypress",this.eventRepeater),Y(window).off("resize",this.setIframeSize),Y(document).off("tn.nav.start exitWithoutAsking focuslost",this.removeListeners),Y(document).trigger("tn.destroy.reactTable"),Y("#epat-finish").off("click",this.handler_EpatLogout)},handler_EpatLogout:function(){this.removeListeners(),TN8.Application.DataProvider.isMultiPartUser()?Y(document).trigger("perform.betweenEpatPartCleanup"):Y(document).trigger("tn.finish.test")},getSaveToLocation:function(){return"saveTestState"}});const ee=Q,te='<div class="row">\n    <div class="span12" id="section-end">\n        <h1 id="itemCanvasTitle" class="visuallyhidden" tabindex="-1"><%= ariaTitle %></h1>\n        <% if (endTest) {%>\n            <div class="label label-default end-test-header"><%= endBanner %></div>\n        <% } %>\n        <div class="testcompletion-container clearfix">\n            <h2 class="text-center section-header">\n                <%= endTitle %>\n            </h2>\n            \n            <div class="completedMessage" <% if(unansweredCount > 0) { %> style="display:none" <% } %>>\n                <div class=\'sprite completedSprite\'></div>\n                <%= $.i18n.t(\'endSection:allQuestionsAnswered\') %>\n            </div>\n            \n            <div class="end-txt"><%= endMessage %></div>\n\n            \x3c!-- inline errors and warnings --\x3e\n            <div id="endError" class="alert alert-block alert-error fade in hidden" aria-live="assertive"></div>\n            <% if (mustAnswer) { %>\n                <div class="alert alert-block fade in endWarning" aria-live="assertive">\n                    <i class="icon-exclamation-sign"></i>\n                    <p><%= $.i18n.t("endSection:mustAnswerText")%><%= buttonText %></p>\n                </div>\n            <% } %>\n            <% if (showWarning) { %>\n                <div class="alert alert-block fade in endWarning" aria-live="assertive">\n                    <i class="icon-exclamation-sign"></i>\n                    <p><%= $.i18n.t("endSection:cannotSubmitFinalAnswers")%></p>\n                </div>\n            <% } %>\n\n            \x3c!-- The button --\x3e\n            <div class="center endTestbtn">\n                <button aria-label="<%=buttonText%>"\n                        class="btn btn-large btn-success ebutton <% if (disabledSubmit) { %>disabled<% } %>"\n                        id="end-submit"><%=buttonText%>\n                        <% if (!endTest) { %>\n                            <i role="presentation" class="icon-chevron-right"></i>\n                            <i role="presentation" class="icon-chevron-right"></i>\n                        <% } %>\n                </button>\n            </div>\n            \n            \x3c!-- unanswered an bookmarks --\x3e\n            <% if (!noReview) { %>\n                <% if (unansweredCount > 0 || bookmarkCount > 0 || hasItemLocking) { %>\n                  <div class="well explainerContainer">\n                      <% if(unansweredCount > 0) { %>\n                          <div class="explainerBlock">\n                              <div class=\'sprite unansweredSprite\'></div> \n                                <p style="margin:0 0 0px">\n                                  <%= $.i18n.t(\'endSection:notAnsweredExplainer\') %>\n                                </p>\n                          </div>\n                      <% } %>\n                      <% if(bookmarkCount > 0 && ( bookmarkFlag === null || bookmarkFlag === undefined || bookmarkFlag === true )) { %>\n                          <div class="explainerBlock">\n                              <div class=\'sprite bookmarkSprite\'></div> \n                                <p style="margin:0 0 0px">\n                                  <%= $.i18n.t(\'endSection:bookmarkExplainer\') %>\n                                </p>\n                          </div>\n                      <% } %>\n                      <% if(hasItemLocking) { %>\n                          <div class="explainerBlock">\n                              <div class=\'sprite itemLockingSprite\'></div>\n                             <%= $.i18n.t(\'endSection:itemLockingExplainer\') %>\n                          </div>\n                      <% } %>\n                  </div>\n                  <% } %>\n                  <div class="questionsContainer"></div>\n          <% } %>\n        </div>\n    </div>\n</div>\n<% if (!noReview) { %>\n\x3c!-- Used to attach the deep zoom tool menu --\x3e\n<div id="drawingToolBar"></div>\n<% } %>\n',ne='<div class="row">\n    <div class="span12" id="section-end">\n        <h1 id="itemCanvasTitle" class="visuallyhidden" tabindex="-1"><%= ariaTitle %></h1>\n        <% if (endTest) {%>\n            <div class="label label-default end-test-header"><%= endBanner %></div>\n        <% } %>\n        <div class="testcompletion-container clearfix">\n            <h2 class="text-left section-header"><%= endTitle %></h2>\n            <div class="end-txt"><%= endMessageClassic %></div>\n\n            \x3c!-- unanswered and bookmarks --\x3e\n            <% if (!noReview) { %>\n            <div class="end-label-block clearfix">\n                <% if (bookmarkFlag === null || bookmarkFlag === undefined || bookmarkFlag === true) { %>\n                    <div class="end-label <%= answered %>">\n                <% }else{ %>\n                    <div class="end-label <%= answered %>" style="width:100%;">\n                <% } %>\n                    <% if (unansweredCount > 0) { %>\n                        <div class="end-count center unselectable" role="button" aria-label="<%=unansweredAriaLabel%>">\n                            <span aria-hidden="true" role="presentation"><%= unansweredCount %></span>\n                        </div>\n                        <p class="end-label-text center" aria-hidden="true" role="presentation"><%= unansweredLabel %></p>\n                    <% } else { %> \n                        <div class="end-count center unselectable" role="button" aria-disabled="true" aria-label="<%=unansweredAriaLabel%>">\n                            <span aria-hidden="true" role="presentation"><%= unansweredCount %></span>\n                        </div>\n                        <p class="end-label-text center" aria-hidden="true" role="presentation"><%= unansweredLabel %></p>\n                    <% } %>                \n                </div>\n                <% if (bookmarkFlag === null || bookmarkFlag === undefined || bookmarkFlag === true) { %>\n                    <% if (bookmarkCount > 0 && (bookmarkFlag === null || bookmarkFlag === undefined || bookmarkFlag === true)) { %>\n                        <div class="end-label bookmarked">\n                            <div class="end-count center unselectable" role="button" aria-label="<%=bookmarkedAriaLabel%>">\n                                <span aria-hidden="true" role="presentation"><%= bookmarkCount %></span>\n                            </div>\n                            <p class="end-label-text center" aria-hidden="true" role="presentation"><%= $.i18n.t("endSection:bookmarks")%></p>\n                        </div>\n                    <% } else { %>\n                        <div class="end-label bookmarked no-bookmarks">\n                            <div class="end-count center unselectable" role="button" aria-disabled="true" aria-label="<%=bookmarkedAriaLabel%>">\n                                <span aria-hidden="true" role="presentation"><%= bookmarkCount %></span>\n                            </div>\n                            <p class="end-label-text center" aria-hidden="true" role="presentation"><%= $.i18n.t("endSection:bookmarks")%></p>\n                        </div>\n                    <% } %>\n                <% } %>\n            </div>\n            <% } %>\n\n            \x3c!-- inline errors and warnings --\x3e\n            <div id="endError" class="alert alert-block alert-error fade in hidden" aria-live="assertive"></div>\n            <% if (mustAnswer) { %>\n                <div class="alert alert-block fade in endWarning" aria-live="assertive">\n                    <i class="icon-exclamation-sign"></i>\n                    <p><%= $.i18n.t("endSection:mustAnswerText")%><%= buttonText %></p>\n                </div>\n            <% } %>\n            <% if (showWarning) { %>\n                <div class="alert alert-block fade in endWarning" aria-live="assertive">\n                    <i class="icon-exclamation-sign"></i>\n                    <p><%= $.i18n.t("endSection:cannotSubmitFinalAnswers")%></p>\n                </div>\n            <% } %>\n\n            \x3c!-- The button --\x3e\n            <div class="center endTestbtn">\n                <button aria-label="<%=buttonText%>"\n                        class="btn btn-large btn-success ebutton <% if (disabledSubmit) { %>disabled<% } %>"\n                        id="end-submit"><%=buttonText%>\n                        <% if (!endTest) { %>\n                            <i role="presentation" class="icon-chevron-right"></i>\n                            <i role="presentation" class="icon-chevron-right"></i>\n                        <% } %>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n<% if (!noReview) { %>\n\x3c!-- Used to attach the deep zoom tool menu --\x3e\n<div id="drawingToolBar"></div>\n<% } %>';var re=n(8535),oe=n(7186),ie=n(4523),se=n(3270);const ae=oe.View.extend({template:TN8.Application.config.endSectionClassic?ie.template(ne):ie.template(te),el:'<div id="end-test" />',deepZoomToolMenu:null,initialize:function(){ie.bindAll(this,"handleSubmit","handleFinishTest","cleanup")},render:function(){TN8.Dispatcher.trigger("removeHomeMenu"),TN8.fnOn("tn.finish.test",this.handleFinishTest),TN8.Dispatcher.once("performNavigation",this.cleanup),TN8.Dispatcher.trigger("CleanUpItemController");var e=TN8.Application.DataProvider.getEndData(!0),t=TN8.Application.DataProvider.getOverviewRows();return this.$el.html(this.template(e)),se("#content").html(this.$el),TN8.Application.config.endSectionClassic?(se(".unanswered > .end-count",this.$el).reviewDropdown({dataSource:t,type:"popup",filter:"unanswered"}),se(".bookmarked:not(.no-bookmarks) > .end-count",this.$el).reviewDropdown({dataSource:t,type:"popup",filter:"bookmarked"})):this._appendQuestionCells(t,this.$el),this.loadDeepZoomToolMenu(),se(document).trigger("tn.endtest.loaded"),se("#end-submit:not(.disabled)",this.$el).on("click touchend",this.handleSubmit),se("#firstTabbable").focus(),se(document).trigger("tn.loadingModal.off"),this},_appendQuestionCells:function(e){let t=e.map((e=>{var t=TN8&&TN8.PnpController&&TN8.PnpController.getMarkForReview();t=null==t||!0===t;let n=se("<button>",{class:"questionCell",text:e.title}).click(e.onSelected),r=e.title;e.flagged&&t&&(n.append(se("<span class='bookmark-sprite'/>")),r=se.i18n?se.i18n.t("header:bookmarkedAria",{itemName:r}):r+" bookmarked"),e.answered?r=se.i18n?se.i18n.t("header:answeredAria",{itemName:r}):r+" answered":(r=se.i18n?se.i18n.t("header:notAnsweredAria",{itemName:r}):r+" not answered",n.append(se("<span class='unanswered-sprite'/>"))),e.wc&&n.hide(),e.blocked&&n.prop("disabled",!0);var o=TN8.Application.DataProvider.isItemLocked(e);return!0===o?(r=se.i18n?se.i18n.t("header:lockedAria",{itemName:r}):r+" locked",n.append(se("<span class='item-locking-sprite lock'/>"))):!1===o&&(r=se.i18n?se.i18n.t("header:unlockedAria",{itemName:r}):r+" unlocked",n.append(se("<span class='item-locking-sprite unlock'/>"))),n.attr("aria-label",r),n}));t.splice(-1,1),se(".questionsContainer").append(t)},loadDeepZoomToolMenu:function(){TN8.utils.loadLibraries(["public/javascripts/DeepZoomToolMenu.js"],se.proxy(this.addDeepZoomToolMenu,this),this.deepZoomToolMenuLoadFail)},addDeepZoomToolMenu:function(){this.deepZoomToolMenu=new DeepZoomToolMenu(TN8.deepZoomLayer)},deepZoomToolMenuLoadFail:function(e){TN8.throw("scriptInjector.injectScripts failed. DeepZoomToolMenu. Error message : "+JSON.stringify(e),TN8.errorType.INJECTION_SCRIPT_ERROR)},getHeaderModelData:function(){return{headerMode:3,renderTrick:Math.random(),btnNextState:"disabled",btnShowFlag:"hide"}},handleSubmit:function(e){if(!TestEngine.getNavigation().getCurrentSection().getDisableExit())return TestEngine.getTestDefine()&&TestEngine.getTestDefine()._sourceJson.vsr?(se(document).trigger("epat.review.reload.section"),se(document).trigger("tn.route.to","epatReport")):TestEngine.getNavigation().getCurrentSection().hideSectionReview()||TN8.utils.isCat()?this.handleFinishTest():re.A.show({section:!1,backdrop:!0,confirm:this.handleFinishTest}),!1;se(document).trigger("tn.check.remote.config",{type:"closeSections",success:this.handleFinishTest,failure:this.inlineError.bind(this,se.i18n.t("endSection:sectionEndNotClosed"),TN8.errorType.SECTION_END_NOT_CLOSED),missing:this.inlineError.bind(this,se.i18n.t("endSection:sectionControlConnectivity"),TN8.errorType.SECTION_CONTROL_CONNECTIVITY)})},handleFinishTest:function(){this.cleanup(),se(document).trigger("navigate.submitTest","NormalSubmit")},getSaveToLocation:function(){return"saveTestState"},inlineError:function(e,t,n){TN8.throw(e,t),se("#endError").html("<p>"+e+"</p><sub> "+se.i18n.t("errorMessages:msg").toUpperCase()+" "+t+"</sub>").removeClass("hidden")},cleanup:function(){this.deepZoomToolMenu&&(this.deepZoomToolMenu.destroy(),this.deepZoomToolMenu=null),void 0!==se(".unanswered > .end-count",this.$el).data("pearsonReviewDropdown")&&se(".unanswered > .end-count",this.$el).reviewDropdown("removeMiniMenus"),this.remove(),TN8.Dispatcher.off("performNavigation",this.cleanup),TestEngine.getTestDefine()&&TestEngine.getTestDefine().isPracticeTest()||se(document).off("tn.finish.test",this.handleFinishTest)}});var ce=n(327),le=n(7186),ue=n(4523),de=n(3270);const fe=le.View.extend({template:TN8.Application.config.endSectionClassic?ue.template(ne):ue.template(te),el:'<div id="end-section" />',deepZoomToolMenu:null,render:function(){ue.bindAll(this,"handlerNext"),TN8.Dispatcher.trigger("removeHomeMenu"),TN8.Dispatcher.once("performNavigation",this.cleanup,this);var e=TN8.Application.DataProvider.getEndData(),t=TN8.Application.DataProvider.getOverviewRows();return this.$el.html(this.template(e)),de("#content").html(this.$el),TN8.Application.config.endSectionClassic?(de(".unanswered > .end-count",this.$el).reviewDropdown({dataSource:t,type:"popup",filter:"unanswered"}),de(".bookmarked:not(.no-bookmarks) > .end-count",this.$el).reviewDropdown({dataSource:t,type:"popup",filter:"bookmarked"})):this._appendQuestionCells(t,this.$el),de("#end-submit:not(.disabled)",this.$el).off("click",this.handlerNext).on("click",this.handlerNext),this.loadDeepZoomToolMenu(),de(document).trigger("tn.endsection.loaded"),de(document).trigger("perform.addFTListener"),de(document).trigger("tn.loadingModal.off"),this},_appendQuestionCells:function(e){let t=e.map((e=>{var t=TN8&&TN8.PnpController&&TN8.PnpController.getMarkForReview();t=null==t||!0===t;let n=de("<button>",{class:"questionCell",text:e.title}).click(e.onSelected),r=e.title;e.flagged&&t&&(r=de.i18n?de.i18n.t("header:bookmarkedAria",{itemName:r}):r+" bookmarked",n.append(de("<span class='bookmark-sprite'/>"))),e.answered?r=de.i18n?de.i18n.t("header:answeredAria",{itemName:r}):r+" answered":(r=de.i18n?de.i18n.t("header:notAnsweredAria",{itemName:r}):r+" not answered",n.append(de("<span class='unanswered-sprite'/>"))),e.wc&&n.hide(),e.blocked&&n.prop("disabled",!0);var o=TN8.Application.DataProvider.isItemLocked(e);return!0===o?(r=de.i18n?de.i18n.t("header:lockedAria",{itemName:r}):r+" locked",n.append(de("<span class='item-locking-sprite lock'/>"))):!1===o&&(r=de.i18n?de.i18n.t("header:unlockedAria",{itemName:r}):r+" unlocked",n.append(de("<span class='item-locking-sprite unlock'/>"))),n.attr("aria-label",r),n}));t.splice(-1,1),de(".questionsContainer").append(t)},loadDeepZoomToolMenu:function(){TN8.utils.loadLibraries(["public/javascripts/DeepZoomToolMenu.js"],de.proxy(this.addDeepZoomToolMenu,this),this.deepZoomToolMenuLoadFail)},addDeepZoomToolMenu:function(){this.deepZoomToolMenu=new DeepZoomToolMenu(TN8.deepZoomLayer)},deepZoomToolMenuLoadFail:function(e){TN8.throw("scriptInjector.injectScripts failed. DeepZoomToolMenu. Error message : "+JSON.stringify(e),TN8.errorType.INJECTION_SCRIPT_ERROR)},getHeaderModelData:function(){return{headerMode:3,renderTrick:Math.random(),btnNextState:"disabled",btnShowFlag:"hide"}},handlerNext:function(e){TestEngine.getNavigation().getCurrentSection().getDisableExit()?de(document).trigger("tn.check.remote.config",{type:"closeSections",success:function(){de(document).trigger("navigate.loadNextSection")},failure:this.inlineError.bind(this,de.i18n.t("endSection:sectionEndNotClosed"),TN8.errorType.SECTION_END_NOT_CLOSED),missing:this.inlineError.bind(this,de.i18n.t("endSection:sectionControlConnectivity"),TN8.errorType.SECTION_CONTROL_CONNECTIVITY)}):!TN8.utils.isCat()&&!TestEngine.getNavigation().getCurrentSection().hideSectionReview()||!0===TN8.Application.config.nonLinearSections&&(TN8.utils.isLastSection()||TN8.utils.nextSectionIsSubmitted())?(new ce.A).render():de(document).trigger("navigate.loadNextSection")},inlineError:function(e,t,n){TN8.throw(e,t),de("#endError").html("<p>"+e+"</p><sub> "+de.i18n.t("errorMessages:msg").toUpperCase()+" "+t+"</sub>").removeClass("hidden")},getSaveToLocation:function(){return"saveTestState"},cleanup:function(){this.deepZoomToolMenu&&(this.deepZoomToolMenu.destroy(),this.deepZoomToolMenu=null),de(document).trigger("perform.removeFTListener"),void 0!==de(".unanswered > .end-count",this.$el).data("pearsonReviewDropdown")&&de(".unanswered > .end-count",this.$el).reviewDropdown("removeMiniMenus"),de("#end-submit:not(.disabled)",this.$el).off("click",this.handlerNext),this.remove(),TN8.Dispatcher.off("performNavigation",this.cleanup)}});n(2621);var pe=n(3270);let he,me=()=>{TN8.log("GameBreak:: Game loaded successfully",TN8.IMPORTANT),pe(document).trigger("tn.loadingModal.off"),pe("#launch-game").trigger("game-ready"),pe(document).one("forceExitGame",(()=>{he.requestQuit()}))},ge=e=>{TN8.log("GameBreak:: Game failed to load",TN8.IMPORTANT),pe("#launch-game").trigger("load-game-failed"),he=null,pe(document).trigger("tn.loadingModal.off")},_e=(e,t)=>({args:[],canvasResizePolicy:2,executable:`public/games/${t}/${e}`,fileSizes:ve(e),experimentalVK:!1,focusCanvas:!0,gdnativeLibs:[],onExit:be}),ve=e=>"PenguinSurfer"===e?{"PenguinSurfer.pck":45488,"PenguinSurfer.wasm":17472981}:{},be=()=>{TN8.log("GameBreak:: Game has been exited",TN8.IMPORTANT),pe("#launch-game").trigger("game-closed")};const ye=(e,t)=>{var n;((e,t)=>{he=new Engine(_e(e,t))})(e,t),Engine.isWebGLAvailable()?(n=_e(e,t),TN8.log("GameBreak:: Starting game loading",TN8.IMPORTANT),pe(document).trigger("tn.loadingModal.on"),he.startGame(n).then(me,ge)):(TN8.log("WebGL not available",TN8.IMPORTANT),pe("#launch-game").trigger("load-game-failed"))};var we=n(7186),Se=n(4523),Ee=n(3270);const Te=we.View.extend({template:Se.template('<h1 id="itemCanvasTitle" class="sr-only visuallyhidden" tabindex="-1">Game Page</h1>\n<div style="width: 70%; margin-left: auto; margin-right: auto;">\n    <button class="btn btn-primary" id="continue-button" aria-label="<%= isEndTest ? $.i18n.t(\'generalWords:logout\') : $.i18n.t(\'generalWords:continue\')%>"><%= isEndTest? $.i18n.t("generalWords:logout") : $.i18n.t(\'generalWords:continue\')%></button><br><br>\n</div>\n<div id="gameContainer">\n    <h2 id="game-failed" class="hidden"><%= $.i18n.t("endSection:sectionControlConnectivity")%></h2>\n    <button id="launch-game" class="btn btn-primary btn-large"><%= $.i18n.t("endSection:launchGame")%></button>\n    <canvas id="canvas">HTML5 canvas appears to be unsupported in the current browser.<br />\n        Please try updating or use a different browser.</canvas>\n</div>'),el:"",deepZoomToolMenu:null,isEndTest:!1,gameTimer:null,render:function(){return Se.bindAll(this,Se.functions(this)),TN8.Dispatcher.once("performNavigation",this.cleanup,this),this.isEndTest=TN8.Application.getCurrentContent()===TN8.Application.CONTENT_GAME_BREAK_TEST_OVER,this.$el.html(this.template({isEndTest:this.isEndTest})),Ee("#content").html(this.$el),this.addListeners(),Ee(document).trigger("tn.gamebreak.loaded"),Ee(document).trigger("perform.addFTListener"),Ee(document).trigger("tn.loadingModal.off"),this},addListeners:function(){Ee("#launch-game").off("game-closed",this.handle_gameClosing).on("game-closed",this.handle_gameClosing),Ee("#launch-game").off("load-game-failed",this.handle_loadGameFailed).on("load-game-failed",this.handle_loadGameFailed),Ee("#launch-game").off("game-ready",this.handle_gameReady).on("game-ready",this.handle_gameReady),Ee("#continue-button").off("click",this.handle_continue).on("click",this.handle_continue),Ee("#launch-game").off("click",this.handle_launchGame).on("click",this.handle_launchGame)},removeListeners:function(){Ee("#continue-button").off("click",this.handle_continue),Ee("#launch-game").off("click",this.handle_launchGame),Ee("#launch-game").off("game-closed",this.handle_gameClosing),Ee("#launch-game").off("load-game-failed",this.handle_loadGameFailed),Ee("#launch-game").off("game-ready",this.handle_gameReady)},getHeaderModelData:function(){return{headerMode:0,renderTrick:Math.random()}},handle_gameClosing:function(){this.gameTimer&&clearTimeout(this.gameTimer),Ee("#canvas").remove(),Ee("#launch-game").remove(),Ee("#gameContainer").append(`<h1 id="game-time-expired">${Ee.i18n.t("endSection:gameTimeExpired")}</h1>`)},handle_loadGameFailed:function(){Ee("#game-failed").removeClass("hidden"),Ee("#launch-game").remove(),Ee("#canvas").remove()},handle_continue:function(){this.removeListeners(),this.isEndTest?Ee(document).trigger("tn.route.to","logout"):Ee(document).trigger("tn.route.to","startSection")},handle_launchGame:function(){ye("PenguinSurfer","penguin_surfer")},handle_gameReady:function(){this.launchFullscreen(),this.startTimer()},launchFullscreen:function(){let e=document.getElementById("canvas");Ee(e).removeClass("hidden"),Ee("#game-failed").addClass("hidden"),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},startTimer:function(){const e=TN8.Application.DataProvider.getGameBreakMaxTime();if(e<=0)return;const t=60*e*1e3;this.gameTimer=setTimeout(this.gameTimeExpired,t)},gameTimeExpired:function(){Ee(document).trigger("forceExitGame")},cleanup:function(){Ee(document).trigger("perform.removeFTListener"),this.remove(),Ee(document).off("forceExitGame"),TN8.Dispatcher.off("performNavigation",this.cleanup)}});var Ae=n(927),xe=n(7186),Le=n(4523),Pe=n(3270);const ke=xe.View.extend({template:Le.template(Pe(f.A).filter("#startsectiontemplate").html()),el:'<div id="section-start" aria-live="assertive"/>',initialize:function(){Le.bindAll(this,Le.functions(this))},_getSealCodeField:function(){return this.$el.find("#sealCode")},render:function(){return this.model.refreshSectionData(),this.$el.html(this.template(this.model.attributes)),Pe("#content").html(this.$el),this.bindSealCodeEvents(),this.addRubricListener(),Pe("#startSectionBtn",this.$el).click(this.handler_StartClick),Pe(document).trigger("tn.startsection.loaded"),Ae.default.execute(Ae.default.actionNames.TurnOffModal),TN8?.utils?.focusFirstTabbable(),this},getHeaderModelData:function(){return{headerMode:0,renderTrick:Math.random(),btnNextState:"disabled",btnShowFlag:"hide"}},addRubricListener:function(){TestEngine.getNavigation().getCurrentSection().getRubricblock()&&Pe("#skipToInstructions > a").click((function(e){e.preventDefault(),Pe("#sectionRubric").focus()}))},bindSealCodeEvents:function(){var e=this.el;if(this.model.getSealCode()){var t=this._getSealCodeField();if(this.ie9PHolderHack(t),!TestEngine.getNavigation().getCurrentSection().getRemoteSectionControl()){var n=Pe("#startSectionBtn",e);n.prop("disabled",!0),t.on("input",(function(e){""===t.val()?n.prop("disabled",!0):n.prop("disabled",!1)}))}t.keydown((function(t){var n=t.which;13===n?(Pe("#startSectionBtn",e).click(),t.preventDefault()):(n>=96&&n<=111&&(n-=48),-1!==[0,8,9,16,35,36,37,38,39,40,46,229].indexOf(n)||/[A-Za-z0-9]/.test(String.fromCharCode(n))||t.preventDefault())}))}},ie9PHolderHack:function(e){"placeholder"in document.createElement("input")||(e.val("Enter Seal Code"),e.focus((function(){"Enter Seal Code"==this.value&&(this.value="")})).blur((function(){this.value||(this.value="Enter Seal Code")})))},handler_StartClick:function(e){if(e&&Pe(e.target).hasClass("disabled"))return!1;document.activeElement&&Pe.isIdevice()&&document.activeElement.blur(),TestEngine.getNavigation().getCurrentSection().getRemoteSectionControl()?Pe(document).trigger("tn.check.remote.config",{type:"sectionControl",success:this.processSealCode,failure:this.inlineError.bind(this,Pe.i18n.t("startSection:sectionStartNotOpen"),TN8.errorType.SECTION_START_NOT_OPEN),missing:this.inlineError.bind(this,Pe.i18n.t("startSection:sectionControlConnectivity"),TN8.errorType.SECTION_CONTROL_CONNECTIVITY)}):this.processSealCode()},processSealCode:function(){if(this.model.getSealCode()){var e=this._getSealCodeField();this.model.attributes.sealCode.toLowerCase()===e.val().toLowerCase()?(TN8.Application.error.closeGrowls(),this.model.setSealCode(!1),this.loadNextSection()):this.inlineError(Pe.i18n.t("startSection:incorrectSealCode"),TN8.errorType.INCORRECT_SEAL_CODE)}else this.loadNextSection()},loadNextSection:function(e){e=e||{},Pe(document).trigger("testState.setSectionStartTime",(new Date).toUTCString()),e.data=e.data||{},e.data.section=this.model.get("section"),Pe(document).trigger("navigate.nextStartSection",e),Pe(document).trigger("inform.nextStartSection"),this.destroy()},getSaveToLocation:function(){return"saveTestState"},inlineError:function(e,t,n){TN8.throw(e,t),Pe("#startSectionError").removeClass("hidden").html("<p>"+e+"</p><sub> "+Pe.i18n.t("errorMessages:msg").toUpperCase()+" "+t+"</sub>")},destroy:function(){Pe("#startSectionBtn",this.$el).off(),this.model.destroy(),this.unbind(),this.remove()}});var Ce=n(5),Re=n(6903),Ge=n(6814),Fe=n(7186),Ie=n(3270);const De=Fe.Model.extend({defaults:{section:null,sectionTitle:"",numQuestions:0,totalSectionTime:"0 minutes",sectionRubrick:"",sealCode:""},refreshSectionData:function(){var e=this.get("section"),t=e.getNumberOfQuestionItems(),n=TestEngine.getTestDefine(),r=n&&n.getChrome()&&"aimsweb"===n.getChrome().toLowerCase(),o=TestEngine.getNavigation().getCurrentSection().isLinear(),i=n.isTranscend(),s=o&&!r&&!i,a={sectionTitle:e.getTitle(),isNumQuestions:s,numQuestions:t,totalSectionTime:this.setSectionTime(e),sectionRubrick:e.getRubricblock()};e.getSealCode()?a.sealCode=Re.default.getSealCode(e._identifier):a.sealCode="",this.set(a)},getSealCode:function(){return this.get("section").getSealCode()&&""!==this.get("sealCode")},setSealCode:function(e){this.get("section"),Ie(document).trigger("testState.setSectionSealCode",e)},setSectionTime:function(e){return Ce.A.isSection()?e.getTimer()?Ce.A.buildTimeString(e.getTimer()*Ge.default.getTimeMultiplier()*60):Ie.i18n.t("startSection:notTimed"):""},destroy:function(){this.unbind()}});var Ne=n(7186),Me=Ne.Model.extend({defaults:{}});const Oe=Ne.Collection.extend({initialize:function(e,t){},model:Me});var Be=n(4026),He=n(7186),Ue=n(4523),je=n(3270),Ve=He.Model.extend({defaults:{testName:null,formId:null,securityLevel:null,formNumber:null,formNumberPartial:null,testStatusInd:null,disable:!1,unlockTest:!0,validSchedule:!1},initialize:function(){this.setFormNumberPartial()},setFormNumberPartial:function(){var e=0,t=this.get("formNumber");t.length>5&&(e=t.length-5);var n=t.substring(e,t.length);this.set("formNumberPartial",n)}}),We=He.Collection.extend({model:Ve,destroy:function(){this.unbind()}}),ze=He.View.extend({tagName:"li",className:"avail-test-row clearfix row-fluid",TestStatus:{READY:"N",ACTIVE:"I",EXIT:"E",RESUME:"R",RESUME_FORCE:"F",COMPLETE:"C"},template:Ue.template(je(f.A).filter("#teststabletemplate").html()),initialize:function(){Ue.bindAll(this,"render","updateEnabledForContext"),this.model.bind("change",this.render)},handleSecurityLevel:function(){TN8.fnOne("tn.secureError.found",this.updateEnabledForContext),Be.A.isThereError(this.model.get("securityLevel"),!0)},updateEnabledForContext:function(e,t){e=e||[];var n=!t,r=this.$el.find(".startTest");if(r.length>0){var o=!1===this.model.get("unlockTest"),i=this.model.get("testStatusInd");""===this.getStartBtnStatus(i,o,this.model.get("validSchedule"),n)?r.removeAttr("aria-disabled tabindex"):r.attr({"aria-disabled":"true",tabindex:"-1"})}je(document).trigger("inform.AvailableRowAdded")},getStartBtnStatus:function(e,t,n,r){var o=["I","E","C"].indexOf(e)>-1;return t||!n||o||!r?"disabled":""},getStartBtnText:function(e){var t,n="";switch(e){case"N":n=je.i18n.t("start");break;case"I":case"E":case"R":case"F":n=je.i18n.t("resume");break;case"C":n=je.i18n.t("complete")}return t=n,"C"!==e?t+='<i class="icon-chevron-right-double right"></i>':t='<i class="icon-ok left"></i>'+n,{text:n,textAndIcon:t}},render:function(){var e=!1===this.model.get("unlockTest"),t=this.model.get("testStatusInd"),n=this.getStartBtnText(t),r=("C"===t?"complete ":"btn-primary ")+"btn startTest",o={name:this.model.get("testName"),testId:this.model.get("formId"),btnClasses:r,disabled:"disabled",title:n.text+" Test",ariaLabel:n.text+" Test Button",btnText:n.textAndIcon,locked:e,lockIconSRText:"locked indicator"};return this.$el.html(this.template(o)),this},destroy:function(){this.unbind()}});const qe=He.View.extend({initialize:function(e){Ue.bindAll(this,"render","addRow","appendItem"),this.rowViews=[],this.testRows=e.testRows,this.collection=new We,this.collection.bind("add",this.appendItem),this.addRows(je.extend(!0,[],this.testRows),e)},addRows:function(e,t){if(e.length>0){var n=e.shift();je(document).one("inform.AvailableRowAdded",this.addRows.bind(this,e,t)),this.addRow({testName:n.testName,formId:n.formId,securityLevel:n.securityLevel,formNumber:n.formNumber,testStatusInd:n.testStatusInd,unlockTest:!!Ue.isUndefined(n.unlockTest)||n.unlockTest,validSchedule:n.validSchedule})}else je(document).trigger("inform.tableViewRendered")},addRow:function(e){var t=new Ve(e);this.collection.add(t)},appendItem:function(e){var t=new ze({model:e});this.rowViews.push(t),je(this.el).append(t.render().el),t.handleSecurityLevel()},secureLevelChanged:function(){for(var e=0;e<this.rowViews.length;e++)this.rowViews[e].handleSecurityLevel()},destroy:function(){this.unbind(),this.collection.unbind("add"),this.collection.destroy();for(var e=0;e<this.rowViews.length;e++)this.rowViews[e].destroy();this.rowViews=[],this.remove()}});var $e=n(7186),Xe=n(4523),Ke=n(3270),Ye=$e.View.extend({initialize:function(){Xe.bindAll(this,"render","handleStartTest","refreshAvailableTest","destroy","addStartTestListeners"),this.setElement(Ke("#content")[0]),this.template=Xe.template(Ke(f.A).filter("#teststemplate").html()),this.agreementTemplate=Xe.template(Ke(f.A).filter("#agreementtemplate").html()),this.testToStart=null,this.tableviews=[],TN8.fnOn("tn.testStart.render cleanup.logout",this.destroy)},render:function(e){return TN8.log("availableTests.render  . ",TN8.HELPFUL),this.$el.html(this.template()),Ke(document).off("inform.tableViewRendered",this.addStartTestListeners).on("inform.tableViewRendered",this.addStartTestListeners),this.makeTable(this.testCollection.toJSON()),this.$el.find(".refresh-available-tests").off("click").on("click",this.refreshAvailableTest),Ke(window).trigger("resize"),window.scrollTo(0,0),this.$el.append(this.agreementTemplate()),Ke("#agreementName",this.el).bind("keyup",(function(e){13===e.which&&Ke("#agreementBtn",this.el).trigger("click")})),Ke("#agreementBtn",this.$el).on("click",this.handleAgreementBtn),Ke("#agreementName",this.$el).on("keyup",this.handleAgreementName),Ke(document).trigger("tn.loadingModal.off"),Ke("#firstTabbable").focus(),Ke(document).trigger("navigated.availableTest"),this},addStartTestListeners:function(){this.$el.find(".startTest").off("click").on("click",this.handleStartTest)},refreshAvailableTest:function(){Ke(document).trigger("navigate.availableTest")},makeTable:function(e){var t="#tableTests";if(e.length>0){var n=new qe({testRows:e,el:t});this.tableviews.push(n)}else Ke(t,this.el).append('<p class="no-test-message">'+Ke.i18n.t("availableTest:noAvailableTests")+"</p>")},handleStartTest:function(e){var t=Ke(e.currentTarget);if(t.hasClass("startTest")&&!t.is('[aria-disabled="true"]')){e.preventDefault();var n=t.data("testid"),r=Xe.findWhere(this.testCollection.toJSON(),{formId:n.toString()});r=r||null,Ke(document).trigger("nagivate.startTest",r)}},destroy:function(){this.$el.find(".refresh-available-tests").off("click"),this.$el.find(".startTest").off();for(var e=0;e<this.tableviews.length;e++)this.tableviews[e].destroy();Ke(".available-tests").remove(),this.tableviews=[],this.unbind()},sortTests:function(e){var t=[],n=Xe.groupBy(e,(function(e){var t=parseInt(e.displayOrder);return!isNaN(t<=0?NaN:t)}));if(Xe.isArray(n[!0])){var r=Xe.groupBy(n[!0],(function(e){return parseInt(e.displayOrder)}));Xe.each(r,(function(e,n,r){e.length>1&&(e=Xe.sortBy(e,(function(e){return e.testName.toLowerCase()}))),t=t.concat(e)}))}if(Xe.isArray(n[!1])){var o=Xe.sortBy(n[!1],(function(e){return e.testName.toLowerCase()}));t=t.concat(o)}return t}});const Je=Ye;var Ze=n(1573),Qe=n(3270),et=n(4523),tt=function(){Qe("#declineTerms").click()};const nt={show:function(e,t){Qe("#TermModal").length>0&&Qe("#TermModal").remove();var n=et.template(Qe(f.A).filter("#termsAndConditions").html());Qe("#lastTabbable").after(n()),Qe("#termsCondMain").is(":empty")&&(Qe("#termsCondMain").append(e.tctext1),Qe("#termsCondFootNote").append(e.tctext2),Qe("#termsModalCheck .term-check-label").append(e.tctext3)),Qe("#TermModal").modal("show").tabRing(),Qe(document).trigger("TandC.toggle",Qe.i18n.t("termsAndConditions:termsandconditions"));var r=Qe('#TermModal input[type="checkbox"]'),o=Qe("#TermModal #acceptTerms"),i=Qe("#TermModal button.close");r.prop("checked",!1).on("click touchend",(function(){Qe(this).prop("checked")?o.removeAttr("aria-disabled tabindex"):o.attr({"aria-disabled":"true",tabindex:"-1"})})),i.on("click touchend",(function(){Qe("#TermModal").modal("hide").tabRing("off"),Qe("#TermDialog").remove(),Qe(document).trigger("TandC.toggle")})),o.attr({"aria-disabled":"true",tabindex:"-1"}).on("click touchend",(function(){r.prop("checked")&&(Qe("#TermModal").modal("hide").tabRing("off"),Qe("#TermDialog").remove(),Qe(document).trigger("TandC.toggle"),TN8.TestStateController.setTermsConditionAccepted(),t())})),Qe(document).trigger("deepZoomLayer.setCoupling",{title:Qe.i18n?Qe.i18n.t("termsAndConditions:termsandconditions"):"Terms and Conditions",html:"#TermModal"}),Qe("#TermModal").one("deepZoomLayer.hide",tt)}};n(8467);var rt=n(7186),ot=n(3270),it=n(4523);n(6763);const st=f.A,at=rt.View.extend({initialize:function(e){this.el=document.getElementById("content"),this.$el=ot(this.el),this.template=it.template(ot(st).filter("#micCheckTemplate").html()),this.appended=!1,this.finished=e,this.boundCleanBetweenRuns=this.cleanBetweenRuns.bind(this),ot(document).off("cleanup.betweenTest",this.boundCleanBetweenRuns).on("cleanup.betweenTest",this.boundCleanBetweenRuns),window.TN8||(window.TN8={})},render:function(){this.$el.html(this.template);var e=this,t=navigator.userAgent.toLowerCase(),n=TestEngine&&TestEngine._isAppMode(),r=ot("body").hasClass("ipad"),o=-1!==t.indexOf("linux")&&-1===t.indexOf("android"),i=r&&ot("body").hasClass("safari")&&!n,s=ot("body").hasClass("ie11"),a=ot("body").hasClass("edge"),c=ot("body").hasClass("safari")&&!r,l=void 0!==(navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),u=o||s||a||(c||i)&&!l;return ot(".tn8-mic-check-reset").click((function(){ot(this).hasClass("disabled")||e.reset()})),ot(".tn8-mic-check-help").click((function(){ot(this).hasClass("disabled")||(ot(".tn8-mic-check-gethelp").removeClass("hidden"),ot(".tn8-mic-check-container").addClass("hidden"))})),ot(".tn8-mic-check-goback").click((function(){ot(".tn8-mic-check-gethelp").addClass("hidden"),ot(".tn8-mic-check-container").removeClass("hidden")})),u?(ot(".tn8-mic-error-unsupported").removeClass("hidden"),ot(".tn8-mic-set-up-btn").addClass("disabled")):ot(".tn8-mic-set-up-btn").click((function(){var t=function(t){window.stream=t;var n=ot(".tn8-mic-check-mics")[0],o=!1,i=function(){ot(".recorder").on("playback-pending.VoiceRecorder",(function(){ot(".tn8-mic-check-help").addClass("disabled"),ot(".tn8-mic-check-reset").addClass("disabled"),r&&(ot(".tn8-mic-check-yes").addClass("disabled"),ot(".tn8-mic-check-no").addClass("disabled"))})),ot(".recorder").on("playback-start.VoiceRecorder",(function(){ot(".tn8-mic-check-btns-container").removeClass("hidden"),ot(".tn8-mic-check-prompt.stop").addClass("hidden"),ot(".tn8-mic-check-prompt.play").removeClass("hidden"),ot(".tn8-mic-check-question-icon").removeClass("hidden"),ot(".tn8-mic-check-headphones-icon").addClass("hidden"),ot(".tn8-mic-check-yes").removeClass("disabled"),ot(".tn8-mic-check-no").removeClass("disabled")})),ot(".recorder").on("playback-stop.VoiceRecorder",(function(){o||(ot(".tn8-mic-check-help").removeClass("disabled"),ot(".tn8-mic-check-reset").removeClass("disabled"))})),ot(".recorder").on("record-pending.VoiceRecorder",(function(){ot(".tn8-mic-check-help").addClass("disabled"),ot(".tn8-mic-check-reset").addClass("disabled")})),ot(".recorder").on("record-start.VoiceRecorder",(function(){ot(n).css("opacity",.75),n.setAttribute("disabled",!0),ot(".tn8-mic-check-tryagain").addClass("hidden")})),ot(".recorder").on("record-stop.VoiceRecorder",(function(){ot(".tn8-mic-check-prompt.record").addClass("hidden"),ot(".tn8-mic-check-prompt.stop").removeClass("hidden"),ot(".tn8-mic-check-headphones-icon").removeClass("hidden"),ot(".tn8-mic-check-speak-icon").addClass("hidden"),ot(".tn8-mic-check-help").removeClass("disabled"),ot(".tn8-mic-check-reset").removeClass("disabled")})),ot(".recorder").on("reset-complete.VoiceRecorder",(function(){ot(".tn8-mic-check-help").removeClass("disabled"),ot(".tn8-mic-check-reset").removeClass("disabled"),o=!1}))};ot(".tn8-mic-check-yes").one("click",(function(){ot(this).hasClass("disabled")||(ot(".recorder").recorder("stop"),e.removeDeviceChangeListener(),e.finished())})),ot(".tn8-mic-check-no").on("click",(function(){ot(this).hasClass("disabled")||(o=!0,ot(".tn8-mic-check-help").addClass("disabled"),ot(".tn8-mic-check-reset").addClass("disabled"),ot(".recorder").recorder("stop"),ot(".recorder").recorder("deleteRecording"),n.removeAttribute("disabled"),ot(n).css("opacity",1),ot(".tn8-mic-check-prompt.record").removeClass("hidden"),ot(".tn8-mic-check-prompt.play").addClass("hidden"),ot(".tn8-mic-check-prompt.stop").addClass("hidden"),ot(".tn8-mic-check-btns-container").addClass("hidden"),ot(".tn8-mic-check-tryagain").removeClass("hidden"),ot(".tn8-mic-check-question-icon").addClass("hidden"),ot(".tn8-mic-check-speak-icon").removeClass("hidden"))})),ot(n).on("change",(function(){ot(document).trigger("micCheck.micSelected"),e.stopStreamTracks(),ot(".recorder").recorder("destroy"),ot(".recorder").empty(),window.TN8.MicDeviceId=ot(this).val(),e.createRecorder(),i()})),ot(".tn8-mic-set-up-container").addClass("hidden"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(navigator.mediaDevices.ondevicechange=function(t){e.getMics().then((function(t){e.selectedMicDisconnected(t)&&navigator.mediaDevices.ondevicechange?(e.reset(),ot(".tn8-mic-error-dc").removeClass("hidden"),TN8.log("Microphone was disconnected")):e.buildMicDropdown(t)}))},e.getMics().then((function(t){t.length?(e.stopStreamTracks(),TN8.log(t,TN8.IMPORTANT),e.buildMicDropdown(t),window.TN8.MicDeviceId=t[0].deviceId,e.createRecorder(),i(),ot("#jGrowl").find(".jGrowl-error").remove(),ot(".tn8-mic-check-container").removeClass("hidden")):(TN8.log("MicCheck Error: No mic detected!",TN8.CRITICAL),e.showHelpWithError())}))):(e.createRecorder(),i(),ot(n).addClass("hidden"),ot(".tn8-mic-check-container").removeClass("hidden"),ot(".tn8-mic-select-label").addClass("hidden")),ot(".tn8-mic-check-diag").removeClass("hidden"),ot("#firstTabbable").focus()},n=function(t){TN8.log("MicCheck Error requesting mic access: "+t,TN8.CRITICAL),e.showHelpWithError()},o={audio:!0,video:!1};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(o).then(t).catch(n):navigator.getUserMedia?navigator.getUserMedia(o,t,n):ot("body").hasClass("ipad")&&t()})),ot(document).trigger("tn.micCheck.render",[ot.i18n.t("micCheck:micCheck")]),ot("#firstTabbable").focus(),this},showHelpWithError:function(){ot(".tn8-mic-check-container").addClass("hidden"),ot(".tn8-mic-set-up-container").addClass("hidden"),ot(".tn8-mic-check-diag").removeClass("hidden"),ot(".tn8-mic-check-gethelp").removeClass("hidden"),ot(".tn8-mic-check-gethelp .tn8-mic-check-goback").addClass("hidden"),ot(".tn8-mic-check-gethelp .tn8-mic-check-reset").removeClass("hidden"),ot(".tn8-mic-error-checksys").removeClass("hidden")},getMics:function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"audioinput"===e.kind&&"default"!==e.deviceId&&"communications"!==e.deviceId})),e(t)})).catch((function(e){t(e)}))}))},selectedMicDisconnected:function(e){for(var t in e)if(TN8.MicDeviceId===e[t].deviceId)return!1;return!0},buildMicDropdown:function(e){var t=ot(".tn8-mic-check-mics")[0];t.blur(),ot(t).empty(),e.forEach((function(e){var n=t.options.length;t[n]=new Option(e.label,e.deviceId)}))},showGrowl:function(e){ot("#jGrowl").find(".jGrowl-error").remove(),ot.jGrowl(e,{theme:"jGrowl-error"})},createRecorder:function(){ot(".recorder").recorder({id:"tn8-recorder-miccheck",recordingLength:7,attempts:0,allowReview:!0,micCheck:!0})},stopStreamTracks:function(){window.stream&&window.stream.getTracks().forEach((function(e){e.stop()}))},removeDeviceChangeListener:function(){navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=null)},reset:function(){this.removeDeviceChangeListener(),this.stopStreamTracks(),this.template=it.template(ot(st).filter("#micCheckTemplate").html()),ot(".tn8-allow-popup-overlay").remove(),this.appended=!1,ot(navigator.mediaDevices).off(),this.render()},cleanBetweenRuns:function(){this.removeDeviceChangeListener(),this.stopStreamTracks(),ot(navigator.mediaDevices).off(),this.doLog("cleanBetweenRuns"),ot(".tn8-mic-check-reset").off(),ot(".tn8-mic-check-help").off(),ot(".tn8-mic-check-goback").off(),ot(".tn8-mic-set-up-btn").off(),ot(".recorder").off(),window.TN8&&window.TN8.MicDeviceId&&delete window.TN8.MicDeviceId},doLog:function(){}});var ct=n(7186),lt=n(4523),ut=n(3270),dt=n(6763);const ft=ct.View.extend({introTemplate:lt.template(ut(f.A).filter("#introtemplate").html()),initialize:function(){lt.bindAll(this,"render","epatName","startTest","next","destroy")},render:function(){var e=TN8.Application.DataProvider.getStartTestInfo(),t=TN8.Application.DataProvider.getStartPartInfo(TestEngine.getNavigation().getCurrentTestPart().getIdentifier());t.title=void 0,this.info=ut.extend(e,t);var r=this.getTranslatedView(this.info);ut("#content").html(this.introTemplate(r)),/alt/i.test(TestEngine.getTestDefine().getChrome())&&Promise.all([n.e(3777),n.e(6021)]).then(n.bind(n,9892)).then((e=>{dt.log("Done loading Alt-Skin React layout")})),this.appendRubric(),ut(document).trigger("perform.addFTListner"),setTimeout(function(){ut(document).trigger("tn.testStart.render",this.info.resumed?ut.i18n.t("resumeTest"):ut.i18n.t("startTest")),ut(document).trigger("navigated.startTest"),ut(document).trigger("tn.loadingModal.off")}.bind(this),0),ut(window).trigger("resize")[0].scrollTo(0,0),ut("#home").remove(),ut(document).on("cleanup.betweenTest tn.test.start",this.destroy),ut("#backAvailableBtn").on("click",this.handleBackToAvailable),this.createStartHandler(),TN8?.utils?.focusFirstTabbable()},getTranslatedView:function(e){return TestEngine&&TestEngine.getAuthentication&&(e.welcomeMsg=lt.escape(ut.i18n.t("startTest:welcomeMsg",{name:TestEngine.getAuthentication().getRealName()}))),e.totalSections=ut.i18n.t("startTest:totalSections",{count:e.sections}),e.resumed?(e.startBtnText=ut.i18n.t("startTest:resumeTestNow"),e.startText=ut.i18n.t("startTest:resumeTest")):(e.startBtnText=ut.i18n.t("startTest:startTestNow"),e.startText=ut.i18n.t("startTest:startTest")),e},appendRubric:function(){if(this.info.isK2)ut("#header_right").addClass("k2-userDropdown"),ut("#crumbTrail").remove();else{var e=TestEngine.getTestDefine().getRubricblock(),t=e&&(e.body||e);t?(ut("#content .span12").append('<div id="rubricBlock" tabindex="-1" class="rubricblock-container clearfix">'+t+"</div>"),ut("#skipToInstructions > a").click((function(e){e.preventDefault(),ut("#rubricBlock").focus()}))):ut("#skipToInstructions").remove()}},createStartHandler:function(){var e=this.sequence=[],t=this.next,n=this.getTerms();n&&!TN8.TestStateController.getTermsConditionAccepted()&&e.push((function(){nt.show(n,t)})),this.info.vsr&&(e.push(this.epatName),ut("#studentName").on("input",(function(e){var t=!ut(this).val().trim();t&&ut(this).val(""),ut("#startTestBtn").prop("disabled",t)})),ut("#studentName").keypress((function(e){var t=e.keyCode||e.which,n=!ut(this).val().trim();13!=t||n||ut("#TermModal").is(":visible")||(ut("#startTestBtn").click(),e.preventDefault())}))),TN8.PnpController&&!TN8.PnpController.isRemoteTestProctoringEnabled()&&TN8.utils.isMicCheckOn()&&(TN8.utils.isIpadSafari()&&TN8.throw("",3162),e.push((function(){new at(t).render()}))),TN8.utils.isDynamicTTSOn()&&!TN8.utils.supportsDynamicTTS()&&TN8.throw("",2022),e.push(this.startTest),ut("#startTestBtn").on("click",function(t){!ut("#TermModal").is(":visible")&&e[0]()}.bind(this))},next:function(){this.sequence.shift(),"function"==typeof this.sequence[0]&&this.sequence[0]()},getTerms:function(){try{var e=JSON.parse(TestEngine.getTestDefine()._sourceJson.tcinfo);return e.tctext3=e.tctext3||ut.i18n.t("termsAndConditions:agreementDefault"),e}catch(e){TN8.log("test.js: Failed to parse Terms and Conditions: "+e.msg,TN8.CRITICAL)}},epatName:function(){var e=(ut("#studentName").val()||"").trim();e?(ut("#studentName").off("keypress"),TN8.Application.epatStudentName=e,ut(document).trigger("epat.name.entered",e),this.next()):TN8.throw("Name Required",TN8.errorType.VSR_NAME_REQUIRE)},startTest:function(){let e=TestEngine&&TestEngine.isPWA()?" TestNavPWA":"";TN8.log(JSON.stringify({currentFormNumber:TestEngine.getAuthentication().getCurrentForm().getNumber(),testId:TestEngine.getNavigation().getTestId(),partId:TestEngine.getNavigation().getCurrentTestPart().getIdentifier(),useragent:navigator.userAgent+e,clientVersion:TN8.Application.clientVersion},null,"\t"),TN8.CRITICAL),ut(document).trigger("tn.loadingModal.on"),Ze.A.block("f11"),Ze.A.block("f11",!0),ut(document).trigger("tn.test.start"),ut(document).trigger("inform.testPartDisplayed"),TN8.Application.NavigationController.beginTest()},getSaveToLocation:function(){return"saveTestState"},handleBackToAvailable:function(){ut(document).trigger("navigate.availableTest")},destroy:function(){ut(document).trigger("perform.removeFTListener"),ut("#startTestBtn").off("click"),ut("#studentName").off("input"),ut(document).off("cleanup.betweenTest tn.test.start",this.destroy)}});var pt=n(8525),ht=n(4691),mt=n(1969),gt=n(7837),_t=n(5977),vt=n(3334),bt=n(8653),yt=n(3270);const wt={getInstance:function(){return St||(St=function(){function e(e,n,o,i){var s=!1;if(TN8.log("ItemSaver.sendSaveRequest ",TN8.IMPORTANT),e&&"isLastCall"in e&&!0===e.isLastCall&&(s=!0),0!==n){if(!bt.A.checkJSONValidity(o))return TN8.throw("Response that was going to be sent is missing some fields.",TN8.errorType.WRONG_RESPONSE_ERROR),TN8.log(o),null;if(e&&e.fullData)TN8.log("ItemSaver.sendSaveRequest . Sending Combined NavSave call to engine.",TN8.CRITICAL),TestEngine.navigateAndSave(n,e.fullData,o,t.bind(this,s,i,!0,[e,n,o,!0]),r);else if(TestEngine.getNavigation().getCurrentItem().isItemPaired()){var a=TN8.Application.stitcher.separate(o.state,TestEngine.getNavigation().getCurrentPairedItemSet());TestEngine.saveMultipleItemResponses(TestEngine,a,o.test_state,t.bind(this,s,i,!1,[e,n,o]),r,s)}else TN8.log("ItemSaver.sendSaveRequest . Sending Item Response to engine to be saved.",TN8.CRITICAL),TestEngine.setItemResponse(TestEngine,n,o,t.bind(this,s,i,!1,[e,n,o,!0]),r,s)}else TN8.log("ItemSaver.sendSaveRequest . Something went wrong here , itemId "+n,TN8.CRITICAL)}function t(t,r,o,i,s){yt(document).trigger("inform.itemSaved");var a=s?s.msgCode:null;if(TN8.log("ItemSaver.handler_saveSuccess . errCode : "+a,TN8.CRITICAL),TN8.Application.error.successCheck(s,yt.proxy(e,this,...i,!0),a)){yt(document).trigger("tn.save.success"),r&&TN8.EWSController.ewsRetrySucessfull();var c=function(){var e;return TN8.apip&&TN8.apip.ttsObject&&TN8.apip.ttsObject.aslController&&(e=TN8.apip.ttsObject.aslController.exitPictureInPicture()),TN8.CatalogController&&TN8.CatalogController.CatalogASLController&&TN8.CatalogController.CatalogASLController.aslController&&(e=TN8.CatalogController.CatalogASLController.aslController.exitPictureInPicture()),e}();c?c.then((()=>{n(o,s)})).catch((e=>{TN8.log("Unable to exit picture in picture video",TN8.CRITICAL),n(o,s)})):n(o,s)}}function n(e,t){e?TN8.Dispatcher.trigger("performCatNavigation",t):TN8.Dispatcher.trigger("performNavigation")}function r(e){TN8.throw("Msg 3010:  Unable to save response.",TN8.errorType.SAVE_RESPONSE_ERROR)}return{saveItem:function(t){var n=vt.A.getInstance().getStateJSON(t);n&&e(t,n.itemId,n.savingObject,!1)},checkJSONValidity:bt.A.checkJSONValidity}}()),St}};var St,Et=n(7186),Tt=n(4523),At=n(3270);const xt=Et.Model.extend({thisClassName:"Saver",saverStatus:{SAVING:1,IDLE:2},initialize:function(){Tt.bindAll(this,"handleSendToEngine","resetSaverStatus","doNotSave","doSave"),_t.A.off("sendToEngine",this.handleSendToEngine),_t.A.on("sendToEngine",this.handleSendToEngine),At(document).off("tn.save.success cleanup.logout",this.resetSaverStatus).on("tn.save.success cleanup.logout",this.resetSaverStatus),this.applicationStatusInit()},applicationStatusInit:function(){Ae.default.subscribeCondition(Ae.default.actionNames.NavigateNext,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.NavigatePrev,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.NavigateTo,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.ForceLogout,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.NavigateSubmitTest,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.NavigateLoadNextSection,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.FetchSuccess,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.SaverSaving,this.thisClassName,this.saverStatus.IDLE),Ae.default.subscribeCondition(Ae.default.actionNames.NavigateStartSection,this.thisClassName,this.saverStatus.IDLE),Ae.default.registerEvent(Ae.default.actionNames.SaverSaving,"DoSaverSaving","ErrSaverSaving",_t.A),_t.A.off("DoSaverSaving").on("DoSaverSaving",this.doSave,this),_t.A.off("ErrSaverSaving").on("ErrSaverSaving",this.doNotSave,this),Ae.default.statusChange(this.thisClassName,this.saverStatus.IDLE)},handleSendToEngine:function(e){Ae.default.execute(Ae.default.actionNames.SaverSaving,e)},resetSaverStatus:function(){Ae.default.statusChange(this.thisClassName,this.saverStatus.IDLE)},doNotSave:function(){return TN8.log("Saver.doNotSave : Saver is in SAVING status already",TN8.IMPORTANT),!0},doSave:function(e){Ae.default.statusChange(this.thisClassName,this.saverStatus.SAVING);var t=TN8.Application.getCurrentContentView(),n=t&&t.getSaveToLocation?t.getSaveToLocation():"";if(e.overrideSaveTo&&(n=e.overrideSaveTo),TestEngine.getTestDefine().isTranscend()||TN8.Application.getCurrentContent()===TN8.Application.CONTENT_GAME_BREAK_BETWEEN_SECTIONS||TN8.Application.getCurrentContent()===TN8.Application.CONTENT_REMOTE_PROCTORING_SYSTEM_CHECK)return TN8.log("Saver.doSave . skipping because test is Transcend ",TN8.CRITICAL),TN8.Dispatcher.trigger("performNavigation"),void At(document).trigger("tn.save.success");TN8.log("Saver.handleSendToEngine  saveTo : "+n,TN8.IMPORTANT),n&&""!==n&&("saveAllModules"===n||e.fullData?(At(document).trigger("saver.saving"),e&&e.itemJSON?this.saveAllModules(e):TN8.Application.DataProvider.getResponses(this.sendToItemState.bind(this,e,n))):_t.A.trigger(n,e))},sendToItemState:function(e,t,n,r){(e=e||{}).itemJSON=r,this.saveAllModules(e)},saveAllModules:function(e){TN8.log("Saver.saveAllModules ",TN8.IMPORTANT),At(document).trigger("tn.saveAllModules",e),wt.getInstance().saveItem(e)},isSavingItem:function(e){return"saveAllModules"===e},isNotAnswered:function(){return!TN8.Application.itemController.isItemAnswered()},isFinishTest:function(e){return e&&!0===e.isLastCall},isTimerForceMove:function(e){return e&&!0===e.timerForceMove}});var Lt=n(4523),Pt=n(3270);const kt=new function(){return{CURRENT_LIBS_LOADED:0,ALL_LIBS_LOADED:3,init:function(){Lt.bindAll(this,Lt.functions(this)),Pt(document).on("perform.timerRequire",this.checkForTimer),Pt(document).on("cleanup.betweenTest",this.unregisterEvents)},checkForTimer:function(e,t){Ce.A.setLevel(),this.callback=t,Ce.A.isPart()?this.requirePartTimer():Ce.A.isTestTimer()?this.requireTestTimer():Ce.A.isSection()?this.requireSectionTimer():(this.callback(),this.callback=null)},requireTestTimer:function(){this.CURRENT_LIBS_LOADED=0,Promise.all([n.e(4884),n.e(5671)]).then(n.bind(n,5671)).then(this.requireSuccess).catch(this.requireError),n.e(7032).then(n.bind(n,7032)).then(this.requireSuccess).catch(this.requireError),Promise.all([n.e(4884),n.e(2478)]).then(n.bind(n,2478)).then(this.requireSuccess).catch(this.requireError)},requirePartTimer:function(){this.CURRENT_LIBS_LOADED=0,Promise.all([n.e(4884),n.e(1180)]).then(n.bind(n,1180)).then(this.requireSuccess).catch(this.requireError),n.e(1833).then(n.bind(n,1833)).then(this.requireSuccess).catch(this.requireError),Promise.all([n.e(4884),n.e(671)]).then(n.bind(n,671)).then(this.requireSuccess).catch(this.requireError)},requireSectionTimer:function(){this.CURRENT_LIBS_LOADED=0,Promise.all([n.e(4884),n.e(9060)]).then(n.bind(n,9060)).then(this.requireSuccess).catch(this.requireError),n.e(7795).then(n.bind(n,7795)).then(this.requireSuccess).catch(this.requireError),Promise.all([n.e(4884),n.e(8417)]).then(n.bind(n,8417)).then(this.requireSuccess).catch(this.requireError)},unregisterEvents:function(){Pt(document).off("perform.timerRequire",this.checkForTimer).off("cleanup.betweenTest",this.unregisterEvents),this.callback=null},requireSuccess:function(e){this.CURRENT_LIBS_LOADED++,this.CURRENT_LIBS_LOADED>=this.ALL_LIBS_LOADED&&(TN8.log("TimerRequire SUCCESS",TN8.IMPORTANT),this.callback(),this.callback=null)},requireError:function(e){TN8.log("TimerRequire ERROR : "+e,TN8.IMPORTANT),TN8.throw("",TN8.errorType.TIMER_REQUIRE_ERROR)}}};var Ct=n(7531),Rt=n(3943),Gt=n(3270);var Ft=n(4523),It=n(3270);var Dt=n(3270);var Nt=n(6963),Mt=n(3670),Ot=n(2710),Bt=n(7618),Ht=n(5932),Ut=n(3270),jt=n(6763),Vt=function(){return this._curTimeout=0,this._maxTimeout=0,this._timer=null,this._lastTimestamp=null,this._startListening=this._startListening.bind(this),this._handleStartEvents=this._handleStartEvents.bind(this),this._destroy=this._destroy.bind(this),this._resetTimer=this._resetTimer.bind(this),this._updateTimer=this._updateTimer.bind(this),this._doExtraLogging=!1,this._closeWarningGrowlEvents="tn.nav.start  tn.exitmodal.show inform.timeoutModalOn tn.error.fatal tn.ews.on",this._isWarningShown=!1,this._warningSeconds=30,this._activityEvents="mousemove mousedown mouseup click touchstart touchend touchmove keydown keyup keypress",this._startEvents="inactivityTimer.selectTestDone",this._destroyEvents="cleanup.betweenTest perform.exitApplication navigate.EmergencyExit tn.errorPage",this};Vt.prototype.init=function(){this._startListening()},Vt.prototype._startListening=function(){Ut(document).off(this._startEvents,this._handleStartEvents).on(this._startEvents,this._handleStartEvents),Ut(document).off(this._destroyEvents,this._destroy).on(this._destroyEvents,this._destroy)},Vt.prototype._handleStartEvents=function(){TN8.Application&&TN8.Application.config&&TN8.Application.config.inactivityTimer&&TN8.Application.config.inactivityTimer>0&&(this._lastTimestamp=Date.now(),this._maxTimeout=this._curTimeout=6e4*TN8.Application.config.inactivityTimer,TN8.log("Inactivity timeout is active. Timeout is "+TN8.Application.config.inactivityTimer+" minutes.",TN8.IMPORTANT),this._createTimer())},Vt.prototype._createTimer=function(){this._doExtraLogging=!0===window.doInactivityTimerLogging,Ut(document).on(this._activityEvents,this._resetTimer),Ut(document).on(this._activityEvents+" "+this._closeWarningGrowlEvents,this._closeWarning),this._updateTimer()},Vt.prototype._resetTimer=function(e){this._doExtraLogging&&jt.log("Inactivity timer reset by: "+e.type),this._curTimeout=this._maxTimeout,this._isWarningShown=!1},Vt.prototype._updateTimer=function(){var e=Date.now(),t=this._timeBetween(e,this._lastTimestamp);this._curTimeout-=t,this._lastTimestamp=e,this._doExtraLogging&&jt.log("#### update inactivity timer: Diff millis between ticks: "+t+", Time left: "+this._curTimeout+" millis"),this._curTimeout>0?this._timer=window.setTimeout(this._updateTimer,1e3):this._timeExpired(),this._curTimeout<1e3*this._warningSeconds&&this._curTimeout>1&&!this._isWarningShown&&this._showWarning()},Vt.prototype._timeBetween=function(e,t){var n=e-t;return n<0&&(n=0),n},Vt.prototype._timeExpired=function(){TN8.log("Inactivity Timer: User logged out due to inactivity!",TN8.IMPORTANT),Ut(document).trigger("inform.inactivityTimeExpired"),Ut(document).off(this._activityEvents,this._resetTimer),Ut(document).off(this._activityEvents+" "+this._closeWarningGrowlEvents,this._closeWarning);var e=Ut.i18n.t("errorMessages:"+TN8.errorType.INACTIVITY_TIMEOUT);TN8.Application.exitWithoutAskingNotify({message:e,errorType:TN8.errorType.INACTIVITY_TIMEOUT})},Vt.prototype._showWarning=function(){var e=Ut.i18n.t("errorMessages:inactivityTimeWarn").replace("__sec__",this._warningSeconds),t={theme:"warning",life:1e3*this._warningSeconds,sticky:!1,group:"inactivitywarn"};Ut.jGrowl(e,t),this._isWarningShown=!0},Vt.prototype._closeWarning=function(){Ut("div.jGrowl").find(".inactivitywarn").trigger("jGrowl.close"),this._isWarningShown=!1},Vt.prototype._destroy=function(e,t){"testnavLoginBtn"!==t&&(Ut(document).off(this._activityEvents,this._resetTimer),Ut(document).off(this._activityEvents+" "+this._closeWarningGrowlEvents,this._closeWarning),window.clearTimeout(this._timer),this._timer=null,this._isWarningShown=!1)};const Wt=Vt;var zt=n(3270);const qt=Je.extend({initialize:function(e){Je.prototype.initialize.call(this),this.callback=e},render:function(){return TN8.log("availableParts.render  . ",TN8.HELPFUL),this.testCollection={toJSON:function(){return TN8.Application.DataProvider.getStartTestInfo().parts}},Je.prototype.render.call(this,arguments),zt(document).trigger("inform.availablePartsLoaded"),zt(document).trigger("tn.availableParts.render"),this},refreshAvailableTest:function(){this.render()},makeTable:function(e){for(var t=[],n=0;n<e.length;n++){var r;switch(e[n].partStatus){case"N":case"C":case"I":case"R":r=e[n].partStatus;break;case"E":r="R";break;default:r="N"}"C"!==r&&t.push({testName:e[n].id,formId:e[n].id,formNumber:e[n].id,testStatusInd:r,disable:!1,unlockTest:e[n].unlockPart,validSchedule:!0})}Je.prototype.makeTable.call(this,t)},handleStartTest:function(e){var t=zt(e.currentTarget);if(t.hasClass("startTest")&&!t.is('[aria-disabled="true"]')){e.preventDefault();var n=t.data("testid"),r=TestEngine.getTestDefine().getPartById(n);TestEngine.getNavigation().navigateTestPart(r),zt(document).trigger("tn.loadingModal.on"),zt(document).trigger("testState.setPartStatus","I"),this.callback({startTest:!0})}}});var $t=n(1038),Xt=n(9294),Kt=n(3270),Yt=function(){this._coupling=void 0,this.isActive=!1,this.positionDetails={},this._closeEvents="deepZoomLayer.detachCoupling timerTimeout navigate.EmergencyExit tn.nav.start exitWithoutAsking tn.ews.on contrast.modal.close Inform.fatalError overtimeSpecifiedStart destroyTimedOvertime",this._couplingQueue=[],this.init()};Yt.prototype.init=function(){if(!Kt("#deepZoomLayer")[0]){var e=Kt("<div>",{id:"deepZoomLayer"}).append(Kt("<div>",{id:"deepZoomHeader"}).append(Kt("<span>",{id:"deepZoomTitle"})).append(Kt("<button>",{id:"deepZoomClose",class:"close",tabindex:0}).append(Kt("<i>",{class:"icon-remove"})))).append(Kt("<div>",{id:"deepZoomLayerBody"}));Kt("body").prepend(e),Kt("#deepZoomLayer").hide(),this._attachListeners()}this._zoomCheck()},Yt.prototype._attachListeners=function(){Kt("#deepZoomClose").on("keydown",Kt.proxy(this._handleCloseKeydown,this)),Kt("#deepZoomClose").on("click",Kt.proxy(this._close,this)),Kt(document).on(this._closeEvents,Kt.proxy(this._close,this)),Kt(document).on("deepZoomLayer.setCoupling",Kt.proxy(this._setCoupling,this)),Kt(window).on("resize",Kt.proxy(this._zoomCheck,this)),Kt(document).on("ItemController.ItemLoaded",Kt.proxy(this._notifyStatus,this)),Kt(document).on("deepZoomLayer.getStatus",Kt.proxy(this._getStatus,this)),Kt("#deepZoomLayer").on("scroll",Kt.proxy(this._adjustHeaderPosition,this)),Kt("#deepZoomLayer").on("focusout",(function(e){e.stopPropagation()}))},Yt.prototype._detachListeners=function(){Kt("#deepZoomClose").off("keydown",Kt.proxy(this._handleCloseKeydown,this)),Kt("#deepZoomClose").off("click",Kt.proxy(this._close,this)),Kt(document).off(this._closeEvents,Kt.proxy(this._close,this)),Kt(document).off("deepZoomLayer.setCoupling",Kt.proxy(this._setCoupling,this)),Kt(window).off("resize",Kt.proxy(this._zoomCheck,this)),Kt(document).off("ItemController.ItemLoaded",Kt.proxy(this._notifyStatus,this)),Kt(document).off("deepZoomLayer.getStatus",Kt.proxy(this._getStatus,this)),Kt("#deepZoomLayer").off("scroll",Kt.proxy(this._adjustHeaderPosition,this)),Kt("#deepZoomLayer").off("focusout",(function(e){e.stopPropagation()}))},Yt.prototype._notifyStatus=function(){this.isActive&&Kt(document).trigger("deepZoomLevel.enter")},Yt.prototype._getStatus=function(e,t){t(this.isActive)},Yt.prototype._isAboveDeepZoomThreshold=function(){return window.innerWidth>480},Yt.prototype._zoomCheck=function(){this._isAboveDeepZoomThreshold()?this._disableOnZoomOut():this._enableOnZoomIn()},Yt.prototype._disableOnZoomOut=function(){this.isActive&&(this.isActive=!1,Kt(document).trigger("deepZoomLevel.exit")),this._coupling&&(this._removeCloseButtonHandlers(),this._hide(),this._coupling=null)},Yt.prototype._enableOnZoomIn=function(){this.isActive||(this.isActive=!0,Kt(document).trigger("deepZoomLevel.enter")),this._coupling&&this._activateCoupling()},Yt.prototype._makeCouplingObject=function(e){return{html:e.html,title:e.title,hideCallback:e.hideCallback,hideCloseButton:!!e.hideCloseButton,closeButtons:e.closeButtons,specialCare:e.specialCare,specialCleanUp:e.specialCleanUp,showing:!1}},Yt.prototype._setCoupling=function(e,t){if(this.isActive){var n=this._makeCouplingObject(t);this._coupling?n.html!==this._coupling.html&&this._couplingQueue.push(n):(this._coupling=n,this._activateCoupling())}},Yt.prototype._activateCoupling=function(){if(!this._coupling.showing){var e=Kt("#deepZoomClose");this._coupling.hideCloseButton?e.addClass("hidden"):e.removeClass("hidden"),this._acceptHTML(this._coupling),this._addCloseButtonHandlers(),this._coupling.showing=!0}},Yt.prototype._addCloseButtonHandlers=function(){var e=this._coupling.closeButtons;if(e)for(var t=0;t<e.length;t++)Kt("#deepZoomLayerBody").find(e[t]).on("click",Kt.proxy(this._close,this))},Yt.prototype._removeCloseButtonHandlers=function(){var e=this._coupling.closeButtons;if(e)for(var t=0;t<e.length;t++)Kt("#deepZoomLayerBody").find(e[t]).off("click",Kt.proxy(this._close,this))},Yt.prototype._acceptHTML=function(e){if(this.isActive){var t=Kt(e.html);this.positionDetails.parent=Kt(e.html)[0].parentElement,this.positionDetails.previousSibling=Kt(e.html)[0].previousSibling,this.positionDetails.nextSibling=Kt(e.html)[0].nextSibling,Kt("#deepZoomLayerBody").append(t),Kt("#deepZoomTitle").empty().append(e.title),this._show()}},Yt.prototype._show=function(){Kt("body").css("overflow","hidden"),this._resetHeaderPosition(),Kt("#deepZoomLayer").show(),"on"===Kt("#deepZoomLayerBody :first").data("tabRing")&&Kt("#deepZoomLayerBody :first").tabRing("off"),this._coupling.specialCare&&this._coupling.specialCare(),Kt("#deepZoomLayer").tabRing(),window.setTimeout((function(){Kt("#deepZoomLayer")&&Kt("#deepZoomLayer").scrollTop(0).scrollLeft(0)}),20)},Yt.prototype._hide=function(){Kt("#deepZoomLayer").tabRing("off"),this._replaceHtml(),Kt("body").css("overflow",""),Kt("#deepZoomLayer").hide(),Kt("#deepZoomLayerBody").empty()},Yt.prototype._close=function(){if(this._coupling){this._removeCloseButtonHandlers(),this._hide();var e=this._coupling.html;this._coupling.hideCallback&&this._coupling.hideCallback(),this._coupling=void 0,Kt(e).trigger("deepZoomLayer.hide"),this._couplingQueue.length>0&&(this._coupling=this._couplingQueue.shift(),this._activateCoupling())}},Yt.prototype._handleCloseKeydown=function(e){13!==e.which&&32!==e.which||(e.preventDefault(),Kt("#deepZoomClose").click())},Yt.prototype._replaceHtml=function(){this._coupling.specialCleanUp&&this._coupling.specialCleanUp(),Kt(".deepZoomHtml").remove();var e=Kt("#deepZoomLayerBody :first");"off"===e.data("tabRing")&&e.tabRing(),this.positionDetails.previousSibling?Kt(this.positionDetails.previousSibling).after(e[0]):this.positionDetails.nextSibling?Kt(this.positionDetails.nextSibling).before(e[0]):Kt(this.positionDetails.parent).append(e[0]),this.positionDetails={}},Yt.prototype._adjustHeaderPosition=function(){var e=Kt("#deepZoomLayer")[0].scrollLeft;this._coupling&&this._coupling.showing&&e+"px"!==Kt("#deepZoomHeader").css("margin-left")&&Kt("#deepZoomHeader").css("margin-left",e)},Yt.prototype._resetHeaderPosition=function(){Kt("#deepZoomHeader").css("margin-left",0)},Yt.prototype.destroy=function(){this._detachListeners(),Kt("#deepZoomLayer").remove()},TN8.deepZoomLayer=new Yt;const Jt=Yt;var Zt=n(6651),Qt=n(3270),en=n(6763);const tn={interactionIframes:[],interactionResponses:[],interactionRestoreResponses:[],iframeCounter:0,ttsPCIList:[],LaunchPCI:function(e,t,n,r){void 0===n&&(n="800px"),void 0===r&&(r="600px");var o,i=Qt("#"+e);o=i.hasClass("etspci")?"childTestlet":i.hasClass("poppci")?"childPOPWidget":i.hasClass("tccpci")?"childTCCWidget":i.hasClass("tnwidgetpci")?"childTestNavWidget":"child",i.html('<iframe id="'+e+'_iframe" name="'+e+'_iframe" style="width:'+n+";height:"+r+';border:none;" src="/client/public/javascripts/pci/'+o+".html?identifier="+t+'"></iframe>'),this.interactionIframes[t]=i.find("#"+e+"_iframe")[0].contentWindow,this.iframeCounter++},InteractionChildReady_Reply:function(e,t){var n=qtiCustomInteractionContext.getPCIConfiguration(e),r=qtiCustomInteractionContext.getPCIProperties(e);r.pnp=null!==r?this._initColorContrastObject(this._getTestNavContrastSettings(),null,null):{};var o={markup:n.markup,bridge:n.bridge,custom:n.hasOwnProperty("custom")?n.custom:null,properties:r};this.SetInteractionConfiguration_Request(e,o),Qt(document).one("ItemController.ItemLoaded",(()=>{Qt(document).trigger("ItemResponseChanged"),this.Interaction_SetContrast_Request(r.pnp.contrastColors)}))},SetInteractionConfiguration_Request:function(e,t){this.interactionIframes[e].postMessage({message:"SetInteractionConfiguration_Request",configuration:t},"*")},SetInteractionConfiguration_Reply:function(e,t){this.interactionIframes[e].postMessage({message:"InteractionInitialize_Request",interactionId:e},"*")},Interaction_Disable_Request:function(e,t){this.interactionIframes[e].postMessage({message:"Interaction_Disable_Request",interactionId:e,id:t},"*")},Interaction_GetResponse_Request:function(e){this.interactionIframes[e].postMessage({message:"Interaction_GetResponse_Request",interactionId:e},"*")},Interaction_GetResponse_Reply:function(e,t){this.interactionResponses[e]=t,Qt(document).trigger("pciplatform.saveResponse.done",{responseIdentifier:e,response:t})},Interaction_SetResponse_Request:function(e,t){this.interactionIframes[e].postMessage({message:"Interaction_SetResponse_Request",interactionId:e,response:t},"*")},Interaction_SetResponse_Reply:function(e,t){},Interaction_EndTelemetrySession_Request:function(e){this.interactionIframes[e].postMessage({message:"Interaction_EndTelemetrySession_Request",interactionId:e},"*")},Interaction_SetContrast_Request:function(e){if(e.hasOwnProperty("colorForeground")&&e.hasOwnProperty("colorBackground")){var t=this._initColorContrastObject(null,e.colorForeground,e.colorBackground);for(var n in this.interactionIframes)this.interactionIframes[n].postMessage({message:"Interaction_SetContrast_Request",interactionId:n,configuration:t},"*")}},Interaction_NotifyReady:function(e,t){if(this.interactionResponses[e]=null,void 0!==this.interactionRestoreResponses[e])this.Interaction_SetResponse_Request(e,this.interactionRestoreResponses[e]);else{var n=e+"_pciLoaded",r={pciIdentifier:e};TN8.log("interactiveObjectRegister.notifyReady id:"+e,TN8.IMPORTANT),Qt(document).trigger(n,r)}this.bindTTS(e,t),this.bindColorContrastChange(e)},bindTTS:function(e,t){var n=t&&t.skipElementsIds&&t.skipElementsIds.length>0?Array(t.skipElementsIds):null;this.ttsPCIList.push({id:e,skipElementsIds:n}),this.addTTSListeners(),this.isTtsPciAvailable()},bindColorContrastChange:function(){this.addColorContrastChangeListener()},Reset:function(){for(var e in this.ttsPCIList=[],this.removeTTSListeners(),this.removeColorContrastChangeListener(),this.interactionIframes)delete this.interactionIframes[e],delete this.interactionResponses[e],delete this.interactionRestoreResponses[e],this.iframeCounter=0},SaveAllAsynchPCIResponses:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=""),this._initResetResponses();var n=0,r=0;for(var o in this.interactionResponses)r++;0===r&&Qt(document).trigger("TN8.Application.AllAsynchPCIResponsesReady",{isGenerateJson:e,target:t});var i=function(o,s){++n===r&&(Qt(document).off("pciplatform.saveResponse.done",i),Qt(document).trigger("TN8.Application.AllAsynchPCIResponsesReady",{isGenerateJson:e,target:t}))};for(var o in Qt(document).off("pciplatform.saveResponse.done",i).on("pciplatform.saveResponse.done",i),this.interactionResponses)tn.Interaction_GetResponse_Request(o)},Interaction_SetResponse_Promise:function(e,t){this.interactionRestoreResponses[e]=t},LoadAsyncPCIState:function(e,t,n){null!=n&&this.Interaction_SetResponse_Promise(e,n)},_initResetResponses:function(){for(var e in this.interactionResponses)this.interactionResponses[e]=null},_initColorContrastObject:function(e,t,n){var r={},o={"default-bgc":{fgc:"#000000",bgc:"#FFFFFF"},black:{fgc:"#000000",bgc:"#FFFFFF"},"black-cream-bgc":{fgc:"#000000",bgc:"#FFFACD"},"black-lblue-bgc":{fgc:"#000000",bgc:"#ADD8E6"},"black-lmagenta-bgc":{fgc:"#000000",bgc:"#EE82EE"},"black-rose-bgc":{fgc:"#000000",bgc:"#ffd0ff"},"white-black-bgc":{fgc:"#FFFFFF",bgc:"#000000"},"yellow-blue-bgc":{fgc:"#F5E727",bgc:"#0000CC"},"dgray-pgreen-bgc":{fgc:"#6E6E6E",bgc:"#A3AD9E"}};return null!=e&&(""==e&&(e="default-bgc"),t=o[e].fgc,n=o[e].bgc),r.contrastColors={colorForeground:t,colorBackground:n},r},addColorContrastChangeListener:function(){Qt(document).off("tn.accessibility.contrastColorChange",Qt.proxy(this.onColorContrastChange,this)).on("tn.accessibility.contrastColorChange",Qt.proxy(this.onColorContrastChange,this))},removeColorContrastChangeListener:function(){Qt(document).off("tn.accessibility.contrastColorChange",Qt.proxy(this.onColorContrastChange,this))},addTTSListeners:function(){Qt(document).on("tts.pci.highlight",Qt.proxy(this.onHighlight,this)),Qt(document).on("tts.pci.removeAllHighlights",Qt.proxy(this.onRemoveAllHighlights,this)),Qt(document).on("tts.pci.inject",Qt.proxy(this.onInject,this)),Qt(document).on("tts.pci.stop",Qt.proxy(this.onStop,this)),Qt(document).on("tts.pci.setClickToHear",Qt.proxy(this.onClickToHear,this)),Qt(document).on("tts.pci.isAvailable",Qt.proxy(this.isTtsPciAvailable,this))},removeTTSListeners:function(){Qt(document).off("tts.pci.highlight",Qt.proxy(this.onHighlight,this)),Qt(document).off("tts.pci.removeAllHighlights",Qt.proxy(this.onRemoveAllHighlights,this)),Qt(document).off("tts.pci.inject",Qt.proxy(this.onInject,this)),Qt(document).off("tts.pci.stop",Qt.proxy(this.onStop,this)),Qt(document).off("tts.pci.setClickToHear",Qt.proxy(this.onClickToHear,this)),Qt(document).off("tts.pci.isAvailable",Qt.proxy(this.isTtsPciAvailable,this))},isTtsPciAvailable:function(){this.ttsPCIList&&this.ttsPCIList.length>0&&Qt(document).trigger("tts.pci.isAvailable.reply",JSON.stringify(this.ttsPCIList))},onRemoveAllHighlights:function(e){this.ttsPCIList.length&&this.ttsPCIList.forEach((e=>{this.interactionIframes[e.id].postMessage({message:"tts.pci.removeAllHighlights"},"*")}))},onClickToHear:function(e,t){this.ttsPCIList.length&&this.ttsPCIList.forEach((e=>{this.interactionIframes[e.id].postMessage({message:"tts.pci.clickToHear",clickToHear:t.clickToHear},"*")}))},onStop:function(e){this.ttsPCIList.length&&this.ttsPCIList.forEach((e=>{this.interactionIframes[e.id].postMessage({message:"tts.pci.stop"},"*")}))},onInject:function(e,t){this.ttsPCIList.length&&this.ttsPCIList.forEach((e=>{var n=t?JSON.stringify(t.syncMarks):void 0,r=t?JSON.stringify(t.apipJson):void 0;r&&n&&this.interactionIframes[e.id].postMessage({message:"tts.pci.inject",apipJson:r,sync:n},"*")}))},onHighlight:function(e,t){this.ttsPCIList.length&&this.ttsPCIList.forEach((e=>{var n=Qt.extend(!0,{},t.curWord);n.element={},this.interactionIframes[e.id].postMessage({message:"tts.pci.highlight",curWord:JSON.stringify(n)},"*")}))},onColorContrastChange:function(e){tn.Interaction_SetContrast_Request(e)},_getTestNavContrastSettings:function(){const e=Qt("#contrastCss");return 0!==e.length?{rose:"black-rose-bgc",pgreen:"dgray-pgreen-bgc",lmagenta:"black-lmagenta-bgc",lblue:"black-lblue-bgc",cream:"black-cream-bgc",blue:"yellow-blue-bgc",black:"white-black-bgc"}[e.attr("href").split("contrasts/")[1].replace(".css","")]:"default-bgc"},ReceiveMessage:function(e){switch(e.data.message){case"InteractionChildReady_Reply":tn.InteractionChildReady_Reply(e.data.interactionId,e.data.success);break;case"SetInteractionConfiguration_Reply":tn.SetInteractionConfiguration_Reply(e.data.interactionId,e.data.success);break;case"Interaction_GetResponse_Reply":tn.Interaction_GetResponse_Reply(e.data.interactionId,e.data.response);break;case"Interaction_SetResponse_Reply":tn.Interaction_SetResponse_Reply(e.data.interactionId,e.data.success);break;case"InteractionReady_Reply":tn.InteractionReady_Reply(e.data.success);break;case"Interaction_NotifyReady":tn.Interaction_NotifyReady(e.data.interactionId,e.data.ttsData);break;case"Interaction_NotifyUpdate":tn.Interaction_NotifyUpdate(e.data.interactionId);break;case"tts.pci.listen":Qt(document).trigger("contextMenu.tts.tracks",{tracks:e.data.tracks});break;case"tts.pci.injectionReady":Qt(document).trigger("tts.pci.injectionReady");break;default:en.log("Unhandled message:",e.data.message)}}},nn=tn;n(7269),n(8302);var rn,on,sn,an=n(52),cn=n(3270);rn=function(e){var t,n,r,o,i,s;function a(e){var t;return(t="function"!=typeof e?o[e]:e)?n.filter(t):n}function c(e){return e.target&&!cn(e.target).hasClass("disabled")&&(e.target.matches(".laser-scroll-item")||e.target.matches(".bookmark-sprite")&&!cn(e.target.parentNode).hasClass("disabled")||e.target.matches(".item-locking-sprite")||e.target.matches(".circle-sprite"))}function l(e,t){var n;if(e.matches(".laser-scroll-item")&&e.hasAttribute("itemid"))n=e.getAttribute("itemid");else if(e.matches(".bookmark-sprite")||e.matches(".item-locking-sprite")||e.matches(".circle-sprite")){var r=e.closest(".laser-scroll-item");if(!r.hasAttribute("itemid"))return;n=r.getAttribute("itemid")}return t.filter((e=>e.id===n))}function u(e){if(e){var t=cn(e.el).attr("aria-label")?cn(e.el).attr("aria-label")+" current item":"";e.selected=!0,b(e)||cn(e.el).addClass("laser-scroll-item-selected"),""!==t&&cn(e.el).attr("aria-label",t)}}function d(e){setTimeout((function(){e.focus()}),0)}function f(e){e.length>0&&(e.addClass("hovered"),(!TN8.deepZoomLayer||window.innerWidth>480)&&e.attr("tabindex",0))}function p(e){e.length>0&&(e.removeClass("hovered"),(!TN8.deepZoomLayer||window.innerWidth>480)&&e.attr("tabindex",-1))}function h(e){var n;35===e.which?n=cn(".laser-scroll-item",t).filter(":last"):36===e.which?n=cn(".laser-scroll-item",t).filter(":first"):38===e.which||9===e.which&&e.shiftKey?(n=cn(".laser-scroll-item:focus",t).prevAll().filter(":first"),TN8.Application.currentContent===TN8.Application.CONTENT_EPATREPORT&&0===n.length&&(n=cn(".laser-scroll-item-unselectable:focus",t).prevAll().filter(":first"))):40!==e.which&&9!==e.which||(n=cn(".laser-scroll-item:focus",t).nextAll().filter(":first"),TN8.Application.currentContent===TN8.Application.CONTENT_EPATREPORT&&0===n.length&&(n=cn(".laser-scroll-item-unselectable:focus",t).nextAll().filter(":first"))),n.length>0&&!n.hasClass("disabled")&&(p(cn(".laser-scroll-item",t)),f(n)),9!==e.which&&(d(n),e.preventDefault())}function m(e){e.target&&e.target.matches(".laser-scroll-item")&&"focusin"===e.type&&!cn(e.target).hasClass("hovered")&&f(cn(e.target))}function g(e){e.target&&e.target.matches(".laser-scroll-item")&&"focusout"===e.type&&cn(e.target).hasClass("hovered")&&p(cn(".laser-scroll-item",t))}function _(){return cn("<div>").css({margin:0})}function v(){return!!("ontouchstart"in window||navigator.maxTouchPoints>0)}function b(e){return TN8.Application.currentContent===TN8.Application.CONTENT_EPATREPORT&&e.title&&-1!==e.title.indexOf(cn.i18n.t("section"))}return n=e.dataSource,(o=e.dataFilters||{}).selected=function(e){return e.selected},i=e.itemRenderer,t=e.container,r=_(),s=_(),r.addClass("laser-scroll-container"),s.addClass("laser-scroll-items"),s.attr("role","menu"),s.css({height:"100%",overflow:"hidden","overflow-y":"scroll","-webkit-overflow-scrolling":"touch"}),r.html(s),t.append(r),r.on("keydown",(function(e){switch(e.which){case 9:if(TN8.deepZoomLayer&&window.innerWidth<=480)h(e);else{var n=cn(".review-dropdown-tab.unselectable.active");setTimeout((function(){n.focus()}),0)}break;case 35:case 36:case 38:case 40:h(e);break;case 13:case 32:cn(".laser-scroll-item:focus",t).click(),e.preventDefault()}})),window.innerWidth,window.innerHeight,{data:a,show:function(){var e,n;v()&&(e=".laser-scroll-container",cn(document).on("touchmove.laserscroll pointermove.laserscroll",(function(e){e.preventDefault()})),cn("body").on("touchstart.laserscroll pointerdown.laserscroll",e,(function(e){0===e.currentTarget.scrollTop?e.currentTarget.scrollTop=1:e.currentTarget.scrollHeight===e.currentTarget.scrollTop+e.currentTarget.offsetHeight&&(e.currentTarget.scrollTop-=1)})),cn("body").on("touchmove.laserscroll pointermove.laserscroll",e,(function(e){e.stopPropagation()})),/iphone|ipad|ipod|android/i.test(navigator.userAgent.toLowerCase())&&cn("body").css("overflow","hidden")),t.show(),(n=a("selected")[0])||(n=a()[0]),d(cn(n.el))},hide:function(){v()&&(cn(document).off("touchmove.laserscroll pointermove.laserscroll"),cn("body").off("touchstart.laserscroll touchmove.laserscroll pointerdown.laserscroll pointermove.laserscroll"),cn("body").css("overflow","")),t.hide()},focusItem:d,highlight:f,unhighlight:p,render:function(e){cn(".laser-scroll-items",t).empty();var n,r,o=cn(".laser-scroll-items",t),s=a(e);s.forEach((function(e){!function(e){var n=e.el=i.call(e);n.attr("itemid",e.id),!TN8.deepZoomLayer||window.innerWidth>480?n.attr({tabindex:-1,role:"menuitem"}):n.attr({tabindex:0,role:"menuitem"}),b(e)?n.addClass("laser-scroll-item-unselectable"):n.addClass("laser-scroll-item"),cn(".laser-scroll-items",t).append(n),"endsection"===e.id&&n.attr({id:"reviewdropdown-endpage"}),n.hasClass("disabled")?n.attr("aria-disabled","true"):e.selected&&u(e)}(e)})),o.off("touchstart pointerdown").on("touchstart pointerdown",(function(e){c(e)&&(p(cn(".laser-scroll-item",t)),n=!0,r="pointerdown"!==e.type?e.originalEvent.touches[0].screenY:e.originalEvent.screenY)})),o.off("mousemove mousedown").on("mousemove mousedown",(function(e){e.target&&e.target.matches(".laser-scroll-item")&&!cn(e.target).hasClass("disabled")&&(n=!1)})),o.off("touchend pointerup").on("touchend pointerup",(function(e){if(c(e)&&0==("pointerup"!==e.type?e.originalEvent.changedTouches[0].screenY:e.originalEvent.screenY)-r){let n=l(e.target,s);n&&t.trigger("LaserScroll.selected",n),cn(document).trigger("deepZoomLayer.detachCoupling"),e.preventDefault()}})),o.off("click").on("click",(function(e){if(c(e)){if(n)return e.preventDefault(),!1;let r=l(e.target,s);r&&t.trigger("LaserScroll.selected",r),cn(document).trigger("deepZoomLayer.detachCoupling")}})),o.off("mouseover").on("mouseover",(function(e){if(c(e)){if(n)return e.preventDefault(),!1;p(cn(".laser-scroll-item",t)),f(cn(e.target))}})),o.off("mouseleave").on("mouseleave",(function(e){if(n)return e.preventDefault(),!1;p(cn(".laser-scroll-item",t))})),o.off("focusin",m).on("focusin",m),cn(".laser-scroll-item:first, .laser-scroll-item:last").off("focusout",g).on("focusout",g)},select:u,unselect:function(e){if(e){var t=cn(e.el).attr("aria-label")?cn(e.el).attr("aria-label"):"";e.selected=!1,b(e)||cn(e.el).removeClass("laser-scroll-item-selected"),""!==t&&cn(e.el).attr("aria-label",t.substring(0,t.indexOf(" current item")))}},destroy:function(){cn(".laser-scroll-items",t).off("focusin",m),cn(".laser-scroll-item:first, .laser-scroll-item:last").off("focusout",g),r.off("keydown"),t.find(".laser-scroll-item").off("touchstart pointerdown mousemove mousedown touchend pointerup click mouseover mouseenter mouseleave"),cn(document).off("touchmove.laserscroll pointermove.laserscroll"),cn("body").off("touchmove.laserscroll pointermove.laserscroll touchstart.laserscroll pointerdown.laserscroll")}}},on=function(){var e=TN8&&TN8.PnpController&&TN8.PnpController.getMarkForReview();e=null==e||!0===e;var t=this.unanswered?"visible":"hidden",n=cn("<span class='circle-sprite'/>").css({visibility:t}),r=cn("<span class='bookmark-sprite'/>"),o=cn("<span class='item-locking-sprite lock'/>"),i=cn("<span class='item-locking-sprite unlock'/>"),s=cn("<div class='unselectable'>"+this.title+"</div>"),a=this.title;this.wc||(this.unanswered?a=cn.i18n?cn.i18n.t("header:notAnsweredAria",{itemName:a}):a+" not answered":this.answered&&(a=cn.i18n?cn.i18n.t("header:answeredAria",{itemName:a}):a+" answered")),this.flagged&&e&&(a=cn.i18n?cn.i18n.t("header:bookmarkedAria",{itemName:a}):a+" bookmarked",s.append(r));var c=TN8.Application.DataProvider.isItemLocked(this);return!0===c?(s.append(o),a=cn.i18n?cn.i18n.t("header:lockedAria",{itemName:a}):a+" locked"):!1===c&&(s.append(i),a=cn.i18n?cn.i18n.t("header:unlockedAria",{itemName:a}):a+" unlocked"),this.blocked?s.addClass("disabled").append('<span><i class="icon-lock" role="presentation"></i></span>'):s.append(n),s.attr("aria-label",a),s},sn={_create:function(){cn(".btn-tn8-review");var e=this.reviewDropdownEl=cn('<div role="application" tabindex="-1" class="review-dropdown"/>'),t=this;this.closeCheck=this.closeCheck.bind(this),this.focusTarget=cn(".btn-tn8-review",this.element),cn("#firstTabbable").after(e),this.openedAt=(new Date).getTime();var n=this.LS=rn({container:e,itemRenderer:on,dataSource:t.options.dataSource,dataFilters:{unanswered:function(e){return e.unanswered},bookmarked:function(e){return e.flagged},items:function(e){return!(e.wc||"endsection"===e.id||e.title&&-1!==e.title.indexOf(cn.i18n.t("section")))}}}),r=this.element.tnOffset(),o=0;cn.each(["html","body"],(function(e,t){var n=cn(t).scrollTop();n>o&&(o=n)})),e.css({top:r.top+this.element.outerHeight()-o,left:r.left}),e.on("LaserScroll.selected",(function(e,r){if(r.isLocked)return!1;var o=n.data("selected")[0];if(!o?.answered&&r!==o&&t.showMustAnswerPopUp())return t.close(),!1;n.unselect(o),n.select(r),r.onSelected&&o!==r&&(r.onSelected(),t.close())})),e.on("keydown",(function(e){var n=27===e.which||27===e.keyCode,r=n;if(9===e.which&&e.shiftKey&&!t._inDeepZoom()){var o=cn(":tabbable"),i=o.index(t.focusTarget);i>0&&i<o.length&&o.get(i-1).focus(),n=!0}n&&!t._inDeepZoom()&&(t.close(),e.preventDefault(),r&&t.focusTarget.focus())})),"popup"==this.options.type?this.setupPopup():e.prepend(t.renderTabs(e)),n.hide()},showMustAnswerPopUp:function(){const e=!TestEngine.getNavigation().getCurrentSection().isLinear(),t=TN8.TestStateController.getItemAnswered(),n=TN8.TestStateController.getCurrentItemNoResponse(),r=TestEngine._navigation._currentSection._mustAnswerToContinue;if(!e&&!r||t||n)return!1;{const e={msg:cn.i18n.t("header:mustAnswer"),btnTxt:cn.i18n.t("ok")};return new an.A(cn.extend(!0,{},e)),!0}},show:function(){var e=/android/i.test(navigator.userAgent.toLowerCase())?500:0;this.addFocusHandlers(),this.renderList(),this.LS.show(),setTimeout(function(){this.toggleResizeHandler(!0)}.bind(this),e),cn(document).trigger("deepZoomLayer.getStatus",cn.proxy(this._handleDeepZoomStatus,this))},_handleDeepZoomStatus:function(e){e&&this._doDeepZoomCoupling()},_doDeepZoomCoupling:function(e){var t='<i role="presentation" class="icon-list-ul"></i> '+(cn.i18n?cn.i18n.t("header:testOverview"):"Review");cn(document).trigger("deepZoomLayer.setCoupling",{title:t,html:this.reviewDropdownEl,hideCallback:cn.proxy(this.close,this)})},close:function(){this.LS.hide(),cn(document).trigger("tn.reviewdropdown.close"),this.toggleResizeHandler(!1),this.removeFocusHandlers(),cn(document).trigger("magnifier.refresh")},closeCheck:function(e){this._inDeepZoom()||setTimeout(function(){var t=this.reviewDropdownEl[0],n=t.contains(e.target),r=this.element[0]===e.target||this.element.has(e.target).length>0;!t||n||r||this.close()}.bind(this),0)},addFocusHandlers:function(){cn(document).off("ItemResponseChanged.reviewdropdown tn.error.fatal do.disableInteraction",cn.proxy(this.close,this)).on("ItemResponseChanged.reviewdropdown tn.error.fatal do.disableInteraction",cn.proxy(this.close,this)),cn(document).off("focusLost",cn.proxy(this._handleFocusLost,this)).on("focuslost",cn.proxy(this._handleFocusLost,this)),document.addEventListener("mousedown",this.closeCheck,!0),document.addEventListener("touchstart",this.closeCheck,!0),this.reviewDropdownEl.on("escape_key_pressed",function(){"block"===this.reviewDropdownEl.css("display")&&(this.close(),this.focusTarget.focus())}.bind(this)),"undefined"!=typeof TN8&&(TN8.EpatBlocker.on(["mousedown","touchstart"],this.closeCheck,!0),TN8.Dispatcher&&TN8.Dispatcher.on("EWSLaunch",this.close,this))},removeFocusHandlers:function(){cn(document).off("focuslost ItemResponseChanged.reviewdropdown tn.error.fatal do.disableInteraction",cn.proxy(this.close,this)),document.removeEventListener("mousedown",this.closeCheck,!0),document.removeEventListener("touchstart",this.closeCheck,!0),this.reviewDropdownEl.off("escape_key_pressed"),"undefined"!=typeof TN8&&(TN8.EpatBlocker.off(["mousedown","touchstart"],this.closeCheck,!0),TN8.Dispatcher&&TN8.Dispatcher.off("EWSLaunch",this.close,this))},toggleResizeHandler:function(e,t){var n=this.reviewDropdownEl.is('[class*="bookmarked"]')?"bookmarked":this.reviewDropdownEl.is('[class*="unanswered"]')?"unanswered":"review";(t?["unanswered","bookmarked","review"]:[n]).forEach(function(t,n){e?cn(window).on("resize."+t,cn.proxy(this.resizeHandler,this)):cn(window).off("resize."+t,cn.proxy(this.resizeHandler,this))}.bind(this))},resizeHandler:function(){(new Date).getTime()-this.openedAt>80&&!this._inDeepZoom()&&this.close()},renderList:function(e){this.LS.render(e),cn(".reivew-dropdown-tab",this.element).attr("tabindex",0)},closeMiniMenu:function(){this.reviewDropdownEl.is(":visible")&&(this.close(),cn(document).off("inform.timeoutModalOn tn.ews.on",this.closeMiniMenu))},setupPopup:function(){cn(document).off("cleanup.betweenTest",cn.proxy(this.removeMiniMenus,this)).on("cleanup.betweenTest",cn.proxy(this.removeMiniMenus,this)),this.closeMiniMenu=this.closeMiniMenu.bind(this),this.focusTarget=this.element,this.reviewDropdownEl.addClass("review-dropdown-popup-"+this.options.filter),this.element.css("position","relative"),this.LS.data(this.options.filter).length&&this.element.css("cursor","pointer").attr({role:"button",tabindex:0}),this.element.on("mousedown touchstart",cn.proxy(this.toggleMiniMenu,this)),this.element.on("touchend",(function(e){e.preventDefault()})),this.element.on("keydown",(function(e){32!==e.which&&13!==e.which||(cn(this).mousedown(),e.preventDefault())})),this.reviewDropdownEl.on("keydown",function(e){this._inDeepZoom()||9===e.which&&(this.close(),e.shiftKey||this.element.focus())}.bind(this))},toggleMiniMenu:function(e){var t=this.LS.data(this.options.filter),n=this.reviewDropdownEl.is(":visible");if(t.length&&!n){this.openedAt=(new Date).getTime(),cn(document).on("inform.timeoutModalOn tn.ews.on",this.closeMiniMenu),this.toggleResizeHandler(!0),this.renderList(this.options.filter),this.LS.show(),this.addFocusHandlers(),t[0].blocked||this.LS.highlight(t[0].el),this.LS.focusItem(cn(t[0].el));var r=this.element.tnOffset();this.reviewDropdownEl.css({top:r.top-this.reviewDropdownEl.outerHeight(),left:r.left-(this.reviewDropdownEl.width()-this.element.width())/2}),cn(document).trigger("deepZoomLayer.getStatus",cn.proxy(this._handleDeepZoomStatusPopup,this))}else n&&(this.close(),cn(document).off("inform.timeoutModalOn tn.ews.on",this.closeMiniMenu));"touchstart"===e.type&&e.preventDefault()},_handleDeepZoomStatusPopup:function(e){e&&this._doDeepZoomCouplingPopup()},_doDeepZoomCouplingPopup:function(){var e;e=this.reviewDropdownEl.hasClass("review-dropdown-popup-unanswered")?cn.i18n?cn.i18n.t("header:notAnswered"):"Not Answered":cn.i18n?cn.i18n.t("header:bookmarks"):"Bookmarks",cn(document).trigger("deepZoomLayer.setCoupling",{title:e,html:this.reviewDropdownEl,hideCallback:cn.proxy(this.close,this)})},_handleFocusLost:function(){this._inDeepZoom()||this.close()},renderTabs:function(e){var t=cn('<div role="tablist" class="review-dropdown-tabs"/>'),n=this.renderTab(this.LS.data("items").length,cn.i18n?cn.i18n.t("header:allQuestions"):"All Questions","first",""),r=this.renderTab(this.LS.data("unanswered").length,cn.i18n?cn.i18n.t("header:notAnswered"):"Not Answered","middle","unanswered"),o=this.renderTab(this.LS.data("bookmarked").length,cn.i18n?cn.i18n.t("header:bookmarks"):"Bookmarks","","bookmarked"),i=this;return t.on("keydown",(function(e){var t,n=e.which,r=cn(this).children().toArray(),o=r.indexOf(cn(".review-dropdown-tab:focus",this)[0]),s=39===n||37===n||9===n;if(39===n&&o<r.length-1)t=r[++o],s=!0;else if(37===n&&o>0)t=r[--o];else if(9===n)if(e.shiftKey){var a=cn(".laser-scroll-item[tabindex=0]",this.parentElement)[0]||cn(".laser-scroll-item-selected",this.parentElement)[0]||cn(".laser-scroll-item",this.parentElement)[0];a&&(i.LS.highlight(cn(a)),i.LS.focusItem(a))}else{i.close();let e=cn("#btnOverview").next();e.hasClass("hide")&&(e=e.parent().next().find("button"),e.length<1&&TN8&&TN8.Application&&cn("#menuDrop").length&&(TN8.Application.currentContent===TN8.Application.CONTENT_SECTION_END||TN8.Application.currentContent===TN8.Application.CONTENT_TEST_END)&&(e=cn("#menuDrop"))),e.focus()}t&&(cn(".review-dropdown-tab",this).attr("tabindex",-1),cn(t).attr("tabindex",0),cn(t).focus()),s&&(e.preventDefault(),e.stopImmediatePropagation())})),n.addClass("active"),n.attr({"aria-selected":!0,tabindex:0}),t.html(n),t.append(r),t.append(o),t},renderTab:function(e,t,n,r){var o,i=TN8&&TN8.PnpController&&TN8.PnpController.getMarkForReview(),s=cn.i18n?cn.i18n.t("header:bookmarks"):"Bookmarks",a=cn.i18n?cn.i18n.lng():"en";if(null==i||!0===i)o=cn('<div class="review-dropdown-tab lang'+a+' unselectable"><span class="img-text '+n+'">'+e+'</span><p class="tab-text '+n+" lang"+a+'">'+t+"</p></div>");else{if(!1===i&&t===s)return cn("<div></div>");o=cn('<div class="review-dropdown-tab lang'+a+' unselectable" style="width: 50%"><span class="img-text '+n+'">'+e+'</span><p class="tab-text '+n+" lang"+a+'">'+t+"</p></div>")}var c=this,l=r;""===l&&(l="total");var u=(cn.i18n?cn.i18n.t("header:reviewTabTitle",{tabName:t}):t)+" "+(cn.i18n?cn.i18n.t("header:reviewTab"+l,{count:e}):e+" "+l+" questions.");return o.attr({role:"tab","aria-selected":!1,"aria-label":u,tabindex:-1}),o.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),o.on("click touchend",(function(e){var t;cn(".review-dropdown-tab",(t=this).parentElement).not(t).removeClass("active"),cn(".review-dropdown-tab",t.parentElement).not(t).attr({"aria-selected":!1,tabindex:-1}),cn(t).addClass("active"),cn(t).attr({"aria-selected":!0,tabindex:0}),cn(t).focus(),c.renderList(r)})),o.on("keydown",(function(e){32!==e.which&&13!==e.which||cn(this).click()})),o},_inDeepZoom:function(){return!(!TN8.deepZoomLayer||!cn.contains(cn("#deepZoomLayerBody")[0],cn(".review-dropdown")[0]))},removeMiniMenus:function(){cn('div[class*="review-dropdown-popup"]').remove(),cn(document).off("cleanup.betweenTest",cn.proxy(this.removeMiniMenus,this))},destroy:function(){this.removeFocusHandlers(),this.toggleResizeHandler(!1,!0),this.LS&&this.LS.destroy(),this.reviewDropdownEl.off("keydown LaserScroll.selected"),this.element.off("click touchstart pointerdown keydown touchend"),this.reviewDropdownEl.find(".review-dropdown-tab").off("click touchend keydown"),this.reviewDropdownEl.find(".review-dropdown-tabs").off("keydown"),cn(document).off("inform.timeoutModalOn tn.ews.on",this.closeMiniMenu),cn(".review-dropdown").not('div[class*="review-dropdown-popup"]').remove(),cn.Widget.prototype.destroy.call(this)}},cn.widget("pearson.reviewDropdown",sn),n(3328);var ln=n(4856),un=n.n(ln),dn=n(4962),fn=n.n(dn),pn=n(77),hn=n.n(pn),mn=n(1818),gn=n.n(mn);n(2951),n(8090),n(3841),n(848);var _n=n(7186),vn=n(4523),bn=n(3270);const yn=_n.View.extend({deepZoomToolMenu:null,initialQuestionView:null,proctorSignInView:null,studentLogoutView:null,itemCanvasTitle:null,render:function(){return vn.bindAll(this,vn.functions(this)),this.el='<div id="proctor-check" />',this.$el=bn(this.el),this.template=vn.template('\n<div class="row" id="proctorCheckViews">\n    <div class="span2"/>\n    <div class="span8">\n        <h1 id="itemCanvasTitle" class="sr-only visibly-hidden" tabindex="-1"><%= $.i18n.t(\'proctorCheck:attention\')%></h1>\n\n        <div id="titleHolder" class="pad8">\n            <h1 id="attentionTitle"><%= $.i18n.t(\'proctorCheck:attention\')%></h1>\n        </div>\n\n        <div class="signoutpage" id="initialQuestion">\n            <h2 aria-label="<%= $.i18n.t(\'proctorCheck:studentQuestion\')%>"><%= $.i18n.t(\'proctorCheck:studentQuestion\')%></h2>\n            <div class="button-holder">\n                <button id="studentYes" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'generalWords:capitalYes\')%>"><%= $.i18n.t(\'generalWords:capitalYes\')%></button>\n                <button id="studentNo" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'generalWords:capitalNo\')%>"><%= $.i18n.t(\'generalWords:capitalNo\')%></button>\n            </div>\n        </div>\n\n        <div class="whitebg bordered pad8 round4 hidden" id="proctorSignIn">\n            <div class="modal-header custom-modal-header">\n                <h2 class="modal-title"><%= $.i18n.t(\'proctorCheck:title\')%></h2>\n            </div>\n            <div class="modal-body">\n                <p><%= $.i18n.t(\'proctorCheck:modalContent\')%></p>\n                <div class="button-holder">\n                    <button id="backToQuestion" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'generalWords:cancel\')%>"><%= $.i18n.t(\'generalWords:cancel\')%></button>\n                    <button id="continueBtn" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'proctorCheck:proctorContinueBtn\')%>"><%= $.i18n.t(\'proctorCheck:proctorContinueBtn\')%></button>\n                </div>\n            </div>\n        </div>\n\n        <div class="pad4 hidden" id="studentLogout">\n            <p><%= $.i18n.t(\'proctorCheck:studentSignIn1\')%></p>\n            <p><%= $.i18n.t(\'proctorCheck:studentSignIn2\')%></p>\n            <div class="button-holder">\n                <button id="backToQuestion2" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'generalWords:cancel\')%>"><%= $.i18n.t(\'generalWords:cancel\')%></button>\n                <button id="exitTestBtn" class="btn btn-primary btn-large" aria-label="<%= $.i18n.t(\'proctorCheck:studentSignInBtn\')%>"><%= $.i18n.t(\'proctorCheck:studentSignInBtn\')%></button>\n            </div>\n        </div>\n        <div class="span4"/>\n    </div>\n</div>\n'),this.$el.html(this.template),bn("#content").html(this.$el),this.initialQuestionView=this.$el.find("#initialQuestion, #titleHolder"),this.proctorSignInView=this.$el.find("#proctorSignIn, #titleHolder"),this.studentLogoutView=this.$el.find("#studentLogout"),this.itemCanvasTitle=this.$el.find("#itemCanvasTitle"),this.addListeners(),Ae.default.execute(Ae.default.actionNames.TurnOffModal),TN8.Dispatcher.once("performNavigation",this.cleanup,this),bn(document).trigger("navigated.startTest"),this},addListeners:function(){this.$el.find("#studentYes").off("click",bn.proxy(this.goToStudentSignIn,this)).on("click",bn.proxy(this.goToStudentSignIn,this)),this.$el.find("#studentNo").off("click",bn.proxy(this.goToProctorSignIn,this)).on("click",bn.proxy(this.goToProctorSignIn,this)),this.$el.find("#backToQuestion, #backToQuestion2").off("click",bn.proxy(this.backToInitialQuestion,this)).on("click",bn.proxy(this.backToInitialQuestion,this)),this.$el.find("#exitTestBtn").off("click",bn.proxy(this.handle_logout,this)).on("click",bn.proxy(this.handle_logout,this)),this.$el.find("#continueBtn").off("click",bn.proxy(this.continueToTest,this)).on("click",bn.proxy(this.continueToTest,this))},removeListeners:function(){this.$el.find("#studentYes").off("click",bn.proxy(this.goToStudentSignIn,this)),this.$el.find("#studentNo").off("click",bn.proxy(this.goToProctorSignIn,this)),this.$el.find("#backToQuestion, #backToQuestion2").off("click",bn.proxy(this.backToInitialQuestion,this)),this.$el.find("#continueBtn").off("click",bn.proxy(this.continueToTest,this)),this.$el.find("#exitTestBtn").off("click",bn.proxy(this.handle_logout,this))},getHeaderModelData:function(){return{headerMode:0,renderTrick:Math.random()}},goToProctorSignIn:function(){this.initialQuestionView.hide().addClass("hidden"),this.studentLogoutView.hide().addClass("hidden"),this.proctorSignInView.show().removeClass("hidden")},goToStudentSignIn:function(){this.initialQuestionView.hide().addClass("hidden"),this.proctorSignInView.hide().addClass("hidden"),this.studentLogoutView.show().removeClass("hidden")},backToInitialQuestion:function(){this.proctorSignInView.hide().addClass("hidden"),this.studentLogoutView.hide().addClass("hidden"),this.initialQuestionView.show().removeClass("hidden")},continueToTest:function(){bn(document).trigger("tn.continueProctor.login"),this.cleanup()},handle_logout:function(){this.cleanup(),"1"===TN8.Application.initializer.form.securityLevel&&window.TestEngine._native.unlockDesktop(),bn(document).trigger("tn.route.to","logout")},cleanup:function(){bn(document).trigger("perform.removeFTListener"),this.removeListeners(),this.remove(),TN8.Dispatcher.off("performNavigation",this.cleanup)}});var wn=n(1086),Sn=n(7186),En=n(4523),Tn=n(3270);const An=Sn.View.extend({deepZoomToolMenu:null,render:async function(e){En.bindAll(this,En.functions(this)),this.addListeners();var t=Tn("#loginFrame");return 0!==t.length&&t.trigger("remove"),wn.default.init(e),this},addListeners:function(){Tn(document).off("navigated.remoteProctoringSysChk",this.remoteProctoringStarted).on("navigated.remoteProctoringSysChk",this.remoteProctoringStarted)},removeListeners:function(){Tn(document).off("navigated.remoteProctoringSysChk",this.remoteProctoringStarted)},getHeaderModelData:function(){return{headerMode:0,renderTrick:Math.random()}},remoteProctoringStarted:function(){Tn(document).trigger("perform.addFTListener"),Tn(document).trigger("tn.loadingModal.off"),TN8.Dispatcher.once("performNavigation",this.cleanup,this),Tn(document).trigger("navigated.startTest")},handle_logout:function(){this.cleanup(),"1"===TN8.Application.initializer.form.securityLevel&&window.TestEngine._native.unlockDesktop(),Tn(document).trigger("tn.route.to","logout")},cleanup:function(){Tn(document).trigger("perform.removeFTListener"),this.removeListeners(),this.remove(),TN8.Dispatcher.off("performNavigation",this.cleanup)}});window.qtiCustomInteractionContext=i,window.answerMaskingAPI=un().answerMaskingAPI,window.ContrastControllerAPI=fn().ContrastControllerAPI,window.lineReaderAPI=hn().lineReaderAPI,window.magnifierAPI=gn().magnifierAPI,window.template=function(e,t){var n,r=/\\|'|\r|\n|\t|\u2028|\u2029/g,o={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},i={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a=function(e){return null==e?"":(""+e).replace(/[&<>"'/]/g,(function(e){return s[e]}))},c=new RegExp([i.escape.source,i.interpolate.source,i.evaluate.source].join("|")+"|$","g"),l=0,u="__p+='";e.replace(c,(function(t,n,i,s,a){return u+=e.slice(l,a).replace(r,(function(e){return"\\"+o[e]})),n&&(u+="'+\n((__t=("+n+"))==null?'':escapeReplace(__t))+\n'"),i&&(u+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(u+="';\n"+s+"\n__p+='"),l=a+t.length,t})),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(u="with(obj||{}){\n"+(u+="';\n")+"}\n")+"return __p;\n";try{n=new Function("escapeReplace","obj",u)}catch(e){throw e.source=u,e}return t?n(a,t):n(a)};const xn={TestStateController:r.default,SupportMediaForm:s,CommandCenter:a.default,ScoreController:c.default,VariableFactory:l.default,NavigationController:u.default,ItemController:d.default,LogoutView:g,PracticeTestView:w,AppCheckView:U,BrowserCheckView:X,EpatReportView:ee,EndTestView:ae,EndSectionView:fe,GameBreakView:Te,StartSectionView:ke,StartSectionModel:De,FormModel:Oe,TestsView:Je,TestView:ft,Initializer:function(){return{requestTest:function(e,t){null!==t&&null!==e?(TN8.Application.headerModel.trigger("change"),TN8.log("test.requestTest .",TN8.CRITICAL),this.verifyTestNavConnect(e,t)):TN8.throw("Something went wrong. Form and FormId do not match. formId is "+t+" and form is "+e,TN8.errorType.FORM_NOT_FOUND)},verifyTestNavConnect(e,t){if(_.A.isAskForHelpEnabledFromRawPnp(e.pnp)){var n=TN8.utils.getTestNavConnectUnsupportedError();return n?void TN8.throw("",n):(TN8.fnOne("navigate.afterAudVidPerm",Gt.proxy(this.selectTest,this,e,t)),this.addColorContrastChangeListener(),void TN8.Application.showVideoAudioPermissionPage(_.A.requireVolumeCheckFromRawPnp(e.pnp),_.A.requireColorContrastSettingFromRawPnp(e.pnp)))}this.selectTest(e,t)},addColorContrastChangeListener:function(){Gt(document).off("contrast.colorSetFromUI",Gt.proxy(this.colorContrastChangedPreInitTest,this)).on("contrast.colorSetFromUI",Gt.proxy(this.colorContrastChangedPreInitTest,this))},colorContrastChangedPreInitTest:function(e,t){TN8&&TN8.Application&&TN8.Application.accommodationTools&&TN8.Application.accommodationTools.contrastSettings?TN8.Application.accommodationTools.contrastSettings.color=t:this.preTestColorContrastColor=t},selectTest:function(e,t){TestEngine.addListener(TestEngine.TEST_SETUP_COMPLETE,this.initTest,this),TestEngine.addListener(TestEngine.TEST_SETUP_FAILURE,this.handleTestLoadFailure,this),TestEngine.selectTest(t,e),this.form=e},initTest:function(){Gt(document).trigger("inform.selectTestDone"),Gt(document).trigger("inactivityTimer.selectTestDone"),Gt(document).off("cleanup.betweenTest",this.cleanUp).on("cleanup.betweenTest",this.cleanUp),TestEngine.removeListener(TestEngine.TEST_SETUP_COMPLETE,this.initTest),TestEngine.removeListener(TestEngine.TEST_SETUP_FAILURE,this.handleTestLoadFailure),TN8.PnpController=Ge.default,Ge.default.init(this.form);var e=Ge.default.pnp;this.preTestColorContrastColor&&this.preTestColorContrastColor.length>0&&(TN8.Application.accommodationTools.contrastSettings.color=this.preTestColorContrastColor,delete this.preTestColorContrastColor);var t=TN8.utils.getAccomToolsListByDetials(Rt.A.getAllExtensionAccomTools(),e);if(t.length>0&&!Ge.default.getEnableExtensionProp(e)||Ge.default.isExtensionEnabled(e)){var n=TN8.utils.getExtUnsupportedError();if(n)return void TN8.throw("",n);this.setupExtensionAnalytics(),this.addColorContrastChangeListener();var r=this.getExtensionsUrl(e);if(r)return TN8.fnOne("navigate.afterExtension",Gt.proxy(this.afterExtensionsSet,this)),void TN8.Application.showExtensionsPage(r,t,e)}this.afterInitTest()},afterExtensionsSet:function(){Gt(document).trigger("tn.progressBar.on"),this.afterInitTest()},setupExtensionAnalytics:function(){Gt(document).on("ExtensionAnalytics",this.triggerExtensionAnalytics),Gt(document).one("cleanup.betweenTest",(()=>{Gt(document).off("ExtensionAnalytics")}))},triggerExtensionAnalytics:function(e,t){if("ReadAndWrite"===t.extensionId)for(const e in t)"boolean"==typeof t[e]&&t[e]&&Gt(document).trigger("Used.extension",{attr:"textHelpRW",op:"pushUnique",val:{id:e}})},getExtensionsUrl:function(e){var t=null;return(t=Ge.default.getExtensionsUrl(e))||(t=TN8.Application.config.extensionsURL),t},afterInitTest:function(){this.browserAddOnCheck(),kt.init(),pt.default.init(),(0,ht.default)().init(),TestEngine.getTestDefine().itemFeedback()&&(0,gt.default)().init(),this.setPreloadList(),3===TestEngine.getTestDefine()._securityLevel?Ge.default.applyPnpSettings():TestEngine.addListener(TestEngine.INIT_PAR_PRELOADED,this.applyPnp,this),r.default.init(),TN8.Application.PNPOverride=mt.default.init(this.form),Ct.A.init(),this.initItemComponentTimers(),new xt},applyPnp:function(){3!==TestEngine.getTestDefine()._securityLevel&&TestEngine.removeListener(TestEngine.INIT_PAR_PRELOADED,this.applyPnp),Ge.default.applyPnpSettings()},setPreloadList:function(){var e=["init.par"];Ge.default.pnpToolsEnabled&&e.push("tools_noTi.par"),TestEngine.getTestDefine().isDynamicTTS()&&e.push("dynamic-tts.par"),TN8.Application.DataProvider.formHasGameBreak()&&e.push("game-penguin-surfer.par"),TestEngine.setInitPreloadList(e)},browserAddOnCheck:function(){return"1"===this.form.securityLevel&&Gt("body").attr("data-pinterest-extension-installed")?TN8.throw("Pinterest application detected",TN8.errorType.BROWSER_PINTEREST_DETECTED):"1"===this.form.securityLevel&&Gt("#dic_bubble").length?TN8.throw("Browser dictionary extension detected",TN8.errorType.BROWSER_DICTIONARY_DETECTED):void 0},initItemComponentTimers:function(){n.e(465).then(n.bind(n,1198)).then((e=>{this.initTimersHandler(e.default)}))},initTimersHandler:function(e){this.reviewTimerController=new e({name:"review",startTimerEvents:"tn.reviewdropdown.open",pauseTimerEvents:"tn.reviewdropdown.close tn.reviewdropdown.nav",saveTimerEvents:"tn.reviewdropdown.close tn.reviewdropdown.nav",key:"timeOnReview"}),this.reviewTimerController.init(),this.userDudeTimerController=new e({name:"userDropdown",startTimerEvents:"userDropdown.open",key:"timeOnUserDude",saveTimerEvents:"userDropdown.close",pauseTimerEvents:"userDropdown.close"}),this.userDudeTimerController.init(),this.contrastTimerController=new e({name:"contrast",startTimerEvents:"contrast.modal.open",saveTimerEvents:"contrast.modal.close",pauseTimerEvents:"contrast.modal.close",key:"timeOnContrastDialog"}),this.contrastTimerController.init(),this.jwplayerTimerController=new e({name:"jwplayer",startTimerEvents:"JW.play",saveTimerEvents:"JW.pause JW.idle",pauseTimerEvents:"JW.pause JW.idle",key:"timePlayingJwplayer"}),this.jwplayerTimerController.init(),this.logoutTimerController=new e({name:"logout",startTimerEvents:"tn.exitmodal.show",key:"timeOnLogoutDialog",saveTimerEvents:"exitModal.hide",pauseTimerEvents:"exitModal.hide"}),this.logoutTimerController.init(),this.itemTimerController=new e({name:"item",startTimerEvents:"ItemController.ItemLoaded",key:"time",saveTimerEvents:"tn.prepare.item.response"}),this.itemTimerController.init()},handleTestLoadFailure:function(e){if(TN8.log("test.initTest  . msg : "+e,TN8.CRITICAL),e.getTarget()!=TestEngine.INVALID_FORCED_SECTION)return e.getTarget()==TestEngine.PROXY_SETUP_FAILURE?(TestEngine.removeListener(TestEngine.TEST_SETUP_COMPLETE,this.initTest,this),void TestEngine.removeListener(TestEngine.TEST_SETUP_FAILURE,this.handleTestLoadFailure,this)):void(e.getTarget()==TestEngine.DUPLICATE_LOGIN_FAILURE?TN8.throw("",TN8.errorType.DUPLICATE_LOGIN):(Gt(document).trigger("tn.loadingModal.off"),TN8.throw("Failed Connection",TN8.errorType.LOST_CONNECTION_IN_TEST)))},cleanUp:function(){mt.default.cleanUp(),delete TN8.Application.PNPOverride,delete TN8.Application.accommodationTools.contrastSettings}}},SleepDetector:function(){return{timeSlept:0,init:function(){return Ft.bindAll(this,Ft.functions(this)),this.registerEvents(),this},sendEvent:function(e,t,n){if(200===n.status){var r=this;setTimeout((function(){It(document).trigger("snitch.sendOut",{event:"SleepDetected",sleepTime:r.timeSlept})}),5e3)}else this.checkInternetConnection()},createInterval:function(){this.lastTime=(new Date).getTime(),this.detectionInterval=setInterval(this.checkTime,1e3)},checkTime:function(){var e=(new Date).getTime();if(e>this.lastTime+3e4){var t=Math.round((e-this.lastTime)/1e3);this.lastTime=e,this.timeSlept=t,this.checkInternetConnection()}else this.lastTime=e},checkInternetConnection:function(e,t,n){setTimeout(this.pingServer,2e3)},pingServer:function(){It.ajax({url:document.location.origin,error:this.checkInternetConnection,statusCode:{303:this.checkInternetConnection,200:this.sendEvent}})},destroyInterval:function(){clearInterval(this.detectionInterval),this.detectionInterval=this.lastTime=null},registerEvents:function(){It(document).off("tn.test.start",this.createInterval).on("tn.test.start",this.createInterval),It(document).off("cleanup.betweenTest",this.destroyInterval).on("cleanup.betweenTest",this.destroyInterval)}}},LogFinder:function(){var e,t=function(){Dt.ajax({type:"GET",url:"https://lo17ksfcqi.execute-api.us-east-2.amazonaws.com/dev/logHunterGET",success:n})},n=function(t){t.trim().split(" ").forEach((function(t){e&&e.indexOf(t)>-1&&Dt(document).trigger("snitch.sendOut",{event:"logHunter",id:t})}))},r=function(){var t=TestEngine.getAuthentication().getLoginId(),n=o(t);e=n?e:e?e+=" "+t:t,localStorage.setItem("loginIds",e)},o=function(t){return!!e&&e.indexOf(t)>-1};return{init:function(){localStorage&&(e=localStorage.getItem("loginIds"),t(),Dt(document).off("navigated.startTest",r).on("navigated.startTest",r),Dt(document).off("tn.navigate.login tn.navigate.logout",t).on("tn.navigate.login tn.navigate.logout",t))}}},AuthenticationController:Nt.default,ProgressBarController:Mt.default,DataProvider:Ot.default,EWSController:Bt.default,combinedTpl:f.A,TestDefProperties:Ht.A,InactivityTimer:Wt,PartsView:qt,SettingsModel:$t.A,SettingsView:Xt.A,fsDeepZoom:Jt,ProctorViewController:Zt.default,QTI_PCI_Platform:nn,ProctorCheckView:yn,RemoteProctoringSystemCheckView:An}},3328:(e,t,n)=>{var r=n(3270);window.itemBehaviors={behaviors:[],applied:[],scrolled:!1,load:function(e){this.behaviors.push(e)},clear:function(e){this.behaviors.splice(0,this.behaviors.length),this.scrolled=!1,e&&this.applied.splice(0,this.applied.length)},reapplyAll:function(){this.scrolled=!1,this.applyAll(this.applied)},applyAll:function(e){var t,n=!1;for(var r in e||(e=this.behaviors,n=!0),e)t=e[r].behavior,n&&this.applied.push(e[r]),this.applied[r].id&&this.applied[r].id.length>0&&("behavior-highlight"===t?this.highlight(e[r].id):"behavior-highlightscroll"===t?this.highlightscroll(e[r].id):"behavior-scroll"===t&&this.doScroll(e[r].id))},removeAll:function(){if(0!==this.applied.length)for(var e in this.applied)this.applied[e].id.length>0&&r("#"+this.applied[e].id).removeClass("highlightColor")},highlight:function(e){r("#"+e).addClass("highlightColor")},highlightscroll:function(e){this.doScroll(e),this.highlight(e)},doScroll:function(e){var t,n,o;this.scrolled||(this.scrolled=!0,(t=r("div.passage-scrolling")).length>0&&(n=r(t).position().top+2,o=r("#"+e).get(0).offsetTop-n-20,r(t).scrollTop(o)))}}},8302:(e,t,n)=>{var r,o,i=n(4523);r=n(3270),o=r.fn.modal,r.fn.modal=function(){if((i.contains(arguments,"show")||"object"==typeof arguments[0]&&!0===arguments[0].show)&&this){var e=this,t=i.reject(r(".modal"),(function(t){return t===e[0]}));i.each(t,(function(e){r(e).modal&&"none"!==r(e).css("display")&&r(e).modal("hide")}))}if(r(this).one("shown",(function(e){e.target===this&&r(this).find(".modal-focus-anchor").focus()})),this.find(".modal-document").length||"#TermModal"===this.selector||r(".modal-header, .modal-body, .modal-footer",this).wrapAll("<div class='modal-document' role='document'></div>"),!this.find(".modal-focus-anchor").length){var n=this.find(".modal-title"),s=n.length?n.text().trim():"";(this.hasClass("modal-document")?this:this.find(".modal-document")).prepend("<div class='modal-focus-anchor visuallyhidden' tabindex='-1' aria-label='"+s+"'></div>"),n.length&&n.attr("aria-hidden",!0)}return i.contains(arguments,"hide")&&-1!==["TermModal","ewsContainer"].indexOf(this.attr("id"))&&r(document).trigger("deepZoomLayer.detachCoupling"),o.apply(this,arguments)}},7269:(e,t,n)=>{var r=n(3270),o=n(6763);r.widget("testnav.modalize",{_minHeight:100,_minWidth:100,_defaultHeight:300,_defaultWidth:300,_centerOnShow:!1,_$el:null,_expanded:!1,_init:function(){this._create()},_create:function(){this._$el=r(this.element);var e='<div class="tn8-draggable-modal-header"><button class="close icon-x-mark" tabindex="0" aria-label="Close"></button><h2 class="langen">'+this.options.title+'</h2></div><div class="tn8-draggable-modal-body">'+this.options.content+"</div>";this._$el.addClass("modal tn8-draggable-modal dialog-hidden").attr("role","dialog").attr("aria-label",this.options.ariaLabel).html(e),this._initDraggable(),this.options.cssProperties&&this._$el.css(this.options.cssProperties),this.recenter(),this.options.minHeight&&(this._minHeight=this.options.minHeight),this.options.minWidth&&(this._minWidth=this.options.minWidth),0!=this.options.recenterAlways&&r(window).off("resize",r.proxy(this.recenter,this)).on("resize",r.proxy(this.recenter,this)),this.options.isResizable&&(r(this.element).append('<div id="se-handle" class="ui-resizable-se ui-resizable-handle tn8-icon-resize"></div>'),this._$el.resizable({minHeight:this._minHeight,minWidth:this._minWidth,handles:{se:"#se-handle"}}),this._$el.off("resize",r.proxy(this.handleResize,this)).on("resize",r.proxy(this.handleResize,this))),this.options.minimizable&&(this._minimized=!1,r(".close",this._$el).after('<button class="minimize icon-minus" tabindex="0" data-toggle="tooltip" trigger="hover focus"  data-original-title="Minimize" aria-label="Minimize" placement="top" ></button>'),"function"==typeof this.options.minimizeHandler?this._$el.find(".minimize").on("click",r.proxy(this.options.minimizeHandler,this)):this._$el.find(".minimize").on("click",r.proxy(this._handleMinimize,this))),this.options.expand&&(r(".close",this._$el).after('<button class="expand icon-resize-full" tabindex="0" data-toggle="tooltip" data-original-title="Expand" trigger="hover focus" aria-label="Expand" ></button>'),this._$el.find(".expand").on("click",r.proxy(this._handleExpand,this))),r(document).off("cleanup.betweenTest",this.cleanup.bind(this)).on("cleanup.betweenTest",this.cleanup.bind(this)),r(document).off("cleanup.logout",this.cleanup.bind(this)).on("cleanup.logout",this.cleanup.bind(this))},_initDraggable:function(){var e={scroll:!1,handle:".tn8-draggable-modal-header"};!1!==this.options.containDrag&&(e=r.extend({},e,{drag:r.proxy(this._dragContain,this),stop:r.proxy(this._dragContain,this)})),this._$el.draggable(e)},_enableDraggable:function(){r(".tn8-draggable-modal-header").css("cursor","move"),this._$el.draggable("enable")},_disableDraggable:function(){r(".tn8-draggable-modal-header").css("cursor","pointer"),this._$el.draggable({disabled:!0})},handleResize:function(e){e.stopPropagation()},_handleMinimize:function(e){this._minimized?this._maximizeModal(e):this._minimizeModal(e)},_handleExpand:function(e){this._expanded=!this._expanded,this._$el.find(".expand").removeClass(this._expanded?"icon-resize-full":"icon-resize-small").addClass(this._expanded?"icon-resize-small":"icon-resize-full"),this._$el.trigger("modal_expand",this._expanded)},_minimizeModal:function(e){e.stopPropagation(),this._minimized=!0,r(".tn8-draggable-modal-body",this._$el).hide(),r(".minimize",this._$el).removeClass("icon-minus").addClass("icon-resize-full"),this._$el.css({transition:"all .25s ease 0s",height:"40px",width:"200px",top:"auto",left:"auto",right:0,bottom:0,position:"fixed"}),this._disableDraggable(),this._$el.trigger("modal_minimized"),this.options.expand&&this._$el.find(".expand").hide()},_maximizeModal:function(){this._minimized=!1,r(".tn8-draggable-modal-body",this._$el).show(),r(".minimize",this._$el).removeClass("icon-resize-full").addClass("icon-minus"),this._$el.css("position","absolute"),this.options.cssProperties?this._$el.css(this.options.cssProperties):this._$el.css({height:this._defaultHeight,width:this._defaultWidth}),this._enableDraggable(),setTimeout(r.proxy(this.turnOffTransition,this),250),o.log("Event maxinmized triggered"),this._$el.trigger("modal_maximized"),this.options.expand&&this._$el.find(".expand").show()},turnOffTransition:function(){this._$el.css("transition","none")},cleanup:function(){r(this.element).empty(),r(this.element).removeClass("modal fade"),r(this.element).removeAttr("role"),r(document).off("cleanup.betweenTest",this.cleanup),r(document).off("cleanup.logout",this.cleanup),this._$el.off("resize",r.proxy(this.handleResize,this)),r(window).off("resize",r.proxy(this.recenter,this))},hide:function(){r(this.element).addClass("dialog-hidden"),r(this.element).trigger("modalize.hidden")},show:function(){r(this.element).removeClass("dialog-hidden"),this._centerOnShow&&this.recenter(),r(this.element).trigger("modalize.shown"),this.options.minimizable&&this._maximizeModal()},recenter:function(){var e=this._$el.width(),t=this._$el.height();0==e&&(this._centerOnShow=!0);var n=e/2,o=t/2;r(this.element).css({top:"calc(50% - "+o+"px)",left:"calc(50% - "+n+"px)",marginLeft:0,position:"fixed"})},_dragContain:function(e,t){var n=this._$el,r=this.getViewportSize(),o=n.outerWidth(),i={left:Math.round(100-o),top:0,right:Math.round(r.width-100),bottom:Math.round(r.height-100)};t.position.left=this.normalize(t.position.left,i.left,i.right),t.position.top=this.normalize(t.position.top,i.top,i.bottom)},normalize:function(e,t,n){return Math.round(Math.min(Math.max(e,t),n))},getViewportSize:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}})},8535:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3270),o=n(4523);const i={show:function(e){var t=r(TN8.Application.combinedTpl).filter("#exitalerttemplate").html(),n=o.template(t)({section:e.section});r("#lastTabbable").after(n),r("#exitAlertModal").modal("show").tabRing(),r("#exitAlertModal").on("hidden.bs.modal",r.proxy(this.removeListeners,this)),this.confirm=o.wrap(e.confirm,r.proxy(this.removeModal,this)),this.decline=o.wrap(e.decline||function(){},r.proxy(this.removeModal,this)),r(".continue-yes").click(this.confirm),r(".continue-no").click(this.decline),r(document).one("inform.timeoutModalOn",this.decline),r(document).one("cleanup.betweenTest",this.decline),r(document).one("focuslost",this.decline),r(document).one("tn.ews.on",this.decline),r(document).trigger("deepZoomLayer.setCoupling",{title:r.i18n?r.i18n.t("endSection:testSubmitWarning"):"Test Submit Warning",html:"#exitAlertModal",hideCloseButton:!0,closeButtons:["button.continue-no"]}),r(document).on("deepZoomLevel.enter",this.decline)},removeModal:function(e){this.removeListeners(),r("#exitAlertModal").modal("hide").tabRing("off").remove(),e()},removeListeners:function(){r(document).off("inform.timeoutModalOn",this.decline),r(document).off("cleanup.betweenTest",this.decline),r(document).off("focuslost",this.decline),r(document).off("tn.ews.on",this.decline),r(document).off("deepZoomLevel.enter",this.decline),r("#exitAlertModal").off("hidden.bs.modal",r.proxy(this.removeListeners,this)),r("#exitAlertModal").off("deepZoomLayer.hide",this.decline)}}},2621:(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__(5606),console=__webpack_require__(6763),Godot=function(){var _scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(Godot){Godot=Godot||{};var Module=void 0!==Godot?Godot:{},readyPromiseResolve,readyPromiseReject;Module.ready=new Promise((function(e,t){readyPromiseResolve=e,readyPromiseReject=t}));var moduleOverrides={},key;for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var arguments_=[],thisProgram="./this.program",quit_=function(e,t){throw t},ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:"undefined"!=typeof document&&document.currentScript&&(scriptDirectory=document.currentScript.src),_scriptDir&&(scriptDirectory=_scriptDir),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},setWindowTitle=function(e){document.title=e});var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);function warnOnce(e){warnOnce.shown||(warnOnce.shown={}),warnOnce.shown[e]||(warnOnce.shown[e]=1,err(e))}moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var tempRet0=0,setTempRet0=function(e){tempRet0=e},getTempRet0=function(){return tempRet0},wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!1,wasmMemory;function setValue(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":HEAP8[0|e]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+n)}}function getValue(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return HEAP8[0|e];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for getValue: "+t)}return null}"object"!=typeof WebAssembly&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(e){var t=Module["_"+e];return assert(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function ccall(e,t,n,r,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);stringToUTF8(e,t=stackAlloc(n),n)}return t},array:function(e){var t=stackAlloc(e.length);return writeArrayToMemory(e,t),t}},s=getCFunc(e),a=[],c=0;if(r)for(var l=0;l<r.length;l++){var u=i[n[l]];u?(0===c&&(c=stackSave()),a[l]=u(r[l])):a[l]=r[l]}var d=s.apply(null,a);return d=function(e){return"string"===t?UTF8ToString(e):"boolean"===t?Boolean(e):e}(d),0!==c&&stackRestore(c),d}function cwrap(e,t,n,r){var o=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&o&&!r?getCFunc(e):function(){return ccall(e,t,n,arguments,r)}}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,o));for(var i="";t<o;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|c:(7&s)<<18|a<<12|c<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var l=s-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&s)<<6|a)}else i+=String.fromCharCode(s)}return i}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++s)),a<=127){if(n>=i)break;t[n++]=a}else if(a<=2047){if(n+1>=i)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=i)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=i)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-o}function stringToUTF8(e,t,n){return stringToUTF8Array(e,HEAPU8,t,n)}function lengthBytesUTF8(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function allocateUTF8(e){var t=lengthBytesUTF8(e)+1,n=_malloc(t);return n&&stringToUTF8Array(e,HEAP8,n,t),n}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,n=stackAlloc(t);return stringToUTF8Array(e,HEAP8,n,t),n}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,n){for(var r=0;r<e.length;++r)HEAP8[0|t++]=e.charCodeAt(r);n||(HEAP8[0|t]=0)}function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432,wasmTable,__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1,runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),FS.ignorePermissions=!1,TTY.init(),SOCKFS.root=FS.mount(SOCKFS,{},null),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),FS.quit(),TTY.shutdown(),runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){Module.onAbort&&Module.onAbort(e),err(e+=""),ABORT=!0,EXITSTATUS=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw readyPromiseReject(t),t}Module.preloadedImages={},Module.preloadedAudios={};var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(e){return e.startsWith(dataURIPrefix)}function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){return wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!=typeof fetch?Promise.resolve().then((function(){return getBinary(wasmBinaryFile)})):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var e={a:asmLibraryArg};function t(e,t){var n=e.exports;Module.asm=n,updateGlobalBufferAndViews((wasmMemory=Module.asm.ck).buffer),wasmTable=Module.asm.wk,addOnInit(Module.asm.dk),removeRunDependency("wasm-instantiate")}function n(e){t(e.instance)}function r(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return(wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||"function"!=typeof fetch?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(readyPromiseReject),{}}wasmBinaryFile="godot.javascript.opt.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={1724748:function(e,t,n,r){GLctx.getBufferSubData(e,t,HEAPU8,n,r)}};function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?wasmTable.get(n)():wasmTable.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(Module)}}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(e,t){return _atexit(e,t)}var PATH={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=PATH.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)}};function getRandomDevice(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){abort("randomDevice")}}var PATH_FS={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:FS.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=PATH_FS.resolve(e).substr(1),t=PATH_FS.resolve(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),s=i,a=0;a<i;a++)if(r[a]!==o[a]){s=a;break}var c=[];for(a=s;a<r.length;a++)c.push("..");return(c=c.concat(o.slice(s))).join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(60);for(var i=0,s=0;s<r;s++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===a&&0===i)throw new FS.ErrnoError(6);if(null==a)break;i++,t[n+s]=a}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new FS.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(out(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(out(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(err(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(err(UTF8ArrayToString(e.output,0)),e.output=[])}}};function zeroMemory(e,t){HEAPU8.fill(0,e,e+t)}function mmapAlloc(e){abort()}var MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(FS.isBlkdev(n)||FS.isFIFO(n))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var o=FS.createNode(e,t,n,r);return FS.isDir(o.mode)?(o.node_ops=MEMFS.ops_table.dir.node,o.stream_ops=MEMFS.ops_table.dir.stream,o.contents={}):FS.isFile(o.mode)?(o.node_ops=MEMFS.ops_table.file.node,o.stream_ops=MEMFS.ops_table.file.stream,o.usedBytes=0,o.contents=null):FS.isLink(o.mode)?(o.node_ops=MEMFS.ops_table.link.node,o.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(o.mode)&&(o.node_ops=MEMFS.ops_table.chrdev.node,o.stream_ops=MEMFS.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[44]},mknod:function(e,t,n,r){return MEMFS.createNode(e,t,n,r)},rename:function(e,t,n){if(FS.isDir(e.mode)){var r;try{r=FS.lookupNode(t,n)}catch(e){}if(r)for(var o in r.contents)throw new FS.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=FS.lookupNode(e,t);for(var r in n.contents)throw new FS.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=MEMFS.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-o,r);if(s>8&&i.subarray)t.set(i.subarray(o,o+s),n);else for(var a=0;a<s;a++)t[n+a]=i[o+a];return s},write:function(e,t,n,r,o,i){if(t.buffer===HEAP8.buffer&&(i=!1),!r)return 0;var s=e.node;if(s.timestamp=Date.now(),t.subarray&&(!s.contents||s.contents.subarray)){if(i)return s.contents=t.subarray(n,n+r),s.usedBytes=r,r;if(0===s.usedBytes&&0===o)return s.contents=t.slice(n,n+r),s.usedBytes=r,r;if(o+r<=s.usedBytes)return s.contents.set(t.subarray(n,n+r),o),r}if(MEMFS.expandFileStorage(s,o+r),s.contents.subarray&&t.subarray)s.contents.set(t.subarray(n,n+r),o);else for(var a=0;a<r;a++)s.contents[o+a]=t[n+a];return s.usedBytes=Math.max(s.usedBytes,o+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&FS.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new FS.ErrnoError(28);return r},allocate:function(e,t,n){MEMFS.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,o,i){if(0!==t)throw new FS.ErrnoError(28);if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);var s,a,c=e.node.contents;if(2&i||c.buffer!==buffer){if((r>0||r+n<c.length)&&(c=c.subarray?c.subarray(r,r+n):Array.prototype.slice.call(c,r,r+n)),a=!0,!(s=mmapAlloc(n)))throw new FS.ErrnoError(48);HEAP8.set(c,s)}else a=!1,s=c.byteOffset;return{ptr:s,allocated:a}},msync:function(e,t,n,r,o){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);return 2&o||MEMFS.stream_ops.write(e,t,0,r,n,!1),0}}};function asyncLoad(e,t,n,r){var o=r?"":getUniqueRunDependency("al "+e);readAsync(e,(function(n){assert(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),o&&removeRunDependency(o)}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),o&&addRunDependency(o)}var IDBFS={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return MEMFS.mount.apply(null,arguments)},syncfs:function(e,t,n){IDBFS.getLocalSet(e,(function(r,o){if(r)return n(r);IDBFS.getRemoteSet(e,(function(e,r){if(e)return n(e);var i=t?r:o,s=t?o:r;IDBFS.reconcile(i,s,n)}))}))},getDB:function(e,t){var n,r=IDBFS.dbs[e];if(r)return t(null,r);try{n=IDBFS.indexedDB().open(e,IDBFS.DB_VERSION)}catch(e){return t(e)}if(!n)return t("Unable to connect to IndexedDB");n.onupgradeneeded=function(e){var t,n=e.target.result,r=e.target.transaction;(t=n.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?r.objectStore(IDBFS.DB_STORE_NAME):n.createObjectStore(IDBFS.DB_STORE_NAME)).indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},n.onsuccess=function(){r=n.result,IDBFS.dbs[e]=r,t(null,r)},n.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var n={};function r(e){return"."!==e&&".."!==e}function o(e){return function(t){return PATH.join2(e,t)}}for(var i=FS.readdir(e.mountpoint).filter(r).map(o(e.mountpoint));i.length;){var s,a=i.pop();try{s=FS.stat(a)}catch(e){return t(e)}FS.isDir(s.mode)&&i.push.apply(i,FS.readdir(a).filter(r).map(o(a))),n[a]={timestamp:s.mtime}}return t(null,{type:"local",entries:n})},getRemoteSet:function(e,t){var n={};IDBFS.getDB(e.mountpoint,(function(e,r){if(e)return t(e);try{var o=r.transaction([IDBFS.DB_STORE_NAME],"readonly");o.onerror=function(e){t(this.error),e.preventDefault()},o.objectStore(IDBFS.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var o=e.target.result;if(!o)return t(null,{type:"remote",db:r,entries:n});n[o.primaryKey]={timestamp:o.key},o.continue()}}catch(e){return t(e)}}))},loadLocalEntry:function(e,t){var n,r;try{r=FS.lookupPath(e).node,n=FS.stat(e)}catch(e){return t(e)}return FS.isDir(n.mode)?t(null,{timestamp:n.mtime,mode:n.mode}):FS.isFile(n.mode)?(r.contents=MEMFS.getFileDataAsTypedArray(r),t(null,{timestamp:n.mtime,mode:n.mode,contents:r.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,n){try{if(FS.isDir(t.mode))FS.mkdirTree(e,t.mode);else{if(!FS.isFile(t.mode))return n(new Error("node type not supported"));FS.writeFile(e,t.contents,{canOwn:!0})}FS.chmod(e,t.mode),FS.utime(e,t.timestamp,t.timestamp)}catch(e){return n(e)}n(null)},removeLocalEntry:function(e,t){try{FS.lookupPath(e);var n=FS.stat(e);FS.isDir(n.mode)?FS.rmdir(e):FS.isFile(n.mode)&&FS.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:function(e,t,n){var r=e.get(t);r.onsuccess=function(e){n(null,e.target.result)},r.onerror=function(e){n(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,n,r){try{var o=e.put(n,t)}catch(e){return void r(e)}o.onsuccess=function(){r(null)},o.onerror=function(e){r(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,n){var r=e.delete(t);r.onsuccess=function(){n(null)},r.onerror=function(e){n(this.error),e.preventDefault()}},reconcile:function(e,t,n){var r=0,o=[];Object.keys(e.entries).forEach((function(n){var i=e.entries[n],s=t.entries[n];s&&i.timestamp.getTime()==s.timestamp.getTime()||(o.push(n),r++)}));var i=[];if(Object.keys(t.entries).forEach((function(t){e.entries[t]||(i.push(t),r++)})),!r)return n(null);var s=!1,a=("remote"===e.type?e.db:t.db).transaction([IDBFS.DB_STORE_NAME],"readwrite"),c=a.objectStore(IDBFS.DB_STORE_NAME);function l(e){if(e&&!s)return s=!0,n(e)}a.onerror=function(e){l(this.error),e.preventDefault()},a.oncomplete=function(e){s||n(null)},o.sort().forEach((function(e){"local"===t.type?IDBFS.loadRemoteEntry(c,e,(function(t,n){if(t)return l(t);IDBFS.storeLocalEntry(e,n,l)})):IDBFS.loadLocalEntry(e,(function(t,n){if(t)return l(t);IDBFS.storeRemoteEntry(c,e,n,l)}))})),i.sort().reverse().forEach((function(e){"local"===t.type?IDBFS.removeLocalEntry(e,l):IDBFS.removeRemoteEntry(c,e,l)}))}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=PATH_FS.resolve(FS.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new FS.ErrnoError(32);for(var o=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=FS.root,s="/",a=0;a<o.length;a++){var c=a===o.length-1;if(c&&t.parent)break;if(i=FS.lookupNode(i,o[a]),s=PATH.join2(s,o[a]),FS.isMountpoint(i)&&(!c||c&&t.follow_mount)&&(i=i.mounted.root),!c||t.follow)for(var l=0;FS.isLink(i.mode);){var u=FS.readlink(s);if(s=PATH_FS.resolve(PATH.dirname(s),u),i=FS.lookupPath(s,{recurse_count:t.recurse_count}).node,l++>40)throw new FS.ErrnoError(32)}}return{path:s,node:i}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else for(var n=FS.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=FS.mayLookup(e);if(n)throw new FS.ErrnoError(n,e);for(var r=FS.hashName(e.id,t),o=FS.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return FS.lookup(e,t)},createNode:function(e,t,n,r){var o=new FS.FSNode(e,t,n,r);return FS.hashAddNode(o),o},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return!(49152&~e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=FS.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2},mayLookup:function(e){return FS.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return FS.lookupNode(e,t),20}catch(e){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=FS.lookupNode(e,t)}catch(e){return e.errno}var o=FS.nodePermissions(e,"wx");if(o)return o;if(n){if(!FS.isDir(r.mode))return 54;if(FS.isRoot(r)||FS.getPath(r)===FS.cwd())return 10}else if(FS.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?32:FS.isDir(e.mode)&&("r"!==FS.flagsToPermissionString(t)||512&t)?31:FS.nodePermissions(e,FS.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!FS.streams[n])return n;throw new FS.ErrnoError(33)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,n){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new FS.FSStream;for(var o in e)r[o]=e[o];e=r;var i=FS.nextfd(t,n);return e.fd=i,FS.streams[i]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=FS.getMounts(FS.root.mount),r=0;function o(e){return FS.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++r>=n.length&&o(null)}n.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,n){var r,o="/"===n,i=!n;if(o&&FS.root)throw new FS.ErrnoError(10);if(!o&&!i){var s=FS.lookupPath(n,{follow_mount:!1});if(n=s.path,r=s.node,FS.isMountpoint(r))throw new FS.ErrnoError(10);if(!FS.isDir(r.mode))throw new FS.ErrnoError(54)}var a={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(a);return c.mount=a,a.root=c,o?FS.root=c:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),c},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(28);var n=t.node,r=n.mounted,o=FS.getMounts(r);Object.keys(FS.nameTable).forEach((function(e){for(var t=FS.nameTable[e];t;){var n=t.name_next;o.includes(t.mount)&&FS.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);n.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=FS.lookupPath(e,{parent:!0}).node,o=PATH.basename(e);if(!o||"."===o||".."===o)throw new FS.ErrnoError(28);var i=FS.mayCreate(r,o);if(i)throw new FS.ErrnoError(i);if(!r.node_ops.mknod)throw new FS.ErrnoError(63);return r.node_ops.mknod(r,o,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",o=0;o<n.length;++o)if(n[o]){r+="/"+n[o];try{FS.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,FS.mknod(e,t,n)},symlink:function(e,t){if(!PATH_FS.resolve(e))throw new FS.ErrnoError(44);var n=FS.lookupPath(t,{parent:!0}).node;if(!n)throw new FS.ErrnoError(44);var r=PATH.basename(t),o=FS.mayCreate(n,r);if(o)throw new FS.ErrnoError(o);if(!n.node_ops.symlink)throw new FS.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,o=PATH.dirname(e),i=PATH.dirname(t),s=PATH.basename(e),a=PATH.basename(t);if(n=FS.lookupPath(e,{parent:!0}).node,r=FS.lookupPath(t,{parent:!0}).node,!n||!r)throw new FS.ErrnoError(44);if(n.mount!==r.mount)throw new FS.ErrnoError(75);var c,l=FS.lookupNode(n,s),u=PATH_FS.relative(e,i);if("."!==u.charAt(0))throw new FS.ErrnoError(28);if("."!==(u=PATH_FS.relative(t,o)).charAt(0))throw new FS.ErrnoError(55);try{c=FS.lookupNode(r,a)}catch(e){}if(l!==c){var d=FS.isDir(l.mode),f=FS.mayDelete(n,s,d);if(f)throw new FS.ErrnoError(f);if(f=c?FS.mayDelete(r,a,d):FS.mayCreate(r,a))throw new FS.ErrnoError(f);if(!n.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(l)||c&&FS.isMountpoint(c))throw new FS.ErrnoError(10);if(r!==n&&(f=FS.nodePermissions(n,"w")))throw new FS.ErrnoError(f);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(e,t)}catch(n){err("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}FS.hashRemoveNode(l);try{n.node_ops.rename(l,r,a)}catch(e){throw e}finally{FS.hashAddNode(l)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(e,t)}catch(n){err("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}).node,n=PATH.basename(e),r=FS.lookupNode(t,n),o=FS.mayDelete(t,n,!0);if(o)throw new FS.ErrnoError(o);if(!t.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(r))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){err("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),FS.destroyNode(r);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){err("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new FS.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}).node,n=PATH.basename(e),r=FS.lookupNode(t,n),o=FS.mayDelete(t,n,!1);if(o)throw new FS.ErrnoError(o);if(!t.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(r))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){err("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),FS.destroyNode(r);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){err("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=FS.lookupPath(e).node;if(!t)throw new FS.ErrnoError(44);if(!t.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=FS.lookupPath(e,{follow:!t}).node;if(!n)throw new FS.ErrnoError(44);if(!n.node_ops.getattr)throw new FS.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?FS.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);FS.chmod(n.node,t)},chown:function(e,t,n,r){var o;if(!(o="string"==typeof e?FS.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,n){FS.chown(e,t,n,!0)},fchown:function(e,t,n){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);FS.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(28);var n;if(!(n="string"==typeof e?FS.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(n.mode))throw new FS.ErrnoError(31);if(!FS.isFile(n.mode))throw new FS.ErrnoError(28);var r=FS.nodePermissions(n,"w");if(r)throw new FS.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);if(!(2097155&n.flags))throw new FS.ErrnoError(28);FS.truncate(n.node,t)},utime:function(e,t,n){var r=FS.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,o){if(""===e)throw new FS.ErrnoError(44);var i;if(n=void 0===n?438:n,n=64&(t="string"==typeof t?FS.modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof e)i=e;else{e=PATH.normalize(e);try{i=FS.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(i){if(128&t)throw new FS.ErrnoError(20)}else i=FS.mknod(e,n,0),s=!0;if(!i)throw new FS.ErrnoError(44);if(FS.isChrdev(i.mode)&&(t&=-513),65536&t&&!FS.isDir(i.mode))throw new FS.ErrnoError(54);if(!s){var a=FS.mayOpen(i,t);if(a)throw new FS.ErrnoError(a)}512&t&&FS.truncate(i,0),t&=-131713;var c=FS.createStream({node:i,path:FS.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},r,o);c.stream_ops.open&&c.stream_ops.open(c),!Module.logReadFiles||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,err("FS.trackingDelegate error on read file: "+e)));try{if(FS.trackingDelegate.onOpenFile){var l=0;1!=(2097155&t)&&(l|=FS.tracking.openFlags.READ),2097155&t&&(l|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(e,l)}}catch(t){err("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(FS.isClosed(e))throw new FS.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{FS.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new FS.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,o){if(r<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(1==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.read)throw new FS.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new FS.ErrnoError(70)}else o=e.position;var s=e.stream_ops.read(e,t,n,r,o);return i||(e.position+=s),s},write:function(e,t,n,r,o,i){if(r<0||o<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(!(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.write)throw new FS.ErrnoError(28);e.seekable&&1024&e.flags&&FS.llseek(e,0,2);var s=void 0!==o;if(s){if(!e.seekable)throw new FS.ErrnoError(70)}else o=e.position;var a=e.stream_ops.write(e,t,n,r,o,i);s||(e.position+=a);try{e.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(e.path)}catch(t){err("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return a},allocate:function(e,t,n){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(t<0||n<=0)throw new FS.ErrnoError(28);if(!(2097155&e.flags))throw new FS.ErrnoError(8);if(!FS.isFile(e.node.mode)&&!FS.isDir(e.node.mode))throw new FS.ErrnoError(43);if(!e.stream_ops.allocate)throw new FS.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,o,i){if(2&o&&!(2&i)&&2!=(2097155&e.flags))throw new FS.ErrnoError(2);if(1==(2097155&e.flags))throw new FS.ErrnoError(2);if(!e.stream_ops.mmap)throw new FS.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,o,i)},msync:function(e,t,n,r,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=FS.open(e,t.flags),o=FS.stat(e).size,i=new Uint8Array(o);return FS.read(r,i,0,o,0),"utf8"===t.encoding?n=UTF8ArrayToString(i,0):"binary"===t.encoding&&(n=i),FS.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=FS.open(e,n.flags,n.mode);if("string"==typeof t){var o=new Uint8Array(lengthBytesUTF8(t)+1),i=stringToUTF8Array(t,o,0,o.length);FS.write(r,o,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");FS.write(r,t,0,t.byteLength,void 0,n.canOwn)}FS.close(r)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(null===t.node)throw new FS.ErrnoError(44);if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(54);var n=FS.nodePermissions(t.node,"x");if(n)throw new FS.ErrnoError(n);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,o){return r}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var e=getRandomDevice();FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");var e=FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var t=FS.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=FS.getStream(n);if(!r)throw new FS.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr"),FS.open("/dev/stdin",0),FS.open("/dev/stdout",1),FS.open("/dev/stderr",1)},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS,IDBFS}},init:function(e,t,n){FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=n||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module._fflush;e&&e(0);for(var t=0;t<FS.streams.length;t++){var n=FS.streams[t];n&&FS.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=FS.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=FS.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=FS.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=PATH.basename(e),r=FS.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:FS.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var s=PATH.join2(e,i);try{FS.mkdir(s)}catch(e){}e=s}}return s},createFile:function(e,t,n,r,o){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),s=FS.getMode(r,o);return FS.create(i,s)},createDataFile:function(e,t,n,r,o,i){var s=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,a=FS.getMode(r,o),c=FS.create(s,a);if(n){if("string"==typeof n){for(var l=new Array(n.length),u=0,d=n.length;u<d;++u)l[u]=n.charCodeAt(u);n=l}FS.chmod(c,146|a);var f=FS.open(c,577);FS.write(f,n,0,n.length,0,i),FS.close(f),FS.chmod(c,a)}return c},createDevice:function(e,t,n,r){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),i=FS.getMode(!!n,!!r);FS.createDevice.major||(FS.createDevice.major=64);var s=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(s,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,o,i){for(var s=0,a=0;a<o;a++){var c;try{c=n()}catch(e){throw new FS.ErrnoError(29)}if(void 0===c&&0===s)throw new FS.ErrnoError(6);if(null==c)break;s++,t[r+a]=c}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,o,i){for(var s=0;s<o;s++)try{r(t[n+s])}catch(e){throw new FS.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),s}}),FS.mkdev(o,i,s)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(read_(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new FS.ErrnoError(29)}},createLazyFile:function(e,t,n,r,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,s=1048576;o||(s=r);var a=this;a.setDataGetter((function(e){var t=e*s,o=(e+1)*s-1;if(o=Math.min(o,r-1),void 0===a.chunks[e]&&(a.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",n,!1),r!==s&&o.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+n+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):intArrayFromString(o.responseText||"",!0)}(t,o)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!i&&r||(s=r=1,r=this.getter(0).length,s=r,out("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=s,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new i;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:s}}else a={isDevice:!1,url:n};var c=FS.createFile(e,t,a,r,o);a.contents?c.contents=a.contents:a.url&&(c.contents=null,c.url=a.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];l[e]=function(){return FS.forceLoadFile(c),t.apply(null,arguments)}})),l.read=function(e,t,n,r,o){FS.forceLoadFile(c);var i=e.node.contents;if(o>=i.length)return 0;var s=Math.min(i.length-o,r);if(i.slice)for(var a=0;a<s;a++)t[n+a]=i[o+a];else for(a=0;a<s;a++)t[n+a]=i.get(o+a);return s},c.stream_ops=l,c},createPreloadedFile:function(e,t,n,r,o,i,s,a,c,l){Browser.init();var u=t?PATH_FS.resolve(PATH.join2(e,t)):e,d=getUniqueRunDependency("cp "+u);function f(n){function f(n){l&&l(),a||FS.createDataFile(e,t,n,r,o,c),i&&i(),removeRunDependency(d)}var p=!1;Module.preloadPlugins.forEach((function(e){p||e.canHandle(u)&&(e.handle(n,u,f,(function(){s&&s(),removeRunDependency(d)})),p=!0)})),p||f(n)}addRunDependency(d),"string"==typeof n?asyncLoad(n,(function(e){f(e)}),s):f(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=FS.indexedDB();try{var o=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return n(e)}o.onupgradeneeded=function(){out("creating db"),o.result.createObjectStore(FS.DB_STORE_NAME)},o.onsuccess=function(){var r=o.result.transaction([FS.DB_STORE_NAME],"readwrite"),i=r.objectStore(FS.DB_STORE_NAME),s=0,a=0,c=e.length;function l(){0==a?t():n()}e.forEach((function(e){var t=i.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){++s+a==c&&l()},t.onerror=function(){a++,s+a==c&&l()}})),r.onerror=n},o.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=FS.indexedDB();try{var o=r.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return n(e)}o.onupgradeneeded=n,o.onsuccess=function(){var r=o.result;try{var i=r.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var s=i.objectStore(FS.DB_STORE_NAME),a=0,c=0,l=e.length;function u(){0==c?t():n()}e.forEach((function(e){var t=s.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),++a+c==l&&u()},t.onerror=function(){c++,a+c==l&&u()}})),i.onerror=n},o.onerror=n}},SYSCALLS={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t,n){if("/"===t[0])return t;var r;if(-100===e)r=FS.cwd();else{var o=FS.getStream(e);if(!o)throw new FS.ErrnoError(8);r=o.path}if(0==t.length){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return HEAP32[n>>2]=r.dev,HEAP32[n+4>>2]=0,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAP32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,HEAP32[n+32>>2]=0,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks,HEAP32[n+56>>2]=r.atime.getTime()/1e3|0,HEAP32[n+60>>2]=0,HEAP32[n+64>>2]=r.mtime.getTime()/1e3|0,HEAP32[n+68>>2]=0,HEAP32[n+72>>2]=r.ctime.getTime()/1e3|0,HEAP32[n+76>>2]=0,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+80>>2]=tempI64[0],HEAP32[n+84>>2]=tempI64[1],0},doMsync:function(e,t,n,r,o){var i=HEAPU8.slice(e,e+n);FS.msync(t,i,o,n,r)},doMkdir:function(e,t){return"/"===(e=PATH.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return FS.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=FS.readlink(e),o=Math.min(n,lengthBytesUTF8(r)),i=HEAP8[t+o];return stringToUTF8(r,t,n+1),HEAP8[t+o]=i,o},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=FS.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&FS.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=FS.getStream(n);return r&&FS.close(r),FS.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var s=HEAP32[t+8*i>>2],a=HEAP32[t+(8*i+4)>>2],c=FS.read(e,HEAP8,s,a,r);if(c<0)return-1;if(o+=c,c<a)break}return o},doWritev:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var s=HEAP32[t+8*i>>2],a=HEAP32[t+(8*i+4)>>2],c=FS.write(e,HEAP8,s,a,r);if(c<0)return-1;o+=c}return o},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t},get64:function(e,t){return e}};function ___sys__newselect(e,t,n,r,o){try{for(var i=0,s=t?HEAP32[t>>2]:0,a=t?HEAP32[t+4>>2]:0,c=n?HEAP32[n>>2]:0,l=n?HEAP32[n+4>>2]:0,u=r?HEAP32[r>>2]:0,d=r?HEAP32[r+4>>2]:0,f=0,p=0,h=0,m=0,g=0,_=0,v=(t?HEAP32[t>>2]:0)|(n?HEAP32[n>>2]:0)|(r?HEAP32[r>>2]:0),b=(t?HEAP32[t+4>>2]:0)|(n?HEAP32[n+4>>2]:0)|(r?HEAP32[r+4>>2]:0),y=function(e,t,n,r){return e<32?t&r:n&r},w=0;w<e;w++){var S=1<<w%32;if(y(w,v,b,S)){var E=FS.getStream(w);if(!E)throw new FS.ErrnoError(8);var T=SYSCALLS.DEFAULT_POLLMASK;E.stream_ops.poll&&(T=E.stream_ops.poll(E)),1&T&&y(w,s,a,S)&&(w<32?f|=S:p|=S,i++),4&T&&y(w,c,l,S)&&(w<32?h|=S:m|=S,i++),2&T&&y(w,u,d,S)&&(w<32?g|=S:_|=S,i++)}}return t&&(HEAP32[t>>2]=f,HEAP32[t+4>>2]=p),n&&(HEAP32[n>>2]=h,HEAP32[n+4>>2]=m),r&&(HEAP32[r>>2]=g,HEAP32[r+4>>2]=_),i}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}var ERRNO_CODES={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},SOCKFS={mount:function(e){return Module.websocket=Module.websocket&&"object"==typeof Module.websocket?Module.websocket:{},Module.websocket._callbacks={},Module.websocket.on=function(e,t){return"function"==typeof t&&(this._callbacks[e]=t),this},Module.websocket.emit=function(e,t){"function"==typeof this._callbacks[e]&&this._callbacks[e].call(this,t)},FS.createNode(null,"/",16895,0)},createSocket:function(e,t,n){t&=-526337,n&&assert(1==t==(6==n));var r={family:e,type:t,protocol:n,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:SOCKFS.websocket_sock_ops},o=SOCKFS.nextname(),i=FS.createNode(SOCKFS.root,o,49152,0);i.sock=r;var s=FS.createStream({path:o,node:i,flags:2,seekable:!1,stream_ops:SOCKFS.stream_ops});return r.stream=s,r},getSocket:function(e){var t=FS.getStream(e);return t&&FS.isSocket(t.node.mode)?t.node.sock:null},stream_ops:{poll:function(e){var t=e.node.sock;return t.sock_ops.poll(t)},ioctl:function(e,t,n){var r=e.node.sock;return r.sock_ops.ioctl(r,t,n)},read:function(e,t,n,r,o){var i=e.node.sock,s=i.sock_ops.recvmsg(i,r);return s?(t.set(s.buffer,n),s.buffer.length):0},write:function(e,t,n,r,o){var i=e.node.sock;return i.sock_ops.sendmsg(i,t,n,r)},close:function(e){var t=e.node.sock;t.sock_ops.close(t)}},nextname:function(){return SOCKFS.nextname.current||(SOCKFS.nextname.current=0),"socket["+SOCKFS.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,t,n){var r;if("object"==typeof t&&(r=t,t=null,n=null),r)if(r._socket)t=r._socket.remoteAddress,n=r._socket.remotePort;else{var o=/ws[s]?:\/\/([^:]+):(\d+)/.exec(r.url);if(!o)throw new Error("WebSocket URL must be in the format ws(s)://address:port");t=o[1],n=parseInt(o[2],10)}else try{var i=Module.websocket&&"object"==typeof Module.websocket,s="ws:#".replace("#","//");if(i&&"string"==typeof Module.websocket.url&&(s=Module.websocket.url),"ws://"===s||"wss://"===s){var a=t.split("/");s=s+a[0]+":"+n+"/"+a.slice(1).join("/")}var c="binary";i&&"string"==typeof Module.websocket.subprotocol&&(c=Module.websocket.subprotocol);var l=void 0;"null"!==c&&(c=c.replace(/^ +| +$/g,"").split(/ *, */),l=ENVIRONMENT_IS_NODE?{protocol:c.toString()}:c),i&&null===Module.websocket.subprotocol&&(c="null",l=void 0),(r=new WebSocket(s,l)).binaryType="arraybuffer"}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EHOSTUNREACH)}var u={addr:t,port:n,socket:r,dgram_send_queue:[]};return SOCKFS.websocket_sock_ops.addPeer(e,u),SOCKFS.websocket_sock_ops.handlePeerEvents(e,u),2===e.type&&void 0!==e.sport&&u.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(65280&e.sport)>>8,255&e.sport])),u},getPeer:function(e,t,n){return e.peers[t+":"+n]},addPeer:function(e,t){e.peers[t.addr+":"+t.port]=t},removePeer:function(e,t){delete e.peers[t.addr+":"+t.port]},handlePeerEvents:function(e,t){var n=!0,r=function(){Module.websocket.emit("open",e.stream.fd);try{for(var n=t.dgram_send_queue.shift();n;)t.socket.send(n),n=t.dgram_send_queue.shift()}catch(e){t.socket.close()}};function o(r){if("string"==typeof r)r=(new TextEncoder).encode(r);else{if(assert(void 0!==r.byteLength),0==r.byteLength)return;r=new Uint8Array(r)}var o=n;if(n=!1,o&&10===r.length&&255===r[0]&&255===r[1]&&255===r[2]&&255===r[3]&&r[4]==="p".charCodeAt(0)&&r[5]==="o".charCodeAt(0)&&r[6]==="r".charCodeAt(0)&&r[7]==="t".charCodeAt(0)){var i=r[8]<<8|r[9];return SOCKFS.websocket_sock_ops.removePeer(e,t),t.port=i,void SOCKFS.websocket_sock_ops.addPeer(e,t)}e.recv_queue.push({addr:t.addr,port:t.port,data:r}),Module.websocket.emit("message",e.stream.fd)}ENVIRONMENT_IS_NODE?(t.socket.on("open",r),t.socket.on("message",(function(e,t){t.binary&&o(new Uint8Array(e).buffer)})),t.socket.on("close",(function(){Module.websocket.emit("close",e.stream.fd)})),t.socket.on("error",(function(t){e.error=ERRNO_CODES.ECONNREFUSED,Module.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])}))):(t.socket.onopen=r,t.socket.onclose=function(){Module.websocket.emit("close",e.stream.fd)},t.socket.onmessage=function(e){o(e.data)},t.socket.onerror=function(t){e.error=ERRNO_CODES.ECONNREFUSED,Module.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(1===e.type&&e.server)return e.pending.length?65:0;var t=0,n=1===e.type?SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!n||n&&n.socket.readyState===n.socket.CLOSING||n&&n.socket.readyState===n.socket.CLOSED)&&(t|=65),(!n||n&&n.socket.readyState===n.socket.OPEN)&&(t|=4),(n&&n.socket.readyState===n.socket.CLOSING||n&&n.socket.readyState===n.socket.CLOSED)&&(t|=16),t},ioctl:function(e,t,n){if(21531===t){var r=0;return e.recv_queue.length&&(r=e.recv_queue[0].data.length),HEAP32[n>>2]=r,0}return ERRNO_CODES.EINVAL},close:function(e){if(e.server){try{e.server.close()}catch(e){}e.server=null}for(var t=Object.keys(e.peers),n=0;n<t.length;n++){var r=e.peers[t[n]];try{r.socket.close()}catch(e){}SOCKFS.websocket_sock_ops.removePeer(e,r)}return 0},bind:function(e,t,n){if(void 0!==e.saddr||void 0!==e.sport)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(e.saddr=t,e.sport=n,2===e.type){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(e){if(!(e instanceof FS.ErrnoError))throw e;if(e.errno!==ERRNO_CODES.EOPNOTSUPP)throw e}}},connect:function(e,t,n){if(e.server)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);if(void 0!==e.daddr&&void 0!==e.dport){var r=SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(r)throw r.socket.readyState===r.socket.CONNECTING?new FS.ErrnoError(ERRNO_CODES.EALREADY):new FS.ErrnoError(ERRNO_CODES.EISCONN)}var o=SOCKFS.websocket_sock_ops.createPeer(e,t,n);throw e.daddr=o.addr,e.dport=o.port,new FS.ErrnoError(ERRNO_CODES.EINPROGRESS)},listen:function(e,t){if(!ENVIRONMENT_IS_NODE)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP)},accept:function(e){if(!e.server)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var t=e.pending.shift();return t.stream.flags=e.stream.flags,t},getname:function(e,t){var n,r;if(t){if(void 0===e.daddr||void 0===e.dport)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);n=e.daddr,r=e.dport}else n=e.saddr||0,r=e.sport||0;return{addr:n,port:r}},sendmsg:function(e,t,n,r,o,i){if(2===e.type){if(void 0!==o&&void 0!==i||(o=e.daddr,i=e.dport),void 0===o||void 0===i)throw new FS.ErrnoError(ERRNO_CODES.EDESTADDRREQ)}else o=e.daddr,i=e.dport;var s,a=SOCKFS.websocket_sock_ops.getPeer(e,o,i);if(1===e.type){if(!a||a.socket.readyState===a.socket.CLOSING||a.socket.readyState===a.socket.CLOSED)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);if(a.socket.readyState===a.socket.CONNECTING)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}if(ArrayBuffer.isView(t)&&(n+=t.byteOffset,t=t.buffer),s=t.slice(n,n+r),2===e.type&&(!a||a.socket.readyState!==a.socket.OPEN))return a&&a.socket.readyState!==a.socket.CLOSING&&a.socket.readyState!==a.socket.CLOSED||(a=SOCKFS.websocket_sock_ops.createPeer(e,o,i)),a.dgram_send_queue.push(s),r;try{return a.socket.send(s),r}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}},recvmsg:function(e,t){if(1===e.type&&e.server)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);var n=e.recv_queue.shift();if(!n){if(1===e.type){var r=SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(r){if(r.socket.readyState===r.socket.CLOSING||r.socket.readyState===r.socket.CLOSED)return null;throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN)}throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}var o=n.data.byteLength||n.data.length,i=n.data.byteOffset||0,s=n.data.buffer||n.data,a=Math.min(t,o),c={buffer:new Uint8Array(s,i,a),addr:n.addr,port:n.port};if(1===e.type&&a<o){var l=o-a;n.data=new Uint8Array(s,i+a,l),e.recv_queue.unshift(n)}return c}}};function getSocketFromFD(e){var t=SOCKFS.getSocket(e);if(!t)throw new FS.ErrnoError(8);return t}function setErrNo(e){return HEAP32[___errno_location()>>2]=e,e}function inetPton4(e){for(var t=e.split("."),n=0;n<4;n++){var r=Number(t[n]);if(isNaN(r))return null;t[n]=r}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function jstoi_q(e){return parseInt(e)}function inetPton6(e){var t,n,r,o,i=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=jstoi_q(t[t.length-4])+256*jstoi_q(t[t.length-3]),t[t.length-3]=jstoi_q(t[t.length-2])+256*jstoi_q(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),r=0,o=0,n=0;n<t.length;n++)if("string"==typeof t[n])if("Z"===t[n]){for(o=0;o<8-t.length+1;o++)i[n+o]=0;r=o-1}else i[n+r]=_htons(parseInt(t[n],16));else i[n+r]=t[n];return[i[1]<<16|i[0],i[3]<<16|i[2],i[5]<<16|i[4],i[7]<<16|i[6]]}function writeSockaddr(e,t,n,r,o){switch(t){case 2:n=inetPton4(n),zeroMemory(e,16),o&&(HEAP32[o>>2]=16),HEAP16[e>>1]=t,HEAP32[e+4>>2]=n,HEAP16[e+2>>1]=_htons(r);break;case 10:n=inetPton6(n),zeroMemory(e,28),o&&(HEAP32[o>>2]=28),HEAP32[e>>2]=t,HEAP32[e+8>>2]=n[0],HEAP32[e+12>>2]=n[1],HEAP32[e+16>>2]=n[2],HEAP32[e+20>>2]=n[3],HEAP16[e+2>>1]=_htons(r);break;default:return 5}return 0}var DNS={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,n=inetPton4(e);if(null!==n)return e;if(null!==(n=inetPton6(e)))return e;if(DNS.address_map.addrs[e])t=DNS.address_map.addrs[e];else{var r=DNS.address_map.id++;assert(r<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&r)+"."+(65280&r),DNS.address_map.names[t]=e,DNS.address_map.addrs[e]=t}return t},lookup_addr:function(e){return DNS.address_map.names[e]?DNS.address_map.names[e]:null}};function ___sys_accept4(e,t,n,r){try{var o=getSocketFromFD(e),i=o.sock_ops.accept(o);return t&&writeSockaddr(t,i.family,DNS.lookup_name(i.daddr),i.dport,n),i.stream.fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_access(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doAccess(e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function inetNtop4(e){return(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function inetNtop6(e){var t="",n=0,r=0,o=0,i=0,s=0,a=0,c=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],l=!0,u="";for(a=0;a<5;a++)if(0!==c[a]){l=!1;break}if(l){if(u=inetNtop4(c[6]|c[7]<<16),-1===c[5])return(t="::ffff:")+u;if(0===c[5])return"0.0.0.0"===u&&(u=""),"0.0.0.1"===u&&(u="1"),(t="::")+u}for(n=0;n<8;n++)0===c[n]&&(n-o>1&&(s=0),o=n,s++),s>r&&(i=n-(r=s)+1);for(n=0;n<8;n++)r>1&&0===c[n]&&n>=i&&n<i+r?n===i&&(t+=":",0===i&&(t+=":")):(t+=Number(_ntohs(65535&c[n])).toString(16),t+=n<7?":":"");return t}function readSockaddr(e,t){var n,r=HEAP16[e>>1],o=_ntohs(HEAPU16[e+2>>1]);switch(r){case 2:if(16!==t)return{errno:28};n=inetNtop4(n=HEAP32[e+4>>2]);break;case 10:if(28!==t)return{errno:28};n=inetNtop6(n=[HEAP32[e+8>>2],HEAP32[e+12>>2],HEAP32[e+16>>2],HEAP32[e+20>>2]]);break;default:return{errno:5}}return{family:r,addr:n,port:o}}function getSocketAddress(e,t,n){if(n&&0===e)return null;var r=readSockaddr(e,t);if(r.errno)throw new FS.ErrnoError(r.errno);return r.addr=DNS.lookup_addr(r.addr)||r.addr,r}function ___sys_bind(e,t,n){try{var r=getSocketFromFD(e),o=getSocketAddress(t,n);return r.sock_ops.bind(r,o.addr,o.port),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_chdir(e){try{return e=SYSCALLS.getStr(e),FS.chdir(e),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_chmod(e,t){try{return e=SYSCALLS.getStr(e),FS.chmod(e,t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_connect(e,t,n){try{var r=getSocketFromFD(e),o=getSocketAddress(t,n);return r.sock_ops.connect(r,o.addr,o.port),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_fcntl64(e,t,n){SYSCALLS.varargs=n;try{var r=SYSCALLS.getStreamFromFD(e);switch(t){case 0:return(o=SYSCALLS.get())<0?-28:FS.open(r.path,r.flags,0,o).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var o=SYSCALLS.get();return r.flags|=o,0;case 12:return o=SYSCALLS.get(),HEAP16[o+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return setErrNo(28),-1}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getcwd(e,t){try{if(0===t)return-28;var n=FS.cwd();return t<lengthBytesUTF8(n)+1?-68:(stringToUTF8(n,e,t),e)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getdents64(e,t,n){try{var r=SYSCALLS.getStreamFromFD(e);r.getdents||(r.getdents=FS.readdir(r.path));for(var o=280,i=0,s=FS.llseek(r,0,1),a=Math.floor(s/o);a<r.getdents.length&&i+o<=n;){var c,l,u=r.getdents[a];if("."===u[0])c=1,l=4;else{var d=FS.lookupNode(r.node,u);c=d.id,l=FS.isChrdev(d.mode)?2:FS.isDir(d.mode)?4:FS.isLink(d.mode)?10:8}tempI64=[c>>>0,(tempDouble=c,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+i>>2]=tempI64[0],HEAP32[t+i+4>>2]=tempI64[1],tempI64=[(a+1)*o>>>0,(tempDouble=(a+1)*o,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+i+8>>2]=tempI64[0],HEAP32[t+i+12>>2]=tempI64[1],HEAP16[t+i+16>>1]=280,HEAP8[t+i+18|0]=l,stringToUTF8(u,t+i+19,256),i+=o,a+=1}return FS.llseek(r,a*o,0),i}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getpid(){return 42}function ___sys_getsockname(e,t,n){try{err("__sys_getsockname "+e);var r=getSocketFromFD(e);return writeSockaddr(t,r.family,DNS.lookup_name(r.saddr||"0.0.0.0"),r.sport,n),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getsockopt(e,t,n,r,o){try{var i=getSocketFromFD(e);return 1===t&&4===n?(HEAP32[r>>2]=i.error,HEAP32[o>>2]=4,i.error=null,0):-50}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_ioctl(e,t,n){SYSCALLS.varargs=n;try{var r=SYSCALLS.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var o=SYSCALLS.get();return HEAP32[o>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return o=SYSCALLS.get(),FS.ioctl(r,t,o);default:abort("bad ioctl syscall "+t)}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_listen(e,t){try{var n=getSocketFromFD(e);return n.sock_ops.listen(n,t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_lstat64(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doStat(FS.lstat,e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_mkdir(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doMkdir(e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_open(e,t,n){SYSCALLS.varargs=n;try{var r=SYSCALLS.getStr(e),o=n?SYSCALLS.get():0;return FS.open(r,t,o).fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_poll(e,t,n){try{for(var r=0,o=0;o<t;o++){var i=e+8*o,s=HEAP32[i>>2],a=HEAP16[i+4>>1],c=32,l=FS.getStream(s);l&&(c=SYSCALLS.DEFAULT_POLLMASK,l.stream_ops.poll&&(c=l.stream_ops.poll(l))),(c&=24|a)&&r++,HEAP16[i+6>>1]=c}return r}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_readlink(e,t,n){try{return e=SYSCALLS.getStr(e),SYSCALLS.doReadlink(e,t,n)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_recvfrom(e,t,n,r,o,i){try{var s=getSocketFromFD(e),a=s.sock_ops.recvmsg(s,n);return a?(o&&writeSockaddr(o,s.family,DNS.lookup_name(a.addr),a.port,i),HEAPU8.set(a.buffer,t),a.buffer.byteLength):0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_rename(e,t){try{return e=SYSCALLS.getStr(e),t=SYSCALLS.getStr(t),FS.rename(e,t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_rmdir(e){try{return e=SYSCALLS.getStr(e),FS.rmdir(e),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_sendto(e,t,n,r,o,i){try{var s=getSocketFromFD(e),a=getSocketAddress(o,i,!0);return a?s.sock_ops.sendmsg(s,HEAP8,t,n,a.addr,a.port):FS.write(s.stream,HEAP8,t,n)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}var ___sys_setsockopt=function(e){err("warning: unsupported syscall: __sys_setsockopt");try{return-50}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}};function ___sys_socket(e,t,n){try{return SOCKFS.createSocket(e,t,n).stream.fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_stat64(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doStat(FS.stat,e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_statfs64(e,t,n){try{return e=SYSCALLS.getStr(e),HEAP32[n+4>>2]=4096,HEAP32[n+40>>2]=4096,HEAP32[n+8>>2]=1e6,HEAP32[n+12>>2]=5e5,HEAP32[n+16>>2]=5e5,HEAP32[n+20>>2]=FS.nextInode,HEAP32[n+24>>2]=1e6,HEAP32[n+28>>2]=42,HEAP32[n+44>>2]=2,HEAP32[n+36>>2]=255,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_symlink(e,t){try{return e=SYSCALLS.getStr(e),t=SYSCALLS.getStr(t),FS.symlink(e,t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_unlink(e){try{return e=SYSCALLS.getStr(e),FS.unlink(e),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}var ___sys_wait4=function(){return err("warning: unsupported syscall: __sys_wait4"),-52},_emscripten_get_now;function __emscripten_throw_longjmp(){throw"longjmp"}function _abort(){abort()}_emscripten_get_now=function(){return performance.now()};var _emscripten_get_now_is_monotonic=!0;function _clock_gettime(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e||!_emscripten_get_now_is_monotonic)return setErrNo(28),-1;n=_emscripten_get_now()}return HEAP32[t>>2]=n/1e3|0,HEAP32[t+4>>2]=n%1e3*1e3*1e3|0,0}function _dlclose(e){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _dlerror(){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _dlopen(e,t){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _dlsym(e,t){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}var readAsmConstArgsArray=[];function readAsmConstArgs(e,t){var n;for(readAsmConstArgsArray.length=0,t>>=2;n=HEAPU8[e++];){var r=n<105;r&&1&t&&t++,readAsmConstArgsArray.push(r?HEAPF64[t++>>1]:HEAP32[t]),++t}return readAsmConstArgsArray}function _emscripten_asm_const_int(e,t,n){var r=readAsmConstArgs(t,n);return ASM_CONSTS[e].apply(null,r)}function _emscripten_set_main_loop_timing(e,t){if(Browser.mainLoop.timingMode=e,Browser.mainLoop.timingValue=t,!Browser.mainLoop.func)return 1;if(Browser.mainLoop.running||(runtimeKeepalivePush(),Browser.mainLoop.running=!0),0==e)Browser.mainLoop.scheduler=function(){var e=0|Math.max(0,Browser.mainLoop.tickStartTime+t-_emscripten_get_now());setTimeout(Browser.mainLoop.runner,e)},Browser.mainLoop.method="timeout";else if(1==e)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){var n=[],r="setimmediate";addEventListener("message",(function(e){e.data!==r&&e.data.target!==r||(e.stopPropagation(),n.shift()())}),!0),setImmediate=function(e){n.push(e),ENVIRONMENT_IS_WORKER?(void 0===Module.setImmediates&&(Module.setImmediates=[]),Module.setImmediates.push(e),postMessage({target:r})):postMessage(r,"*")}}Browser.mainLoop.scheduler=function(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function _emscripten_webgl_do_commit_frame(){return GL.currentContext&&GL.currentContext.GLctx?GL.currentContext.defaultFbo?(GL.blitOffscreenFramebuffer(GL.currentContext),0):GL.currentContext.attributes.explicitSwapControl?0:-3:-3}function _emscripten_webgl_commit_frame(){return _emscripten_webgl_do_commit_frame()}function runtimeKeepalivePush(){runtimeKeepaliveCounter+=1}function _exit(e){exit(e)}function maybeExit(){if(!keepRuntimeAlive())try{_exit(EXITSTATUS)}catch(e){if(e instanceof ExitStatus)return;throw e}}function setMainLoop(e,t,n,r,o){assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=e,Browser.mainLoop.arg=r;var i=Browser.mainLoop.currentlyRunningMainloop;function s(){return!(i<Browser.mainLoop.currentlyRunningMainloop&&(runtimeKeepalivePop(),maybeExit(),1))}if(Browser.mainLoop.running=!1,Browser.mainLoop.runner=function(){if(!ABORT)if(Browser.mainLoop.queue.length>0){var t=Date.now(),n=Browser.mainLoop.queue.shift();if(n.func(n.arg),Browser.mainLoop.remainingBlockers){var r=Browser.mainLoop.remainingBlockers,o=r%1==0?r-1:Math.floor(r);n.counted?Browser.mainLoop.remainingBlockers=o:(o+=.5,Browser.mainLoop.remainingBlockers=(8*r+o)/9)}if(console.log('main loop blocker "'+n.name+'" took '+(Date.now()-t)+" ms"),Browser.mainLoop.updateStatus(),!s())return;setTimeout(Browser.mainLoop.runner,0)}else s()&&(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,1==Browser.mainLoop.timingMode&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0?Browser.mainLoop.scheduler():(0==Browser.mainLoop.timingMode&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),Browser.mainLoop.runIter(e),s()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())))},o||(t&&t>0?_emscripten_set_main_loop_timing(0,1e3/t):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),n)throw"unwind"}function callUserCallback(e,t){if(!ABORT)if(t)e();else{try{e()}catch(e){if(e instanceof ExitStatus)return;if("unwind"!==e)throw e&&"object"==typeof e&&e.stack&&err("exception thrown: "+[e,e.stack]),e}maybeExit()}}function safeSetTimeout(e,t){return runtimeKeepalivePush(),setTimeout((function(){runtimeKeepalivePop(),callUserCallback(e)}),t)}function runtimeKeepalivePop(){runtimeKeepaliveCounter-=1}var Browser={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var e=Browser.mainLoop.timingMode,t=Browser.mainLoop.timingValue,n=Browser.mainLoop.func;Browser.mainLoop.func=null,setMainLoop(n,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(e,t),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var e=Module.statusMessage||"Please wait...",t=Browser.mainLoop.remainingBlockers,n=Browser.mainLoop.expectedBlockers;t?t<n?Module.setStatus(e+" ("+(n-t)+"/"+n+")"):Module.setStatus(e):Module.setStatus("")}},runIter:function(e){if(!ABORT){if(Module.preMainLoop&&!1===Module.preMainLoop())return;callUserCallback(e),Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Module.preloadPlugins||(Module.preloadPlugins=[]),!Browser.initted){Browser.initted=!0;try{new Blob,Browser.hasBlobConstructor=!0}catch(e){Browser.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Browser.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Browser.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,Module.noImageDecoding||void 0!==Browser.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0);var e={canHandle:function(e){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,n,r){var o=null;if(Browser.hasBlobConstructor)try{(o=new Blob([e],{type:Browser.getMimetype(t)})).size!==e.length&&(o=new Blob([new Uint8Array(e).buffer],{type:Browser.getMimetype(t)}))}catch(e){warnOnce("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!o){var i=new Browser.BlobBuilder;i.append(new Uint8Array(e).buffer),o=i.getBlob()}var s=Browser.URLObject.createObjectURL(o),a=new Image;a.onload=function(){assert(a.complete,"Image "+t+" could not be decoded");var r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d").drawImage(a,0,0),Module.preloadedImages[t]=r,Browser.URLObject.revokeObjectURL(s),n&&n(e)},a.onerror=function(e){console.log("Image "+s+" could not be decoded"),r&&r()},a.src=s}};Module.preloadPlugins.push(e);var t={canHandle:function(e){return!Module.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,n,r){var o=!1;function i(r){o||(o=!0,Module.preloadedAudios[t]=r,n&&n(e))}function s(){o||(o=!0,Module.preloadedAudios[t]=new Audio,r&&r())}if(!Browser.hasBlobConstructor)return s();try{var a=new Blob([e],{type:Browser.getMimetype(t)})}catch(e){return s()}var c=Browser.URLObject.createObjectURL(a),l=new Audio;l.addEventListener("canplaythrough",(function(){i(l)}),!1),l.onerror=function(n){o||(console.log("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),l.src="data:audio/x-"+t.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0,o=0,i=0;i<e.length;i++)for(r=r<<8|e[i],o+=8;o>=6;){var s=r>>o-6&63;o-=6,n+=t[s]}return 2==o?(n+=t[(3&r)<<4],n+="=="):4==o&&(n+=t[(15&r)<<2],n+="="),n}(e),i(l))},l.src=c,safeSetTimeout((function(){i(l)}),1e4)}};Module.preloadPlugins.push(t);var n=Module.canvas;n&&(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock||n.msRequestPointerLock||function(){},n.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},n.exitPointerLock=n.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",r,!1),document.addEventListener("mozpointerlockchange",r,!1),document.addEventListener("webkitpointerlockchange",r,!1),document.addEventListener("mspointerlockchange",r,!1),Module.elementPointerLock&&n.addEventListener("click",(function(e){!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),e.preventDefault())}),!1))}function r(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}},createContext:function(e,t,n,r){if(t&&Module.ctx&&e==Module.canvas)return Module.ctx;var o,i;if(t){var s={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(r)for(var a in r)s[a]=r[a];void 0!==GL&&(i=GL.createContext(e,s))&&(o=GL.getContext(i).GLctx)}else o=e.getContext("2d");return o?(n&&(t||assert(void 0===GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=o,t&&GL.makeContextCurrent(i),Module.useWebGL=t,Browser.moduleContextCreatedCallbacks.forEach((function(e){e()})),Browser.init()),o):null},destroyContext:function(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){Browser.lockPointer=e,Browser.resizeCanvas=t,void 0===Browser.lockPointer&&(Browser.lockPointer=!0),void 0===Browser.resizeCanvas&&(Browser.resizeCanvas=!1);var n=Module.canvas;function r(){Browser.isFullscreen=!1;var e=n.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(n.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&n.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(n)):(e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(n)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",r,!1),document.addEventListener("mozfullscreenchange",r,!1),document.addEventListener("webkitfullscreenchange",r,!1),document.addEventListener("MSFullscreenChange",r,!1));var o=document.createElement("div");n.parentNode.insertBefore(o,n),o.appendChild(n),o.requestFullscreen=o.requestFullscreen||o.mozRequestFullScreen||o.msRequestFullscreen||(o.webkitRequestFullscreen?function(){o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(o.webkitRequestFullScreen?function(){o.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),o.requestFullscreen()},exitFullscreen:function(){return!!Browser.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===Browser.nextRAF)Browser.nextRAF=t+1e3/60;else for(;t+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var n=Math.max(Browser.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Browser.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeSetTimeout:function(e){return safeSetTimeout(e)},safeRequestAnimationFrame:function(e){return runtimeKeepalivePush(),Browser.requestAnimationFrame((function(){runtimeKeepalivePop(),callUserCallback(e)}))},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(Browser.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(e),Browser.mouseMovementY=Browser.getMovementY(e)),"undefined"!=typeof SDL?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var t=Module.canvas.getBoundingClientRect(),n=Module.canvas.width,r=Module.canvas.height,o=void 0!==window.scrollX?window.scrollX:window.pageXOffset,i=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){var s=e.touch;if(void 0===s)return;var a=s.pageX-(o+t.left),c=s.pageY-(i+t.top),l={x:a*=n/t.width,y:c*=r/t.height};if("touchstart"===e.type)Browser.lastTouches[s.identifier]=l,Browser.touches[s.identifier]=l;else if("touchend"===e.type||"touchmove"===e.type){var u=Browser.touches[s.identifier];u||(u=l),Browser.lastTouches[s.identifier]=u,Browser.touches[s.identifier]=l}return}var d=e.pageX-(o+t.left),f=e.pageY-(i+t.top);d*=n/t.width,f*=r/t.height,Browser.mouseMovementX=d-Browser.mouseX,Browser.mouseMovementY=f-Browser.mouseY,Browser.mouseX=d,Browser.mouseY=f}},resizeListeners:[],updateResizeListeners:function(){var e=Module.canvas;Browser.resizeListeners.forEach((function(t){t(e.width,e.height)}))},setCanvasSize:function(e,t,n){var r=Module.canvas;Browser.updateCanvasDimensions(r,e,t),n||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var e=HEAPU32[SDL.screen>>2];e|=8388608,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var e=HEAPU32[SDL.screen>>2];e&=-8388609,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var r=t,o=n;if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(r/o<Module.forcedAspectRatio?r=Math.round(o*Module.forcedAspectRatio):o=Math.round(r/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var i=Math.min(screen.width/r,screen.height/o);r=Math.round(r*i),o=Math.round(o*i)}Browser.resizeCanvas?(e.width!=r&&(e.width=r),e.height!=o&&(e.height=o),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),void 0!==e.style&&(r!=t||o!=n?(e.style.setProperty("width",r+"px","important"),e.style.setProperty("height",o+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}};function _emscripten_cancel_main_loop(){Browser.mainLoop.pause(),Browser.mainLoop.func=null}function _emscripten_force_exit(e){noExitRuntime=!1,runtimeKeepaliveCounter=0,exit(e)}function __webgl_enable_ANGLE_instanced_arrays(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,o){t.drawArraysInstancedANGLE(e,n,r,o)},e.drawElementsInstanced=function(e,n,r,o,i){t.drawElementsInstancedANGLE(e,n,r,o,i)},1}function __webgl_enable_OES_vertex_array_object(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function __webgl_enable_WEBGL_draw_buffers(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(e){return!!(e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(e){return!!(e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function __webgl_enable_WEBGL_multi_draw(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var GL={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){GL.lastError||(GL.lastError=e)},getNewId:function(e){for(var t=GL.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var s=r?HEAP32[r+4*i>>2]:-1;o+=UTF8ToString(HEAP32[n+4*i>>2],s<0?void 0:s)}return o},createContext:function(e,t){t.renderViaOffscreenBackBuffer&&(t.preserveDrawingBuffer=!0),e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);return n?GL.registerContext(n,t):0},enableOffscreenFramebufferAttributes:function(e){e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(e){var t=e.GLctx,n=t.createFramebuffer();if(t.bindFramebuffer(36160,n),e.defaultFbo=n,e.defaultFboForbidBlitFramebuffer=!1,t.getContextAttributes().antialias)e.defaultFboForbidBlitFramebuffer=!0;else{var r=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/);if(null!=r){var o=r[1];e.defaultFboForbidBlitFramebuffer=o<67}}e.defaultColorTarget=t.createTexture(),e.defaultDepthTarget=t.createRenderbuffer(),GL.resizeOffscreenFramebuffer(e),t.bindTexture(3553,e.defaultColorTarget),t.texParameteri(3553,10241,9728),t.texParameteri(3553,10240,9728),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071),t.texImage2D(3553,0,6408,t.canvas.width,t.canvas.height,0,6408,5121,null),t.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),t.bindTexture(3553,null),t.createRenderbuffer(),t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.canvas.width,t.canvas.height),t.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),t.bindRenderbuffer(36161,null);var i=t.createBuffer();t.bindBuffer(34962,i),t.bufferData(34962,new Float32Array([-1,-1,-1,1,1,-1,1,1]),35044),t.bindBuffer(34962,null),e.blitVB=i;var s=t.createShader(35633);t.shaderSource(s,"attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }"),t.compileShader(s);var a=t.createShader(35632);t.shaderSource(a,"varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }"),t.compileShader(a);var c=t.createProgram();t.attachShader(c,s),t.attachShader(c,a),t.linkProgram(c),e.blitProgram=c,e.blitPosLoc=t.getAttribLocation(c,"pos"),t.useProgram(c),t.uniform1i(t.getUniformLocation(c,"sampler"),0),t.useProgram(null),e.defaultVao=void 0,t.createVertexArray&&(e.defaultVao=t.createVertexArray(),t.bindVertexArray(e.defaultVao),t.enableVertexAttribArray(e.blitPosLoc),t.bindVertexArray(null))},resizeOffscreenFramebuffer:function(e){var t=e.GLctx;if(e.defaultColorTarget){var n=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget),t.texImage2D(3553,0,6408,t.drawingBufferWidth,t.drawingBufferHeight,0,6408,5121,null),t.bindTexture(3553,n)}if(e.defaultDepthTarget){var r=t.getParameter(36007);t.bindRenderbuffer(36161,e.defaultDepthTarget),t.renderbufferStorage(36161,33189,t.drawingBufferWidth,t.drawingBufferHeight),t.bindRenderbuffer(36161,r)}},blitOffscreenFramebuffer:function(e){var t=e.GLctx,n=t.getParameter(3089);n&&t.disable(3089);var r=t.getParameter(36006);if(t.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)t.bindFramebuffer(36008,e.defaultFbo),t.bindFramebuffer(36009,null),t.blitFramebuffer(0,0,t.canvas.width,t.canvas.height,0,0,t.canvas.width,t.canvas.height,16384,9728);else{t.bindFramebuffer(36160,null);var o=t.getParameter(35725);t.useProgram(e.blitProgram);var i=t.getParameter(34964);t.bindBuffer(34962,e.blitVB);var s=t.getParameter(34016);t.activeTexture(33984);var a=t.getParameter(32873);t.bindTexture(3553,e.defaultColorTarget);var c=t.getParameter(3042);c&&t.disable(3042);var l=t.getParameter(2884);l&&t.disable(2884);var u=t.getParameter(2929);u&&t.disable(2929);var d=t.getParameter(2960);function f(){t.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),t.drawArrays(5,0,4)}if(d&&t.disable(2960),e.defaultVao){var p=t.getParameter(34229);t.bindVertexArray(e.defaultVao),f(),t.bindVertexArray(p)}else{for(var h={buffer:t.getVertexAttrib(e.blitPosLoc,34975),size:t.getVertexAttrib(e.blitPosLoc,34339),stride:t.getVertexAttrib(e.blitPosLoc,34340),type:t.getVertexAttrib(e.blitPosLoc,34341),normalized:t.getVertexAttrib(e.blitPosLoc,34922),pointer:t.getVertexAttribOffset(e.blitPosLoc,34373)},m=t.getParameter(34921),g=[],_=0;_<m;++_){var v=t.getVertexAttrib(_,34338),b=_==e.blitPosLoc;v&&!b&&t.disableVertexAttribArray(_),!v&&b&&t.enableVertexAttribArray(_),g[_]=v}for(f(),_=0;_<m;++_){v=g[_];var y=_==e.blitPosLoc;v&&!y&&t.enableVertexAttribArray(_),!v&&y&&t.disableVertexAttribArray(_)}t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(e.blitPosLoc,h.size,h.type,h.normalized,h.stride,h.offset)}d&&t.enable(2960),u&&t.enable(2929),l&&t.enable(2884),c&&t.enable(3042),t.bindTexture(3553,a),t.activeTexture(s),t.bindBuffer(34962,i),t.useProgram(o)}t.bindFramebuffer(36160,r),n&&t.enable(3089)},registerContext:function(e,t){var n=GL.getNewId(GL.contexts),r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),GL.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&GL.initExtensions(r),t.renderViaOffscreenBackBuffer&&GL.createOffscreenFramebuffer(r),n},makeContextCurrent:function(e){return GL.currentContext=GL.contexts[e],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!(e&&!GLctx)},getContext:function(e){return GL.contexts[e]},deleteContext:function(e){GL.currentContext===GL.contexts[e]&&(GL.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(GL.contexts[e].GLctx.canvas),GL.contexts[e]&&GL.contexts[e].GLctx.canvas&&(GL.contexts[e].GLctx.canvas.GLctxObject=void 0),GL.contexts[e]=null},initExtensions:function(e){if(e||(e=GL.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;__webgl_enable_ANGLE_instanced_arrays(t),__webgl_enable_OES_vertex_array_object(t),__webgl_enable_WEBGL_draw_buffers(t),__webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(t),__webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),__webgl_enable_WEBGL_multi_draw(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||t.getExtension(e)}))}}};function _emscripten_glActiveTexture(e){GLctx.activeTexture(e)}function _emscripten_glAttachShader(e,t){GLctx.attachShader(GL.programs[e],GL.shaders[t])}function _emscripten_glBeginQuery(e,t){GLctx.beginQuery(e,GL.queries[t])}function _emscripten_glBeginQueryEXT(e,t){GLctx.disjointTimerQueryExt.beginQueryEXT(e,GL.queries[t])}function _emscripten_glBeginTransformFeedback(e){GLctx.beginTransformFeedback(e)}function _emscripten_glBindAttribLocation(e,t,n){GLctx.bindAttribLocation(GL.programs[e],t,UTF8ToString(n))}function _emscripten_glBindBuffer(e,t){35051==e?GLctx.currentPixelPackBufferBinding=t:35052==e&&(GLctx.currentPixelUnpackBufferBinding=t),GLctx.bindBuffer(e,GL.buffers[t])}function _emscripten_glBindBufferBase(e,t,n){GLctx.bindBufferBase(e,t,GL.buffers[n])}function _emscripten_glBindBufferRange(e,t,n,r,o){GLctx.bindBufferRange(e,t,GL.buffers[n],r,o)}function _emscripten_glBindFramebuffer(e,t){GLctx.bindFramebuffer(e,t?GL.framebuffers[t]:GL.currentContext.defaultFbo)}function _emscripten_glBindRenderbuffer(e,t){GLctx.bindRenderbuffer(e,GL.renderbuffers[t])}function _emscripten_glBindSampler(e,t){GLctx.bindSampler(e,GL.samplers[t])}function _emscripten_glBindTexture(e,t){GLctx.bindTexture(e,GL.textures[t])}function _emscripten_glBindTransformFeedback(e,t){GLctx.bindTransformFeedback(e,GL.transformFeedbacks[t])}function _emscripten_glBindVertexArray(e){GLctx.bindVertexArray(GL.vaos[e])}function _emscripten_glBindVertexArrayOES(e){GLctx.bindVertexArray(GL.vaos[e])}function _emscripten_glBlendColor(e,t,n,r){GLctx.blendColor(e,t,n,r)}function _emscripten_glBlendEquation(e){GLctx.blendEquation(e)}function _emscripten_glBlendEquationSeparate(e,t){GLctx.blendEquationSeparate(e,t)}function _emscripten_glBlendFunc(e,t){GLctx.blendFunc(e,t)}function _emscripten_glBlendFuncSeparate(e,t,n,r){GLctx.blendFuncSeparate(e,t,n,r)}function _emscripten_glBlitFramebuffer(e,t,n,r,o,i,s,a,c,l){GLctx.blitFramebuffer(e,t,n,r,o,i,s,a,c,l)}function _emscripten_glBufferData(e,t,n,r){GL.currentContext.version>=2?n?GLctx.bufferData(e,HEAPU8,r,n,t):GLctx.bufferData(e,t,r):GLctx.bufferData(e,n?HEAPU8.subarray(n,n+t):t,r)}function _emscripten_glBufferSubData(e,t,n,r){GL.currentContext.version>=2?GLctx.bufferSubData(e,t,HEAPU8,r,n):GLctx.bufferSubData(e,t,HEAPU8.subarray(r,r+n))}function _emscripten_glCheckFramebufferStatus(e){return GLctx.checkFramebufferStatus(e)}function _emscripten_glClear(e){GLctx.clear(e)}function _emscripten_glClearBufferfi(e,t,n,r){GLctx.clearBufferfi(e,t,n,r)}function _emscripten_glClearBufferfv(e,t,n){GLctx.clearBufferfv(e,t,HEAPF32,n>>2)}function _emscripten_glClearBufferiv(e,t,n){GLctx.clearBufferiv(e,t,HEAP32,n>>2)}function _emscripten_glClearBufferuiv(e,t,n){GLctx.clearBufferuiv(e,t,HEAPU32,n>>2)}function _emscripten_glClearColor(e,t,n,r){GLctx.clearColor(e,t,n,r)}function _emscripten_glClearDepthf(e){GLctx.clearDepth(e)}function _emscripten_glClearStencil(e){GLctx.clearStencil(e)}function convertI32PairToI53(e,t){return(e>>>0)+4294967296*t}function _emscripten_glClientWaitSync(e,t,n,r){return GLctx.clientWaitSync(GL.syncs[e],t,convertI32PairToI53(n,r))}function _emscripten_glColorMask(e,t,n,r){GLctx.colorMask(!!e,!!t,!!n,!!r)}function _emscripten_glCompileShader(e){GLctx.compileShader(GL.shaders[e])}function _emscripten_glCompressedTexImage2D(e,t,n,r,o,i,s,a){GL.currentContext.version>=2?GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexImage2D(e,t,n,r,o,i,s,a):GLctx.compressedTexImage2D(e,t,n,r,o,i,HEAPU8,a,s):GLctx.compressedTexImage2D(e,t,n,r,o,i,a?HEAPU8.subarray(a,a+s):null)}function _emscripten_glCompressedTexImage3D(e,t,n,r,o,i,s,a,c){GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexImage3D(e,t,n,r,o,i,s,a,c):GLctx.compressedTexImage3D(e,t,n,r,o,i,s,HEAPU8,c,a)}function _emscripten_glCompressedTexSubImage2D(e,t,n,r,o,i,s,a,c){GL.currentContext.version>=2?GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,a,c):GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,HEAPU8,c,a):GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,c?HEAPU8.subarray(c,c+a):null)}function _emscripten_glCompressedTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u){GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u):GLctx.compressedTexSubImage3D(e,t,n,r,o,i,s,a,c,HEAPU8,u,l)}function _emscripten_glCopyBufferSubData(e,t,n,r,o){GLctx.copyBufferSubData(e,t,n,r,o)}function _emscripten_glCopyTexImage2D(e,t,n,r,o,i,s,a){GLctx.copyTexImage2D(e,t,n,r,o,i,s,a)}function _emscripten_glCopyTexSubImage2D(e,t,n,r,o,i,s,a){GLctx.copyTexSubImage2D(e,t,n,r,o,i,s,a)}function _emscripten_glCopyTexSubImage3D(e,t,n,r,o,i,s,a,c){GLctx.copyTexSubImage3D(e,t,n,r,o,i,s,a,c)}function _emscripten_glCreateProgram(){var e=GL.getNewId(GL.programs),t=GLctx.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,GL.programs[e]=t,e}function _emscripten_glCreateShader(e){var t=GL.getNewId(GL.shaders);return GL.shaders[t]=GLctx.createShader(e),t}function _emscripten_glCullFace(e){GLctx.cullFace(e)}function _emscripten_glDeleteBuffers(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.buffers[r];o&&(GLctx.deleteBuffer(o),o.name=0,GL.buffers[r]=null,r==GLctx.currentPixelPackBufferBinding&&(GLctx.currentPixelPackBufferBinding=0),r==GLctx.currentPixelUnpackBufferBinding&&(GLctx.currentPixelUnpackBufferBinding=0))}}function _emscripten_glDeleteFramebuffers(e,t){for(var n=0;n<e;++n){var r=HEAP32[t+4*n>>2],o=GL.framebuffers[r];o&&(GLctx.deleteFramebuffer(o),o.name=0,GL.framebuffers[r]=null)}}function _emscripten_glDeleteProgram(e){if(e){var t=GL.programs[e];t?(GLctx.deleteProgram(t),t.name=0,GL.programs[e]=null):GL.recordError(1281)}}function _emscripten_glDeleteQueries(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.queries[r];o&&(GLctx.deleteQuery(o),GL.queries[r]=null)}}function _emscripten_glDeleteQueriesEXT(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.queries[r];o&&(GLctx.disjointTimerQueryExt.deleteQueryEXT(o),GL.queries[r]=null)}}function _emscripten_glDeleteRenderbuffers(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.renderbuffers[r];o&&(GLctx.deleteRenderbuffer(o),o.name=0,GL.renderbuffers[r]=null)}}function _emscripten_glDeleteSamplers(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.samplers[r];o&&(GLctx.deleteSampler(o),o.name=0,GL.samplers[r]=null)}}function _emscripten_glDeleteShader(e){if(e){var t=GL.shaders[e];t?(GLctx.deleteShader(t),GL.shaders[e]=null):GL.recordError(1281)}}function _emscripten_glDeleteSync(e){if(e){var t=GL.syncs[e];t?(GLctx.deleteSync(t),t.name=0,GL.syncs[e]=null):GL.recordError(1281)}}function _emscripten_glDeleteTextures(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.textures[r];o&&(GLctx.deleteTexture(o),o.name=0,GL.textures[r]=null)}}function _emscripten_glDeleteTransformFeedbacks(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.transformFeedbacks[r];o&&(GLctx.deleteTransformFeedback(o),o.name=0,GL.transformFeedbacks[r]=null)}}function _emscripten_glDeleteVertexArrays(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2];GLctx.deleteVertexArray(GL.vaos[r]),GL.vaos[r]=null}}function _emscripten_glDeleteVertexArraysOES(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2];GLctx.deleteVertexArray(GL.vaos[r]),GL.vaos[r]=null}}function _emscripten_glDepthFunc(e){GLctx.depthFunc(e)}function _emscripten_glDepthMask(e){GLctx.depthMask(!!e)}function _emscripten_glDepthRangef(e,t){GLctx.depthRange(e,t)}function _emscripten_glDetachShader(e,t){GLctx.detachShader(GL.programs[e],GL.shaders[t])}function _emscripten_glDisable(e){GLctx.disable(e)}function _emscripten_glDisableVertexAttribArray(e){GLctx.disableVertexAttribArray(e)}function _emscripten_glDrawArrays(e,t,n){GLctx.drawArrays(e,t,n)}function _emscripten_glDrawArraysInstanced(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}function _emscripten_glDrawArraysInstancedANGLE(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}function _emscripten_glDrawArraysInstancedARB(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}function _emscripten_glDrawArraysInstancedEXT(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}function _emscripten_glDrawArraysInstancedNV(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}var tempFixedLengthArray=[];function _emscripten_glDrawBuffers(e,t){for(var n=tempFixedLengthArray[e],r=0;r<e;r++)n[r]=HEAP32[t+4*r>>2];GLctx.drawBuffers(n)}function _emscripten_glDrawBuffersEXT(e,t){for(var n=tempFixedLengthArray[e],r=0;r<e;r++)n[r]=HEAP32[t+4*r>>2];GLctx.drawBuffers(n)}function _emscripten_glDrawBuffersWEBGL(e,t){for(var n=tempFixedLengthArray[e],r=0;r<e;r++)n[r]=HEAP32[t+4*r>>2];GLctx.drawBuffers(n)}function _emscripten_glDrawElements(e,t,n,r){GLctx.drawElements(e,t,n,r)}function _emscripten_glDrawElementsInstanced(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _emscripten_glDrawElementsInstancedANGLE(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _emscripten_glDrawElementsInstancedARB(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _emscripten_glDrawElementsInstancedEXT(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _emscripten_glDrawElementsInstancedNV(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _glDrawElements(e,t,n,r){GLctx.drawElements(e,t,n,r)}function _emscripten_glDrawRangeElements(e,t,n,r,o,i){_glDrawElements(e,r,o,i)}function _emscripten_glEnable(e){GLctx.enable(e)}function _emscripten_glEnableVertexAttribArray(e){GLctx.enableVertexAttribArray(e)}function _emscripten_glEndQuery(e){GLctx.endQuery(e)}function _emscripten_glEndQueryEXT(e){GLctx.disjointTimerQueryExt.endQueryEXT(e)}function _emscripten_glEndTransformFeedback(){GLctx.endTransformFeedback()}function _emscripten_glFenceSync(e,t){var n=GLctx.fenceSync(e,t);if(n){var r=GL.getNewId(GL.syncs);return n.name=r,GL.syncs[r]=n,r}return 0}function _emscripten_glFinish(){GLctx.finish()}function _emscripten_glFlush(){GLctx.flush()}function _emscripten_glFramebufferRenderbuffer(e,t,n,r){GLctx.framebufferRenderbuffer(e,t,n,GL.renderbuffers[r])}function _emscripten_glFramebufferTexture2D(e,t,n,r,o){GLctx.framebufferTexture2D(e,t,n,GL.textures[r],o)}function _emscripten_glFramebufferTextureLayer(e,t,n,r,o){GLctx.framebufferTextureLayer(e,t,GL.textures[n],r,o)}function _emscripten_glFrontFace(e){GLctx.frontFace(e)}function __glGenObject(e,t,n,r){for(var o=0;o<e;o++){var i=GLctx[n](),s=i&&GL.getNewId(r);i?(i.name=s,r[s]=i):GL.recordError(1282),HEAP32[t+4*o>>2]=s}}function _emscripten_glGenBuffers(e,t){__glGenObject(e,t,"createBuffer",GL.buffers)}function _emscripten_glGenFramebuffers(e,t){__glGenObject(e,t,"createFramebuffer",GL.framebuffers)}function _emscripten_glGenQueries(e,t){__glGenObject(e,t,"createQuery",GL.queries)}function _emscripten_glGenQueriesEXT(e,t){for(var n=0;n<e;n++){var r=GLctx.disjointTimerQueryExt.createQueryEXT();if(!r){for(GL.recordError(1282);n<e;)HEAP32[t+4*n++>>2]=0;return}var o=GL.getNewId(GL.queries);r.name=o,GL.queries[o]=r,HEAP32[t+4*n>>2]=o}}function _emscripten_glGenRenderbuffers(e,t){__glGenObject(e,t,"createRenderbuffer",GL.renderbuffers)}function _emscripten_glGenSamplers(e,t){__glGenObject(e,t,"createSampler",GL.samplers)}function _emscripten_glGenTextures(e,t){__glGenObject(e,t,"createTexture",GL.textures)}function _emscripten_glGenTransformFeedbacks(e,t){__glGenObject(e,t,"createTransformFeedback",GL.transformFeedbacks)}function _emscripten_glGenVertexArrays(e,t){__glGenObject(e,t,"createVertexArray",GL.vaos)}function _emscripten_glGenVertexArraysOES(e,t){__glGenObject(e,t,"createVertexArray",GL.vaos)}function _emscripten_glGenerateMipmap(e){GLctx.generateMipmap(e)}function __glGetActiveAttribOrUniform(e,t,n,r,o,i,s,a){t=GL.programs[t];var c=GLctx[e](t,n);if(c){var l=a&&stringToUTF8(c.name,a,r);o&&(HEAP32[o>>2]=l),i&&(HEAP32[i>>2]=c.size),s&&(HEAP32[s>>2]=c.type)}}function _emscripten_glGetActiveAttrib(e,t,n,r,o,i,s){__glGetActiveAttribOrUniform("getActiveAttrib",e,t,n,r,o,i,s)}function _emscripten_glGetActiveUniform(e,t,n,r,o,i,s){__glGetActiveAttribOrUniform("getActiveUniform",e,t,n,r,o,i,s)}function _emscripten_glGetActiveUniformBlockName(e,t,n,r,o){e=GL.programs[e];var i=GLctx.getActiveUniformBlockName(e,t);if(i)if(o&&n>0){var s=stringToUTF8(i,o,n);r&&(HEAP32[r>>2]=s)}else r&&(HEAP32[r>>2]=0)}function _emscripten_glGetActiveUniformBlockiv(e,t,n,r){if(r)if(e=GL.programs[e],35393!=n){var o=GLctx.getActiveUniformBlockParameter(e,t,n);if(null!==o)if(35395==n)for(var i=0;i<o.length;i++)HEAP32[r+4*i>>2]=o[i];else HEAP32[r>>2]=o}else{var s=GLctx.getActiveUniformBlockName(e,t);HEAP32[r>>2]=s.length+1}else GL.recordError(1281)}function _emscripten_glGetActiveUniformsiv(e,t,n,r,o){if(o)if(t>0&&0==n)GL.recordError(1281);else{e=GL.programs[e];for(var i=[],s=0;s<t;s++)i.push(HEAP32[n+4*s>>2]);var a=GLctx.getActiveUniforms(e,i,r);if(a){var c=a.length;for(s=0;s<c;s++)HEAP32[o+4*s>>2]=a[s]}}else GL.recordError(1281)}function _emscripten_glGetAttachedShaders(e,t,n,r){var o=GLctx.getAttachedShaders(GL.programs[e]),i=o.length;i>t&&(i=t),HEAP32[n>>2]=i;for(var s=0;s<i;++s){var a=GL.shaders.indexOf(o[s]);HEAP32[r+4*s>>2]=a}}function _emscripten_glGetAttribLocation(e,t){return GLctx.getAttribLocation(GL.programs[e],UTF8ToString(t))}function writeI53ToI64(e,t){HEAPU32[e>>2]=t,HEAPU32[e+4>>2]=(t-HEAPU32[e>>2])/4294967296}function emscriptenWebGLGet(e,t,n){if(t){var r=void 0;switch(e){case 36346:r=1;break;case 36344:return void(0!=n&&1!=n&&GL.recordError(1280));case 34814:case 36345:r=0;break;case 34466:var o=GLctx.getParameter(34467);r=o?o.length:0;break;case 33309:if(GL.currentContext.version<2)return void GL.recordError(1282);r=2*(GLctx.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(GL.currentContext.version<2)return void GL.recordError(1280);r=33307==e?3:0}if(void 0===r){var i=GLctx.getParameter(e);switch(typeof i){case"number":r=i;break;case"boolean":r=i?1:0;break;case"string":return void GL.recordError(1280);case"object":if(null===i)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:r=0;break;default:return void GL.recordError(1280)}else{if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(var s=0;s<i.length;++s)switch(n){case 0:HEAP32[t+4*s>>2]=i[s];break;case 2:HEAPF32[t+4*s>>2]=i[s];break;case 4:HEAP8[t+s|0]=i[s]?1:0}return}try{r=0|i.name}catch(t){return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+i+" of type "+typeof i+"!")}}switch(n){case 1:writeI53ToI64(t,r);break;case 0:HEAP32[t>>2]=r;break;case 2:HEAPF32[t>>2]=r;break;case 4:HEAP8[0|t]=r?1:0}}else GL.recordError(1281)}function _emscripten_glGetBooleanv(e,t){emscriptenWebGLGet(e,t,4)}function _emscripten_glGetBufferParameteri64v(e,t,n){n?writeI53ToI64(n,GLctx.getBufferParameter(e,t)):GL.recordError(1281)}function _emscripten_glGetBufferParameteriv(e,t,n){n?HEAP32[n>>2]=GLctx.getBufferParameter(e,t):GL.recordError(1281)}function _emscripten_glGetError(){var e=GLctx.getError()||GL.lastError;return GL.lastError=0,e}function _emscripten_glGetFloatv(e,t){emscriptenWebGLGet(e,t,2)}function _emscripten_glGetFragDataLocation(e,t){return GLctx.getFragDataLocation(GL.programs[e],UTF8ToString(t))}function _emscripten_glGetFramebufferAttachmentParameteriv(e,t,n,r){var o=GLctx.getFramebufferAttachmentParameter(e,t,n);(o instanceof WebGLRenderbuffer||o instanceof WebGLTexture)&&(o=0|o.name),HEAP32[r>>2]=o}function emscriptenWebGLGetIndexed(e,t,n,r){if(n){var o,i=GLctx.getIndexedParameter(e,t);switch(typeof i){case"boolean":o=i?1:0;break;case"number":o=i;break;case"object":if(null===i)switch(e){case 35983:case 35368:o=0;break;default:return void GL.recordError(1280)}else{if(!(i instanceof WebGLBuffer))return void GL.recordError(1280);o=0|i.name}break;default:return void GL.recordError(1280)}switch(r){case 1:writeI53ToI64(n,o);break;case 0:HEAP32[n>>2]=o;break;case 2:HEAPF32[n>>2]=o;break;case 4:HEAP8[0|n]=o?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+r}}else GL.recordError(1281)}function _emscripten_glGetInteger64i_v(e,t,n){emscriptenWebGLGetIndexed(e,t,n,1)}function _emscripten_glGetInteger64v(e,t){emscriptenWebGLGet(e,t,1)}function _emscripten_glGetIntegeri_v(e,t,n){emscriptenWebGLGetIndexed(e,t,n,0)}function _emscripten_glGetIntegerv(e,t){emscriptenWebGLGet(e,t,0)}function _emscripten_glGetInternalformativ(e,t,n,r,o){if(r<0)GL.recordError(1281);else if(o){var i=GLctx.getInternalformatParameter(e,t,n);if(null!==i)for(var s=0;s<i.length&&s<r;++s)HEAP32[o+s>>2]=i[s]}else GL.recordError(1281)}function _emscripten_glGetProgramBinary(e,t,n,r,o){GL.recordError(1282)}function _emscripten_glGetProgramInfoLog(e,t,n,r){var o=GLctx.getProgramInfoLog(GL.programs[e]);null===o&&(o="(unknown error)");var i=t>0&&r?stringToUTF8(o,r,t):0;n&&(HEAP32[n>>2]=i)}function _emscripten_glGetProgramiv(e,t,n){if(n)if(e>=GL.counter)GL.recordError(1281);else if(e=GL.programs[e],35716==t){var r=GLctx.getProgramInfoLog(e);null===r&&(r="(unknown error)"),HEAP32[n>>2]=r.length+1}else if(35719==t){if(!e.maxUniformLength)for(var o=0;o<GLctx.getProgramParameter(e,35718);++o)e.maxUniformLength=Math.max(e.maxUniformLength,GLctx.getActiveUniform(e,o).name.length+1);HEAP32[n>>2]=e.maxUniformLength}else if(35722==t){if(!e.maxAttributeLength)for(o=0;o<GLctx.getProgramParameter(e,35721);++o)e.maxAttributeLength=Math.max(e.maxAttributeLength,GLctx.getActiveAttrib(e,o).name.length+1);HEAP32[n>>2]=e.maxAttributeLength}else if(35381==t){if(!e.maxUniformBlockNameLength)for(o=0;o<GLctx.getProgramParameter(e,35382);++o)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,GLctx.getActiveUniformBlockName(e,o).length+1);HEAP32[n>>2]=e.maxUniformBlockNameLength}else HEAP32[n>>2]=GLctx.getProgramParameter(e,t);else GL.recordError(1281)}function _emscripten_glGetQueryObjecti64vEXT(e,t,n){if(n){var r,o=GL.queries[e];writeI53ToI64(n,"boolean"==typeof(r=GL.currentContext.version<2?GLctx.disjointTimerQueryExt.getQueryObjectEXT(o,t):GLctx.getQueryParameter(o,t))?r?1:0:r)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectivEXT(e,t,n){if(n){var r,o=GL.queries[e],i=GLctx.disjointTimerQueryExt.getQueryObjectEXT(o,t);r="boolean"==typeof i?i?1:0:i,HEAP32[n>>2]=r}else GL.recordError(1281)}function _emscripten_glGetQueryObjectui64vEXT(e,t,n){if(n){var r,o=GL.queries[e];writeI53ToI64(n,"boolean"==typeof(r=GL.currentContext.version<2?GLctx.disjointTimerQueryExt.getQueryObjectEXT(o,t):GLctx.getQueryParameter(o,t))?r?1:0:r)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectuiv(e,t,n){if(n){var r,o=GL.queries[e],i=GLctx.getQueryParameter(o,t);r="boolean"==typeof i?i?1:0:i,HEAP32[n>>2]=r}else GL.recordError(1281)}function _emscripten_glGetQueryObjectuivEXT(e,t,n){if(n){var r,o=GL.queries[e],i=GLctx.disjointTimerQueryExt.getQueryObjectEXT(o,t);r="boolean"==typeof i?i?1:0:i,HEAP32[n>>2]=r}else GL.recordError(1281)}function _emscripten_glGetQueryiv(e,t,n){n?HEAP32[n>>2]=GLctx.getQuery(e,t):GL.recordError(1281)}function _emscripten_glGetQueryivEXT(e,t,n){n?HEAP32[n>>2]=GLctx.disjointTimerQueryExt.getQueryEXT(e,t):GL.recordError(1281)}function _emscripten_glGetRenderbufferParameteriv(e,t,n){n?HEAP32[n>>2]=GLctx.getRenderbufferParameter(e,t):GL.recordError(1281)}function _emscripten_glGetSamplerParameterfv(e,t,n){n?HEAPF32[n>>2]=GLctx.getSamplerParameter(GL.samplers[e],t):GL.recordError(1281)}function _emscripten_glGetSamplerParameteriv(e,t,n){n?HEAP32[n>>2]=GLctx.getSamplerParameter(GL.samplers[e],t):GL.recordError(1281)}function _emscripten_glGetShaderInfoLog(e,t,n,r){var o=GLctx.getShaderInfoLog(GL.shaders[e]);null===o&&(o="(unknown error)");var i=t>0&&r?stringToUTF8(o,r,t):0;n&&(HEAP32[n>>2]=i)}function _emscripten_glGetShaderPrecisionFormat(e,t,n,r){var o=GLctx.getShaderPrecisionFormat(e,t);HEAP32[n>>2]=o.rangeMin,HEAP32[n+4>>2]=o.rangeMax,HEAP32[r>>2]=o.precision}function _emscripten_glGetShaderSource(e,t,n,r){var o=GLctx.getShaderSource(GL.shaders[e]);if(o){var i=t>0&&r?stringToUTF8(o,r,t):0;n&&(HEAP32[n>>2]=i)}}function _emscripten_glGetShaderiv(e,t,n){if(n)if(35716==t){var r=GLctx.getShaderInfoLog(GL.shaders[e]);null===r&&(r="(unknown error)");var o=r?r.length+1:0;HEAP32[n>>2]=o}else if(35720==t){var i=GLctx.getShaderSource(GL.shaders[e]),s=i?i.length+1:0;HEAP32[n>>2]=s}else HEAP32[n>>2]=GLctx.getShaderParameter(GL.shaders[e],t);else GL.recordError(1281)}function stringToNewUTF8(e){var t=lengthBytesUTF8(e)+1,n=_malloc(t);return stringToUTF8(e,n,t),n}function _emscripten_glGetString(e){var t=GL.stringCache[e];if(!t){switch(e){case 7939:var n=GLctx.getSupportedExtensions()||[];t=stringToNewUTF8((n=n.concat(n.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var r=GLctx.getParameter(e);r||GL.recordError(1280),t=r&&stringToNewUTF8(r);break;case 7938:var o=GLctx.getParameter(7938);t=stringToNewUTF8(o=GL.currentContext.version>=2?"OpenGL ES 3.0 ("+o+")":"OpenGL ES 2.0 ("+o+")");break;case 35724:var i=GLctx.getParameter(35724),s=i.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==s&&(3==s[1].length&&(s[1]=s[1]+"0"),i="OpenGL ES GLSL ES "+s[1]+" ("+i+")"),t=stringToNewUTF8(i);break;default:GL.recordError(1280)}GL.stringCache[e]=t}return t}function _emscripten_glGetStringi(e,t){if(GL.currentContext.version<2)return GL.recordError(1282),0;var n=GL.stringiCache[e];if(n)return t<0||t>=n.length?(GL.recordError(1281),0):n[t];if(7939===e){var r=GLctx.getSupportedExtensions()||[];return r=(r=r.concat(r.map((function(e){return"GL_"+e})))).map((function(e){return stringToNewUTF8(e)})),n=GL.stringiCache[e]=r,t<0||t>=n.length?(GL.recordError(1281),0):n[t]}return GL.recordError(1280),0}function _emscripten_glGetSynciv(e,t,n,r,o){if(n<0)GL.recordError(1281);else if(o){var i=GLctx.getSyncParameter(GL.syncs[e],t);null!==i&&(HEAP32[o>>2]=i,r&&(HEAP32[r>>2]=1))}else GL.recordError(1281)}function _emscripten_glGetTexParameterfv(e,t,n){n?HEAPF32[n>>2]=GLctx.getTexParameter(e,t):GL.recordError(1281)}function _emscripten_glGetTexParameteriv(e,t,n){n?HEAP32[n>>2]=GLctx.getTexParameter(e,t):GL.recordError(1281)}function _emscripten_glGetTransformFeedbackVarying(e,t,n,r,o,i,s){e=GL.programs[e];var a=GLctx.getTransformFeedbackVarying(e,t);if(a){if(s&&n>0){var c=stringToUTF8(a.name,s,n);r&&(HEAP32[r>>2]=c)}else r&&(HEAP32[r>>2]=0);o&&(HEAP32[o>>2]=a.size),i&&(HEAP32[i>>2]=a.type)}}function _emscripten_glGetUniformBlockIndex(e,t){return GLctx.getUniformBlockIndex(GL.programs[e],UTF8ToString(t))}function _emscripten_glGetUniformIndices(e,t,n,r){if(r)if(t>0&&(0==n||0==r))GL.recordError(1281);else{e=GL.programs[e];for(var o=[],i=0;i<t;i++)o.push(UTF8ToString(HEAP32[n+4*i>>2]));var s=GLctx.getUniformIndices(e,o);if(s){var a=s.length;for(i=0;i<a;i++)HEAP32[r+4*i>>2]=s[i]}}else GL.recordError(1281)}function webglGetLeftBracePos(e){return"]"==e.slice(-1)&&e.lastIndexOf("[")}function webglPrepareUniformLocationsBeforeFirstUse(e){var t,n,r=e.uniformLocsById,o=e.uniformSizeAndIdsByName;if(!r)for(e.uniformLocsById=r={},e.uniformArrayNamesById={},t=0;t<GLctx.getProgramParameter(e,35718);++t){var i=GLctx.getActiveUniform(e,t),s=i.name,a=i.size,c=webglGetLeftBracePos(s),l=c>0?s.slice(0,c):s,u=e.uniformIdCounter;for(e.uniformIdCounter+=a,o[l]=[a,u],n=0;n<a;++n)r[u]=n,e.uniformArrayNamesById[u++]=l}}function _emscripten_glGetUniformLocation(e,t){if(t=UTF8ToString(t),e=GL.programs[e]){webglPrepareUniformLocationsBeforeFirstUse(e);var n=e.uniformLocsById,r=0,o=t,i=webglGetLeftBracePos(t);i>0&&(r=jstoi_q(t.slice(i+1))>>>0,o=t.slice(0,i));var s=e.uniformSizeAndIdsByName[o];if(s&&r<s[0]&&(n[r+=s[1]]=n[r]||GLctx.getUniformLocation(e,t)))return r}else GL.recordError(1281);return-1}function webglGetUniformLocation(e){var t=GLctx.currentProgram;if(t){var n=t.uniformLocsById[e];return"number"==typeof n&&(t.uniformLocsById[e]=n=GLctx.getUniformLocation(t,t.uniformArrayNamesById[e]+(n>0?"["+n+"]":""))),n}GL.recordError(1282)}function emscriptenWebGLGetUniform(e,t,n,r){if(n){webglPrepareUniformLocationsBeforeFirstUse(e=GL.programs[e]);var o=GLctx.getUniform(e,webglGetUniformLocation(t));if("number"==typeof o||"boolean"==typeof o)switch(r){case 0:HEAP32[n>>2]=o;break;case 2:HEAPF32[n>>2]=o}else for(var i=0;i<o.length;i++)switch(r){case 0:HEAP32[n+4*i>>2]=o[i];break;case 2:HEAPF32[n+4*i>>2]=o[i]}}else GL.recordError(1281)}function _emscripten_glGetUniformfv(e,t,n){emscriptenWebGLGetUniform(e,t,n,2)}function _emscripten_glGetUniformiv(e,t,n){emscriptenWebGLGetUniform(e,t,n,0)}function _emscripten_glGetUniformuiv(e,t,n){emscriptenWebGLGetUniform(e,t,n,0)}function emscriptenWebGLGetVertexAttrib(e,t,n,r){if(n){var o=GLctx.getVertexAttrib(e,t);if(34975==t)HEAP32[n>>2]=o&&o.name;else if("number"==typeof o||"boolean"==typeof o)switch(r){case 0:HEAP32[n>>2]=o;break;case 2:HEAPF32[n>>2]=o;break;case 5:HEAP32[n>>2]=Math.fround(o)}else for(var i=0;i<o.length;i++)switch(r){case 0:HEAP32[n+4*i>>2]=o[i];break;case 2:HEAPF32[n+4*i>>2]=o[i];break;case 5:HEAP32[n+4*i>>2]=Math.fround(o[i])}}else GL.recordError(1281)}function _emscripten_glGetVertexAttribIiv(e,t,n){emscriptenWebGLGetVertexAttrib(e,t,n,0)}function _emscripten_glGetVertexAttribIuiv(e,t,n){emscriptenWebGLGetVertexAttrib(e,t,n,0)}function _emscripten_glGetVertexAttribPointerv(e,t,n){n?HEAP32[n>>2]=GLctx.getVertexAttribOffset(e,t):GL.recordError(1281)}function _emscripten_glGetVertexAttribfv(e,t,n){emscriptenWebGLGetVertexAttrib(e,t,n,2)}function _emscripten_glGetVertexAttribiv(e,t,n){emscriptenWebGLGetVertexAttrib(e,t,n,5)}function _emscripten_glHint(e,t){GLctx.hint(e,t)}function _emscripten_glInvalidateFramebuffer(e,t,n){for(var r=tempFixedLengthArray[t],o=0;o<t;o++)r[o]=HEAP32[n+4*o>>2];GLctx.invalidateFramebuffer(e,r)}function _emscripten_glInvalidateSubFramebuffer(e,t,n,r,o,i,s){for(var a=tempFixedLengthArray[t],c=0;c<t;c++)a[c]=HEAP32[n+4*c>>2];GLctx.invalidateSubFramebuffer(e,a,r,o,i,s)}function _emscripten_glIsBuffer(e){var t=GL.buffers[e];return t?GLctx.isBuffer(t):0}function _emscripten_glIsEnabled(e){return GLctx.isEnabled(e)}function _emscripten_glIsFramebuffer(e){var t=GL.framebuffers[e];return t?GLctx.isFramebuffer(t):0}function _emscripten_glIsProgram(e){return(e=GL.programs[e])?GLctx.isProgram(e):0}function _emscripten_glIsQuery(e){var t=GL.queries[e];return t?GLctx.isQuery(t):0}function _emscripten_glIsQueryEXT(e){var t=GL.queries[e];return t?GLctx.disjointTimerQueryExt.isQueryEXT(t):0}function _emscripten_glIsRenderbuffer(e){var t=GL.renderbuffers[e];return t?GLctx.isRenderbuffer(t):0}function _emscripten_glIsSampler(e){var t=GL.samplers[e];return t?GLctx.isSampler(t):0}function _emscripten_glIsShader(e){var t=GL.shaders[e];return t?GLctx.isShader(t):0}function _emscripten_glIsSync(e){return GLctx.isSync(GL.syncs[e])}function _emscripten_glIsTexture(e){var t=GL.textures[e];return t?GLctx.isTexture(t):0}function _emscripten_glIsTransformFeedback(e){return GLctx.isTransformFeedback(GL.transformFeedbacks[e])}function _emscripten_glIsVertexArray(e){var t=GL.vaos[e];return t?GLctx.isVertexArray(t):0}function _emscripten_glIsVertexArrayOES(e){var t=GL.vaos[e];return t?GLctx.isVertexArray(t):0}function _emscripten_glLineWidth(e){GLctx.lineWidth(e)}function _emscripten_glLinkProgram(e){e=GL.programs[e],GLctx.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function _emscripten_glPauseTransformFeedback(){GLctx.pauseTransformFeedback()}function _emscripten_glPixelStorei(e,t){3317==e&&(GL.unpackAlignment=t),GLctx.pixelStorei(e,t)}function _emscripten_glPolygonOffset(e,t){GLctx.polygonOffset(e,t)}function _emscripten_glProgramBinary(e,t,n,r){GL.recordError(1280)}function _emscripten_glProgramParameteri(e,t,n){GL.recordError(1280)}function _emscripten_glQueryCounterEXT(e,t){GLctx.disjointTimerQueryExt.queryCounterEXT(GL.queries[e],t)}function _emscripten_glReadBuffer(e){GLctx.readBuffer(e)}function computeUnpackAlignedImageSize(e,t,n,r){var o;return t*(e*n+(o=r)-1&-o)}function __colorChannelsInGlTextureFormat(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}function heapObjectForWebGLType(e){return 0==(e-=5120)?HEAP8:1==e?HEAPU8:2==e?HEAP16:4==e?HEAP32:6==e?HEAPF32:5==e||28922==e||28520==e||30779==e||30782==e?HEAPU32:HEAPU16}function heapAccessShiftForWebGLHeap(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(e,t,n,r,o,i){var s=heapObjectForWebGLType(e),a=heapAccessShiftForWebGLHeap(s),c=1<<a,l=computeUnpackAlignedImageSize(n,r,__colorChannelsInGlTextureFormat(t)*c,GL.unpackAlignment);return s.subarray(o>>a,o+l>>a)}function _emscripten_glReadPixels(e,t,n,r,o,i,s){if(GL.currentContext.version>=2)if(GLctx.currentPixelPackBufferBinding)GLctx.readPixels(e,t,n,r,o,i,s);else{var a=heapObjectForWebGLType(i);GLctx.readPixels(e,t,n,r,o,i,a,s>>heapAccessShiftForWebGLHeap(a))}else{var c=emscriptenWebGLGetTexPixelData(i,o,n,r,s,o);c?GLctx.readPixels(e,t,n,r,o,i,c):GL.recordError(1280)}}function _emscripten_glReleaseShaderCompiler(){}function _emscripten_glRenderbufferStorage(e,t,n,r){GLctx.renderbufferStorage(e,t,n,r)}function _emscripten_glRenderbufferStorageMultisample(e,t,n,r,o){GLctx.renderbufferStorageMultisample(e,t,n,r,o)}function _emscripten_glResumeTransformFeedback(){GLctx.resumeTransformFeedback()}function _emscripten_glSampleCoverage(e,t){GLctx.sampleCoverage(e,!!t)}function _emscripten_glSamplerParameterf(e,t,n){GLctx.samplerParameterf(GL.samplers[e],t,n)}function _emscripten_glSamplerParameterfv(e,t,n){var r=HEAPF32[n>>2];GLctx.samplerParameterf(GL.samplers[e],t,r)}function _emscripten_glSamplerParameteri(e,t,n){GLctx.samplerParameteri(GL.samplers[e],t,n)}function _emscripten_glSamplerParameteriv(e,t,n){var r=HEAP32[n>>2];GLctx.samplerParameteri(GL.samplers[e],t,r)}function _emscripten_glScissor(e,t,n,r){GLctx.scissor(e,t,n,r)}function _emscripten_glShaderBinary(){GL.recordError(1280)}function _emscripten_glShaderSource(e,t,n,r){var o=GL.getSource(e,t,n,r);GLctx.shaderSource(GL.shaders[e],o)}function _emscripten_glStencilFunc(e,t,n){GLctx.stencilFunc(e,t,n)}function _emscripten_glStencilFuncSeparate(e,t,n,r){GLctx.stencilFuncSeparate(e,t,n,r)}function _emscripten_glStencilMask(e){GLctx.stencilMask(e)}function _emscripten_glStencilMaskSeparate(e,t){GLctx.stencilMaskSeparate(e,t)}function _emscripten_glStencilOp(e,t,n){GLctx.stencilOp(e,t,n)}function _emscripten_glStencilOpSeparate(e,t,n,r){GLctx.stencilOpSeparate(e,t,n,r)}function _emscripten_glTexImage2D(e,t,n,r,o,i,s,a,c){if(GL.currentContext.version>=2)if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage2D(e,t,n,r,o,i,s,a,c);else if(c){var l=heapObjectForWebGLType(a);GLctx.texImage2D(e,t,n,r,o,i,s,a,l,c>>heapAccessShiftForWebGLHeap(l))}else GLctx.texImage2D(e,t,n,r,o,i,s,a,null);else GLctx.texImage2D(e,t,n,r,o,i,s,a,c?emscriptenWebGLGetTexPixelData(a,s,r,o,c,n):null)}function _emscripten_glTexImage3D(e,t,n,r,o,i,s,a,c,l){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage3D(e,t,n,r,o,i,s,a,c,l);else if(l){var u=heapObjectForWebGLType(c);GLctx.texImage3D(e,t,n,r,o,i,s,a,c,u,l>>heapAccessShiftForWebGLHeap(u))}else GLctx.texImage3D(e,t,n,r,o,i,s,a,c,null)}function _emscripten_glTexParameterf(e,t,n){GLctx.texParameterf(e,t,n)}function _emscripten_glTexParameterfv(e,t,n){var r=HEAPF32[n>>2];GLctx.texParameterf(e,t,r)}function _emscripten_glTexParameteri(e,t,n){GLctx.texParameteri(e,t,n)}function _emscripten_glTexParameteriv(e,t,n){var r=HEAP32[n>>2];GLctx.texParameteri(e,t,r)}function _emscripten_glTexStorage2D(e,t,n,r,o){GLctx.texStorage2D(e,t,n,r,o)}function _emscripten_glTexStorage3D(e,t,n,r,o,i){GLctx.texStorage3D(e,t,n,r,o,i)}function _emscripten_glTexSubImage2D(e,t,n,r,o,i,s,a,c){if(GL.currentContext.version>=2)if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage2D(e,t,n,r,o,i,s,a,c);else if(c){var l=heapObjectForWebGLType(a);GLctx.texSubImage2D(e,t,n,r,o,i,s,a,l,c>>heapAccessShiftForWebGLHeap(l))}else GLctx.texSubImage2D(e,t,n,r,o,i,s,a,null);else{var u=null;c&&(u=emscriptenWebGLGetTexPixelData(a,s,o,i,c,0)),GLctx.texSubImage2D(e,t,n,r,o,i,s,a,u)}}function _emscripten_glTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,u);else if(u){var d=heapObjectForWebGLType(l);GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,d,u>>heapAccessShiftForWebGLHeap(d))}else GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,null)}function _emscripten_glTransformFeedbackVaryings(e,t,n,r){e=GL.programs[e];for(var o=[],i=0;i<t;i++)o.push(UTF8ToString(HEAP32[n+4*i>>2]));GLctx.transformFeedbackVaryings(e,o,r)}function _emscripten_glUniform1f(e,t){GLctx.uniform1f(webglGetUniformLocation(e),t)}var miniTempWebGLFloatBuffers=[];function _emscripten_glUniform1fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform1fv(webglGetUniformLocation(e),HEAPF32,n>>2,t);else{if(t<=288)for(var r=miniTempWebGLFloatBuffers[t-1],o=0;o<t;++o)r[o]=HEAPF32[n+4*o>>2];else r=HEAPF32.subarray(n>>2,n+4*t>>2);GLctx.uniform1fv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform1i(e,t){GLctx.uniform1i(webglGetUniformLocation(e),t)}var __miniTempWebGLIntBuffers=[];function _emscripten_glUniform1iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform1iv(webglGetUniformLocation(e),HEAP32,n>>2,t);else{if(t<=288)for(var r=__miniTempWebGLIntBuffers[t-1],o=0;o<t;++o)r[o]=HEAP32[n+4*o>>2];else r=HEAP32.subarray(n>>2,n+4*t>>2);GLctx.uniform1iv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform1ui(e,t){GLctx.uniform1ui(webglGetUniformLocation(e),t)}function _emscripten_glUniform1uiv(e,t,n){GLctx.uniform1uiv(webglGetUniformLocation(e),HEAPU32,n>>2,t)}function _emscripten_glUniform2f(e,t,n){GLctx.uniform2f(webglGetUniformLocation(e),t,n)}function _emscripten_glUniform2fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform2fv(webglGetUniformLocation(e),HEAPF32,n>>2,2*t);else{if(t<=144)for(var r=miniTempWebGLFloatBuffers[2*t-1],o=0;o<2*t;o+=2)r[o]=HEAPF32[n+4*o>>2],r[o+1]=HEAPF32[n+(4*o+4)>>2];else r=HEAPF32.subarray(n>>2,n+8*t>>2);GLctx.uniform2fv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform2i(e,t,n){GLctx.uniform2i(webglGetUniformLocation(e),t,n)}function _emscripten_glUniform2iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform2iv(webglGetUniformLocation(e),HEAP32,n>>2,2*t);else{if(t<=144)for(var r=__miniTempWebGLIntBuffers[2*t-1],o=0;o<2*t;o+=2)r[o]=HEAP32[n+4*o>>2],r[o+1]=HEAP32[n+(4*o+4)>>2];else r=HEAP32.subarray(n>>2,n+8*t>>2);GLctx.uniform2iv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform2ui(e,t,n){GLctx.uniform2ui(webglGetUniformLocation(e),t,n)}function _emscripten_glUniform2uiv(e,t,n){GLctx.uniform2uiv(webglGetUniformLocation(e),HEAPU32,n>>2,2*t)}function _emscripten_glUniform3f(e,t,n,r){GLctx.uniform3f(webglGetUniformLocation(e),t,n,r)}function _emscripten_glUniform3fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform3fv(webglGetUniformLocation(e),HEAPF32,n>>2,3*t);else{if(t<=96)for(var r=miniTempWebGLFloatBuffers[3*t-1],o=0;o<3*t;o+=3)r[o]=HEAPF32[n+4*o>>2],r[o+1]=HEAPF32[n+(4*o+4)>>2],r[o+2]=HEAPF32[n+(4*o+8)>>2];else r=HEAPF32.subarray(n>>2,n+12*t>>2);GLctx.uniform3fv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform3i(e,t,n,r){GLctx.uniform3i(webglGetUniformLocation(e),t,n,r)}function _emscripten_glUniform3iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform3iv(webglGetUniformLocation(e),HEAP32,n>>2,3*t);else{if(t<=96)for(var r=__miniTempWebGLIntBuffers[3*t-1],o=0;o<3*t;o+=3)r[o]=HEAP32[n+4*o>>2],r[o+1]=HEAP32[n+(4*o+4)>>2],r[o+2]=HEAP32[n+(4*o+8)>>2];else r=HEAP32.subarray(n>>2,n+12*t>>2);GLctx.uniform3iv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform3ui(e,t,n,r){GLctx.uniform3ui(webglGetUniformLocation(e),t,n,r)}function _emscripten_glUniform3uiv(e,t,n){GLctx.uniform3uiv(webglGetUniformLocation(e),HEAPU32,n>>2,3*t)}function _emscripten_glUniform4f(e,t,n,r,o){GLctx.uniform4f(webglGetUniformLocation(e),t,n,r,o)}function _emscripten_glUniform4fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform4fv(webglGetUniformLocation(e),HEAPF32,n>>2,4*t);else{if(t<=72){var r=miniTempWebGLFloatBuffers[4*t-1],o=HEAPF32;n>>=2;for(var i=0;i<4*t;i+=4){var s=n+i;r[i]=o[s],r[i+1]=o[s+1],r[i+2]=o[s+2],r[i+3]=o[s+3]}}else r=HEAPF32.subarray(n>>2,n+16*t>>2);GLctx.uniform4fv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform4i(e,t,n,r,o){GLctx.uniform4i(webglGetUniformLocation(e),t,n,r,o)}function _emscripten_glUniform4iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform4iv(webglGetUniformLocation(e),HEAP32,n>>2,4*t);else{if(t<=72)for(var r=__miniTempWebGLIntBuffers[4*t-1],o=0;o<4*t;o+=4)r[o]=HEAP32[n+4*o>>2],r[o+1]=HEAP32[n+(4*o+4)>>2],r[o+2]=HEAP32[n+(4*o+8)>>2],r[o+3]=HEAP32[n+(4*o+12)>>2];else r=HEAP32.subarray(n>>2,n+16*t>>2);GLctx.uniform4iv(webglGetUniformLocation(e),r)}}function _emscripten_glUniform4ui(e,t,n,r,o){GLctx.uniform4ui(webglGetUniformLocation(e),t,n,r,o)}function _emscripten_glUniform4uiv(e,t,n){GLctx.uniform4uiv(webglGetUniformLocation(e),HEAPU32,n>>2,4*t)}function _emscripten_glUniformBlockBinding(e,t,n){e=GL.programs[e],GLctx.uniformBlockBinding(e,t,n)}function _emscripten_glUniformMatrix2fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix2fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,4*t);else{if(t<=72)for(var o=miniTempWebGLFloatBuffers[4*t-1],i=0;i<4*t;i+=4)o[i]=HEAPF32[r+4*i>>2],o[i+1]=HEAPF32[r+(4*i+4)>>2],o[i+2]=HEAPF32[r+(4*i+8)>>2],o[i+3]=HEAPF32[r+(4*i+12)>>2];else o=HEAPF32.subarray(r>>2,r+16*t>>2);GLctx.uniformMatrix2fv(webglGetUniformLocation(e),!!n,o)}}function _emscripten_glUniformMatrix2x3fv(e,t,n,r){GLctx.uniformMatrix2x3fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,6*t)}function _emscripten_glUniformMatrix2x4fv(e,t,n,r){GLctx.uniformMatrix2x4fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,8*t)}function _emscripten_glUniformMatrix3fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix3fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,9*t);else{if(t<=32)for(var o=miniTempWebGLFloatBuffers[9*t-1],i=0;i<9*t;i+=9)o[i]=HEAPF32[r+4*i>>2],o[i+1]=HEAPF32[r+(4*i+4)>>2],o[i+2]=HEAPF32[r+(4*i+8)>>2],o[i+3]=HEAPF32[r+(4*i+12)>>2],o[i+4]=HEAPF32[r+(4*i+16)>>2],o[i+5]=HEAPF32[r+(4*i+20)>>2],o[i+6]=HEAPF32[r+(4*i+24)>>2],o[i+7]=HEAPF32[r+(4*i+28)>>2],o[i+8]=HEAPF32[r+(4*i+32)>>2];else o=HEAPF32.subarray(r>>2,r+36*t>>2);GLctx.uniformMatrix3fv(webglGetUniformLocation(e),!!n,o)}}function _emscripten_glUniformMatrix3x2fv(e,t,n,r){GLctx.uniformMatrix3x2fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,6*t)}function _emscripten_glUniformMatrix3x4fv(e,t,n,r){GLctx.uniformMatrix3x4fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,12*t)}function _emscripten_glUniformMatrix4fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix4fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,16*t);else{if(t<=18){var o=miniTempWebGLFloatBuffers[16*t-1],i=HEAPF32;r>>=2;for(var s=0;s<16*t;s+=16){var a=r+s;o[s]=i[a],o[s+1]=i[a+1],o[s+2]=i[a+2],o[s+3]=i[a+3],o[s+4]=i[a+4],o[s+5]=i[a+5],o[s+6]=i[a+6],o[s+7]=i[a+7],o[s+8]=i[a+8],o[s+9]=i[a+9],o[s+10]=i[a+10],o[s+11]=i[a+11],o[s+12]=i[a+12],o[s+13]=i[a+13],o[s+14]=i[a+14],o[s+15]=i[a+15]}}else o=HEAPF32.subarray(r>>2,r+64*t>>2);GLctx.uniformMatrix4fv(webglGetUniformLocation(e),!!n,o)}}function _emscripten_glUniformMatrix4x2fv(e,t,n,r){GLctx.uniformMatrix4x2fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,8*t)}function _emscripten_glUniformMatrix4x3fv(e,t,n,r){GLctx.uniformMatrix4x3fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,12*t)}function _emscripten_glUseProgram(e){e=GL.programs[e],GLctx.useProgram(e),GLctx.currentProgram=e}function _emscripten_glValidateProgram(e){GLctx.validateProgram(GL.programs[e])}function _emscripten_glVertexAttrib1f(e,t){GLctx.vertexAttrib1f(e,t)}function _emscripten_glVertexAttrib1fv(e,t){GLctx.vertexAttrib1f(e,HEAPF32[t>>2])}function _emscripten_glVertexAttrib2f(e,t,n){GLctx.vertexAttrib2f(e,t,n)}function _emscripten_glVertexAttrib2fv(e,t){GLctx.vertexAttrib2f(e,HEAPF32[t>>2],HEAPF32[t+4>>2])}function _emscripten_glVertexAttrib3f(e,t,n,r){GLctx.vertexAttrib3f(e,t,n,r)}function _emscripten_glVertexAttrib3fv(e,t){GLctx.vertexAttrib3f(e,HEAPF32[t>>2],HEAPF32[t+4>>2],HEAPF32[t+8>>2])}function _emscripten_glVertexAttrib4f(e,t,n,r,o){GLctx.vertexAttrib4f(e,t,n,r,o)}function _emscripten_glVertexAttrib4fv(e,t){GLctx.vertexAttrib4f(e,HEAPF32[t>>2],HEAPF32[t+4>>2],HEAPF32[t+8>>2],HEAPF32[t+12>>2])}function _emscripten_glVertexAttribDivisor(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribDivisorANGLE(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribDivisorARB(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribDivisorEXT(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribDivisorNV(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribI4i(e,t,n,r,o){GLctx.vertexAttribI4i(e,t,n,r,o)}function _emscripten_glVertexAttribI4iv(e,t){GLctx.vertexAttribI4i(e,HEAP32[t>>2],HEAP32[t+4>>2],HEAP32[t+8>>2],HEAP32[t+12>>2])}function _emscripten_glVertexAttribI4ui(e,t,n,r,o){GLctx.vertexAttribI4ui(e,t,n,r,o)}function _emscripten_glVertexAttribI4uiv(e,t){GLctx.vertexAttribI4ui(e,HEAPU32[t>>2],HEAPU32[t+4>>2],HEAPU32[t+8>>2],HEAPU32[t+12>>2])}function _emscripten_glVertexAttribIPointer(e,t,n,r,o){GLctx.vertexAttribIPointer(e,t,n,r,o)}function _emscripten_glVertexAttribPointer(e,t,n,r,o,i){GLctx.vertexAttribPointer(e,t,n,!!r,o,i)}function _emscripten_glViewport(e,t,n,r){GLctx.viewport(e,t,n,r)}function _emscripten_glWaitSync(e,t,n,r){GLctx.waitSync(GL.syncs[e],t,convertI32PairToI53(n,r))}function _emscripten_memcpy_big(e,t,n){HEAPU8.copyWithin(e,t,t+n)}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){var t=HEAPU8.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);if(o=Math.min(o,e+100663296),emscripten_realloc_buffer(Math.min(n,alignUp(Math.max(e,o),65536))))return!0}return!1}function _emscripten_set_main_loop(e,t,n){setMainLoop(wasmTable.get(e),t,n)}function _emscripten_thread_sleep(e){for(var t=_emscripten_get_now();_emscripten_get_now()-t<e;);}var JSEvents={inEventHandler:0,removeAllEventListeners:function(){for(var e=JSEvents.eventHandlers.length-1;e>=0;--e)JSEvents._removeHandler(e);JSEvents.eventHandlers=[],JSEvents.deferredCalls=[]},registerRemoveEventListeners:function(){JSEvents.removeEventListenersRegistered||(__ATEXIT__.push(JSEvents.removeAllEventListeners),JSEvents.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var o in JSEvents.deferredCalls){var i=JSEvents.deferredCalls[o];if(i.targetFunction==e&&r(i.argsList,n))return}JSEvents.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),JSEvents.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<JSEvents.deferredCalls.length;++t)JSEvents.deferredCalls[t].targetFunction==e&&(JSEvents.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(JSEvents.canPerformEventHandlerRequests())for(var e=0;e<JSEvents.deferredCalls.length;++e){var t=JSEvents.deferredCalls[e];JSEvents.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<JSEvents.eventHandlers.length;++n)JSEvents.eventHandlers[n].target!=e||t&&t!=JSEvents.eventHandlers[n].eventTypeString||JSEvents._removeHandler(n--)},_removeHandler:function(e){var t=JSEvents.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),JSEvents.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++JSEvents.inEventHandler,JSEvents.currentEventHandler=e,JSEvents.runDeferredCalls(),e.handlerFunc(t),JSEvents.runDeferredCalls(),--JSEvents.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),JSEvents.eventHandlers.push(e),JSEvents.registerRemoveEventListeners();else for(var n=0;n<JSEvents.eventHandlers.length;++n)JSEvents.eventHandlers[n].target==e.target&&JSEvents.eventHandlers[n].eventTypeString==e.eventTypeString&&JSEvents._removeHandler(n--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},__emscripten_webgl_power_preferences=["default","low-power","high-performance"];function maybeCStringToJsString(e){return e>2?UTF8ToString(e):e}var specialHTMLTargets=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function findEventTarget(e){return e=maybeCStringToJsString(e),specialHTMLTargets[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function findCanvasEventTarget(e){return findEventTarget(e)}function _emscripten_webgl_do_create_context(e,t){var n=t>>2,r=HEAP32[n+6],o={alpha:!!HEAP32[n+0],depth:!!HEAP32[n+1],stencil:!!HEAP32[n+2],antialias:!!HEAP32[n+3],premultipliedAlpha:!!HEAP32[n+4],preserveDrawingBuffer:!!HEAP32[n+5],powerPreference:__emscripten_webgl_power_preferences[r],failIfMajorPerformanceCaveat:!!HEAP32[n+7],majorVersion:HEAP32[n+8],minorVersion:HEAP32[n+9],enableExtensionsByDefault:HEAP32[n+10],explicitSwapControl:HEAP32[n+11],proxyContextToMainThread:HEAP32[n+12],renderViaOffscreenBackBuffer:HEAP32[n+13]},i=findCanvasEventTarget(e);return i?(o.explicitSwapControl&&!o.renderViaOffscreenBackBuffer&&(o.renderViaOffscreenBackBuffer=!0),GL.createContext(i,o)):0}function _emscripten_webgl_create_context(e,t){return _emscripten_webgl_do_create_context(e,t)}function _emscripten_webgl_do_get_current_context(){return GL.currentContext?GL.currentContext.handle:0}function _emscripten_webgl_get_current_context(){return _emscripten_webgl_do_get_current_context()}function _emscripten_webgl_make_context_current(e){return GL.makeContextCurrent(e)?0:-5}function _emscripten_webgl_destroy_context(e){GL.currentContext==e&&(GL.currentContext=0),GL.deleteContext(e)}function _emscripten_webgl_init_context_attributes(e){for(var t=e>>2,n=0;n<14;++n)HEAP32[t+n]=0;HEAP32[t+0]=HEAP32[t+1]=HEAP32[t+3]=HEAP32[t+4]=HEAP32[t+8]=HEAP32[t+10]=1}Module._emscripten_webgl_get_current_context=_emscripten_webgl_get_current_context,Module._emscripten_webgl_make_context_current=_emscripten_webgl_make_context_current;var ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:getExecutableName()};for(var t in ENV)void 0===ENV[t]?delete e[t]:e[t]=ENV[t];var n=[];for(var t in e)n.push(t+"="+e[t]);getEnvStrings.strings=n}return getEnvStrings.strings}function _environ_get(e,t){try{var n=0;return getEnvStrings().forEach((function(r,o){var i=t+n;HEAP32[e+4*o>>2]=i,writeAsciiToMemory(r,i),n+=r.length+1})),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _environ_sizes_get(e,t){try{var n=getEnvStrings();HEAP32[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),HEAP32[t>>2]=r,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_fdstat_get(e,t){try{var n=SYSCALLS.getStreamFromFD(e),r=n.tty?2:FS.isDir(n.mode)?3:FS.isLink(n.mode)?7:4;return HEAP8[0|t]=r,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_read(e,t,n,r){try{var o=SYSCALLS.getStreamFromFD(e),i=SYSCALLS.doReadv(o,t,n);return HEAP32[r>>2]=i,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_seek(e,t,n,r,o){try{var i=SYSCALLS.getStreamFromFD(e),s=4294967296*n+(t>>>0),a=9007199254740992;return s<=-a||s>=a?-61:(FS.llseek(i,s,r),tempI64=[i.position>>>0,(tempDouble=i.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[o>>2]=tempI64[0],HEAP32[o+4>>2]=tempI64[1],i.getdents&&0===s&&0===r&&(i.getdents=null),0)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_write(e,t,n,r){try{var o=SYSCALLS.getStreamFromFD(e),i=SYSCALLS.doWritev(o,t,n);return HEAP32[r>>2]=i,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}var GAI_ERRNO_MESSAGES={};function _gai_strerror(e){_gai_strerror.buffer||(_gai_strerror.buffer=_malloc(256),GAI_ERRNO_MESSAGES[0]="Success",GAI_ERRNO_MESSAGES[-1]="Invalid value for 'ai_flags' field",GAI_ERRNO_MESSAGES[-2]="NAME or SERVICE is unknown",GAI_ERRNO_MESSAGES[-3]="Temporary failure in name resolution",GAI_ERRNO_MESSAGES[-4]="Non-recoverable failure in name res",GAI_ERRNO_MESSAGES[-6]="'ai_family' not supported",GAI_ERRNO_MESSAGES[-7]="'ai_socktype' not supported",GAI_ERRNO_MESSAGES[-8]="SERVICE not supported for 'ai_socktype'",GAI_ERRNO_MESSAGES[-10]="Memory allocation failure",GAI_ERRNO_MESSAGES[-11]="System error returned in 'errno'",GAI_ERRNO_MESSAGES[-12]="Argument buffer overflow");var t="Unknown error";return e in GAI_ERRNO_MESSAGES&&(t=GAI_ERRNO_MESSAGES[e].length>255?"Message too long":GAI_ERRNO_MESSAGES[e]),writeAsciiToMemory(t,_gai_strerror.buffer),_gai_strerror.buffer}function _getTempRet0(){return getTempRet0()}function _getaddrinfo(e,t,n,r){var o,i=0,s=0,a=0,c=0,l=0,u=0;function d(e,t,n,r,o,i){var s,a,c;return a=10===e?28:16,o=10===e?inetNtop6(o):inetNtop4(o),assert(!writeSockaddr(s=_malloc(a),e,o,i)),c=_malloc(32),HEAP32[c+4>>2]=e,HEAP32[c+8>>2]=t,HEAP32[c+12>>2]=n,HEAP32[c+24>>2]=r,HEAP32[c+20>>2]=s,HEAP32[c+16>>2]=10===e?28:16,HEAP32[c+28>>2]=0,c}if(n&&(a=HEAP32[n>>2],c=HEAP32[n+4>>2],l=HEAP32[n+8>>2],u=HEAP32[n+12>>2]),l&&!u&&(u=2===l?17:6),!l&&u&&(l=17===u?2:1),0===u&&(u=6),0===l&&(l=1),!e&&!t)return-2;if(-1088&a)return-1;if(0!==n&&2&HEAP32[n>>2]&&!e)return-1;if(32&a)return-2;if(0!==l&&1!==l&&2!==l)return-7;if(0!==c&&2!==c&&10!==c)return-6;if(t&&(t=UTF8ToString(t),s=parseInt(t,10),isNaN(s)))return 1024&a?-2:-8;if(!e)return 0===c&&(c=2),1&a||(i=2===c?_htonl(2130706433):[0,0,0,1]),o=d(c,l,u,null,i,s),HEAP32[r>>2]=o,0;if(null!==(i=inetPton4(e=UTF8ToString(e))))if(0===c||2===c)c=2;else{if(!(10===c&&8&a))return-2;i=[0,0,_htonl(65535),i],c=10}else if(null!==(i=inetPton6(e))){if(0!==c&&10!==c)return-2;c=10}return null!=i?(o=d(c,l,u,e,i,s),HEAP32[r>>2]=o,0):4&a?-2:(i=inetPton4(e=DNS.lookup_name(e)),0===c?c=2:10===c&&(i=[0,0,_htonl(65535),i]),o=d(c,l,u,null,i,s),HEAP32[r>>2]=o,0)}function _getnameinfo(e,t,n,r,o,i,s){var a=readSockaddr(e,t);if(a.errno)return-6;var c=a.port,l=a.addr,u=!1;if(n&&r){var d;if(1&s||!(d=DNS.lookup_addr(l))){if(8&s)return-2}else l=d;stringToUTF8(l,n,r)+1>=r&&(u=!0)}return o&&i&&stringToUTF8(c=""+c,o,i)+1>=i&&(u=!0),u?-12:0}function _gettimeofday(e){var t=Date.now();return HEAP32[e>>2]=t/1e3|0,HEAP32[e+4>>2]=t%1e3*1e3|0,0}function _glActiveTexture(e){GLctx.activeTexture(e)}function _glAttachShader(e,t){GLctx.attachShader(GL.programs[e],GL.shaders[t])}function _glBeginTransformFeedback(e){GLctx.beginTransformFeedback(e)}function _glBindAttribLocation(e,t,n){GLctx.bindAttribLocation(GL.programs[e],t,UTF8ToString(n))}function _glBindBuffer(e,t){35051==e?GLctx.currentPixelPackBufferBinding=t:35052==e&&(GLctx.currentPixelUnpackBufferBinding=t),GLctx.bindBuffer(e,GL.buffers[t])}function _glBindBufferBase(e,t,n){GLctx.bindBufferBase(e,t,GL.buffers[n])}function _glBindFramebuffer(e,t){GLctx.bindFramebuffer(e,t?GL.framebuffers[t]:GL.currentContext.defaultFbo)}function _glBindRenderbuffer(e,t){GLctx.bindRenderbuffer(e,GL.renderbuffers[t])}function _glBindTexture(e,t){GLctx.bindTexture(e,GL.textures[t])}function _glBindVertexArray(e){GLctx.bindVertexArray(GL.vaos[e])}function _glBlendEquation(e){GLctx.blendEquation(e)}function _glBlendFunc(e,t){GLctx.blendFunc(e,t)}function _glBlendFuncSeparate(e,t,n,r){GLctx.blendFuncSeparate(e,t,n,r)}function _glBlitFramebuffer(e,t,n,r,o,i,s,a,c,l){GLctx.blitFramebuffer(e,t,n,r,o,i,s,a,c,l)}function _glBufferData(e,t,n,r){GL.currentContext.version>=2?n?GLctx.bufferData(e,HEAPU8,r,n,t):GLctx.bufferData(e,t,r):GLctx.bufferData(e,n?HEAPU8.subarray(n,n+t):t,r)}function _glBufferSubData(e,t,n,r){GL.currentContext.version>=2?GLctx.bufferSubData(e,t,HEAPU8,r,n):GLctx.bufferSubData(e,t,HEAPU8.subarray(r,r+n))}function _glCheckFramebufferStatus(e){return GLctx.checkFramebufferStatus(e)}function _glClear(e){GLctx.clear(e)}function _glClearBufferfv(e,t,n){GLctx.clearBufferfv(e,t,HEAPF32,n>>2)}function _glClearColor(e,t,n,r){GLctx.clearColor(e,t,n,r)}function _glClearDepthf(e){GLctx.clearDepth(e)}function _glColorMask(e,t,n,r){GLctx.colorMask(!!e,!!t,!!n,!!r)}function _glCompileShader(e){GLctx.compileShader(GL.shaders[e])}function _glCompressedTexImage2D(e,t,n,r,o,i,s,a){GL.currentContext.version>=2?GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexImage2D(e,t,n,r,o,i,s,a):GLctx.compressedTexImage2D(e,t,n,r,o,i,HEAPU8,a,s):GLctx.compressedTexImage2D(e,t,n,r,o,i,a?HEAPU8.subarray(a,a+s):null)}function _glCompressedTexSubImage2D(e,t,n,r,o,i,s,a,c){GL.currentContext.version>=2?GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,a,c):GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,HEAPU8,c,a):GLctx.compressedTexSubImage2D(e,t,n,r,o,i,s,c?HEAPU8.subarray(c,c+a):null)}function _glCompressedTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u){GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u):GLctx.compressedTexSubImage3D(e,t,n,r,o,i,s,a,c,HEAPU8,u,l)}function _glCopyBufferSubData(e,t,n,r,o){GLctx.copyBufferSubData(e,t,n,r,o)}function _glCopyTexSubImage2D(e,t,n,r,o,i,s,a){GLctx.copyTexSubImage2D(e,t,n,r,o,i,s,a)}function _glCreateProgram(){var e=GL.getNewId(GL.programs),t=GLctx.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,GL.programs[e]=t,e}function _glCreateShader(e){var t=GL.getNewId(GL.shaders);return GL.shaders[t]=GLctx.createShader(e),t}function _glCullFace(e){GLctx.cullFace(e)}function _glDeleteBuffers(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.buffers[r];o&&(GLctx.deleteBuffer(o),o.name=0,GL.buffers[r]=null,r==GLctx.currentPixelPackBufferBinding&&(GLctx.currentPixelPackBufferBinding=0),r==GLctx.currentPixelUnpackBufferBinding&&(GLctx.currentPixelUnpackBufferBinding=0))}}function _glDeleteFramebuffers(e,t){for(var n=0;n<e;++n){var r=HEAP32[t+4*n>>2],o=GL.framebuffers[r];o&&(GLctx.deleteFramebuffer(o),o.name=0,GL.framebuffers[r]=null)}}function _glDeleteProgram(e){if(e){var t=GL.programs[e];t?(GLctx.deleteProgram(t),t.name=0,GL.programs[e]=null):GL.recordError(1281)}}function _glDeleteRenderbuffers(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.renderbuffers[r];o&&(GLctx.deleteRenderbuffer(o),o.name=0,GL.renderbuffers[r]=null)}}function _glDeleteShader(e){if(e){var t=GL.shaders[e];t?(GLctx.deleteShader(t),GL.shaders[e]=null):GL.recordError(1281)}}function _glDeleteTextures(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2],o=GL.textures[r];o&&(GLctx.deleteTexture(o),o.name=0,GL.textures[r]=null)}}function _glDeleteVertexArrays(e,t){for(var n=0;n<e;n++){var r=HEAP32[t+4*n>>2];GLctx.deleteVertexArray(GL.vaos[r]),GL.vaos[r]=null}}function _glDepthFunc(e){GLctx.depthFunc(e)}function _glDepthMask(e){GLctx.depthMask(!!e)}function _glDisable(e){GLctx.disable(e)}function _glDisableVertexAttribArray(e){GLctx.disableVertexAttribArray(e)}function _glDrawArrays(e,t,n){GLctx.drawArrays(e,t,n)}function _glDrawArraysInstanced(e,t,n,r){GLctx.drawArraysInstanced(e,t,n,r)}function _glDrawBuffers(e,t){for(var n=tempFixedLengthArray[e],r=0;r<e;r++)n[r]=HEAP32[t+4*r>>2];GLctx.drawBuffers(n)}function _glDrawElementsInstanced(e,t,n,r,o){GLctx.drawElementsInstanced(e,t,n,r,o)}function _glEnable(e){GLctx.enable(e)}function _glEnableVertexAttribArray(e){GLctx.enableVertexAttribArray(e)}function _glEndTransformFeedback(){GLctx.endTransformFeedback()}function _glFinish(){GLctx.finish()}function _glFramebufferRenderbuffer(e,t,n,r){GLctx.framebufferRenderbuffer(e,t,n,GL.renderbuffers[r])}function _glFramebufferTexture2D(e,t,n,r,o){GLctx.framebufferTexture2D(e,t,n,GL.textures[r],o)}function _glFramebufferTextureLayer(e,t,n,r,o){GLctx.framebufferTextureLayer(e,t,GL.textures[n],r,o)}function _glFrontFace(e){GLctx.frontFace(e)}function _glGenBuffers(e,t){__glGenObject(e,t,"createBuffer",GL.buffers)}function _glGenFramebuffers(e,t){__glGenObject(e,t,"createFramebuffer",GL.framebuffers)}function _glGenRenderbuffers(e,t){__glGenObject(e,t,"createRenderbuffer",GL.renderbuffers)}function _glGenTextures(e,t){__glGenObject(e,t,"createTexture",GL.textures)}function _glGenVertexArrays(e,t){__glGenObject(e,t,"createVertexArray",GL.vaos)}function _glGenerateMipmap(e){GLctx.generateMipmap(e)}function _glGetError(){var e=GLctx.getError()||GL.lastError;return GL.lastError=0,e}function _glGetFloatv(e,t){emscriptenWebGLGet(e,t,2)}function _glGetIntegerv(e,t){emscriptenWebGLGet(e,t,0)}function _glGetProgramInfoLog(e,t,n,r){var o=GLctx.getProgramInfoLog(GL.programs[e]);null===o&&(o="(unknown error)");var i=t>0&&r?stringToUTF8(o,r,t):0;n&&(HEAP32[n>>2]=i)}function _glGetProgramiv(e,t,n){if(n)if(e>=GL.counter)GL.recordError(1281);else if(e=GL.programs[e],35716==t){var r=GLctx.getProgramInfoLog(e);null===r&&(r="(unknown error)"),HEAP32[n>>2]=r.length+1}else if(35719==t){if(!e.maxUniformLength)for(var o=0;o<GLctx.getProgramParameter(e,35718);++o)e.maxUniformLength=Math.max(e.maxUniformLength,GLctx.getActiveUniform(e,o).name.length+1);HEAP32[n>>2]=e.maxUniformLength}else if(35722==t){if(!e.maxAttributeLength)for(o=0;o<GLctx.getProgramParameter(e,35721);++o)e.maxAttributeLength=Math.max(e.maxAttributeLength,GLctx.getActiveAttrib(e,o).name.length+1);HEAP32[n>>2]=e.maxAttributeLength}else if(35381==t){if(!e.maxUniformBlockNameLength)for(o=0;o<GLctx.getProgramParameter(e,35382);++o)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,GLctx.getActiveUniformBlockName(e,o).length+1);HEAP32[n>>2]=e.maxUniformBlockNameLength}else HEAP32[n>>2]=GLctx.getProgramParameter(e,t);else GL.recordError(1281)}function _glGetShaderInfoLog(e,t,n,r){var o=GLctx.getShaderInfoLog(GL.shaders[e]);null===o&&(o="(unknown error)");var i=t>0&&r?stringToUTF8(o,r,t):0;n&&(HEAP32[n>>2]=i)}function _glGetShaderiv(e,t,n){if(n)if(35716==t){var r=GLctx.getShaderInfoLog(GL.shaders[e]);null===r&&(r="(unknown error)");var o=r?r.length+1:0;HEAP32[n>>2]=o}else if(35720==t){var i=GLctx.getShaderSource(GL.shaders[e]),s=i?i.length+1:0;HEAP32[n>>2]=s}else HEAP32[n>>2]=GLctx.getShaderParameter(GL.shaders[e],t);else GL.recordError(1281)}function _glGetString(e){var t=GL.stringCache[e];if(!t){switch(e){case 7939:var n=GLctx.getSupportedExtensions()||[];t=stringToNewUTF8((n=n.concat(n.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var r=GLctx.getParameter(e);r||GL.recordError(1280),t=r&&stringToNewUTF8(r);break;case 7938:var o=GLctx.getParameter(7938);t=stringToNewUTF8(o=GL.currentContext.version>=2?"OpenGL ES 3.0 ("+o+")":"OpenGL ES 2.0 ("+o+")");break;case 35724:var i=GLctx.getParameter(35724),s=i.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==s&&(3==s[1].length&&(s[1]=s[1]+"0"),i="OpenGL ES GLSL ES "+s[1]+" ("+i+")"),t=stringToNewUTF8(i);break;default:GL.recordError(1280)}GL.stringCache[e]=t}return t}function _glGetStringi(e,t){if(GL.currentContext.version<2)return GL.recordError(1282),0;var n=GL.stringiCache[e];if(n)return t<0||t>=n.length?(GL.recordError(1281),0):n[t];if(7939===e){var r=GLctx.getSupportedExtensions()||[];return r=(r=r.concat(r.map((function(e){return"GL_"+e})))).map((function(e){return stringToNewUTF8(e)})),n=GL.stringiCache[e]=r,t<0||t>=n.length?(GL.recordError(1281),0):n[t]}return GL.recordError(1280),0}function _glGetUniformBlockIndex(e,t){return GLctx.getUniformBlockIndex(GL.programs[e],UTF8ToString(t))}function _glGetUniformLocation(e,t){if(t=UTF8ToString(t),e=GL.programs[e]){webglPrepareUniformLocationsBeforeFirstUse(e);var n=e.uniformLocsById,r=0,o=t,i=webglGetLeftBracePos(t);i>0&&(r=jstoi_q(t.slice(i+1))>>>0,o=t.slice(0,i));var s=e.uniformSizeAndIdsByName[o];if(s&&r<s[0]&&(n[r+=s[1]]=n[r]||GLctx.getUniformLocation(e,t)))return r}else GL.recordError(1281);return-1}function _glInvalidateFramebuffer(e,t,n){for(var r=tempFixedLengthArray[t],o=0;o<t;o++)r[o]=HEAP32[n+4*o>>2];GLctx.invalidateFramebuffer(e,r)}function _glLinkProgram(e){e=GL.programs[e],GLctx.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function _glPixelStorei(e,t){3317==e&&(GL.unpackAlignment=t),GLctx.pixelStorei(e,t)}function _glReadBuffer(e){GLctx.readBuffer(e)}function _glReadPixels(e,t,n,r,o,i,s){if(GL.currentContext.version>=2)if(GLctx.currentPixelPackBufferBinding)GLctx.readPixels(e,t,n,r,o,i,s);else{var a=heapObjectForWebGLType(i);GLctx.readPixels(e,t,n,r,o,i,a,s>>heapAccessShiftForWebGLHeap(a))}else{var c=emscriptenWebGLGetTexPixelData(i,o,n,r,s,o);c?GLctx.readPixels(e,t,n,r,o,i,c):GL.recordError(1280)}}function _glRenderbufferStorage(e,t,n,r){GLctx.renderbufferStorage(e,t,n,r)}function _glRenderbufferStorageMultisample(e,t,n,r,o){GLctx.renderbufferStorageMultisample(e,t,n,r,o)}function _glScissor(e,t,n,r){GLctx.scissor(e,t,n,r)}function _glShaderSource(e,t,n,r){var o=GL.getSource(e,t,n,r);GLctx.shaderSource(GL.shaders[e],o)}function _glTexImage2D(e,t,n,r,o,i,s,a,c){if(GL.currentContext.version>=2)if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage2D(e,t,n,r,o,i,s,a,c);else if(c){var l=heapObjectForWebGLType(a);GLctx.texImage2D(e,t,n,r,o,i,s,a,l,c>>heapAccessShiftForWebGLHeap(l))}else GLctx.texImage2D(e,t,n,r,o,i,s,a,null);else GLctx.texImage2D(e,t,n,r,o,i,s,a,c?emscriptenWebGLGetTexPixelData(a,s,r,o,c,n):null)}function _glTexImage3D(e,t,n,r,o,i,s,a,c,l){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage3D(e,t,n,r,o,i,s,a,c,l);else if(l){var u=heapObjectForWebGLType(c);GLctx.texImage3D(e,t,n,r,o,i,s,a,c,u,l>>heapAccessShiftForWebGLHeap(u))}else GLctx.texImage3D(e,t,n,r,o,i,s,a,c,null)}function _glTexParameterf(e,t,n){GLctx.texParameterf(e,t,n)}function _glTexParameteri(e,t,n){GLctx.texParameteri(e,t,n)}function _glTexStorage2D(e,t,n,r,o){GLctx.texStorage2D(e,t,n,r,o)}function _glTexSubImage2D(e,t,n,r,o,i,s,a,c){if(GL.currentContext.version>=2)if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage2D(e,t,n,r,o,i,s,a,c);else if(c){var l=heapObjectForWebGLType(a);GLctx.texSubImage2D(e,t,n,r,o,i,s,a,l,c>>heapAccessShiftForWebGLHeap(l))}else GLctx.texSubImage2D(e,t,n,r,o,i,s,a,null);else{var u=null;c&&(u=emscriptenWebGLGetTexPixelData(a,s,o,i,c,0)),GLctx.texSubImage2D(e,t,n,r,o,i,s,a,u)}}function _glTexSubImage3D(e,t,n,r,o,i,s,a,c,l,u){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,u);else if(u){var d=heapObjectForWebGLType(l);GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,d,u>>heapAccessShiftForWebGLHeap(d))}else GLctx.texSubImage3D(e,t,n,r,o,i,s,a,c,l,null)}function _glTransformFeedbackVaryings(e,t,n,r){e=GL.programs[e];for(var o=[],i=0;i<t;i++)o.push(UTF8ToString(HEAP32[n+4*i>>2]));GLctx.transformFeedbackVaryings(e,o,r)}function _glUniform1f(e,t){GLctx.uniform1f(webglGetUniformLocation(e),t)}function _glUniform1i(e,t){GLctx.uniform1i(webglGetUniformLocation(e),t)}function _glUniform1iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform1iv(webglGetUniformLocation(e),HEAP32,n>>2,t);else{if(t<=288)for(var r=__miniTempWebGLIntBuffers[t-1],o=0;o<t;++o)r[o]=HEAP32[n+4*o>>2];else r=HEAP32.subarray(n>>2,n+4*t>>2);GLctx.uniform1iv(webglGetUniformLocation(e),r)}}function _glUniform1ui(e,t){GLctx.uniform1ui(webglGetUniformLocation(e),t)}function _glUniform2f(e,t,n){GLctx.uniform2f(webglGetUniformLocation(e),t,n)}function _glUniform2fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform2fv(webglGetUniformLocation(e),HEAPF32,n>>2,2*t);else{if(t<=144)for(var r=miniTempWebGLFloatBuffers[2*t-1],o=0;o<2*t;o+=2)r[o]=HEAPF32[n+4*o>>2],r[o+1]=HEAPF32[n+(4*o+4)>>2];else r=HEAPF32.subarray(n>>2,n+8*t>>2);GLctx.uniform2fv(webglGetUniformLocation(e),r)}}function _glUniform2i(e,t,n){GLctx.uniform2i(webglGetUniformLocation(e),t,n)}function _glUniform2iv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform2iv(webglGetUniformLocation(e),HEAP32,n>>2,2*t);else{if(t<=144)for(var r=__miniTempWebGLIntBuffers[2*t-1],o=0;o<2*t;o+=2)r[o]=HEAP32[n+4*o>>2],r[o+1]=HEAP32[n+(4*o+4)>>2];else r=HEAP32.subarray(n>>2,n+8*t>>2);GLctx.uniform2iv(webglGetUniformLocation(e),r)}}function _glUniform3f(e,t,n,r){GLctx.uniform3f(webglGetUniformLocation(e),t,n,r)}function _glUniform3fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform3fv(webglGetUniformLocation(e),HEAPF32,n>>2,3*t);else{if(t<=96)for(var r=miniTempWebGLFloatBuffers[3*t-1],o=0;o<3*t;o+=3)r[o]=HEAPF32[n+4*o>>2],r[o+1]=HEAPF32[n+(4*o+4)>>2],r[o+2]=HEAPF32[n+(4*o+8)>>2];else r=HEAPF32.subarray(n>>2,n+12*t>>2);GLctx.uniform3fv(webglGetUniformLocation(e),r)}}function _glUniform3i(e,t,n,r){GLctx.uniform3i(webglGetUniformLocation(e),t,n,r)}function _glUniform4f(e,t,n,r,o){GLctx.uniform4f(webglGetUniformLocation(e),t,n,r,o)}function _glUniform4fv(e,t,n){if(GL.currentContext.version>=2)GLctx.uniform4fv(webglGetUniformLocation(e),HEAPF32,n>>2,4*t);else{if(t<=72){var r=miniTempWebGLFloatBuffers[4*t-1],o=HEAPF32;n>>=2;for(var i=0;i<4*t;i+=4){var s=n+i;r[i]=o[s],r[i+1]=o[s+1],r[i+2]=o[s+2],r[i+3]=o[s+3]}}else r=HEAPF32.subarray(n>>2,n+16*t>>2);GLctx.uniform4fv(webglGetUniformLocation(e),r)}}function _glUniform4i(e,t,n,r,o){GLctx.uniform4i(webglGetUniformLocation(e),t,n,r,o)}function _glUniformBlockBinding(e,t,n){e=GL.programs[e],GLctx.uniformBlockBinding(e,t,n)}function _glUniformMatrix2fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix2fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,4*t);else{if(t<=72)for(var o=miniTempWebGLFloatBuffers[4*t-1],i=0;i<4*t;i+=4)o[i]=HEAPF32[r+4*i>>2],o[i+1]=HEAPF32[r+(4*i+4)>>2],o[i+2]=HEAPF32[r+(4*i+8)>>2],o[i+3]=HEAPF32[r+(4*i+12)>>2];else o=HEAPF32.subarray(r>>2,r+16*t>>2);GLctx.uniformMatrix2fv(webglGetUniformLocation(e),!!n,o)}}function _glUniformMatrix3fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix3fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,9*t);else{if(t<=32)for(var o=miniTempWebGLFloatBuffers[9*t-1],i=0;i<9*t;i+=9)o[i]=HEAPF32[r+4*i>>2],o[i+1]=HEAPF32[r+(4*i+4)>>2],o[i+2]=HEAPF32[r+(4*i+8)>>2],o[i+3]=HEAPF32[r+(4*i+12)>>2],o[i+4]=HEAPF32[r+(4*i+16)>>2],o[i+5]=HEAPF32[r+(4*i+20)>>2],o[i+6]=HEAPF32[r+(4*i+24)>>2],o[i+7]=HEAPF32[r+(4*i+28)>>2],o[i+8]=HEAPF32[r+(4*i+32)>>2];else o=HEAPF32.subarray(r>>2,r+36*t>>2);GLctx.uniformMatrix3fv(webglGetUniformLocation(e),!!n,o)}}function _glUniformMatrix4fv(e,t,n,r){if(GL.currentContext.version>=2)GLctx.uniformMatrix4fv(webglGetUniformLocation(e),!!n,HEAPF32,r>>2,16*t);else{if(t<=18){var o=miniTempWebGLFloatBuffers[16*t-1],i=HEAPF32;r>>=2;for(var s=0;s<16*t;s+=16){var a=r+s;o[s]=i[a],o[s+1]=i[a+1],o[s+2]=i[a+2],o[s+3]=i[a+3],o[s+4]=i[a+4],o[s+5]=i[a+5],o[s+6]=i[a+6],o[s+7]=i[a+7],o[s+8]=i[a+8],o[s+9]=i[a+9],o[s+10]=i[a+10],o[s+11]=i[a+11],o[s+12]=i[a+12],o[s+13]=i[a+13],o[s+14]=i[a+14],o[s+15]=i[a+15]}}else o=HEAPF32.subarray(r>>2,r+64*t>>2);GLctx.uniformMatrix4fv(webglGetUniformLocation(e),!!n,o)}}function _glUseProgram(e){e=GL.programs[e],GLctx.useProgram(e),GLctx.currentProgram=e}function _glVertexAttrib4f(e,t,n,r,o){GLctx.vertexAttrib4f(e,t,n,r,o)}function _glVertexAttrib4fv(e,t){GLctx.vertexAttrib4f(e,HEAPF32[t>>2],HEAPF32[t+4>>2],HEAPF32[t+8>>2],HEAPF32[t+12>>2])}function _glVertexAttribDivisor(e,t){GLctx.vertexAttribDivisor(e,t)}function _glVertexAttribI4ui(e,t,n,r,o){GLctx.vertexAttribI4ui(e,t,n,r,o)}function _glVertexAttribIPointer(e,t,n,r,o){GLctx.vertexAttribIPointer(e,t,n,r,o)}function _glVertexAttribPointer(e,t,n,r,o,i){GLctx.vertexAttribPointer(e,t,n,!!r,o,i)}function _glViewport(e,t,n,r){GLctx.viewport(e,t,n,r)}function _gmtime_r(e,t){var n=new Date(1e3*HEAP32[e>>2]);HEAP32[t>>2]=n.getUTCSeconds(),HEAP32[t+4>>2]=n.getUTCMinutes(),HEAP32[t+8>>2]=n.getUTCHours(),HEAP32[t+12>>2]=n.getUTCDate(),HEAP32[t+16>>2]=n.getUTCMonth(),HEAP32[t+20>>2]=n.getUTCFullYear()-1900,HEAP32[t+24>>2]=n.getUTCDay(),HEAP32[t+36>>2]=0,HEAP32[t+32>>2]=0;var r=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),o=(n.getTime()-r)/864e5|0;return HEAP32[t+28>>2]=o,_gmtime_r.GMTString||(_gmtime_r.GMTString=allocateUTF8("GMT")),HEAP32[t+40>>2]=_gmtime_r.GMTString,t}var GodotRuntime={get_func:function(e){return wasmTable.get(e)},error:function(){err.apply(null,Array.from(arguments))},print:function(){out.apply(null,Array.from(arguments))},malloc:function(e){return _malloc(e)},free:function(e){_free(e)},getHeapValue:function(e,t){return getValue(e,t)},setHeapValue:function(e,t,n){setValue(e,t,n)},heapSub:function(e,t,n){const r=e.BYTES_PER_ELEMENT;return e.subarray(t/r,t/r+n)},heapSlice:function(e,t,n){const r=e.BYTES_PER_ELEMENT;return e.slice(t/r,t/r+n)},heapCopy:function(e,t,n){const r=t.BYTES_PER_ELEMENT;return e.set(t,n/r)},parseString:function(e){return UTF8ToString(e)},parseStringArray:function(e,t){const n=[];return GodotRuntime.heapSub(HEAP32,e,t).forEach((function(e){n.push(GodotRuntime.parseString(e))})),n},strlen:function(e){return lengthBytesUTF8(e)},allocString:function(e){const t=GodotRuntime.strlen(e)+1,n=GodotRuntime.malloc(t);return stringToUTF8(e,n,t),n},allocStringArray:function(e){const t=e.length,n=GodotRuntime.malloc(4*t);for(let r=0;r<t;r++)HEAP32[(n>>2)+r]=GodotRuntime.allocString(e[r]);return n},freeStringArray:function(e,t){for(let n=0;n<t;n++)GodotRuntime.free(HEAP32[(e>>2)+n]);GodotRuntime.free(e)},stringToHeap:function(e,t,n){return stringToUTF8Array(e,HEAP8,t,n)}},GodotConfig={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(e){GodotConfig.canvas_resize_policy=e.canvasResizePolicy,GodotConfig.canvas=e.canvas,GodotConfig.locale=e.locale||GodotConfig.locale,GodotConfig.virtual_keyboard=e.virtualKeyboard,GodotConfig.persistent_drops=!!e.persistentDrops,GodotConfig.on_execute=e.onExecute,GodotConfig.on_exit=e.onExit,e.focusCanvas&&GodotConfig.canvas.focus()},locate_file:function(e){return Module.locateFile(e)},clear:function(){GodotConfig.canvas=null,GodotConfig.locale="en",GodotConfig.canvas_resize_policy=2,GodotConfig.virtual_keyboard=!1,GodotConfig.persistent_drops=!1,GodotConfig.on_execute=null,GodotConfig.on_exit=null}},GodotFS={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return GodotFS._idbfs?1:0},init:function(e){return GodotFS._idbfs=!1,Array.isArray(e)?e.length?(GodotFS._mount_points=e.slice(),GodotFS._mount_points.forEach((function(e){!function(e){try{FS.stat(e)}catch(t){if(t.errno!==ERRNO_CODES.ENOENT)throw t;FS.mkdirTree(e)}}(e),FS.mount(IDBFS,{},e)})),new Promise((function(e,t){FS.syncfs(!0,(function(t){t?(GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotRuntime.print(`IndexedDB not available: ${t.message}`)):GodotFS._idbfs=!0,e(t)}))}))):Promise.resolve():Promise.reject(new Error("Persistent paths must be an array"))},deinit:function(){GodotFS._mount_points.forEach((function(e){try{FS.unmount(e)}catch(e){GodotRuntime.print("Already unmounted",e)}GodotFS._idbfs&&IDBFS.dbs[e]&&(IDBFS.dbs[e].close(),delete IDBFS.dbs[e])})),GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotFS._syncing=!1},sync:function(){return GodotFS._syncing?(GodotRuntime.error("Already syncing!"),Promise.resolve()):(GodotFS._syncing=!0,new Promise((function(e,t){FS.syncfs(!1,(function(t){t&&GodotRuntime.error(`Failed to save IDB file system: ${t.message}`),GodotFS._syncing=!1,e(t)}))})))},copy_to_fs:function(e,t){const n=e.lastIndexOf("/");let r="/";n>0&&(r=e.slice(0,n));try{FS.stat(r)}catch(e){if(e.errno!==ERRNO_CODES.ENOENT)throw e;FS.mkdirTree(r)}FS.writeFile(e,new Uint8Array(t))}},GodotOS={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(e){GodotOS._async_cbs.push(e)},cleanup:function(e){const t=GodotConfig.on_exit;GodotFS.deinit(),GodotConfig.clear(),t&&t(e)},finish_async:function(e){GodotOS._fs_sync_promise.then((function(e){const t=[];return GodotOS._async_cbs.forEach((function(e){t.push(new Promise(e))})),Promise.all(t)})).then((function(){return GodotFS.sync()})).then((function(t){setTimeout((function(){e()}),0)}))}},GodotAudio={ctx:null,input:null,driver:null,interval:0,init:function(e,t,n,r){const o={};e&&(o.sampleRate=e);const i=new(window.AudioContext||window.webkitAudioContext)(o);return GodotAudio.ctx=i,i.onstatechange=function(){let e=0;switch(i.state){case"suspended":e=0;break;case"running":e=1;break;case"closed":e=2}n(e)},i.onstatechange(),GodotAudio.interval=setInterval((function(){let e=0;i.baseLatency&&(e+=GodotAudio.ctx.baseLatency),i.outputLatency&&(e+=GodotAudio.ctx.outputLatency),r(e)}),1e3),GodotOS.atexit(GodotAudio.close_async),i.destination.channelCount},create_input:function(e){if(GodotAudio.input)return 0;function t(t){try{GodotAudio.input=GodotAudio.ctx.createMediaStreamSource(t),e(GodotAudio.input)}catch(e){GodotRuntime.error("Failed creaating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(t,(function(e){GodotRuntime.error("Error getting user media.",e)}));else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return GodotRuntime.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},t,(function(e){GodotRuntime.print(e)}))}return 0},close_async:function(e,t){const n=GodotAudio.ctx;if(GodotAudio.ctx=null,!n)return void e();GodotAudio.interval&&(clearInterval(GodotAudio.interval),GodotAudio.interval=0),GodotAudio.input&&(GodotAudio.input.disconnect(),GodotAudio.input=null);let r=Promise.resolve();GodotAudio.driver&&(r=GodotAudio.driver.close()),r.then((function(){return n.close()})).then((function(){n.onstatechange=null,e()})).catch((function(t){n.onstatechange=null,GodotRuntime.error("Error closing AudioContext",t),e()}))}};function _godot_audio_capture_start(){return GodotAudio.create_input((function(e){e.connect(GodotAudio.driver.get_node())}))}function _godot_audio_capture_stop(){if(GodotAudio.input){const e=GodotAudio.input.mediaStream.getTracks();for(let t=0;t<e.length;t++)e[t].stop();GodotAudio.input.disconnect(),GodotAudio.input=null}}function _godot_audio_has_script_processor(){return GodotAudio.ctx&&GodotAudio.ctx.createScriptProcessor?1:0}function _godot_audio_has_worklet(){return GodotAudio.ctx&&GodotAudio.ctx.audioWorklet?1:0}function _godot_audio_init(e,t,n,r){const o=GodotRuntime.get_func(n),i=GodotRuntime.get_func(r),s=GodotRuntime.getHeapValue(e,"i32"),a=GodotAudio.init(s,t,o,i);return GodotRuntime.setHeapValue(e,GodotAudio.ctx.sampleRate,"i32"),a}function _godot_audio_is_available(){return window.AudioContext||window.webkitAudioContext?1:0}function _godot_audio_resume(){GodotAudio.ctx&&"running"!==GodotAudio.ctx.state&&GodotAudio.ctx.resume()}var GodotAudioScript={script:null,create:function(e,t){return GodotAudioScript.script=GodotAudio.ctx.createScriptProcessor(e,2,t),GodotAudio.driver=GodotAudioScript,GodotAudioScript.script.bufferSize},start:function(e,t,n,r,o){GodotAudioScript.script.onaudioprocess=function(i){const s=GodotRuntime.heapSub(HEAPF32,e,t),a=i.inputBuffer;if(GodotAudio.input){const e=a.getChannelData(0).length;for(let t=0;t<2;t++){const n=a.getChannelData(t);for(let r=0;r<e;r++)s[2*r+t]=n[r]}}o();const c=GodotRuntime.heapSub(HEAPF32,n,r),l=i.outputBuffer,u=l.numberOfChannels;for(let e=0;e<u;e++){const t=l.getChannelData(e);for(let n=0;n<t.length;n++)t[n]=c[n*u+e]}},GodotAudioScript.script.connect(GodotAudio.ctx.destination)},get_node:function(){return GodotAudioScript.script},close:function(){return new Promise((function(e,t){GodotAudioScript.script.disconnect(),GodotAudioScript.script.onaudioprocess=null,GodotAudioScript.script=null,e()}))}};function _godot_audio_script_create(e,t){const n=GodotRuntime.getHeapValue(e,"i32");try{const r=GodotAudioScript.create(n,t);GodotRuntime.setHeapValue(e,r,"i32")}catch(e){return GodotRuntime.error("Error starting AudioDriverScriptProcessor",e),1}return 0}function _godot_audio_script_start(e,t,n,r,o){const i=GodotRuntime.get_func(o);GodotAudioScript.start(e,t,n,r,i)}var GodotAudioWorklet={promise:null,worklet:null,ring_buffer:null,create:function(e){const t=GodotConfig.locate_file("godot.audio.worklet.js");GodotAudioWorklet.promise=GodotAudio.ctx.audioWorklet.addModule(t).then((function(){return GodotAudioWorklet.worklet=new AudioWorkletNode(GodotAudio.ctx,"godot-processor",{outputChannelCount:[e]}),Promise.resolve()})),GodotAudio.driver=GodotAudioWorklet},start:function(e,t,n){GodotAudioWorklet.promise.then((function(){const r=GodotAudioWorklet.worklet;r.connect(GodotAudio.ctx.destination),r.port.postMessage({cmd:"start",data:[n,e,t]}),r.port.onmessage=function(e){GodotRuntime.error(e.data)}}))},start_no_threads:function(e,t,n,r,o,i){GodotAudioWorklet.ring_buffer=new function(){let s=0,a=0,c=0;const l=new Float32Array(t);this.receive=function(e){const t=GodotRuntime.heapSub(HEAPF32,r,o),n=a;let s=e.length,c=0;a+s>=o&&(c=o-a,t.set(e.subarray(0,c),a),s-=c,a=0),s&&t.set(e.subarray(c,s),a),i(n,e.length),a+=s},this.consumed=function(r,o){c+=r,function(r){if(0===c)return;const o=GodotRuntime.heapSub(HEAPF32,e,t),i=o.length,a=c;if(n(s,c),s+c>=i){const e=i-s;l.set(o.subarray(s,i)),c-=e,s=0}c>0&&l.set(o.subarray(s,s+c),a-c),r.postMessage({cmd:"chunk",data:l.subarray(0,a)}),s+=c,c=0}(o)}},GodotAudioWorklet.promise.then((function(){const n=GodotAudioWorklet.worklet,r=GodotRuntime.heapSlice(HEAPF32,e,t);n.connect(GodotAudio.ctx.destination),n.port.postMessage({cmd:"start_nothreads",data:[r,o]}),n.port.onmessage=function(e){if(GodotAudioWorklet.worklet)if("read"===e.data.cmd){const t=e.data.data;GodotAudioWorklet.ring_buffer.consumed(t,GodotAudioWorklet.worklet.port)}else if("input"===e.data.cmd){const t=e.data.data;if(t.length>o)return void GodotRuntime.error("Input chunk is too big");GodotAudioWorklet.ring_buffer.receive(t)}else GodotRuntime.error(e.data)}}))},get_node:function(){return GodotAudioWorklet.worklet},close:function(){return new Promise((function(e,t){null!==GodotAudioWorklet.promise&&GodotAudioWorklet.promise.then((function(){GodotAudioWorklet.worklet.port.postMessage({cmd:"stop",data:null}),GodotAudioWorklet.worklet.disconnect(),GodotAudioWorklet.worklet=null,GodotAudioWorklet.promise=null,e()})).catch((function(e){}))}))}};function _godot_audio_worklet_create(e){try{GodotAudioWorklet.create(e)}catch(e){return GodotRuntime.error("Error starting AudioDriverWorklet",e),1}return 0}function _godot_audio_worklet_start_no_threads(e,t,n,r,o,i){const s=GodotRuntime.get_func(n),a=GodotRuntime.get_func(i);GodotAudioWorklet.start_no_threads(e,t,s,r,o,a)}function _godot_js_config_canvas_id_get(e,t){GodotRuntime.stringToHeap(`#${GodotConfig.canvas.id}`,e,t)}function _godot_js_config_locale_get(e,t){GodotRuntime.stringToHeap(GodotConfig.locale,e,t)}var GodotDisplayCursor={shape:"auto",visible:!0,cursors:{},set_style:function(e){GodotConfig.canvas.style.cursor=e},set_shape:function(e){GodotDisplayCursor.shape=e;let t=e;if(e in GodotDisplayCursor.cursors){const n=GodotDisplayCursor.cursors[e];t=`url("${n.url}") ${n.x} ${n.y}, auto`}GodotDisplayCursor.visible&&GodotDisplayCursor.set_style(t)},clear:function(){GodotDisplayCursor.set_style(""),GodotDisplayCursor.shape="auto",GodotDisplayCursor.visible=!0,Object.keys(GodotDisplayCursor.cursors).forEach((function(e){URL.revokeObjectURL(GodotDisplayCursor.cursors[e]),delete GodotDisplayCursor.cursors[e]}))},lockPointer:function(){const e=GodotConfig.canvas;e.requestPointerLock&&e.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===GodotConfig.canvas}},GodotEventListeners={handlers:[],has:function(e,t,n,r){return-1!==GodotEventListeners.handlers.findIndex((function(o){return o.target===e&&o.event===t&&o.method===n&&o.capture===r}))},add:function(e,t,n,r){GodotEventListeners.has(e,t,n,r)||(GodotEventListeners.handlers.push(new function(e,t,n,r){this.target=e,this.event=t,this.method=n,this.capture=r}(e,t,n,r)),e.addEventListener(t,n,r))},clear:function(){GodotEventListeners.handlers.forEach((function(e){e.target.removeEventListener(e.event,e.method,e.capture)})),GodotEventListeners.handlers.length=0}},GodotDisplayScreen={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return GodotDisplayScreen.hidpi&&window.devicePixelRatio||1},isFullscreen:function(){const e=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e?e===GodotConfig.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!GodotDisplayScreen.hasFullscreen())return 1;const e=GodotConfig.canvas;try{const t=(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.mozRequestFullscreen||e.webkitRequestFullscreen).call(e);t&&t.catch((function(){}))}catch(e){return 1}return 0},exitFullscreen:function(){if(!GodotDisplayScreen.isFullscreen())return 0;try{const e=document.exitFullscreen();e&&e.catch((function(){}))}catch(e){return 1}return 0},_updateGL:function(){const e=_emscripten_webgl_get_current_context(),t=GL.getContext(e);t&&GL.resizeOffscreenFramebuffer(t)},updateSize:function(){const e=GodotDisplayScreen.isFullscreen(),t=2===GodotConfig.canvas_resize_policy,n=0===GodotConfig.canvas_resize_policy,r=GodotDisplayScreen.desired_size[0],o=GodotDisplayScreen.desired_size[1],i=GodotConfig.canvas;let s=r,a=o;if(n)return i.width!==s||i.height!==a?(GodotDisplayScreen.desired_size=[i.width,i.height],GodotDisplayScreen._updateGL(),1):0;const c=GodotDisplayScreen.getPixelRatio();(e||t)&&(s=window.innerWidth*c,a=window.innerHeight*c);const l=s/c+"px",u=a/c+"px";return i.style.width!==l||i.style.height!==u||i.width!==s||i.height!==a?(i.width=s,i.height=a,i.style.width=l,i.style.height=u,GodotDisplayScreen._updateGL(),1):0}},GodotDisplayVK={textinput:null,textarea:null,available:function(){return GodotConfig.virtual_keyboard&&"ontouchstart"in window},init:function(e){function t(t){const n=document.createElement(t);return n.style.display="none",n.style.position="absolute",n.style.zIndex="-1",n.style.background="transparent",n.style.padding="0px",n.style.margin="0px",n.style.overflow="hidden",n.style.width="0px",n.style.height="0px",n.style.border="0px",n.style.outline="none",n.readonly=!0,n.disabled=!0,GodotEventListeners.add(n,"input",(function(t){const r=GodotRuntime.allocString(n.value);e(r,n.selectionEnd),GodotRuntime.free(r)}),!1),GodotEventListeners.add(n,"blur",(function(e){n.style.display="none",n.readonly=!0,n.disabled=!0}),!1),GodotConfig.canvas.insertAdjacentElement("beforebegin",n),n}GodotDisplayVK.textinput=t("input"),GodotDisplayVK.textarea=t("textarea"),GodotDisplayVK.updateSize()},show:function(e,t,n,r){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;""===GodotDisplayVK.textinput.style.display&&""===GodotDisplayVK.textarea.style.display||GodotDisplayVK.hide(),GodotDisplayVK.updateSize();const o=t?GodotDisplayVK.textarea:GodotDisplayVK.textinput;o.readonly=!1,o.disabled=!1,o.value=e,o.style.display="block",o.focus(),o.setSelectionRange(n,r)},hide:function(){GodotDisplayVK.textinput&&GodotDisplayVK.textarea&&[GodotDisplayVK.textinput,GodotDisplayVK.textarea].forEach((function(e){e.blur(),e.style.display="none",e.value=""}))},updateSize:function(){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;const e=GodotConfig.canvas.getBoundingClientRect();function t(t){t.style.left=`${e.left}px`,t.style.top=`${e.top}px`,t.style.width=`${e.width}px`,t.style.height=`${e.height}px`}t(GodotDisplayVK.textinput),t(GodotDisplayVK.textarea)},clear:function(){GodotDisplayVK.textinput&&(GodotDisplayVK.textinput.remove(),GodotDisplayVK.textinput=null),GodotDisplayVK.textarea&&(GodotDisplayVK.textarea.remove(),GodotDisplayVK.textarea=null)}},GodotDisplay={window_icon:"",findDPI:function(){try{const e=function e(t,n,r){const o=parseInt((n-t)/2+t,10);return n-t<=1?r(n)?n:t:r(o)?e(t,o,r):e(o,n,r)}(0,800,(function(e){return window.matchMedia(`(max-resolution: ${e}dpi)`).matches}));return e>=96?e:96}catch(e){return 96}}};function _godot_js_display_alert(e){window.alert(GodotRuntime.parseString(e))}function _godot_js_display_canvas_focus(){GodotConfig.canvas.focus()}function _godot_js_display_canvas_is_focused(){return document.activeElement===GodotConfig.canvas}function _godot_js_display_clipboard_get(e){const t=GodotRuntime.get_func(e);try{navigator.clipboard.readText().then((function(e){const n=GodotRuntime.allocString(e);t(n),GodotRuntime.free(n)})).catch((function(e){}))}catch(e){}}function _godot_js_display_clipboard_set(e){const t=GodotRuntime.parseString(e);return navigator.clipboard&&navigator.clipboard.writeText?(navigator.clipboard.writeText(t).catch((function(e){GodotRuntime.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",e)})),0):1}function _godot_js_display_cursor_is_hidden(){return!GodotDisplayCursor.visible}function _godot_js_display_cursor_is_locked(){return GodotDisplayCursor.isPointerLocked()?1:0}function _godot_js_display_cursor_lock_set(e){e?GodotDisplayCursor.lockPointer():GodotDisplayCursor.releasePointer()}function _godot_js_display_cursor_set_custom_shape(e,t,n,r,o){const i=GodotRuntime.parseString(e),s=GodotDisplayCursor.cursors[i];if(n>0){const e=new Blob([GodotRuntime.heapSlice(HEAPU8,t,n)],{type:"image/png"}),s=URL.createObjectURL(e);GodotDisplayCursor.cursors[i]={url:s,x:r,y:o}}else delete GodotDisplayCursor.cursors[i];i===GodotDisplayCursor.shape&&GodotDisplayCursor.set_shape(GodotDisplayCursor.shape),s&&URL.revokeObjectURL(s.url)}function _godot_js_display_cursor_set_shape(e){GodotDisplayCursor.set_shape(GodotRuntime.parseString(e))}function _godot_js_display_cursor_set_visible(e){const t=0!==e;t!==GodotDisplayCursor.visible&&(GodotDisplayCursor.visible=t,t?GodotDisplayCursor.set_shape(GodotDisplayCursor.shape):GodotDisplayCursor.set_style("none"))}function _godot_js_display_desired_size_set(e,t){GodotDisplayScreen.desired_size=[e,t],GodotDisplayScreen.updateSize()}function _godot_js_display_fullscreen_cb(e){const t=GodotConfig.canvas,n=GodotRuntime.get_func(e);function r(e){e.target===t&&n(GodotDisplayScreen.isFullscreen())}GodotEventListeners.add(document,"fullscreenchange",r,!1),GodotEventListeners.add(document,"mozfullscreenchange",r,!1),GodotEventListeners.add(document,"webkitfullscreenchange",r,!1)}function _godot_js_display_fullscreen_exit(){return GodotDisplayScreen.exitFullscreen()}function _godot_js_display_fullscreen_request(){return GodotDisplayScreen.requestFullscreen()}function _godot_js_display_has_webgl(e){if(1!==e&&2!==e)return!1;try{return!!document.createElement("canvas").getContext(2===e?"webgl2":"webgl")}catch(e){}return!1}function _godot_js_display_is_swap_ok_cancel(){const e=navigator.platform||"";return-1!==["Windows","Win64","Win32","WinCE"].indexOf(e)?1:0}function _godot_js_display_notification_cb(e,t,n,r,o){const i=GodotConfig.canvas,s=GodotRuntime.get_func(e),a=[t,n,r,o];["mouseover","mouseleave","focus","blur"].forEach((function(e,t){GodotEventListeners.add(i,e,(function(){s(a[t])}),!0)}))}function _godot_js_display_pixel_ratio_get(){return GodotDisplayScreen.getPixelRatio()}function _godot_js_display_screen_dpi_get(){return GodotDisplay.findDPI()}function _godot_js_display_screen_size_get(e,t){const n=GodotDisplayScreen.getPixelRatio();GodotRuntime.setHeapValue(e,window.screen.width*n,"i32"),GodotRuntime.setHeapValue(t,window.screen.height*n,"i32")}function _godot_js_display_setup_canvas(e,t,n,r){const o=GodotConfig.canvas;switch(GodotEventListeners.add(o,"contextmenu",(function(e){e.preventDefault()}),!1),GodotEventListeners.add(o,"webglcontextlost",(function(e){alert("WebGL context lost, please reload the page"),e.preventDefault()}),!1),GodotDisplayScreen.hidpi=!!r,GodotConfig.canvas_resize_policy){case 0:GodotDisplayScreen.desired_size=[o.width,o.height];break;case 1:GodotDisplayScreen.desired_size=[e,t];break;default:o.style.position="absolute",o.style.top=0,o.style.left=0}GodotDisplayScreen.updateSize(),n&&GodotDisplayScreen.requestFullscreen()}function _godot_js_display_size_update(){const e=GodotDisplayScreen.updateSize();return e&&GodotDisplayVK.updateSize(),e}function _godot_js_display_touchscreen_is_available(){return"ontouchstart"in window}function _godot_js_display_vk_available(){return GodotDisplayVK.available()}function _godot_js_display_vk_cb(e){const t=GodotRuntime.get_func(e);GodotDisplayVK.available()&&GodotDisplayVK.init(t)}function _godot_js_display_vk_hide(){GodotDisplayVK.hide()}function _godot_js_display_vk_show(e,t,n,r){const o=GodotRuntime.parseString(e),i=n>0?n:0,s=r>0?r:i;GodotDisplayVK.show(o,t,i,s)}function _godot_js_display_window_blur_cb(e){const t=GodotRuntime.get_func(e);GodotEventListeners.add(window,"blur",(function(){t()}),!1)}function _godot_js_display_window_icon_set(e,t){let n=document.getElementById("-gd-engine-icon");null===n&&(n=document.createElement("link"),n.rel="icon",n.id="-gd-engine-icon",document.head.appendChild(n));const r=GodotDisplay.window_icon,o=new Blob([GodotRuntime.heapSlice(HEAPU8,e,t)],{type:"image/png"});GodotDisplay.window_icon=URL.createObjectURL(o),n.href=GodotDisplay.window_icon,r&&URL.revokeObjectURL(r)}function _godot_js_display_window_size_get(e,t){GodotRuntime.setHeapValue(e,GodotConfig.canvas.width,"i32"),GodotRuntime.setHeapValue(t,GodotConfig.canvas.height,"i32")}function _godot_js_display_window_title_set(e){document.title=GodotRuntime.parseString(e)}function _godot_js_eval(p_js,p_use_global_ctx,p_union_ptr,p_byte_arr,p_byte_arr_write,p_callback){const js_code=GodotRuntime.parseString(p_js);let eval_ret=null;try{if(p_use_global_ctx){const e=eval;eval_ret=e(js_code)}else eval_ret=eval(js_code)}catch(e){GodotRuntime.error(e)}switch(typeof eval_ret){case"boolean":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"i32"),1;case"number":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"double"),3;case"string":return GodotRuntime.setHeapValue(p_union_ptr,GodotRuntime.allocString(eval_ret),"*"),4;case"object":if(null===eval_ret)break;if(!ArrayBuffer.isView(eval_ret)||eval_ret instanceof Uint8Array?eval_ret instanceof ArrayBuffer&&(eval_ret=new Uint8Array(eval_ret)):eval_ret=new Uint8Array(eval_ret.buffer),eval_ret instanceof Uint8Array){const e=GodotRuntime.get_func(p_callback),t=e(p_byte_arr,p_byte_arr_write,eval_ret.length);return HEAPU8.set(eval_ret,t),20}}return 0}var IDHandler={_last_id:0,_references:{},get:function(e){return IDHandler._references[e]},add:function(e){const t=++IDHandler._last_id;return IDHandler._references[t]=e,t},remove:function(e){delete IDHandler._references[e]}},GodotFetch={onread:function(e,t){const n=IDHandler.get(e);n&&(t.value&&n.chunks.push(t.value),n.reading=!1,n.done=t.done)},onresponse:function(e,t){const n=IDHandler.get(e);if(!n)return;let r=!1;t.headers.forEach((function(e,t){const n=e.toLowerCase().trim();"transfer-encoding"===t.toLowerCase().trim()&&"chunked"===n&&(r=!0)})),n.status=t.status,n.response=t,n.reader=t.body.getReader(),n.chunked=r},onerror:function(e,t){GodotRuntime.error(t);const n=IDHandler.get(e);n&&(n.error=t)},create:function(e,t,n,r){const o={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},i=IDHandler.add(o),s={method:e,headers:n,body:r};return o.request=fetch(t,s),o.request.then(GodotFetch.onresponse.bind(null,i)).catch(GodotFetch.onerror.bind(null,i)),i},free:function(e){const t=IDHandler.get(e);t&&(IDHandler.remove(e),t.request&&t.request.then((function(e){e.abort()})).catch((function(e){})))},read:function(e){const t=IDHandler.get(e);if(t&&t.reader&&!t.reading){if(t.done)return void(t.reader=null);t.reading=!0,t.reader.read().then(GodotFetch.onread.bind(null,e)).catch(GodotFetch.onerror.bind(null,e))}}};function _godot_js_fetch_body_length_get(e){const t=IDHandler.get(e);return t&&t.response?t.bodySize:-1}function _godot_js_fetch_create(e,t,n,r,o,i){const s=GodotRuntime.parseString(e),a=GodotRuntime.parseString(t),c=GodotRuntime.parseStringArray(n,r),l=i?GodotRuntime.heapSlice(HEAP8,o,i):null;return GodotFetch.create(s,a,c.map((function(e){const t=e.indexOf(":");return t<=0?[]:[e.slice(0,t).trim(),e.slice(t+1).trim()]})).filter((function(e){return 2===e.length})),l)}function _godot_js_fetch_free(e){GodotFetch.free(e)}function _godot_js_fetch_http_status_get(e){const t=IDHandler.get(e);return t&&t.response?t.status:0}function _godot_js_fetch_is_chunked(e){const t=IDHandler.get(e);return t&&t.response?t.chunked?1:0:-1}function _godot_js_fetch_read_chunk(e,t,n){const r=IDHandler.get(e);if(!r||!r.response)return 0;let o=n;const i=r.chunks;for(;o&&i.length;){const e=r.chunks[0];e.length>o?(GodotRuntime.heapCopy(HEAP8,e.slice(0,o),t),i[0]=e.slice(o),o=0):(GodotRuntime.heapCopy(HEAP8,e,t),o-=e.length,i.pop())}return i.length||GodotFetch.read(e),n-o}function _godot_js_fetch_read_headers(e,t,n){const r=IDHandler.get(e);if(!r||!r.response)return 1;const o=GodotRuntime.get_func(t),i=[];r.response.headers.forEach((function(e,t){i.push(`${t}:${e}`)}));const s=GodotRuntime.allocStringArray(i);return o(i.length,s,n),GodotRuntime.freeStringArray(s,i.length),0}function _godot_js_fetch_state_get(e){const t=IDHandler.get(e);return t?t.error?-1:t.response?t.reader?1:t.done?2:-1:0:-1}var GodotInputGamepads={samples:[],get_pads:function(){try{return navigator.getGamepads()||[]}catch(e){return[]}},get_samples:function(){return GodotInputGamepads.samples},get_sample:function(e){const t=GodotInputGamepads.samples;return e<t.length?t[e]:null},sample:function(){const e=GodotInputGamepads.get_pads(),t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!r){t.push(null);continue}const o={standard:"standard"===r.mapping,buttons:[],axes:[],connected:r.connected};for(let e=0;e<r.buttons.length;e++)o.buttons.push(r.buttons[e].value);for(let e=0;e<r.axes.length;e++)o.axes.push(r.axes[e]);t.push(o)}GodotInputGamepads.samples=t},init:function(e){function t(t){const n=GodotInputGamepads.get_guid(t),r=GodotRuntime.allocString(t.id),o=GodotRuntime.allocString(n);e(t.index,1,r,o),GodotRuntime.free(r),GodotRuntime.free(o)}GodotEventListeners.samples=[];const n=GodotInputGamepads.get_pads();for(let e=0;e<n.length;e++)n[e]&&t(n[e]);GodotEventListeners.add(window,"gamepadconnected",(function(e){t(e.gamepad)}),!1),GodotEventListeners.add(window,"gamepaddisconnected",(function(t){e(t.gamepad.index,0)}),!1)},get_guid:function(e){if(e.mapping)return e.mapping;const t=navigator.userAgent;let n="Unknown";t.indexOf("Android")>=0?n="Android":t.indexOf("Linux")>=0?n="Linux":t.indexOf("iPhone")>=0?n="iOS":t.indexOf("Macintosh")>=0?n="MacOSX":t.indexOf("Windows")>=0&&(n="Windows");const r=e.id,o=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,i=/^([0-9a-f]+)-([0-9a-f]+)-/i;let s="",a="";if(o.test(r)){const e=o.exec(r);s=e[1].padStart(4,"0"),a=e[2].padStart(4,"0")}else if(i.test(r)){const e=i.exec(r);s=e[1].padStart(4,"0"),a=e[2].padStart(4,"0")}return s&&a?n+s+a:`${n}Unknown`}},GodotInputDragDrop={promises:[],pending_files:[],add_entry:function(e){e.isDirectory?GodotInputDragDrop.add_dir(e):e.isFile?GodotInputDragDrop.add_file(e):GodotRuntime.error("Unrecognized entry...",e)},add_dir:function(e){GodotInputDragDrop.promises.push(new Promise((function(t,n){e.createReader().readEntries((function(e){for(let t=0;t<e.length;t++)GodotInputDragDrop.add_entry(e[t]);t()}))})))},add_file:function(e){GodotInputDragDrop.promises.push(new Promise((function(t,n){e.file((function(e){const r=new FileReader;r.onload=function(){const n={path:e.relativePath||e.webkitRelativePath,name:e.name,type:e.type,size:e.size,data:r.result};n.path||(n.path=n.name),GodotInputDragDrop.pending_files.push(n),t()},r.onerror=function(){GodotRuntime.print("Error reading file"),n()},r.readAsArrayBuffer(e)}),(function(e){GodotRuntime.print("Error!"),n()}))})))},process:function(e,t){0!==GodotInputDragDrop.promises.length?GodotInputDragDrop.promises.pop().then((function(){setTimeout((function(){GodotInputDragDrop.process(e,t)}),0)})):e()},_process_event:function(e,t){if(e.preventDefault(),e.dataTransfer.items)for(let t=0;t<e.dataTransfer.items.length;t++){const n=e.dataTransfer.items[t];let r=null;"getAsEntry"in n?r=n.getAsEntry():"webkitGetAsEntry"in n&&(r=n.webkitGetAsEntry()),r&&GodotInputDragDrop.add_entry(r)}else GodotRuntime.error("File upload not supported");new Promise(GodotInputDragDrop.process).then((function(){const e=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,n=[],r=[];FS.mkdir(e),GodotInputDragDrop.pending_files.forEach((t=>{const o=t.path;GodotFS.copy_to_fs(e+o,t.data);let i=o.indexOf("/");if(-1===i)n.push(e+o);else{const t=o.substr(0,i);i=t.indexOf("/"),i<0&&-1===n.indexOf(e+t)&&n.push(e+t)}r.push(e+o)})),GodotInputDragDrop.promises=[],GodotInputDragDrop.pending_files=[],t(n),GodotConfig.persistent_drops?GodotOS.atexit((function(t,n){GodotInputDragDrop.remove_drop(r,e),t()})):GodotInputDragDrop.remove_drop(r,e)}))},remove_drop:function(e,t){const n=[t.substr(0,t.length-1)];e.forEach((function(e){FS.unlink(e);let r=e.replace(t,""),o=r.lastIndexOf("/");for(;o>0;)r=r.substr(0,o),-1===n.indexOf(t+r)&&n.push(t+r),o=r.lastIndexOf("/")})),n.sort((function(e,t){const n=(e.match(/\//g)||[]).length,r=(t.match(/\//g)||[]).length;return n>r?-1:n<r?1:0})).forEach((function(e){FS.rmdir(e)}))},handler:function(e){return function(t){GodotInputDragDrop._process_event(t,e)}}},GodotInput={getModifiers:function(e){return e.shiftKey+0+(e.altKey+0<<1)+(e.ctrlKey+0<<2)+(e.metaKey+0<<3)},computePosition:function(e,t){const n=GodotConfig.canvas,r=n.width/t.width,o=n.height/t.height;return[(e.clientX-t.x)*r,(e.clientY-t.y)*o]}};function _godot_js_input_drop_files_cb(e){const t=GodotRuntime.get_func(e),n=GodotConfig.canvas;GodotEventListeners.add(n,"dragover",(function(e){e.preventDefault()}),!1),GodotEventListeners.add(n,"drop",GodotInputDragDrop.handler((function(e){const n=e||[];if(!n.length)return;const r=n.length,o=GodotRuntime.allocStringArray(n);t(o,r),GodotRuntime.freeStringArray(o,r)})))}function _godot_js_input_gamepad_cb(e){const t=GodotRuntime.get_func(e);GodotInputGamepads.init(t)}function _godot_js_input_gamepad_sample(){return GodotInputGamepads.sample(),0}function _godot_js_input_gamepad_sample_count(){return GodotInputGamepads.get_samples().length}function _godot_js_input_gamepad_sample_get(e,t,n,r,o,i){const s=GodotInputGamepads.get_sample(e);if(!s||!s.connected)return 1;const a=s.buttons,c=a.length<16?a.length:16;for(let e=0;e<c;e++)GodotRuntime.setHeapValue(t+(e<<2),a[e],"float");GodotRuntime.setHeapValue(n,c,"i32");const l=s.axes,u=l.length<10?l.length:10;for(let e=0;e<u;e++)GodotRuntime.setHeapValue(r+(e<<2),l[e],"float");GodotRuntime.setHeapValue(o,u,"i32");const d=s.standard?1:0;return GodotRuntime.setHeapValue(i,d,"i32"),0}function _godot_js_input_key_cb(e,t,n){const r=GodotRuntime.get_func(e);function o(e,o){const i=GodotInput.getModifiers(o);GodotRuntime.stringToHeap(o.code,t,32),GodotRuntime.stringToHeap(o.key,n,32),r(e,o.repeat,i),o.preventDefault()}GodotEventListeners.add(GodotConfig.canvas,"keydown",o.bind(null,1),!1),GodotEventListeners.add(GodotConfig.canvas,"keyup",o.bind(null,0),!1)}function _godot_js_input_mouse_button_cb(e){const t=GodotRuntime.get_func(e),n=GodotConfig.canvas;function r(e,r){const o=n.getBoundingClientRect(),i=GodotInput.computePosition(r,o),s=GodotInput.getModifiers(r);t(e,r.button,i[0],i[1],s)&&r.preventDefault()}GodotEventListeners.add(n,"mousedown",r.bind(null,1),!1),GodotEventListeners.add(window,"mouseup",r.bind(null,0),!1)}function _godot_js_input_mouse_move_cb(e){const t=GodotRuntime.get_func(e),n=GodotConfig.canvas;GodotEventListeners.add(window,"mousemove",(function(e){const r=n.getBoundingClientRect(),o=GodotInput.computePosition(e,r),i=n.width/r.width,s=n.height/r.height,a=e.movementX*i,c=e.movementY*s,l=GodotInput.getModifiers(e);t(o[0],o[1],a,c,l)}),!1)}function _godot_js_input_mouse_wheel_cb(e){const t=GodotRuntime.get_func(e);GodotEventListeners.add(GodotConfig.canvas,"wheel",(function(e){t(e.deltaX||0,e.deltaY||0)&&e.preventDefault()}),!1)}function _godot_js_input_paste_cb(e){const t=GodotRuntime.get_func(e);GodotEventListeners.add(window,"paste",(function(e){const n=e.clipboardData.getData("text"),r=GodotRuntime.allocString(n);t(r),GodotRuntime.free(r)}),!1)}function _godot_js_input_touch_cb(e,t,n){const r=GodotRuntime.get_func(e),o=GodotConfig.canvas;function i(e,i){const s=o.getBoundingClientRect(),a=i.changedTouches;for(let e=0;e<a.length;e++){const r=a[e],o=GodotInput.computePosition(r,s);GodotRuntime.setHeapValue(n+2*e,o[0],"double"),GodotRuntime.setHeapValue(n+(2*e+8),o[1],"double"),GodotRuntime.setHeapValue(t+e,r.identifier,"i32")}r(e,a.length),i.cancelable&&i.preventDefault()}GodotEventListeners.add(o,"touchstart",i.bind(null,0),!1),GodotEventListeners.add(o,"touchend",i.bind(null,1),!1),GodotEventListeners.add(o,"touchcancel",i.bind(null,1),!1),GodotEventListeners.add(o,"touchmove",i.bind(null,2),!1)}function _godot_js_os_download_buffer(e,t,n,r){const o=GodotRuntime.heapSlice(HEAP8,e,t),i=GodotRuntime.parseString(n),s=GodotRuntime.parseString(r),a=new Blob([o],{type:s}),c=window.URL.createObjectURL(a),l=document.createElement("a");l.href=c,l.download=i,l.style.display="none",document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(c)}function _godot_js_os_execute(e){const t=GodotRuntime.parseString(e),n=JSON.parse(t);return GodotConfig.on_execute?(GodotConfig.on_execute(n),0):1}function _godot_js_os_finish_async(e){const t=GodotRuntime.get_func(e);GodotOS.finish_async(t)}function _godot_js_os_fs_is_persistent(){return GodotFS.is_persistent()}function _godot_js_os_fs_sync(e){const t=GodotRuntime.get_func(e);GodotOS._fs_sync_promise=GodotFS.sync(),GodotOS._fs_sync_promise.then((function(e){t()}))}function _godot_js_os_hw_concurrency_get(){return navigator.hardwareConcurrency||1}function _godot_js_os_request_quit_cb(e){GodotOS.request_quit=GodotRuntime.get_func(e)}function _godot_js_os_shell_open(e){window.open(GodotRuntime.parseString(e),"_blank")}var GodotRTCDataChannel={connect:function(e,t,n,r,o){const i=IDHandler.get(e);i&&(i.binaryType="arraybuffer",i.onopen=function(e){t()},i.onclose=function(e){o()},i.onerror=function(e){r()},i.onmessage=function(e){let t,r=0;if(e.data instanceof ArrayBuffer)t=new Uint8Array(e.data);else{if(e.data instanceof Blob)return void GodotRuntime.error("Blob type not supported");if("string"!=typeof e.data)return void GodotRuntime.error("Unknown message type");{r=1;const n=new TextEncoder("utf-8");t=new Uint8Array(n.encode(e.data))}}const o=t.length*t.BYTES_PER_ELEMENT,i=GodotRuntime.malloc(o);HEAPU8.set(t,i),n(i,o,r),GodotRuntime.free(i)})},close:function(e){const t=IDHandler.get(e);t&&(t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null,t.close())},get_prop:function(e,t,n){const r=IDHandler.get(e);return r&&void 0!==r[t]?r[t]:n}};function _godot_js_rtc_datachannel_close(e){IDHandler.get(e)&&GodotRTCDataChannel.close(e)}function _godot_js_rtc_datachannel_connect(e,t,n,r,o,i){const s=GodotRuntime.get_func(n).bind(null,t),a=GodotRuntime.get_func(r).bind(null,t),c=GodotRuntime.get_func(o).bind(null,t),l=GodotRuntime.get_func(i).bind(null,t);GodotRTCDataChannel.connect(e,s,a,c,l)}function _godot_js_rtc_datachannel_destroy(e){GodotRTCDataChannel.close(e),IDHandler.remove(e)}function _godot_js_rtc_datachannel_get_buffered_amount(e){return GodotRTCDataChannel.get_prop(e,"bufferedAmount",0)}function _godot_js_rtc_datachannel_id_get(e){return GodotRTCDataChannel.get_prop(e,"id",65535)}function _godot_js_rtc_datachannel_is_negotiated(e){return GodotRTCDataChannel.get_prop(e,"negotiated",65535)}function _godot_js_rtc_datachannel_is_ordered(e){return GodotRTCDataChannel.get_prop(e,"ordered",!0)}function _godot_js_rtc_datachannel_label_get(e){const t=IDHandler.get(e);return t&&t.label?GodotRuntime.allocString(t.label):0}function _godot_js_rtc_datachannel_max_packet_lifetime_get(e){const t=IDHandler.get(e);return t?void 0!==t.maxPacketLifeTime?t.maxPacketLifeTime:void 0!==t.maxRetransmitTime?t.maxRetransmitTime:65535:65535}function _godot_js_rtc_datachannel_max_retransmits_get(e){return GodotRTCDataChannel.get_prop(e,"maxRetransmits",65535)}function _godot_js_rtc_datachannel_protocol_get(e){const t=IDHandler.get(e);return t&&t.protocol?GodotRuntime.allocString(t.protocol):0}function _godot_js_rtc_datachannel_ready_state_get(e){const t=IDHandler.get(e);if(!t)return 3;switch(t.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;default:return 3}}function _godot_js_rtc_datachannel_send(e,t,n,r){const o=IDHandler.get(e);if(!o)return 1;const i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=GodotRuntime.getHeapValue(t+e,"i8");if(r)o.send(i.buffer);else{const e=new TextDecoder("utf-8").decode(i);o.send(e)}return 0}var GodotRTCPeerConnection={onstatechange:function(e,t,n,r){if(!IDHandler.get(e))return;let o;switch(t.iceConnectionState){case"new":o=0;break;case"checking":o=1;break;case"connected":case"completed":o=2;break;case"disconnected":o=3;break;case"failed":o=4;break;default:o=5}n(o)},onicecandidate:function(e,t,n){if(!IDHandler.get(e)||!n.candidate)return;const r=n.candidate,o=GodotRuntime.allocString(r.candidate),i=GodotRuntime.allocString(r.sdpMid);t(i,r.sdpMLineIndex,o),GodotRuntime.free(o),GodotRuntime.free(i)},ondatachannel:function(e,t,n){IDHandler.get(e)&&t(IDHandler.add(n.channel))},onsession:function(e,t,n){if(!IDHandler.get(e))return;const r=GodotRuntime.allocString(n.type),o=GodotRuntime.allocString(n.sdp);t(r,o),GodotRuntime.free(r),GodotRuntime.free(o)},onerror:function(e,t,n){IDHandler.get(e)&&(GodotRuntime.error(n),t())}};function _godot_js_rtc_pc_close(e){const t=IDHandler.get(e);t&&t.close()}function _godot_js_rtc_pc_create(e,t,n,r,o){const i=GodotRuntime.get_func(n).bind(null,t),s=GodotRuntime.get_func(r).bind(null,t),a=GodotRuntime.get_func(o).bind(null,t),c=JSON.parse(GodotRuntime.parseString(e));let l=null;try{l=new RTCPeerConnection(c)}catch(e){return GodotRuntime.error(e),0}const u=GodotRTCPeerConnection,d=IDHandler.add(l);return l.oniceconnectionstatechange=u.onstatechange.bind(null,d,l,i),l.onicecandidate=u.onicecandidate.bind(null,d,s),l.ondatachannel=u.ondatachannel.bind(null,d,a),d}function _godot_js_rtc_pc_datachannel_create(e,t,n){try{const r=IDHandler.get(e);if(!r)return 0;const o=GodotRuntime.parseString(t),i=JSON.parse(GodotRuntime.parseString(n)),s=r.createDataChannel(o,i);return IDHandler.add(s)}catch(e){return GodotRuntime.error(e),0}}function _godot_js_rtc_pc_destroy(e){const t=IDHandler.get(e);t&&(t.oniceconnectionstatechange=null,t.onicecandidate=null,t.ondatachannel=null,IDHandler.remove(e))}function _godot_js_rtc_pc_ice_candidate_add(e,t,n,r){const o=IDHandler.get(e);if(!o)return;const i=GodotRuntime.parseString(t),s=GodotRuntime.parseString(r);o.addIceCandidate(new RTCIceCandidate({candidate:s,sdpMid:i,sdpMlineIndex:n}))}function _godot_js_rtc_pc_local_description_set(e,t,n,r,o){const i=IDHandler.get(e);if(!i)return;const s=GodotRuntime.parseString(t),a=GodotRuntime.parseString(n),c=GodotRuntime.get_func(o).bind(null,r);i.setLocalDescription({sdp:a,type:s}).catch((function(t){GodotRTCPeerConnection.onerror(e,c,t)}))}function _godot_js_rtc_pc_offer_create(e,t,n,r){const o=IDHandler.get(e);if(!o)return;const i=GodotRuntime.get_func(n).bind(null,t),s=GodotRuntime.get_func(r).bind(null,t);o.createOffer().then((function(t){GodotRTCPeerConnection.onsession(e,i,t)})).catch((function(t){GodotRTCPeerConnection.onerror(e,s,t)}))}function _godot_js_rtc_pc_remote_description_set(e,t,n,r,o,i){const s=IDHandler.get(e);if(!s)return;const a=GodotRuntime.parseString(t),c=GodotRuntime.parseString(n),l=GodotRuntime.get_func(i).bind(null,r),u=GodotRuntime.get_func(o).bind(null,r);s.setRemoteDescription({sdp:c,type:a}).then((function(){return"offer"!==a?Promise.resolve():s.createAnswer().then((function(t){GodotRTCPeerConnection.onsession(e,u,t)}))})).catch((function(t){GodotRTCPeerConnection.onerror(e,l,t)}))}var GodotWebSocket={_onopen:function(e,t,n){const r=IDHandler.get(e);if(!r)return;const o=GodotRuntime.allocString(r.protocol);t(o),GodotRuntime.free(o)},_onmessage:function(e,t,n){if(!IDHandler.get(e))return;let r,o=0;if(n.data instanceof ArrayBuffer)r=new Uint8Array(n.data);else{if(n.data instanceof Blob)return void GodotRuntime.error("Blob type not supported");if("string"!=typeof n.data)return void GodotRuntime.error("Unknown message type");{o=1;const e=new TextEncoder("utf-8");r=new Uint8Array(e.encode(n.data))}}const i=r.length*r.BYTES_PER_ELEMENT,s=GodotRuntime.malloc(i);HEAPU8.set(r,s),t(s,i,o),GodotRuntime.free(s)},_onerror:function(e,t,n){IDHandler.get(e)&&t()},_onclose:function(e,t,n){if(!IDHandler.get(e))return;const r=GodotRuntime.allocString(n.reason);t(n.code,r,n.wasClean?1:0),GodotRuntime.free(r)},send:function(e,t){const n=IDHandler.get(e);return n&&n.readyState===n.OPEN?(n.send(t),0):1},bufferedAmount:function(e){const t=IDHandler.get(e);return t?t.bufferedAmount:0},create:function(e,t,n,r,o){const i=IDHandler.add(e);return e.onopen=GodotWebSocket._onopen.bind(null,i,t),e.onmessage=GodotWebSocket._onmessage.bind(null,i,n),e.onerror=GodotWebSocket._onerror.bind(null,i,r),e.onclose=GodotWebSocket._onclose.bind(null,i,o),i},close:function(e,t,n){const r=IDHandler.get(e);if(r&&r.readyState<r.CLOSING){const e=t,o=GodotRuntime.parseString(n);r.close(e,o)}},destroy:function(e){const t=IDHandler.get(e);t&&(GodotWebSocket.close(e,1001,""),IDHandler.remove(e),t.onopen=null,t.onmessage=null,t.onerror=null,t.onclose=null)}};function _godot_js_websocket_buffered_amount(e){return GodotWebSocket.bufferedAmount(e)}function _godot_js_websocket_close(e,t,n){const r=t,o=GodotRuntime.parseString(n);GodotWebSocket.close(e,r,o)}function _godot_js_websocket_create(e,t,n,r,o,i,s){const a=GodotRuntime.get_func(r).bind(null,e),c=GodotRuntime.get_func(o).bind(null,e),l=GodotRuntime.get_func(i).bind(null,e),u=GodotRuntime.get_func(s).bind(null,e),d=GodotRuntime.parseString(t),f=GodotRuntime.parseString(n);let p=null;try{p=f?new WebSocket(d,f.split(",")):new WebSocket(d)}catch(e){return 0}return p.binaryType="arraybuffer",GodotWebSocket.create(p,a,c,l,u)}function _godot_js_websocket_destroy(e){GodotWebSocket.destroy(e)}function _godot_js_websocket_send(e,t,n,r){const o=new Uint8Array(n);let i=0;for(i=0;i<n;i++)o[i]=GodotRuntime.getHeapValue(t+i,"i8");let s=o.buffer;return r||(s=new TextDecoder("utf-8").decode(o)),GodotWebSocket.send(e,s)}var GodotJSWrapper={proxies:null,MyProxy:function(e){const t=IDHandler.add(this);GodotJSWrapper.proxies.set(e,t);let n=1;this.ref=function(){n++},this.unref=function(){n--,0===n&&(IDHandler.remove(t),GodotJSWrapper.proxies.delete(e))},this.get_val=function(){return e},this.get_id=function(){return t}},get_proxied:function(e){const t=GodotJSWrapper.proxies.get(e);return void 0===t?new GodotJSWrapper.MyProxy(e).get_id():(IDHandler.get(t).ref(),t)},get_proxied_value:function(e){const t=IDHandler.get(e);if(void 0!==t)return t.get_val()},variant2js:function(e,t){switch(e){case 0:return null;case 1:return!!GodotRuntime.getHeapValue(t,"i64");case 2:return GodotRuntime.getHeapValue(t,"i64");case 3:return GodotRuntime.getHeapValue(t,"double");case 4:return GodotRuntime.parseString(GodotRuntime.getHeapValue(t,"*"));case 17:return GodotJSWrapper.get_proxied_value(GodotRuntime.getHeapValue(t,"i64"));default:return}},js2variant:function(e,t){if(null==e)return 0;const n=typeof e;if("boolean"===n)return GodotRuntime.setHeapValue(t,e,"i64"),1;if("number"===n)return Number.isInteger(e)?(GodotRuntime.setHeapValue(t,e,"i64"),2):(GodotRuntime.setHeapValue(t,e,"double"),3);if("string"===n){const n=GodotRuntime.allocString(e);return GodotRuntime.setHeapValue(t,n,"*"),4}const r=GodotJSWrapper.get_proxied(e);return GodotRuntime.setHeapValue(t,r,"i64"),17}};function _godot_js_wrapper_create_cb(e,t){const n=GodotRuntime.get_func(t);let r=0;return r=GodotJSWrapper.get_proxied((function(){if(!GodotJSWrapper.get_proxied_value(r))return;const t=Array.from(arguments);n(e,GodotJSWrapper.get_proxied(t),t.length)})),r}function _godot_js_wrapper_create_object(e,t,n,r,o,i,s){const a=GodotRuntime.parseString(e);if(void 0===window[a])return-1;const c=GodotRuntime.get_func(r),l=GodotRuntime.get_func(s),u=new Array(n);for(let e=0;e<n;e++){const n=c(t,e,o,i),r=GodotRuntime.getHeapValue(i,"*");u[e]=GodotJSWrapper.variant2js(n,o),r&&l(i,n)}try{const e=new window[a](...u);return GodotJSWrapper.js2variant(e,o)}catch(e){return GodotRuntime.error(`Error calling constructor ${a} with args:`,u,"error:",e),-1}}function _godot_js_wrapper_interface_get(e){const t=GodotRuntime.parseString(e);return void 0!==window[t]?GodotJSWrapper.get_proxied(window[t]):0}function _godot_js_wrapper_object_call(e,t,n,r,o,i,s,a){const c=GodotJSWrapper.get_proxied_value(e);if(void 0===c)return-1;const l=GodotRuntime.parseString(t),u=GodotRuntime.get_func(o),d=GodotRuntime.get_func(a),f=new Array(r);for(let e=0;e<r;e++){const t=u(n,e,i,s),r=GodotRuntime.getHeapValue(s,"*");f[e]=GodotJSWrapper.variant2js(t,i),r&&d(s,t)}try{const e=c[l](...f);return GodotJSWrapper.js2variant(e,i)}catch(e){return GodotRuntime.error(`Error calling method ${l} on:`,c,"error:",e),-1}}function _godot_js_wrapper_object_get(e,t,n){const r=GodotJSWrapper.get_proxied_value(e);if(void 0===r)return 0;if(n){const e=GodotRuntime.parseString(n);try{return GodotJSWrapper.js2variant(r[e],t)}catch(t){return GodotRuntime.error(`Error getting variable ${e} on object`,r),0}}return GodotJSWrapper.js2variant(r,t)}function _godot_js_wrapper_object_getvar(e,t,n){const r=GodotJSWrapper.get_proxied_value(e);if(void 0===r)return-1;const o=GodotJSWrapper.variant2js(t,n);if(null==o)return-1;try{return GodotJSWrapper.js2variant(r[o],n)}catch(e){return GodotRuntime.error(`Error getting variable ${o} on object`,r,e),-1}}function _godot_js_wrapper_object_set(e,t,n,r){const o=GodotJSWrapper.get_proxied_value(e);if(void 0===o)return;const i=GodotRuntime.parseString(t);try{o[i]=GodotJSWrapper.variant2js(n,r)}catch(e){GodotRuntime.error(`Error setting variable ${i} on object`,o)}}function _godot_js_wrapper_object_setvar(e,t,n,r,o){const i=GodotJSWrapper.get_proxied_value(e);if(void 0===i)return-1;const s=GodotJSWrapper.variant2js(t,n);try{return i[s]=GodotJSWrapper.variant2js(r,o),0}catch(e){return GodotRuntime.error(`Error setting variable ${s} on object`,i),-1}}function _godot_js_wrapper_object_unref(e){const t=IDHandler.get(e);void 0!==t&&t.unref()}var GodotWebXR={gl:null,texture_ids:[null,null],textures:[null,null],session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:e=>{if(GodotWebXR.session&&GodotWebXR.space){const t=function(t,n){GodotWebXR.frame=n,GodotWebXR.pose=n.getViewerPose(GodotWebXR.space),e(t),GodotWebXR.frame=null,GodotWebXR.pose=null};GodotWebXR.session.requestAnimationFrame(t)}else GodotWebXR.orig_requestAnimationFrame(e)},monkeyPatchRequestAnimationFrame:e=>{null===GodotWebXR.orig_requestAnimationFrame&&(GodotWebXR.orig_requestAnimationFrame=Browser.requestAnimationFrame),Browser.requestAnimationFrame=e?GodotWebXR.requestAnimationFrame:GodotWebXR.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{Browser.mainLoop.pause(),window.setTimeout((function(){Browser.mainLoop.resume()}),0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:"\n\t\t\tconst vec2 scale = vec2(0.5, 0.5);\n\t\t\tattribute vec4 aVertexPosition;\n\n\t\t\tvarying highp vec2 vTextureCoord;\n\n\t\t\tvoid main () {\n\t\t\t\tgl_Position = aVertexPosition;\n\t\t\t\tvTextureCoord = aVertexPosition.xy * scale + scale;\n\t\t\t}\n\t\t",fsSource:"\n\t\t\tvarying highp vec2 vTextureCoord;\n\n\t\t\tuniform sampler2D uSampler;\n\n\t\t\tvoid main() {\n\t\t\t\tgl_FragColor = texture2D(uSampler, vTextureCoord);\n\t\t\t}\n\t\t",initShaderProgram:(e,t,n)=>{const r=GodotWebXR.loadShader(e,e.VERTEX_SHADER,t),o=GodotWebXR.loadShader(e,e.FRAGMENT_SHADER,n),i=e.createProgram();return e.attachShader(i,r),e.attachShader(i,o),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(GodotRuntime.error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`),null)},loadShader:(e,t,n)=>{const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(GodotRuntime.error(`An error occurred compiling the shader: ${e.getShaderInfoLog(r)}`),e.deleteShader(r),null)},initBuffer:e=>{const t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),t},blitTexture:(e,t)=>{null===GodotWebXR.shaderProgram&&(GodotWebXR.shaderProgram=GodotWebXR.initShaderProgram(e,GodotWebXR.vsSource,GodotWebXR.fsSource),GodotWebXR.programInfo={program:GodotWebXR.shaderProgram,attribLocations:{vertexPosition:e.getAttribLocation(GodotWebXR.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:e.getUniformLocation(GodotWebXR.shaderProgram,"uSampler")}},GodotWebXR.buffer=GodotWebXR.initBuffer(e));const n=e.getParameter(e.CURRENT_PROGRAM);e.useProgram(GodotWebXR.shaderProgram),e.bindBuffer(e.ARRAY_BUFFER,GodotWebXR.buffer),e.vertexAttribPointer(GodotWebXR.programInfo.attribLocations.vertexPosition,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(GodotWebXR.programInfo.attribLocations.vertexPosition),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(GodotWebXR.programInfo.uniformLocations.uSampler,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,null),e.disableVertexAttribArray(GodotWebXR.programInfo.attribLocations.vertexPosition),e.bindBuffer(e.ARRAY_BUFFER,null),e.useProgram(n)},controllers:[],sampleControllers:()=>{if(!GodotWebXR.session||!GodotWebXR.frame)return;let e=2;const t=[];GodotWebXR.session.inputSources.forEach((n=>{"tracked-pointer"===n.targetRayMode?"right"===n.handedness?t[1]=n:"left"!==n.handedness&&t[0]||(t[0]=n):t[e++]=n})),GodotWebXR.controllers=t},getControllerId:e=>GodotWebXR.controllers.indexOf(e)};function _godot_webxr_commit_for_eye(e){if(!GodotWebXR.session||!GodotWebXR.pose)return;const t=2===e?1:0,n=GodotWebXR.session.renderState.baseLayer,r=GodotWebXR.pose.views[t],o=n.getViewport(r),i=GodotWebXR.gl,s=i.getParameter(i.FRAMEBUFFER_BINDING),a=i.getParameter(i.VIEWPORT);i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer),i.viewport(o.x,o.y,o.width,o.height),GodotWebXR.blitTexture(i,GodotWebXR.textures[t]),i.bindFramebuffer(i.FRAMEBUFFER,s),i.viewport(a[0],a[1],a[2],a[3])}function _godot_webxr_get_bounds_geometry(){if(!GodotWebXR.space||!GodotWebXR.space.boundsGeometry)return 0;const e=GodotWebXR.space.boundsGeometry.length;if(0===e)return 0;const t=GodotRuntime.malloc(4*(3*e+1));GodotRuntime.setHeapValue(t,e,"i32");for(let n=0;n<e;n++){const e=GodotWebXR.space.boundsGeometry[n];GodotRuntime.setHeapValue(t+4*(3*n+1),e.x,"float"),GodotRuntime.setHeapValue(t+4*(3*n+2),e.y,"float"),GodotRuntime.setHeapValue(t+4*(3*n+3),e.z,"float")}return t}function _godot_webxr_get_controller_axes(e){if(0===GodotWebXR.controllers.length)return 0;const t=GodotWebXR.controllers[e];if(!t||!t.gamepad)return 0;const n=t.gamepad.axes.length,r=GodotRuntime.malloc(4*(n+1));GodotRuntime.setHeapValue(r,n,"i32");for(let e=0;e<n;e++){let n=t.gamepad.axes[e];1!==e&&3!==e||(n*=-1),GodotRuntime.setHeapValue(r+4+4*e,n,"float")}return r}function _godot_webxr_get_controller_buttons(e){if(0===GodotWebXR.controllers.length)return 0;const t=GodotWebXR.controllers[e];if(!t||!t.gamepad)return 0;const n=t.gamepad.buttons.length,r=GodotRuntime.malloc(4*(n+1));GodotRuntime.setHeapValue(r,n,"i32");for(let e=0;e<n;e++)GodotRuntime.setHeapValue(r+4+4*e,t.gamepad.buttons[e].value,"float");return r}function _godot_webxr_get_controller_count(){return GodotWebXR.session&&GodotWebXR.frame?GodotWebXR.controllers.length:0}function _godot_webxr_get_controller_transform(e){if(!GodotWebXR.session||!GodotWebXR.frame)return 0;const t=GodotWebXR.controllers[e];if(!t)return 0;const n=GodotWebXR.frame,r=GodotWebXR.space,o=n.getPose(t.targetRaySpace,r);if(!o)return 0;const i=o.transform.matrix,s=GodotRuntime.malloc(64);for(let e=0;e<16;e++)GodotRuntime.setHeapValue(s+4*e,i[e],"float");return s}function _godot_webxr_get_external_texture_for_eye(e){if(!GodotWebXR.session)return 0;const t=2===e?1:0;if(GodotWebXR.texture_ids[t])return GodotWebXR.texture_ids[t];if(!GodotWebXR.pose)return 0;const n=GodotWebXR.session.renderState.baseLayer,r=GodotWebXR.pose.views[t],o=n.getViewport(r),i=GodotWebXR.gl,s=i.createTexture();i.bindTexture(i.TEXTURE_2D,s),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,o.width,o.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.bindTexture(i.TEXTURE_2D,null);const a=GL.getNewId(GL.textures);return GL.textures[a]=s,GodotWebXR.textures[t]=s,GodotWebXR.texture_ids[t]=a,a}function _godot_webxr_get_projection_for_eye(e){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const t=2===e?1:0,n=GodotWebXR.pose.views[t].projectionMatrix,r=GodotRuntime.malloc(64);for(let e=0;e<16;e++)GodotRuntime.setHeapValue(r+4*e,n[e],"float");return r}function _godot_webxr_get_render_targetsize(){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const e=GodotWebXR.session.renderState.baseLayer,t=GodotWebXR.pose.views[0],n=e.getViewport(t),r=GodotRuntime.malloc(8);return GodotRuntime.setHeapValue(r+0,n.width,"i32"),GodotRuntime.setHeapValue(r+4,n.height,"i32"),r}function _godot_webxr_get_transform_for_eye(e){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const t=GodotWebXR.pose.views;let n;n=0===e?GodotWebXR.pose.transform.matrix:t[e-1].transform.matrix;const r=GodotRuntime.malloc(64);for(let e=0;e<16;e++)GodotRuntime.setHeapValue(r+4*e,n[e],"float");return r}function _godot_webxr_get_view_count(){return GodotWebXR.session&&GodotWebXR.pose?GodotWebXR.pose.views.length:0}function _godot_webxr_get_visibility_state(){return GodotWebXR.session&&GodotWebXR.session.visibilityState?GodotRuntime.allocString(GodotWebXR.session.visibilityState):0}function _godot_webxr_initialize(e,t,n,r,o,i,s,a,c,l){GodotWebXR.monkeyPatchRequestAnimationFrame(!0);const u=GodotRuntime.parseString(e),d=GodotRuntime.parseString(t).split(",").map((e=>e.trim())).filter((e=>""!==e)),f=GodotRuntime.parseString(n).split(",").map((e=>e.trim())).filter((e=>""!==e)),p=GodotRuntime.parseString(r).split(",").map((e=>e.trim())),h=GodotRuntime.get_func(o),m=GodotRuntime.get_func(i),g=GodotRuntime.get_func(s),_=GodotRuntime.get_func(a),v=GodotRuntime.get_func(c),b=GodotRuntime.get_func(l),y={};d.length>0&&(y.requiredFeatures=d),f.length>0&&(y.optionalFeatures=f),navigator.xr.requestSession(u,y).then((function(e){GodotWebXR.session=e,e.addEventListener("end",(function(e){m()})),e.addEventListener("inputsourceschange",(function(e){let t=!1;[e.added,e.removed].forEach((e=>{e.forEach((e=>{"tracked-pointer"===e.targetRayMode&&(t=!0)}))})),t&&_()})),["selectstart","select","selectend","squeezestart","squeeze","squeezeend"].forEach((t=>{e.addEventListener(t,(function(e){const n=GodotRuntime.allocString(t);v(n,GodotWebXR.getControllerId(e.inputSource)),GodotRuntime.free(n)}))})),e.addEventListener("visibilitychange",(function(e){const t=GodotRuntime.allocString("visibility_state_changed");b(t),GodotRuntime.free(t)}));const t=_emscripten_webgl_get_current_context(),n=GL.getContext(t).GLctx;GodotWebXR.gl=n,n.makeXRCompatible().then((function(){e.updateRenderState({baseLayer:new XRWebGLLayer(e,n)}),function t(){const n=p.shift();e.requestReferenceSpace(n).then((e=>{!function(e,t){GodotWebXR.space=e,e.onreset=function(e){const t=GodotRuntime.allocString("reference_space_reset");b(t),GodotRuntime.free(t)},GodotWebXR.pauseResumeMainLoop(),window.setTimeout((function(){const e=GodotRuntime.allocString(t);h(e),GodotRuntime.free(e)}),0)}(e,n)})).catch((()=>{if(0===p.length){const e=GodotRuntime.allocString("Unable to get any of the requested reference space types");g(e),GodotRuntime.free(e)}else t()}))}()})).catch((function(e){const t=GodotRuntime.allocString(`Unable to make WebGL context compatible with WebXR: ${e}`);g(t),GodotRuntime.free(t)}))})).catch((function(e){const t=GodotRuntime.allocString(`Unable to start session: ${e}`);g(t),GodotRuntime.free(t)}))}function _godot_webxr_is_controller_connected(e){return!(!GodotWebXR.session||!GodotWebXR.frame||!GodotWebXR.controllers[e])}function _godot_webxr_is_session_supported(e,t){const n=GodotRuntime.parseString(e),r=GodotRuntime.get_func(t);if(navigator.xr)navigator.xr.isSessionSupported(n).then((function(e){const t=GodotRuntime.allocString(n);r(t,e?1:0),GodotRuntime.free(t)}));else{const e=GodotRuntime.allocString(n);r(e,0),GodotRuntime.free(e)}}function _godot_webxr_is_supported(){return!!navigator.xr}function _godot_webxr_sample_controller_data(){GodotWebXR.sampleControllers()}function _godot_webxr_uninitialize(){GodotWebXR.session&&GodotWebXR.session.end().catch((e=>{}));const e=GodotWebXR.gl;for(let t=0;t<GodotWebXR.textures.length;t++){const n=GodotWebXR.textures[t];null!==n&&e.deleteTexture(n),GodotWebXR.textures[t]=null;const r=GodotWebXR.texture_ids[t];null!==r&&(GL.textures[r]=null),GodotWebXR.texture_ids[t]=null}GodotWebXR.session=null,GodotWebXR.space=null,GodotWebXR.frame=null,GodotWebXR.pose=null,GodotWebXR.monkeyPatchRequestAnimationFrame(!1),GodotWebXR.pauseResumeMainLoop()}function _kill(e,t){return setErrNo(ERRNO_CODES.EPERM),-1}function _tzset(){if(!_tzset.called){_tzset.called=!0;var e=(new Date).getFullYear(),t=new Date(e,0,1),n=new Date(e,6,1),r=t.getTimezoneOffset(),o=n.getTimezoneOffset(),i=Math.max(r,o);HEAP32[__get_timezone()>>2]=60*i,HEAP32[__get_daylight()>>2]=Number(r!=o);var s=u(t),a=u(n),c=allocateUTF8(s),l=allocateUTF8(a);o<r?(HEAP32[__get_tzname()>>2]=c,HEAP32[__get_tzname()+4>>2]=l):(HEAP32[__get_tzname()>>2]=l,HEAP32[__get_tzname()+4>>2]=c)}function u(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}}function _localtime_r(e,t){_tzset();var n=new Date(1e3*HEAP32[e>>2]);HEAP32[t>>2]=n.getSeconds(),HEAP32[t+4>>2]=n.getMinutes(),HEAP32[t+8>>2]=n.getHours(),HEAP32[t+12>>2]=n.getDate(),HEAP32[t+16>>2]=n.getMonth(),HEAP32[t+20>>2]=n.getFullYear()-1900,HEAP32[t+24>>2]=n.getDay();var r=new Date(n.getFullYear(),0,1),o=(n.getTime()-r.getTime())/864e5|0;HEAP32[t+28>>2]=o,HEAP32[t+36>>2]=-60*n.getTimezoneOffset();var i=new Date(n.getFullYear(),6,1).getTimezoneOffset(),s=r.getTimezoneOffset(),a=0|(i!=s&&n.getTimezoneOffset()==Math.min(s,i));HEAP32[t+32>>2]=a;var c=HEAP32[__get_tzname()+(a?4:0)>>2];return HEAP32[t+40>>2]=c,t}function _setTempRet0(e){setTempRet0(e)}var __sigalrm_handler=0;function ___sigaction(e,t,n){return 14==e?(__sigalrm_handler=HEAP32[t>>2],0):0}function _sigaction(e,t,n){return ___sigaction(e,t,n)}function __isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}function __arraySum(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],__MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(e,t){for(var n=new Date(e.getTime());t>0;){var r=__isLeapYear(n.getFullYear()),o=n.getMonth(),i=(r?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR)[o];if(!(t>i-n.getDate()))return n.setDate(n.getDate()+t),n;t-=i-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function _strftime(e,t,n,r){var o=HEAP32[r+40>>2],i={tm_sec:HEAP32[r>>2],tm_min:HEAP32[r+4>>2],tm_hour:HEAP32[r+8>>2],tm_mday:HEAP32[r+12>>2],tm_mon:HEAP32[r+16>>2],tm_year:HEAP32[r+20>>2],tm_wday:HEAP32[r+24>>2],tm_yday:HEAP32[r+28>>2],tm_isdst:HEAP32[r+32>>2],tm_gmtoff:HEAP32[r+36>>2],tm_zone:o?UTF8ToString(o):""},s=UTF8ToString(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in a)s=s.replace(new RegExp(c,"g"),a[c]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function f(e,t){return d(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function h(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=h(n),i=h(r);return p(o,t)<=0?p(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return l[e.tm_wday].substring(0,3)},"%A":function(e){return l[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return f((e.tm_year+1900)/100|0,2)},"%d":function(e){return f(e.tm_mday,2)},"%e":function(e){return d(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return f(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),f(t,2)},"%j":function(e){return f(e.tm_mday+__arraySum(__isLeapYear(e.tm_year+1900)?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,e.tm_mon-1),3)},"%m":function(e){return f(e.tm_mon+1,2)},"%M":function(e){return f(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return f(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:__addDays(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var o=__arraySum(__isLeapYear(r.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,r.getMonth()-1)-31,i=31-n.getDate()+o+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),o=h(n),i=h(r),s=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday);return p(s,o)<0?"53":p(i,s)<=0?"01":(t=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),f(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:__addDays(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(p(n,r)<0){var o=__arraySum(__isLeapYear(r.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,r.getMonth()-1)-31,i=31-n.getDate()+o+r.getDate();return f(Math.ceil(i/7),2)}return 0===p(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in g)s.includes(c)&&(s=s.replace(new RegExp(c,"g"),g[c](i)));var _=intArrayFromString(s,!1);return _.length>t?0:(writeArrayToMemory(_,e),_.length-1)}function _strftime_l(e,t,n,r){return _strftime(e,t,n,r)}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}var FSNode=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},readMode=365,writeMode=146,GLctx;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(e){e?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(e){e?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}),FS.FSNode=FSNode,FS.staticInit(),Module.requestFullscreen=function(e,t){Browser.requestFullscreen(e,t)},Module.requestAnimationFrame=function(e){Browser.requestAnimationFrame(e)},Module.setCanvasSize=function(e,t,n){Browser.setCanvasSize(e,t,n)},Module.pauseMainLoop=function(){Browser.mainLoop.pause()},Module.resumeMainLoop=function(){Browser.mainLoop.resume()},Module.getUserMedia=function(){Browser.getUserMedia()},Module.createContext=function(e,t,n,r){return Browser.createContext(e,t,n,r)};for(var i=0;i<32;++i)tempFixedLengthArray.push(new Array(i));for(var miniTempWebGLFloatBuffersStorage=new Float32Array(288),i=0;i<288;++i)miniTempWebGLFloatBuffers[i]=miniTempWebGLFloatBuffersStorage.subarray(0,i+1);for(var __miniTempWebGLIntBuffersStorage=new Int32Array(288),i=0;i<288;++i)__miniTempWebGLIntBuffers[i]=__miniTempWebGLIntBuffersStorage.subarray(0,i+1);function intArrayFromString(e,t,n){var r=n>0?n:lengthBytesUTF8(e)+1,o=new Array(r),i=stringToUTF8Array(e,o,0,o.length);return t&&(o.length=i),o}Module.request_quit=function(){GodotOS.request_quit()},Module.onExit=GodotOS.cleanup,GodotOS._fs_sync_promise=Promise.resolve(),Module.initConfig=GodotConfig.init_config,Module.initFS=GodotFS.init,Module.copyToFS=GodotFS.copy_to_fs,GodotOS.atexit((function(e,t){GodotDisplayCursor.clear(),e()})),GodotOS.atexit((function(e,t){GodotEventListeners.clear(),e()})),GodotOS.atexit((function(e,t){GodotDisplayVK.clear(),e()})),GodotJSWrapper.proxies=new Map;var asmLibraryArg={l:___cxa_atexit,hd:___sys__newselect,Jc:___sys_accept4,Zc:___sys_access,Mc:___sys_bind,Yc:___sys_chdir,gd:___sys_chmod,Lc:___sys_connect,Da:___sys_fcntl64,Xc:___sys_getcwd,ld:___sys_getdents64,Wc:___sys_getpid,Ic:___sys_getsockname,Fc:___sys_getsockopt,pb:___sys_ioctl,Kc:___sys_listen,fd:___sys_lstat64,ed:___sys_mkdir,qb:___sys_open,id:___sys_poll,Tc:___sys_readlink,Gc:___sys_recvfrom,_c:___sys_rename,$c:___sys_rmdir,Hc:___sys_sendto,Ec:___sys_setsockopt,mb:___sys_socket,dd:___sys_stat64,bd:___sys_statfs64,Sc:___sys_symlink,ad:___sys_unlink,jd:___sys_wait4,Cc:__emscripten_throw_longjmp,ka:_abort,Ca:_clock_gettime,jj:_dlclose,Ka:_dlerror,ib:_dlopen,hj:_dlsym,_i:_emscripten_asm_const_int,tb:_emscripten_cancel_main_loop,Th:_emscripten_force_exit,ri:_emscripten_glActiveTexture,qi:_emscripten_glAttachShader,ff:_emscripten_glBeginQuery,Ii:_emscripten_glBeginQueryEXT,Me:_emscripten_glBeginTransformFeedback,pi:_emscripten_glBindAttribLocation,oi:_emscripten_glBindBuffer,Je:_emscripten_glBindBufferBase,Ke:_emscripten_glBindBufferRange,mi:_emscripten_glBindFramebuffer,li:_emscripten_glBindRenderbuffer,Ld:_emscripten_glBindSampler,ki:_emscripten_glBindTexture,Cd:_emscripten_glBindTransformFeedback,Re:_emscripten_glBindVertexArray,Ai:_emscripten_glBindVertexArrayOES,ji:_emscripten_glBlendColor,ii:_emscripten_glBlendEquation,hi:_emscripten_glBlendEquationSeparate,gi:_emscripten_glBlendFunc,fi:_emscripten_glBlendFuncSeparate,Ve:_emscripten_glBlitFramebuffer,ei:_emscripten_glBufferData,di:_emscripten_glBufferSubData,bi:_emscripten_glCheckFramebufferStatus,ai:_emscripten_glClear,je:_emscripten_glClearBufferfi,ke:_emscripten_glClearBufferfv,ne:_emscripten_glClearBufferiv,me:_emscripten_glClearBufferuiv,$h:_emscripten_glClearColor,_h:_emscripten_glClearDepthf,Zh:_emscripten_glClearStencil,Vd:_emscripten_glClientWaitSync,Yh:_emscripten_glColorMask,Xh:_emscripten_glCompileShader,Wh:_emscripten_glCompressedTexImage2D,lf:_emscripten_glCompressedTexImage3D,Vh:_emscripten_glCompressedTexSubImage2D,kf:_emscripten_glCompressedTexSubImage3D,he:_emscripten_glCopyBufferSubData,Uh:_emscripten_glCopyTexImage2D,Sh:_emscripten_glCopyTexSubImage2D,mf:_emscripten_glCopyTexSubImage3D,Rh:_emscripten_glCreateProgram,Qh:_emscripten_glCreateShader,Ph:_emscripten_glCullFace,Oh:_emscripten_glDeleteBuffers,Nh:_emscripten_glDeleteFramebuffers,Mh:_emscripten_glDeleteProgram,hf:_emscripten_glDeleteQueries,Li:_emscripten_glDeleteQueriesEXT,Lh:_emscripten_glDeleteRenderbuffers,Nd:_emscripten_glDeleteSamplers,Kh:_emscripten_glDeleteShader,Wd:_emscripten_glDeleteSync,Jh:_emscripten_glDeleteTextures,Bd:_emscripten_glDeleteTransformFeedbacks,Qe:_emscripten_glDeleteVertexArrays,zi:_emscripten_glDeleteVertexArraysOES,Ih:_emscripten_glDepthFunc,Hh:_emscripten_glDepthMask,Gh:_emscripten_glDepthRangef,Fh:_emscripten_glDetachShader,Eh:_emscripten_glDisable,Dh:_emscripten_glDisableVertexAttribArray,Ch:_emscripten_glDrawArrays,_d:_emscripten_glDrawArraysInstanced,ui:_emscripten_glDrawArraysInstancedANGLE,vf:_emscripten_glDrawArraysInstancedARB,wf:_emscripten_glDrawArraysInstancedEXT,md:_emscripten_glDrawArraysInstancedNV,af:_emscripten_glDrawBuffers,rf:_emscripten_glDrawBuffersEXT,vi:_emscripten_glDrawBuffersWEBGL,Bh:_emscripten_glDrawElements,Zd:_emscripten_glDrawElementsInstanced,ti:_emscripten_glDrawElementsInstancedANGLE,sf:_emscripten_glDrawElementsInstancedARB,tf:_emscripten_glDrawElementsInstancedEXT,uf:_emscripten_glDrawElementsInstancedNV,pf:_emscripten_glDrawRangeElements,Ah:_emscripten_glEnable,zh:_emscripten_glEnableVertexAttribArray,ef:_emscripten_glEndQuery,Hi:_emscripten_glEndQueryEXT,Le:_emscripten_glEndTransformFeedback,Yd:_emscripten_glFenceSync,xh:_emscripten_glFinish,wh:_emscripten_glFlush,vh:_emscripten_glFramebufferRenderbuffer,uh:_emscripten_glFramebufferTexture2D,Te:_emscripten_glFramebufferTextureLayer,th:_emscripten_glFrontFace,sh:_emscripten_glGenBuffers,qh:_emscripten_glGenFramebuffers,jf:_emscripten_glGenQueries,Mi:_emscripten_glGenQueriesEXT,ph:_emscripten_glGenRenderbuffers,Od:_emscripten_glGenSamplers,oh:_emscripten_glGenTextures,Ad:_emscripten_glGenTransformFeedbacks,Pe:_emscripten_glGenVertexArrays,xi:_emscripten_glGenVertexArraysOES,rh:_emscripten_glGenerateMipmap,mh:_emscripten_glGetActiveAttrib,lh:_emscripten_glGetActiveUniform,ce:_emscripten_glGetActiveUniformBlockName,de:_emscripten_glGetActiveUniformBlockiv,fe:_emscripten_glGetActiveUniformsiv,kh:_emscripten_glGetAttachedShaders,jh:_emscripten_glGetAttribLocation,ih:_emscripten_glGetBooleanv,Pd:_emscripten_glGetBufferParameteri64v,hh:_emscripten_glGetBufferParameteriv,gh:_emscripten_glGetError,fh:_emscripten_glGetFloatv,xe:_emscripten_glGetFragDataLocation,eh:_emscripten_glGetFramebufferAttachmentParameteriv,Rd:_emscripten_glGetInteger64i_v,Td:_emscripten_glGetInteger64v,Ne:_emscripten_glGetIntegeri_v,dh:_emscripten_glGetIntegerv,od:_emscripten_glGetInternalformativ,wd:_emscripten_glGetProgramBinary,ah:_emscripten_glGetProgramInfoLog,bh:_emscripten_glGetProgramiv,Ci:_emscripten_glGetQueryObjecti64vEXT,Ei:_emscripten_glGetQueryObjectivEXT,Bi:_emscripten_glGetQueryObjectui64vEXT,cf:_emscripten_glGetQueryObjectuiv,Di:_emscripten_glGetQueryObjectuivEXT,df:_emscripten_glGetQueryiv,Fi:_emscripten_glGetQueryivEXT,$g:_emscripten_glGetRenderbufferParameteriv,Ed:_emscripten_glGetSamplerParameterfv,Gd:_emscripten_glGetSamplerParameteriv,Zg:_emscripten_glGetShaderInfoLog,Yg:_emscripten_glGetShaderPrecisionFormat,Xg:_emscripten_glGetShaderSource,_g:_emscripten_glGetShaderiv,Wg:_emscripten_glGetString,ie:_emscripten_glGetStringi,Sd:_emscripten_glGetSynciv,Vg:_emscripten_glGetTexParameterfv,Ug:_emscripten_glGetTexParameteriv,Ge:_emscripten_glGetTransformFeedbackVarying,ee:_emscripten_glGetUniformBlockIndex,ge:_emscripten_glGetUniformIndices,Qg:_emscripten_glGetUniformLocation,Sg:_emscripten_glGetUniformfv,Rg:_emscripten_glGetUniformiv,ye:_emscripten_glGetUniformuiv,Ee:_emscripten_glGetVertexAttribIiv,De:_emscripten_glGetVertexAttribIuiv,Ng:_emscripten_glGetVertexAttribPointerv,Pg:_emscripten_glGetVertexAttribfv,Og:_emscripten_glGetVertexAttribiv,Mg:_emscripten_glHint,sd:_emscripten_glInvalidateFramebuffer,rd:_emscripten_glInvalidateSubFramebuffer,Lg:_emscripten_glIsBuffer,Kg:_emscripten_glIsEnabled,Jg:_emscripten_glIsFramebuffer,Hg:_emscripten_glIsProgram,gf:_emscripten_glIsQuery,Ki:_emscripten_glIsQueryEXT,Gg:_emscripten_glIsRenderbuffer,Md:_emscripten_glIsSampler,Fg:_emscripten_glIsShader,Xd:_emscripten_glIsSync,Eg:_emscripten_glIsTexture,zd:_emscripten_glIsTransformFeedback,Oe:_emscripten_glIsVertexArray,wi:_emscripten_glIsVertexArrayOES,Dg:_emscripten_glLineWidth,Cg:_emscripten_glLinkProgram,yd:_emscripten_glPauseTransformFeedback,Bg:_emscripten_glPixelStorei,Ag:_emscripten_glPolygonOffset,vd:_emscripten_glProgramBinary,td:_emscripten_glProgramParameteri,Gi:_emscripten_glQueryCounterEXT,qf:_emscripten_glReadBuffer,zg:_emscripten_glReadPixels,yg:_emscripten_glReleaseShaderCompiler,wg:_emscripten_glRenderbufferStorage,Ue:_emscripten_glRenderbufferStorageMultisample,xd:_emscripten_glResumeTransformFeedback,vg:_emscripten_glSampleCoverage,Id:_emscripten_glSamplerParameterf,Hd:_emscripten_glSamplerParameterfv,Kd:_emscripten_glSamplerParameteri,Jd:_emscripten_glSamplerParameteriv,ug:_emscripten_glScissor,tg:_emscripten_glShaderBinary,sg:_emscripten_glShaderSource,rg:_emscripten_glStencilFunc,qg:_emscripten_glStencilFuncSeparate,pg:_emscripten_glStencilMask,og:_emscripten_glStencilMaskSeparate,ng:_emscripten_glStencilOp,lg:_emscripten_glStencilOpSeparate,kg:_emscripten_glTexImage2D,of:_emscripten_glTexImage3D,jg:_emscripten_glTexParameterf,ig:_emscripten_glTexParameterfv,hg:_emscripten_glTexParameteri,gg:_emscripten_glTexParameteriv,qd:_emscripten_glTexStorage2D,pd:_emscripten_glTexStorage3D,fg:_emscripten_glTexSubImage2D,nf:_emscripten_glTexSubImage3D,Ie:_emscripten_glTransformFeedbackVaryings,eg:_emscripten_glUniform1f,dg:_emscripten_glUniform1fv,cg:_emscripten_glUniform1i,$f:_emscripten_glUniform1iv,ve:_emscripten_glUniform1ui,re:_emscripten_glUniform1uiv,_f:_emscripten_glUniform2f,Zf:_emscripten_glUniform2fv,Yf:_emscripten_glUniform2i,Xf:_emscripten_glUniform2iv,ue:_emscripten_glUniform2ui,qe:_emscripten_glUniform2uiv,Wf:_emscripten_glUniform3f,Vf:_emscripten_glUniform3fv,Uf:_emscripten_glUniform3i,Tf:_emscripten_glUniform3iv,te:_emscripten_glUniform3ui,pe:_emscripten_glUniform3uiv,Sf:_emscripten_glUniform4f,Qf:_emscripten_glUniform4fv,Pf:_emscripten_glUniform4i,Of:_emscripten_glUniform4iv,se:_emscripten_glUniform4ui,oe:_emscripten_glUniform4uiv,be:_emscripten_glUniformBlockBinding,Nf:_emscripten_glUniformMatrix2fv,$e:_emscripten_glUniformMatrix2x3fv,Ze:_emscripten_glUniformMatrix2x4fv,Mf:_emscripten_glUniformMatrix3fv,_e:_emscripten_glUniformMatrix3x2fv,Xe:_emscripten_glUniformMatrix3x4fv,Lf:_emscripten_glUniformMatrix4fv,Ye:_emscripten_glUniformMatrix4x2fv,We:_emscripten_glUniformMatrix4x3fv,Kf:_emscripten_glUseProgram,Jf:_emscripten_glValidateProgram,If:_emscripten_glVertexAttrib1f,Hf:_emscripten_glVertexAttrib1fv,Gf:_emscripten_glVertexAttrib2f,Ff:_emscripten_glVertexAttrib2fv,Ef:_emscripten_glVertexAttrib3f,Df:_emscripten_glVertexAttrib3fv,Cf:_emscripten_glVertexAttrib4f,Bf:_emscripten_glVertexAttrib4fv,Dd:_emscripten_glVertexAttribDivisor,si:_emscripten_glVertexAttribDivisorANGLE,xf:_emscripten_glVertexAttribDivisorARB,yf:_emscripten_glVertexAttribDivisorEXT,nd:_emscripten_glVertexAttribDivisorNV,Ce:_emscripten_glVertexAttribI4i,Ae:_emscripten_glVertexAttribI4iv,Be:_emscripten_glVertexAttribI4ui,ze:_emscripten_glVertexAttribI4uiv,Fe:_emscripten_glVertexAttribIPointer,Af:_emscripten_glVertexAttribPointer,zf:_emscripten_glViewport,Ud:_emscripten_glWaitSync,Nc:_emscripten_memcpy_big,Xa:_emscripten_resize_heap,sb:_emscripten_set_main_loop,Rc:_emscripten_thread_sleep,jb:_emscripten_webgl_commit_frame,Dc:_emscripten_webgl_create_context,$b:_emscripten_webgl_destroy_context,Vc:_emscripten_webgl_init_context_attributes,Ac:_emscripten_webgl_make_context_current,Pc:_environ_get,Qc:_environ_sizes_get,ua:_fd_close,Uc:_fd_fdstat_get,ob:_fd_read,xc:_fd_seek,nb:_fd_write,Va:_gai_strerror,k:_getTempRet0,Wa:_getaddrinfo,Qb:_getnameinfo,hb:_gettimeofday,c:_glActiveTexture,Na:_glAttachShader,cb:_glBeginTransformFeedback,yb:_glBindAttribLocation,b:_glBindBuffer,O:_glBindBufferBase,e:_glBindFramebuffer,aa:_glBindRenderbuffer,a:_glBindTexture,n:_glBindVertexArray,E:_glBlendEquation,S:_glBlendFunc,y:_glBlendFuncSeparate,ia:_glBlitFramebuffer,r:_glBufferData,L:_glBufferSubData,N:_glCheckFramebufferStatus,K:_glClear,qa:_glClearBufferfv,Q:_glClearColor,ca:_glClearDepthf,P:_glColorMask,Pa:_glCompileShader,Db:_glCompressedTexImage2D,Xi:_glCompressedTexSubImage2D,Cb:_glCompressedTexSubImage3D,Ui:_glCopyBufferSubData,_a:_glCopyTexSubImage2D,zb:_glCreateProgram,Ra:_glCreateShader,ra:_glCullFace,M:_glDeleteBuffers,H:_glDeleteFramebuffers,R:_glDeleteProgram,W:_glDeleteRenderbuffers,J:_glDeleteShader,D:_glDeleteTextures,fa:_glDeleteVertexArrays,Z:_glDepthFunc,I:_glDepthMask,i:_glDisable,q:_glDisableVertexAttribArray,B:_glDrawArrays,xa:_glDrawArraysInstanced,Ha:_glDrawBuffers,da:_glDrawElements,Ia:_glDrawElementsInstanced,s:_glEnable,j:_glEnableVertexAttribArray,bb:_glEndTransformFeedback,cj:_glFinish,$:_glFramebufferRenderbuffer,x:_glFramebufferTexture2D,Wi:_glFramebufferTextureLayer,Eb:_glFrontFace,C:_glGenBuffers,F:_glGenFramebuffers,ha:_glGenRenderbuffers,w:_glGenTextures,Y:_glGenVertexArrays,T:_glGenerateMipmap,Gb:_glGetError,Ab:_glGetFloatv,ba:_glGetIntegerv,wb:_glGetProgramInfoLog,Ma:_glGetProgramiv,Oa:_glGetShaderInfoLog,pa:_glGetShaderiv,Sa:_glGetString,Ti:_glGetStringi,Pi:_glGetUniformBlockIndex,va:_glGetUniformLocation,$i:_glInvalidateFramebuffer,xb:_glLinkProgram,ma:_glPixelStorei,ja:_glReadBuffer,db:_glReadPixels,ga:_glRenderbufferStorage,Ea:_glRenderbufferStorageMultisample,V:_glScissor,Qa:_glShaderSource,t:_glTexImage2D,Ga:_glTexImage3D,g:_glTexParameterf,d:_glTexParameteri,Zi:_glTexStorage2D,Fa:_glTexSubImage2D,Ta:_glTexSubImage3D,Qi:_glTransformFeedbackVaryings,f:_glUniform1f,v:_glUniform1i,eb:_glUniform1iv,Bb:_glUniform1ui,ab:_glUniform2f,o:_glUniform2fv,Ba:_glUniform2i,na:_glUniform2iv,$a:_glUniform3f,X:_glUniform3fv,Aa:_glUniform3i,wa:_glUniform4f,z:_glUniform4fv,za:_glUniform4i,Oi:_glUniformBlockBinding,vb:_glUniformMatrix2fv,ub:_glUniformMatrix3fv,p:_glUniformMatrix4fv,ea:_glUseProgram,A:_glVertexAttrib4f,U:_glVertexAttrib4fv,G:_glVertexAttribDivisor,gj:_glVertexAttribI4ui,Ja:_glVertexAttribIPointer,h:_glVertexAttribPointer,u:_glViewport,Ib:_gmtime_r,ci:_godot_audio_capture_start,bg:_godot_audio_capture_stop,ae:_godot_audio_has_script_processor,ac:_godot_audio_has_worklet,ak:_godot_audio_init,bk:_godot_audio_is_available,bj:_godot_audio_resume,vc:_godot_audio_script_create,kc:_godot_audio_script_start,Tb:_godot_audio_worklet_create,$j:_godot_audio_worklet_start_no_threads,Sb:_godot_js_config_canvas_id_get,nh:_godot_js_config_locale_get,Yb:_godot_js_display_alert,we:_godot_js_display_canvas_focus,He:_godot_js_display_canvas_is_focused,ud:_godot_js_display_clipboard_get,Fd:_godot_js_display_clipboard_set,bf:_godot_js_display_cursor_is_hidden,Se:_godot_js_display_cursor_is_locked,Ya:_godot_js_display_cursor_lock_set,rb:_godot_js_display_cursor_set_custom_shape,Rf:_godot_js_display_cursor_set_shape,Za:_godot_js_display_cursor_set_visible,Ig:_godot_js_display_desired_size_set,mc:_godot_js_display_fullscreen_cb,ag:_godot_js_display_fullscreen_exit,mg:_godot_js_display_fullscreen_request,lb:_godot_js_display_has_webgl,cd:_godot_js_display_is_swap_ok_cancel,jc:_godot_js_display_notification_cb,bc:_godot_js_display_pixel_ratio_get,cc:_godot_js_display_screen_dpi_get,Tg:_godot_js_display_screen_size_get,kd:_godot_js_display_setup_canvas,ch:_godot_js_display_size_update,le:_godot_js_display_touchscreen_is_available,hc:_godot_js_display_vk_available,ic:_godot_js_display_vk_cb,fc:_godot_js_display_vk_hide,gc:_godot_js_display_vk_show,lc:_godot_js_display_window_blur_cb,Wb:_godot_js_display_window_icon_set,xg:_godot_js_display_window_size_get,Xb:_godot_js_display_window_title_set,Ji:_godot_js_eval,pj:_godot_js_fetch_body_length_get,Hj:_godot_js_fetch_create,Ob:_godot_js_fetch_free,fj:_godot_js_fetch_http_status_get,yj:_godot_js_fetch_is_chunked,ij:_godot_js_fetch_read_chunk,ej:_godot_js_fetch_read_headers,fb:_godot_js_fetch_state_get,nc:_godot_js_input_drop_files_cb,pc:_godot_js_input_gamepad_cb,dc:_godot_js_input_gamepad_sample,$d:_godot_js_input_gamepad_sample_count,Qd:_godot_js_input_gamepad_sample_get,qc:_godot_js_input_key_cb,uc:_godot_js_input_mouse_button_cb,tc:_godot_js_input_mouse_move_cb,sc:_godot_js_input_mouse_wheel_cb,oc:_godot_js_input_paste_cb,rc:_godot_js_input_touch_cb,yi:_godot_js_os_download_buffer,_b:_godot_js_os_execute,yh:_godot_js_os_finish_async,Rb:_godot_js_os_fs_is_persistent,ec:_godot_js_os_fs_sync,Zb:_godot_js_os_hw_concurrency_get,Ub:_godot_js_os_request_quit_cb,Vb:_godot_js_os_shell_open,Pb:_godot_js_rtc_datachannel_close,Sj:_godot_js_rtc_datachannel_connect,Pj:_godot_js_rtc_datachannel_destroy,Tj:_godot_js_rtc_datachannel_get_buffered_amount,Xj:_godot_js_rtc_datachannel_id_get,Uj:_godot_js_rtc_datachannel_is_negotiated,Yj:_godot_js_rtc_datachannel_is_ordered,Rj:_godot_js_rtc_datachannel_label_get,Wj:_godot_js_rtc_datachannel_max_packet_lifetime_get,Vj:_godot_js_rtc_datachannel_max_retransmits_get,Qj:_godot_js_rtc_datachannel_protocol_get,_j:_godot_js_rtc_datachannel_ready_state_get,Zj:_godot_js_rtc_datachannel_send,Oj:_godot_js_rtc_pc_close,Jj:_godot_js_rtc_pc_create,Ij:_godot_js_rtc_pc_datachannel_create,Nb:_godot_js_rtc_pc_destroy,Kj:_godot_js_rtc_pc_ice_candidate_add,Mj:_godot_js_rtc_pc_local_description_set,Nj:_godot_js_rtc_pc_offer_create,Lj:_godot_js_rtc_pc_remote_description_set,Mb:_godot_js_websocket_buffered_amount,Fj:_godot_js_websocket_close,Ej:_godot_js_websocket_create,Lb:_godot_js_websocket_destroy,Gj:_godot_js_websocket_send,Si:_godot_js_wrapper_create_cb,Ni:_godot_js_wrapper_create_object,Ri:_godot_js_wrapper_interface_get,Vi:_godot_js_wrapper_object_call,aj:_godot_js_wrapper_object_get,Fb:_godot_js_wrapper_object_getvar,dj:_godot_js_wrapper_object_set,Yi:_godot_js_wrapper_object_setvar,ni:_godot_js_wrapper_object_unref,rj:_godot_webxr_commit_for_eye,Bj:_godot_webxr_get_bounds_geometry,mj:_godot_webxr_get_controller_axes,nj:_godot_webxr_get_controller_buttons,qj:_godot_webxr_get_controller_count,oj:_godot_webxr_get_controller_transform,sj:_godot_webxr_get_external_texture_for_eye,tj:_godot_webxr_get_projection_for_eye,vj:_godot_webxr_get_render_targetsize,uj:_godot_webxr_get_transform_for_eye,Aj:_godot_webxr_get_view_count,Cj:_godot_webxr_get_visibility_state,xj:_godot_webxr_initialize,Jb:_godot_webxr_is_controller_connected,Dj:_godot_webxr_is_session_supported,zj:_godot_webxr_is_supported,Kb:_godot_webxr_sample_controller_data,wj:_godot_webxr_uninitialize,ya:invoke_ii,la:invoke_iii,zc:invoke_iiii,kb:invoke_iiiii,Bc:invoke_iiiiii,yc:invoke_iiiiiii,wc:invoke_iij,_:invoke_vi,oa:invoke_vii,ta:invoke_viii,sa:invoke_viiii,La:invoke_viiiiiii,kj:_kill,gb:_localtime_r,m:_setTempRet0,lj:_sigaction,Hb:_strftime,Oc:_strftime_l,Ua:_time},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.dk).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.ek).apply(null,arguments)},__Z13godot_js_mainiPPc=Module.__Z13godot_js_mainiPPc=function(){return(__Z13godot_js_mainiPPc=Module.__Z13godot_js_mainiPPc=Module.asm.fk).apply(null,arguments)},_main=Module._main=function(){return(_main=Module._main=Module.asm.gk).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.hk).apply(null,arguments)},_htonl=Module._htonl=function(){return(_htonl=Module._htonl=Module.asm.ik).apply(null,arguments)},_htons=Module._htons=function(){return(_htons=Module._htons=Module.asm.jk).apply(null,arguments)},_ntohs=Module._ntohs=function(){return(_ntohs=Module._ntohs=Module.asm.kk).apply(null,arguments)},___errno_location=Module.___errno_location=function(){return(___errno_location=Module.___errno_location=Module.asm.lk).apply(null,arguments)},__emwebxr_on_input_event=Module.__emwebxr_on_input_event=function(){return(__emwebxr_on_input_event=Module.__emwebxr_on_input_event=Module.asm.mk).apply(null,arguments)},__emwebxr_on_simple_event=Module.__emwebxr_on_simple_event=function(){return(__emwebxr_on_simple_event=Module.__emwebxr_on_simple_event=Module.asm.nk).apply(null,arguments)},_fflush=Module._fflush=function(){return(_fflush=Module._fflush=Module.asm.ok).apply(null,arguments)},__get_tzname=Module.__get_tzname=function(){return(__get_tzname=Module.__get_tzname=Module.asm.pk).apply(null,arguments)},__get_daylight=Module.__get_daylight=function(){return(__get_daylight=Module.__get_daylight=Module.asm.qk).apply(null,arguments)},__get_timezone=Module.__get_timezone=function(){return(__get_timezone=Module.__get_timezone=Module.asm.rk).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.sk).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.tk).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.uk).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.vk).apply(null,arguments)},dynCall_iij=Module.dynCall_iij=function(){return(dynCall_iij=Module.dynCall_iij=Module.asm.xk).apply(null,arguments)},calledRun;function invoke_vii(e,t,n){var r=stackSave();try{wasmTable.get(e)(t,n)}catch(e){if(stackRestore(r),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_vi(e,t){var n=stackSave();try{wasmTable.get(e)(t)}catch(e){if(stackRestore(n),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_viii(e,t,n,r){var o=stackSave();try{wasmTable.get(e)(t,n,r)}catch(e){if(stackRestore(o),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_ii(e,t){var n=stackSave();try{return wasmTable.get(e)(t)}catch(e){if(stackRestore(n),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iii(e,t,n){var r=stackSave();try{return wasmTable.get(e)(t,n)}catch(e){if(stackRestore(r),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iiiii(e,t,n,r,o){var i=stackSave();try{return wasmTable.get(e)(t,n,r,o)}catch(e){if(stackRestore(i),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iiiiii(e,t,n,r,o,i){var s=stackSave();try{return wasmTable.get(e)(t,n,r,o,i)}catch(e){if(stackRestore(s),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_viiii(e,t,n,r,o){var i=stackSave();try{wasmTable.get(e)(t,n,r,o)}catch(e){if(stackRestore(i),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iiii(e,t,n,r){var o=stackSave();try{return wasmTable.get(e)(t,n,r)}catch(e){if(stackRestore(o),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_viiiiiii(e,t,n,r,o,i,s,a){var c=stackSave();try{wasmTable.get(e)(t,n,r,o,i,s,a)}catch(e){if(stackRestore(c),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iiiiiii(e,t,n,r,o,i,s){var a=stackSave();try{return wasmTable.get(e)(t,n,r,o,i,s)}catch(e){if(stackRestore(a),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function invoke_iij(e,t,n,r){var o=stackSave();try{return dynCall_iij(e,t,n,r)}catch(e){if(stackRestore(o),e!==e+0&&"longjmp"!==e)throw e;_setThrew(1,0)}}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Module.cwrap=cwrap,Module.callMain=callMain;var calledMain=!1;function callMain(e){var t=Module._main,n=(e=e||[]).length+1,r=stackAlloc(4*(n+1));HEAP32[r>>2]=allocateUTF8OnStack(thisProgram);for(var o=1;o<n;o++)HEAP32[(r>>2)+o]=allocateUTF8OnStack(e[o-1]);HEAP32[(r>>2)+n]=0;try{exit(t(n,r),!0)}catch(e){if(e instanceof ExitStatus||"unwind"==e)return;var i=e;e&&"object"==typeof e&&e.stack&&(i=[e,e.stack]),err("exception thrown: "+i),quit_(1,e)}finally{calledMain=!0}}function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),readyPromiseResolve(Module),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()))}e=e||arguments_,runDependencies>0||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}function exit(e,t){EXITSTATUS=e,keepRuntimeAlive()||(exitRuntime(),Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e))}if(dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)},Module.run=run,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!1;return Module.noInitialRun&&(shouldRunNow=!1),run(),Godot.ready}}();module.exports=Godot;const Preloader=function(){function e(e,t){function n(e,r){return e.read().then((function(o){return t.done?Promise.resolve():(o.value&&(r.enqueue(o.value),t.loaded+=o.value.length),o.done?(t.done=!0,Promise.resolve()):n(e,r))}))}const r=e.body.getReader();return new Response(new ReadableStream({start:function(e){n(r,e).then((function(){e.close()}))}}),{headers:e.headers})}function t(t,n,r,o){return n[t]={total:r||0,loaded:0,done:!1},fetch(t).then((function(r){if(!r.ok)return Promise.reject(new Error(`Failed loading file '${t}'`));const i=e(r,n[t]);return o?Promise.resolve(i):i.arrayBuffer()}))}function n(e,t=1){return e().catch((function(r){return t<=1?Promise.reject(r):new Promise((function(r,o){setTimeout((function(){n(e,t-1).then(r).catch(o)}),1e3)}))}))}const r={},o={loaded:0,total:0};let i=null;const s=function(){let e=0,t=0,n=!0,a=!0;Object.keys(r).forEach((function(o){const i=r[o];i.done||(a=!1),n&&0!==i.total?t+=i.total:(n=!1,t=0),e+=i.loaded})),e===o.loaded&&t===o.total||(o.loaded=e,o.total=t,"function"==typeof i&&i(e,t)),a||requestAnimationFrame(s)};this.animateProgress=s,this.setProgressFunc=function(e){i=e},this.loadPromise=function(e,o,i=!1){return n(t.bind(null,e,r,o,i),4)},this.preloadedFiles=[],this.preload=function(e,t,n){let r=null;if("string"==typeof e){const r=this;return this.loadPromise(e,n).then((function(n){return r.preloadedFiles.push({path:t||e,buffer:n}),Promise.resolve()}))}return e instanceof ArrayBuffer?r=new Uint8Array(e):ArrayBuffer.isView(e)&&(r=new Uint8Array(e.buffer)),r?(this.preloadedFiles.push({path:t,buffer:e}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},EngineConfig={},InternalConfig=function(e){const t={unloadAfterInit:!0,canvas:null,executable:"",mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,persistentPaths:["/userfs"],persistentDrops:!1,gdnativeLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(e){console.error.apply(console,Array.from(arguments))}};function n(e){this.update(e)}return n.prototype=t,n.prototype.update=function(e){const t=e||{};function n(e,n){return void 0===t[e]?n:t[e]}this.unloadAfterInit=n("unloadAfterInit",this.unloadAfterInit),this.onPrintError=n("onPrintError",this.onPrintError),this.onPrint=n("onPrint",this.onPrint),this.onProgress=n("onProgress",this.onProgress),this.canvas=n("canvas",this.canvas),this.executable=n("executable",this.executable),this.mainPack=n("mainPack",this.mainPack),this.locale=n("locale",this.locale),this.canvasResizePolicy=n("canvasResizePolicy",this.canvasResizePolicy),this.persistentPaths=n("persistentPaths",this.persistentPaths),this.persistentDrops=n("persistentDrops",this.persistentDrops),this.experimentalVK=n("experimentalVK",this.experimentalVK),this.focusCanvas=n("focusCanvas",this.focusCanvas),this.gdnativeLibs=n("gdnativeLibs",this.gdnativeLibs),this.fileSizes=n("fileSizes",this.fileSizes),this.args=n("args",this.args),this.onExecute=n("onExecute",this.onExecute),this.onExit=n("onExit",this.onExit)},n.prototype.getModuleConfig=function(e,t){let n=t;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!0,dynamicLibraries:[`${e}.side.wasm`],instantiateWasm:function(e,t){function r(e){t(e.instance,e.module)}return void 0!==WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(Promise.resolve(n),e).then(r):n.arrayBuffer().then((function(t){WebAssembly.instantiate(t,e).then(r)})),n=null,{}},locateFile:function(t){return t.endsWith(".worker.js")?`${e}.worker.js`:t.endsWith(".audio.worklet.js")?`${e}.audio.worklet.js`:t.endsWith(".js")?`${e}.js`:t.endsWith(".side.wasm")?`${e}.side.wasm`:t.endsWith(".wasm")?`${e}.wasm`:t}}},n.prototype.getGodotConfig=function(e){if(!(this.canvas instanceof HTMLCanvasElement)){const e=document.getElementsByTagName("canvas");if(e.length&&e[0]instanceof HTMLCanvasElement&&(this.canvas=e[0]),!this.canvas)throw new Error("No canvas found in page")}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let t=this.locale;t||(t=navigator.languages?navigator.languages[0]:navigator.language,t=t.split(".")[0]);const n=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:t,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(t){e(),"function"==typeof n&&n(t)}}},new n(e)},Engine=function(){const e=new Preloader;let t=null,n="",r=null;function o(e){this.config=new InternalConfig(e),this.rtenv=null}function i(i){const s={init:function(i){if(r)return r;if(null==t){if(!i)return r=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),r;o.load(i,this.config.fileSizes[`${i}.wasm`])}const s=this;var a;return e.setProgressFunc(this.config.onProgress),a=t,r=new Promise((function(e,t){a.then((function(t){const r=new Response(t.clone().body,{headers:[["content-type","application/wasm"]]});Godot(s.config.getModuleConfig(n,r)).then((function(t){const n=s.config.persistentPaths;t.initFS(n).then((function(n){s.rtenv=t,s.config.unloadAfterInit&&o.unload(),e()}))}))}))})),r},preloadFile:function(t,n){return e.preload(t,n,this.config.fileSizes[t])},start:function(t){this.config.update(t);const n=this;return n.init().then((function(){if(!n.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));let t={};try{t=n.config.getGodotConfig((function(){n.rtenv=null}))}catch(e){return Promise.reject(e)}n.rtenv.initConfig(t);const o=[];return n.config.gdnativeLibs.forEach((function(e){o.push(n.rtenv.loadDynamicLibrary(e,{loadAsync:!0}))})),Promise.all(o).then((function(){return new Promise((function(t,o){e.preloadedFiles.forEach((function(e){n.rtenv.copyToFS(e.path,e.buffer)})),e.preloadedFiles.length=0,n.rtenv.callMain(n.config.args),r=null,t()}))}))}))},startGame:function(e){this.config.update(e);const t=this.config.executable,n=this.config.mainPack||`${t}.pck`;this.config.args=["--main-pack",n].concat(this.config.args);const r=this;return Promise.all([this.init(t),this.preloadFile(n,n)]).then((function(){return r.start.apply(r)}))},copyToFS:function(e,t){if(null==this.rtenv)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(e,t)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return o.prototype=s,o.prototype.init=o.prototype.init,o.prototype.preloadFile=o.prototype.preloadFile,o.prototype.start=o.prototype.start,o.prototype.startGame=o.prototype.startGame,o.prototype.copyToFS=o.prototype.copyToFS,o.prototype.requestQuit=o.prototype.requestQuit,o.prototype.load=o.load,o.prototype.unload=o.unload,o.prototype.isWebGLAvailable=o.isWebGLAvailable,new o(i)}return o.load=function(r,o){return null==t&&(n=r,t=e.loadPromise(`${n}.wasm`,o,!0),requestAnimationFrame(e.animateProgress)),t},o.unload=function(){t=null},o.isWebGLAvailable=function(e=1){try{return!!document.createElement("canvas").getContext(["webgl","webgl2"][e-1])}catch(e){}return!1},i.load=o.load,i.unload=o.unload,i.isWebGLAvailable=o.isWebGLAvailable,i}();"undefined"!=typeof window&&(window.Engine=Engine)},2951:(e,t,n)=>{var r,o=n(6763);!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||s;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||s;if(e=parseFloat(e),t.ctx||h(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,s.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.volume=i._volume*e)}return t}return t._volume},mute:function(e){var t=this||s;t.ctx||h(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,s.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var i=t._howls[n]._soundById(r[o]);i&&i._node&&(i._node.muted=!!e||i._muted)}return t},stop:function(){for(var e=this||s,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||s,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,h()),e},codecs:function(e){return(this||s)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||s;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||s,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator?e._navigator.userAgent:"",o=r.match(/OPR\/([0-6].)/g),i=o&&parseInt(o[0].split("/")[1],10)<33,a=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),c=r.match(/Version\/(.*?) /),l=a&&c&&parseInt(c[1],10)<15;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||s;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var i=e._howls[o]._getSoundIds(),s=0;s<i.length;s++){var a=e._howls[o]._soundById(i[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var c=e.ctx.createBufferSource();c.buffer=e._scratchBuffer,c.connect(e.ctx.destination),void 0===c.start?c.noteOn(0):c.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),c.onended=function(){c.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||s;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){o.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||s;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&s.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&s.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var s=new i,a=function(e){e.src&&0!==e.src.length?this.init(e):o.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return s.ctx||h(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=s.usingWebAudio&&!t._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(s.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,i;if(e._format&&e._format[n])r=e._format[n];else{if("string"!=typeof(i=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(i))||(r=/\.([^.]+)$/.exec(i.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||o.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&s.codecs(r)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new c(e),e._webAudio&&u(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var o=0,i=0;i<n._sounds.length;i++)n._sounds[i]._paused&&!n._sounds[i]._ended&&(o++,r=n._sounds[i]._id);1===o?e=null:r=null}}var a=r?n._soundById(r):n._inactiveSound();if(!a)return null;if(r&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state){a._sprite=e,a._ended=!1;var c=a._id;return n._queue.push({event:"play",action:function(){n.play(c)}}),c}if(r&&!a._paused)return t||n._loadQueue("play"),a._id;n._webAudio&&s._autoResume();var l=Math.max(0,a._seek>0?a._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*u/Math.abs(a._rate),f=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var h=function(){a._paused=!1,a._seek=l,a._start=f,a._stop=p,a._loop=!(!a._loop&&!n._sprite[e][2])};if(!(l>=p)){var m=a._node;if(n._webAudio){var g=function(){n._playLock=!1,h(),n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;m.gain.setValueAtTime(e,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),d!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d)),t||setTimeout((function(){n._emit("play",a._id),n._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(a._id))}else{var _=function(){m.currentTime=l,m.muted=a._muted||n._muted||s._muted||m.muted,m.volume=a._volume*s.volume(),m.playbackRate=a._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,h(),r.then((function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",a._id)})).catch((function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):t||(n._playLock=!1,h(),n._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d):(n._endTimers[a._id]=function(){n._ended(a),m.removeEventListener("ended",n._endTimers[a._id],!1)},m.addEventListener("ended",n._endTimers[a._id],!1))}catch(e){n._emit("playerror",a._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var v=window&&window.ejecta||!m.readyState&&s._navigator.isCocoonJS;if(m.readyState>=3||v)_();else{n._playLock=!0,n._state="loading";var b=function(){n._state="loaded",_(),m.removeEventListener(s._canPlayEvent,b,!1)};m.addEventListener(s._canPlayEvent,b,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var i=n._soundById(r[o]);i&&(i._muted=e,i._interval&&n._stopFade(i._id),n._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,s.ctx.currentTime):i._node&&(i._node.muted=!!s._muted||e),n._emit("mute",i._id))}return n},volume:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]?r._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0]):o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var i=0;i<t.length;i++)(n=r._soundById(t[i]))&&(n._volume=e,o[2]||r._stopFade(t[i]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,s.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*s.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),o.volume(e,r);for(var i=o._getSoundIds(r),a=0;a<i.length;a++){var c=o._soundById(i[a]);if(c){if(r||o._stopFade(i[a]),o._webAudio&&!c._muted){var l=s.ctx.currentTime,u=l+n/1e3;c._volume=e,c._node.gain.setValueAtTime(e,l),c._node.gain.linearRampToValueAtTime(t,u)}o._startFadeInterval(c,e,t,n,i[a],void 0===r)}}return o},_startFadeInterval:function(e,t,n,r,o,i){var s=this,a=t,c=n-t,l=Math.abs(c/.01),u=Math.max(4,l>0?r/l:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var o=(Date.now()-d)/r;d=Date.now(),a+=c*o,a=Math.round(100*a)/100,a=c<0?Math.max(n,a):Math.min(n,a),s._webAudio?e._volume=a:s.volume(a,e._id,!0),i&&(s._volume=a),(n<t&&a<=n||n>t&&a>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(n,e._id),s._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r._getSoundIds(t),s=0;s<i.length;s++)(n=r._soundById(i[s]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(i[s])&&(r.pause(i[s],!0),r.play(i[s],!0)))));return r},rate:function(){var e,t,n,r=this,o=arguments;if(0===o.length?t=r._sounds[0]._id:1===o.length?r._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0]):2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),"number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var i=0;i<t.length;i++)if(n=r._soundById(t[i])){r.playing(t[i])&&(n._rateSeek=r.seek(t[i]),n._playStart=r._webAudio?s.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,s.ctx.currentTime):n._node&&(n._node.playbackRate=e);var a=r.seek(t[i]),c=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-a)/Math.abs(n._rate);!r._endTimers[t[i]]&&n._paused||(r._clearTimer(t[i]),r._endTimers[t[i]]=setTimeout(r._ended.bind(r,n),c)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length?n._sounds.length&&(t=n._sounds[0]._id):1===r.length?n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0])):2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10)),void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var o=n._soundById(t);if(o){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var i=n.playing(t)?s.ctx.currentTime-o._playStart:0,a=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(a+i*Math.abs(o._rate))}return o._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),o._seek=e,o._ended=!1,n._clearTimer(t),n._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=e);var l=function(){c&&n.play(t,!0),n._emit("seek",t)};if(c&&!n._webAudio){var u=function(){n._playLock?setTimeout(u,0):l()};setTimeout(u,0)}else l()}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(s._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),s._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=s._howls.indexOf(e);r>=0&&s._howls.splice(r,1);var o=!0;for(n=0;n<s._howls.length;n++)if(s._howls[n]._src===e._src||e._src.indexOf(s._howls[n]._src)>=0){o=!1;break}return l&&o&&delete l[e._src],s.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var s=n===o[i].id;if(t===o[i].fn&&s||!t&&s){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var a=Object.keys(r);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(r[a[i]])&&(r[a[i]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=s.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),s._autoSuspend()),t._webAudio||r||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new c(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=s.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,s.ctx.currentTime),this},_cleanBuffer:function(e){var t=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=s._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var c=function(e){this._parent=e,this.init()};c.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=s._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),e._node.gain.setValueAtTime(n,s.ctx.currentTime),e._node.paused=!0,e._node.connect(s.masterGain)):s.noAudio||(e._node=s._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(s._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*s.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++s._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(s._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void p(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);f(r.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){i.setRequestHeader(t,e._xhr.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?f(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},d(i)}},d=function(e){try{e.send()}catch(t){e.onerror()}},f=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(l[t._src]=e,p(t,e)):n()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(e).then(r).catch(n):s.ctx.decodeAudioData(e,r,n)},p=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},h=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(e){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),t=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!r&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(r=function(){return{Howler:s,Howl:a}}.apply(t,[]))||(e.exports=r),void 0!==n.g?(n.g.HowlerGlobal=i,n.g.Howler=s,n.g.Howl=a,n.g.Sound=c):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=s,window.Howl=a,window.Sound=c)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,o="number"!=typeof o?a[4]:o,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(s._orientation=[e,t,n,r,o,i],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,t,n,r,o,i),s)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var i=r._getSoundIds(n),s=0;s<i.length;s++){var a=r._soundById(i[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof e)return i._pos;i._pos=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var c=i._soundById(s[a]);if(c){if("number"!=typeof e)return c._pos;c._pos=[e,n,r],c._node&&(c._panner&&!c._panner.pan||t(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(e,n,r)),i._emit("pos",c._id)}}return i},Howl.prototype.orientation=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var c=i._soundById(s[a]);if(c){if("number"!=typeof e)return c._orientation;c._orientation=[e,n,r],c._node&&(c._panner||(c._pos||(c._pos=i._pos||[0,0,-.5]),t(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(e,n,r)),i._emit("orientation",c._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(r=o._soundById(s[a])){var c=r._pannerAttr;c={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:c.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:c.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:c.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:c.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:c.panningModel};var l=r._panner;l?(l.coneInnerAngle=c.coneInnerAngle,l.coneOuterAngle=c.coneOuterAngle,l.coneOuterGain=c.coneOuterGain,l.distanceModel=c.distanceModel,l.maxDistance=c.maxDistance,l.refDistance=c.refDistance,l.rolloffFactor=c.rolloffFactor,l.panningModel=c.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),t(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},8467:function(e,t,n){var r=n(6763),o=n(3270);this.undefined=function(){var e,t;(function(n){var r,o,i,s,a={},c={},l={},u={},d=Object.prototype.hasOwnProperty,f=[].slice;function p(e,t){return d.call(e,t)}function h(e,t){var n,r,o,i,s,a,c,u,d,f,p=t&&t.split("/"),h=l.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=(p=p.slice(0,p.length-1)).concat(e.split("/")),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&h){for(u=(n=e.split("/")).length;u>0;u-=1){if(r=n.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if((o=h[p.slice(0,d).join("/")])&&(o=o[r])){i=o,s=u;break}if(i)break;!a&&m&&m[r]&&(a=m[r],c=u)}!i&&a&&(i=a,s=c),i&&(n.splice(0,s,i),e=n.join("/"))}return e}function m(e,t){return function(){return o.apply(n,f.call(arguments,0).concat([e,t]))}}function g(e){return function(t){a[e]=t}}function _(e){if(p(c,e)){var t=c[e];delete c[e],u[e]=!0,r.apply(n,t)}if(!p(a,e)&&!p(u,e))throw new Error("No "+e);return a[e]}function v(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return l&&l.config&&l.config[e]||{}}}i=function(e,t){var n,r=v(e),o=r[0];return e=r[1],o&&(n=_(o=h(o,t))),o?e=n&&n.normalize?n.normalize(e,function(e){return function(t){return h(t,e)}}(t)):h(e,t):(o=(r=v(e=h(e,t)))[0],e=r[1],o&&(n=_(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},s={require:function(e){return m(e)},exports:function(e){var t=a[e];return void 0!==t?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:b(e)}}},r=function(e,t,r,o){var l,d,f,h,v,b,y=[];if(o=o||e,"function"==typeof r){for(t=!t.length&&r.length?["require","exports","module"]:t,v=0;v<t.length;v+=1)if("require"===(d=(h=i(t[v],o)).f))y[v]=s.require(e);else if("exports"===d)y[v]=s.exports(e),b=!0;else if("module"===d)l=y[v]=s.module(e);else if(p(a,d)||p(c,d)||p(u,d))y[v]=_(d);else{if(!h.p)throw new Error(e+" missing "+d);h.p.load(h.n,m(o,!0),g(d),{}),y[v]=a[d]}f=r.apply(a[e],y),e&&(l&&l.exports!==n&&l.exports!==a[e]?a[e]=l.exports:f===n&&b||(a[e]=f))}else e&&(a[e]=r)},e=o=function(e,t,a,c,u){return"string"==typeof e?s[e]?s[e](t):_(i(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=a,a=null):e=n),t=t||function(){},"function"==typeof a&&(a=c,c=u),c?r(n,e,t,a):setTimeout((function(){r(n,e,t,a)}),4),o)},o.config=function(e){return(l=e).deps&&o(l.deps,l.callback),o},(t=function(e,t,n){t.splice||(n=t,t=[]),p(a,e)||p(c,e)||(c[e]=[e,t,n])}).amd={jQuery:!0}})(),t("almond",(function(){})),t("worker-functions",[],(function(){var e={getBaseURL:function(){return this.config.baseURL},setConfig:function(e){this.config=e},oggvorbisEncoder:function(){this.onmessage=function(e){switch(e.data.cmd){case"encode":this.encoder.encode(e.data.buffers);break;case"done":var t=encoder.finish();self.postMessage({blob:t});break;case"init":var n=e.data.baseURL+"public/javascripts/recorder/";importScripts(n+"libvorbis.js"),this.encoder=new OggVorbisEncoder(e.data.originalSampleRate||e.data.encoderSampleRate||48e3,e.data.numberOfChannels||1,e.data.hasOwnProperty("quality")?e.data.quality:0)}},this.log=function(){}},oggopusEncoder:function(){this.onmessage=function(t){switch(t.data.cmd){case"encodeAll":this.encoder.encodeAll(t.data.buffers);break;case"encode":this.encoder.encode(t.data.buffers);break;case"done":this.log("done msg received"),this.encoder.encodeFinalFrame(),this.close();break;case"init":var n=t.data.baseURL+"public/javascripts/recorder/";importScripts(n+"libopus.js",n+"resampler.js"),this.encoder=new e(t.data,this)}},this.log=function(){var e=["Opus Worker > "].concat(Array.prototype.slice.call(arguments));e=e.join(""),this.postMessage({cmd:"log",msg:e})};var e=function(e,t){this.worker=t,this.numberOfChannels=e.numberOfChannels||1,this.originalSampleRate=e.originalSampleRate,this.encoderSampleRate=e.encoderSampleRate||48e3,this.maxBuffersPerPage=e.maxBuffersPerPage||40,this.encoderApplication=e.encoderApplication||2048,this.encoderFrameSize=e.encoderFrameSize||20,this.bitRate=e.bitRate,this.resampler=new Resampler({resampledRate:this.encoderSampleRate,originalSampleRate:this.originalSampleRate,numberOfChannels:this.numberOfChannels}),this.pageIndex=0,this.granulePosition=0,this.segmentData=new Uint8Array(65025),this.segmentDataIndex=0,this.segmentTable=new Uint8Array(255),this.segmentTableIndex=0,this.buffersInPage=0,this.initChecksumTable(),this.initCodec(),this.generateIdPage(),this.generateCommentPage(),1===this.numberOfChannels&&(this.interleave=function(e){return e[0]})};e.prototype.encodeAll=function(e){for(var t=0;t<e.length;t++)this.encode([e[t]]);this.encodeFinalFrame(),this.worker.close()},e.prototype.encode=function(e){var t=this.resample(e);t=this.interleave(t);for(var n=0;n<t.length;){var r=Math.min(this.encoderBufferLength-this.encoderBufferIndex,t.length-n);if(this.encoderBuffer.set(t.subarray(n,n+r),this.encoderBufferIndex),n+=r,this.encoderBufferIndex+=r,this.encoderBufferIndex===this.encoderBufferLength){var o=_opus_encode_float(this.encoder,this.encoderBufferPointer,this.encoderSamplesPerChannelPerPacket,this.encoderOutputPointer,this.encoderOutputMaxLength);this.segmentPacket(o),this.encoderBufferIndex=0}}this.buffersInPage++,this.buffersInPage>=this.maxBuffersPerPage&&this.generatePage()},e.prototype.encodeFinalFrame=function(){this.encode([new Float32Array(this.encoderBufferLength-this.encoderBufferIndex)]),this.headerType+=4,this.generatePage()},e.prototype.getChecksum=function(e){for(var t=0,n=0;n<e.length;n++)t=t<<8^this.checksumTable[t>>>24&255^e[n]];return t>>>0},e.prototype.generateCommentPage=function(){var e=new DataView(this.segmentData.buffer);e.setUint32(0,1937076303,!0),e.setUint32(4,1936154964,!0),e.setUint32(8,8,!0),e.setUint32(12,1868784978,!0),e.setUint32(16,1919247474,!0),e.setUint32(20,0,!0),this.segmentTableIndex=1,this.segmentDataIndex=this.segmentTable[0]=24,this.headerType=0,this.generatePage()},e.prototype.generateIdPage=function(){var e=new DataView(this.segmentData.buffer);e.setUint32(0,1937076303,!0),e.setUint32(4,1684104520,!0),e.setUint8(8,1,!0),e.setUint8(9,this.numberOfChannels,!0),e.setUint16(10,3840,!0),e.setUint32(12,this.originalSampleRate,!0),e.setUint16(16,0,!0),e.setUint8(18,0,!0),this.segmentTableIndex=1,this.segmentDataIndex=this.segmentTable[0]=19,this.headerType=2,this.generatePage()},e.prototype.generatePage=function(){var e=this.lastPositiveGranulePosition===this.granulePosition?-1:this.granulePosition,t=new ArrayBuffer(27+this.segmentTableIndex+this.segmentDataIndex),n=new DataView(t),r=new Uint8Array(t);n.setUint32(0,1399285583,!0),n.setUint8(4,0,!0),n.setUint8(5,this.headerType,!0),n.setUint32(6,e,!0),(e>4294967296||e<0)&&n.setUint32(10,Math.floor(e/4294967296),!0),n.setUint32(14,0,!0),n.setUint32(18,this.pageIndex++,!0),n.setUint8(26,this.segmentTableIndex,!0),r.set(this.segmentTable.subarray(0,this.segmentTableIndex),27),r.set(this.segmentData.subarray(0,this.segmentDataIndex),27+this.segmentTableIndex),n.setUint32(22,this.getChecksum(r),!0),this.worker.postMessage(r.buffer),this.segmentTableIndex=0,this.segmentDataIndex=0,this.buffersInPage=0,e>0&&(this.lastPositiveGranulePosition=e)},e.prototype.initChecksumTable=function(){this.checksumTable=[];for(var e=0;e<256;e++){for(var t=e<<24,n=0;n<8;n++)t=2147483648&t?t<<1^79764919:t<<1;this.checksumTable[e]=4294967295&t}},e.prototype.initCodec=function(){if(this.encoder=_opus_encoder_create(this.encoderSampleRate,this.numberOfChannels,this.encoderApplication,allocate(4,"i32",ALLOC_STACK)),this.bitRate){var e=_malloc(4);HEAP32[e>>>2]=this.bitRate,_opus_encoder_ctl(this.encoder,4002,e),_free(e)}this.encoderBufferIndex=0,this.encoderSamplesPerChannelPerPacket=this.encoderSampleRate*this.encoderFrameSize/1e3,this.encoderBufferLength=this.encoderSamplesPerChannelPerPacket*this.numberOfChannels,this.encoderBufferPointer=_malloc(4*this.encoderBufferLength),this.encoderBuffer=HEAPF32.subarray(this.encoderBufferPointer>>2,(this.encoderBufferPointer>>2)+this.encoderBufferLength),this.encoderOutputMaxLength=4e3,this.encoderOutputPointer=_malloc(this.encoderOutputMaxLength),this.encoderOutputBuffer=HEAPU8.subarray(this.encoderOutputPointer,this.encoderOutputPointer+this.encoderOutputMaxLength)},e.prototype.interleave=function(e){for(var t=new Float32Array(e[0].length*this.numberOfChannels),n=0;n<e[0].length;n++)for(var r=0;r<this.numberOfChannels;r++)t[n*this.numberOfChannels+r]=e[r][n];return t},e.prototype.resample=function(e){for(var t=[],n=0;n<this.numberOfChannels;n++)t.push(this.resampler.resample(e[n],n));return t},e.prototype.segmentPacket=function(e){for(var t=0;e>=0;){255===this.segmentTableIndex&&(this.generatePage(),this.headerType=1);var n=Math.min(e,255);this.segmentTable[this.segmentTableIndex++]=n,this.segmentData.set(this.encoderOutputBuffer.subarray(t,t+n),this.segmentDataIndex),this.segmentDataIndex+=n,t+=n,e-=255}this.granulePosition+=48*this.encoderFrameSize,255===this.segmentTableIndex&&(this.generatePage(),this.headerType=0)}},oggopusDecoder:function(){this.onmessage=function(t){switch(t.data.cmd){case"decode":this.decoder.decode(t.data.pages);break;case"done":this.decoder.sendLastBuffer(),this.close();break;case"init":var n=t.data.baseURL+"public/javascripts/recorder/";importScripts(n+"libopus.js",n+"resampler.js"),this.decoder=new e(t.data,this)}},this.log=function(){var e=Array.prototype.slice.call(arguments);e=e.join(""),this.postMessage({cmd:"log",msg:e})};var e=function(e,t){this.worker=t,this.bufferLength=e.bufferLength||4096,this.decoderSampleRate=e.decoderSampleRate||48e3,this.outputBufferSampleRate=e.outputBufferSampleRate||48e3,this.outputBuffers=[]};e.prototype.decode=function(e){var t=new DataView(e.buffer);this.getPageBoundaries(t).map((function(n){var r=t.getUint8(n+5,!0),o=t.getUint32(n+18,!0);if(2&r&&(this.numberOfChannels=t.getUint8(n+37,!0),this.init()),o>1)for(var i=t.getUint8(n+26,!0),s=n+27+i,a=0;a<i;a++){var c=t.getUint8(n+27+a,!0);if(this.decoderBuffer.set(e.subarray(s,s+=c),this.decoderBufferIndex),this.decoderBufferIndex+=c,c<255){var l=_opus_decode_float(this.decoder,this.decoderBufferPointer,this.decoderBufferIndex,this.decoderOutputPointer,this.decoderOutputMaxLength,0);this.sendToOutputBuffers(this.decoderOutputBuffer.subarray(0,l*this.numberOfChannels)),this.decoderBufferIndex=0}}4&r&&(this.sendLastBuffer(),this.worker.close())}),this)},e.prototype.deinterleave=function(e){for(var t=[],n=0,r=0;r<this.numberOfChannels;r++)t.push(new Float32Array(e.length/this.numberOfChannels));for(r=0;r<e.length;r++){var o=r%this.numberOfChannels;t[o][n]=e[r],n+=o==t.length-1?1:0}return t},e.prototype.getPageBoundaries=function(e){for(var t=[],n=0;n<e.byteLength-32;n++)1399285583==e.getUint32(n,!0)&&t.push(n);return t},e.prototype.init=function(){this.resetOutputBuffers(),this.initCodec(),this.resampler=new Resampler({resampledRate:this.outputBufferSampleRate,originalSampleRate:this.decoderSampleRate,numberOfChannels:this.numberOfChannels}),1===this.numberOfChannels&&(this.deinterleave=function(e){return[e]})},e.prototype.initCodec=function(){this.decoder=_opus_decoder_create(this.decoderSampleRate,this.numberOfChannels,allocate(4,"i32",ALLOC_STACK)),this.decoderBufferMaxLength=4e3,this.decoderBufferPointer=_malloc(this.decoderBufferMaxLength),this.decoderBuffer=HEAPU8.subarray(this.decoderBufferPointer,this.decoderBufferPointer+this.decoderBufferMaxLength),this.decoderBufferIndex=0,this.decoderOutputMaxLength=this.decoderSampleRate*this.numberOfChannels*120/1e3,this.decoderOutputPointer=_malloc(4*this.decoderOutputMaxLength),this.decoderOutputBuffer=HEAPF32.subarray(this.decoderOutputPointer>>2,(this.decoderOutputPointer>>2)+this.decoderOutputMaxLength)},e.prototype.resetOutputBuffers=function(){this.outputBuffers=[],this.outputBufferArrayBuffers=[],this.outputBufferIndex=0;for(var e=0;e<this.numberOfChannels;e++)this.outputBuffers.push(new Float32Array(this.bufferLength)),this.outputBufferArrayBuffers.push(this.outputBuffers[e].buffer)},e.prototype.sendLastBuffer=function(){this.sendToOutputBuffers(new Float32Array((this.bufferLength-this.outputBufferIndex)*this.numberOfChannels),!0)},e.prototype.sendToOutputBuffers=function(e,t){t=t||!1;for(var n=this.deinterleave(e),r=0,o=0;o<n.length;o++)n[o]=this.resampler.resample(n[o],o);for(;r<n[0].length;){for(var i=Math.min(n[0].length-r,this.bufferLength-this.outputBufferIndex),s=0;s<n.length;s++)this.outputBuffers[s].set(n[s].subarray(r,r+i),this.outputBufferIndex);if(this.outputBufferIndex+=i,r+=i,this.outputBufferIndex==this.bufferLength||t){var a={outputBuffer:this.outputBuffers[0].buffer,cmd:t?"decoded":"decode"};this.worker.postMessage(a),this.resetOutputBuffers()}}}},wavEncoder:function(){this.onmessage=function(t){switch(t.data.cmd){case"encode":this.encoder.encode(t.data.samples);break;case"close":this.close();break;case"init":this.encoder=new e(t.data,this)}},this.log=function(){var e=Array.prototype.slice.call(arguments);e=e.join(""),this.postMessage({cmd:"log",msg:e})};var e=function(e,t){this.worker=t,this.config=e};e.prototype.encode=function(e){e=this.interleave(e,e);var t=new ArrayBuffer(44+2*e.length),n=this.config.platformInfo.isIdevice?16e3:44100,r=new DataView(t);this.writeString(r,0,"RIFF"),r.setUint32(4,36+2*e.length,!0),this.writeString(r,8,"WAVE"),this.writeString(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,2,!0),r.setUint32(24,n,!0),r.setUint32(28,4*n,!0),r.setUint16(32,4,!0),r.setUint16(34,16,!0),this.writeString(r,36,"data"),r.setUint32(40,2*e.length,!0),this.floatTo16BitPCM(r,44,e),this.worker.postMessage({cmd:"encoded",data:r.buffer})},e.prototype.interleave=function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),o=0,i=0;o<n;)r[o++]=e[i],r[o++]=t[i],i++;return r},e.prototype.floatTo16BitPCM=function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var o=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,o<0?32768*o:32767*o,!0)}},e.prototype.writeString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}},createWorker:function(t,n){var o,i,s=(n=n||!1)?"blob":"loaded .js";try{o=n?URL.createObjectURL(new Blob(["(",e[t].toString(),")()"],{type:"application/javascript"})):this.getBaseURL()+"public/javascripts/recorder/"+t+".js",i=new Worker(o)}catch(e){r.log("ERROR! Worker-Functions >",t," create worker from",s," e:",e),!0===n&&(this.config&&(this.config.useBlob=!1),o=this.getBaseURL()+"public/javascripts/recorder/"+t+".js",i=new Worker(o))}return i}};return e})),t("encoder",["./worker-functions"],(function(e){return function(t,n){var i=n.baseURL,s=null,a=null,c=null,l=(n.useBlob,{cmd:"init",bufferLength:n.recordingOptions.bufferSize,monitorGain:0,numberOfChannels:n.recordingOptions.numInputChannels,encoderSampleRate:48e3,stream:!1,maxBuffersPerPage:40,encoderApplication:2048,encoderFrameSize:20,streamOptions:{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},baseURL:i}),u={cmd:"init",bufferLength:n.recordingOptions.bufferSize,monitorGain:0,numberOfChannels:n.recordingOptions.numInputChannels,encoderSampleRate:48e3,stream:!1,maxBuffersPerPage:40,encoderApplication:2048,encoderFrameSize:20,quality:n.vorbisQuality,streamOptions:{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}},baseURL:i};function d(){o.each([s,a,c],(function(e,t){t&&t.terminate()}))}function f(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return window.btoa(t).replace(/\s+/g,"")}e.setConfig(n);var p,h,m,g=(h=[],m=0,function(t,r,i){if(!a){h=[],m=0,p=o.Deferred(),a=e.createWorker("oggopusEncoder",n.useBlob);var s=o.extend({},l);s.originalSampleRate=n.recordingOptions.sampleRate,a.postMessage(s);a.onmessage=function(e){var t=e.data;"log"===t.cmd?v(t.msg):function(e){var t=new Uint8Array(e);if(h.push(t),m+=t.length,4&t[5]){v("final page encoded");for(var n=new Uint8Array(m),r=0,o=0;o<h.length;o++)n.set(h[o],r),r+=h[o].length;var i=f(n);h=[],a.terminate(),a.onmessage=null,a.onerror=null,a=null,p.resolve(i),p=null}}(t)}}return r?i?setTimeout((function(){a?(v("done msg sent"),a.postMessage({cmd:"done"})):p&&"pending"===p.state()&&p.reject()}),0):a.postMessage({cmd:"encode",buffers:t}):a.postMessage({cmd:"encodeAll",buffers:t}),p}),_=function(){var t,i=!1;return function(s,a,l){if(v("encodeVorbis","\n\tprogressive:",a,"\n\tend:",l,"\n\tisDone:",i,"\n\t!!vorbisEncoder:",!!c,"\n\tbuffers:",s),!c){t=o.Deferred(),c=e.createWorker("oggvorbisEncoder",n.useBlob);var d=o.extend({},u);d.originalSampleRate=n.recordingOptions.sampleRate,d.quality=n.hasOwnProperty("vorbisQuality")?n.vorbisQuality:0,i=!1,c.postMessage(d);window.URL=window.URL||window.webkitURL,c.onmessage=function(e){var n,r;n=e.data.blob,(r=new FileReader).onload=function(){var e=f(new Uint8Array(this.result));c.terminate(),c.onmessage=null,c.onerror=null,c=null,t.resolve(e),t=null},r.readAsArrayBuffer(n)},c.onerror=function(e){r.error("Audio recorder > vorbisEncoder error:",e.message)}}return l?(i=!0,c.postMessage({cmd:"done"})):i||c.postMessage({cmd:"encode",buffers:s}),t}}();function v(){var e=["---- Encoder >"].concat(Array.prototype.slice.call(arguments));r.log.apply(r,e)}return{encode:function(t,a,c,l,u){switch(t){case"wav":return function(t){s=e.createWorker("wavEncoder",n.useBlob);var a=o.Deferred();return s.onmessage=function(e){switch(e.data.cmd){case"close":break;case"encoded":var t=e.data.data;s.terminate(),a.resolve(t)}},s.onerror=function(e){r.error("Audio recorder > wavEncoder error:",e.message)},s.postMessage(o.extend({},n,{cmd:"init"})),s.postMessage({cmd:"encode",samples:t,baseURL:i}),a}(c);case"spx":return encodeSPXB64(c,9);case"opus":return g(c,l,u);case"vorbis":return _(c,l,u);default:r.error("Audio Recorder Encoder > codec:",t,", is unsupported")}},encodeB64:f,terminateAll:d,finalize:function(){d(),a=null,s=null,c=null}}}})),t("decoder",["./worker-functions"],(function(e){return function(t,n){var i=null,s=n.baseURL;function a(){o.each([i],(function(e,t){t&&t.terminate()}))}function c(e){for(var t=atob(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Uint8Array(n)}return e.setConfig(n),{decode:function(t,a){switch(t){case"spx":return decodeSPXB64(a);case"opus":return function(t){var a=[],l=0,u=o.Deferred();i=e.createWorker("oggopusDecoder",n.useBlob);var d={cmd:"init",bufferLength:n.recordingOptions.bufferSize,outputBufferSampleRate:n.recordingOptions.sampleRate,baseURL:s};return i.onmessage=function(e){var t=e.data;switch(t.cmd){case"log":r.log(t.msg);break;case"decode":a.push(new Float32Array(t.outputBuffer)),l+=d.bufferLength;break;case"decoded":a.push(new Float32Array(t.outputBuffer)),l+=d.bufferLength,i.terminate(),samples=function(e,t){for(var n=new Float32Array(t),r=0,o=0;o<e.length;o++){var i=e[o];n.set(i,r),r+=i.length}return n}(a,l),u.resolve(samples)}},i.onerror=function(e){e.preventDefault(),r.log("Audio recorder > opusDecoder error:",e)},i.postMessage(d),i.postMessage({cmd:"decode",pages:c(t),baseURL:s}),u}(a);default:r.error("Audio Recorder Encoder > codec:",t,", is unsupported")}},decodeB64:c,finalize:function(){a(),i=null},terminateAll:a}}})),t("webrtc-recorder",[],(function(){return function(e,t,n){var i,s,a,c,l,u,d=MediaRecorder&&"testNav"===t.platformInfo.testNavMode&&(t.platformInfo.isChromeOS||t.platformInfo.isWindowsOS||t.platformInfo.isMacOS||t.platformInfo.isIdevice||t.platformInfo.usingFF||t.platformInfo.usingChrome);function f(){if(window.TN8=window.TN8||{},!window.TN8.AudioContext){var e=window.AudioContext||window.webkitAudioContext;window.TN8.AudioContext=new e}return window.TN8.AudioContext}function p(){if(u=!1,e.trigger("audioenabled"),c)try{c.start()}catch(e){TN8&&TN8.Application&&TN8.Application.error.logError(e.name+" "+e.message),n.triggerMicFailureError()}else window.TN8.AudioNode&&(window.TN8.AudioNode.onaudioprocess=h)}function h(n){if(i){var r=n.inputBuffer.getChannelData(0);i.push(new Float32Array(r)),s+=t.recordingOptions.bufferSize,e.trigger("audioinput",[r])}}function m(r){window.stream=r,d?(function(r){window.TN8&&window.TN8.AudioNode&&(i=window.TN8&&window.TN8.AudioNode,s=window.mediaStreamGlobal,i&&(i.onaudioprocess=null,i.disconnect(),delete window.TN8.AudioNode),s&&t.platformInfo.isChromeOS&&(s.getTracks().forEach((function(e){e.stop()})),delete window.mediaStreamGlobal));var i,s;var a=f(),d=a.createMediaStreamSource(r),p=a.createScriptProcessor(),h=t.platformInfo.usingFF?"audio/ogg;codecs=opus":t.platformInfo.usingSafari?"audio/mp4":"audio/webm;codecs=opus";c=new MediaRecorder(r,{audioBitsPerSecond:64e3,mimeType:h}),d.connect(p),p.connect(a.destination);var m=function(t){if(e){var n=new FileReader;n.readAsDataURL(t.originalEvent.data),o(n).one("loadend",(function(){var t=n.result.split(",")[1];e.trigger("audioEncodedToB64",[t]),l=!1}))}},g=function(e){"record"===n.getState()&&(u=!0),_(),p.onaudioprocess=null,d.disconnect(),p.disconnect(),o(c).off("dataavailable"),o(c).off("stop")},_=function(){r.getTracks().forEach((function(e){e.stop()}))},v=function(t){e&&e.trigger("audioinput",[t.inputBuffer.getChannelData(0)])};p.onaudioprocess=v,o(c).on("dataavailable",m),o(c).on("stop",g),o(document).one("micCheck.micSelected",_),a.resume()}(r),t.platformInfo.isChromeOS||window.mediaStreamGlobal||(window.mediaStreamGlobal=r)):function(e){var n=f(),r=t.recordingOptions||{},o=n.createMediaStreamSource(e),i=n.createScriptProcessor(r.bufferSize,r.numInputChannels,r.numOutputChannels);o.connect(i),i.connect(n.destination),window.TN8=window.TN8||{},window.TN8.AudioNode=window.TN8.AudioNode||i,window.mediaStreamGlobal=e,n.resume()}(r),p()}function g(e){r.log("----- navigator.getUserMedia error:",e)}function _(){i=[],s=0}return(a=o.Deferred()).resolve(),{startRecording:function(){_(),window.TN8.AudioContext.resume(),!d&&window.TN8&&!window.TN8.MicDeviceId&&window.TN8.AudioNode?p():function(){window.stream&&window.stream.getTracks().forEach((function(e){e.stop()}));var e={audio:!0,video:!1},n=window.TN8&&window.TN8.MicDeviceId;n&&(e={audio:{deviceId:{exact:n}},video:!1}),n&&""!==n||!window.mediaStreamGlobal||t.platformInfo.isChromeOS?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e).then(m).catch(g):navigator.getUserMedia(e,m,g):m(window.mediaStreamGlobal)}()},stopRecording:function(){if(c)try{c.stop(),l=!0}catch(e){if("InvalidStateError"===e.name&&l)return;if("InvalidStateError"===e.name&&u)return;TN8&&TN8.Application&&TN8.Application.error.logError(e.name+" "+e.message),n.triggerMicFailureError()}else window.TN8.AudioNode&&window.TN8.AudioNode.onaudioprocess===h?window.TN8.AudioNode.onaudioprocess=null:window.TN8.AudioNode||c||e.trigger("audioEncodedToB64")},usingMediaRecorder:function(){return d},getRawData:function(){return function(e,t){for(var n=new Float32Array(t),r=0,o=0;o<e.length;o++){var i=e[o];n.set(i,r),r+=i.length}return n}(i,s)},hasRawData:function(){return void 0!==i&&"[object Array]"===Object.prototype.toString.call(i)&&i.length>0&&s>0},onAudioRemoved:function(){_()},finalize:function(){window.TN8&&window.TN8.AudioNode&&(window.TN8.AudioNode.onaudioprocess=null),i=null,e=null,c&&("recording"!==c.state&&"paused"!==c.state||c.stop(),c=null)},getSampleRate:function(){return f().sampleRate},initDeferred:a}}})),t("timer",[],(function(){return{start:function(e,t,n,r){var o=e/100*(t/10),i=e/o,s=0,a=(new Date).getTime();return window.setTimeout((function e(){if(s++==o)r(o,s);else{var t=(new Date).getTime()-a-s*i,c=window.setTimeout(e,i-t);n(o,s,c)}}),i)},stop:function(e){window.clearTimeout(e)}}})),function(){"use strict";function e(t){var n,r,o,i=t.length,s="",a=e.a,c=0;if(1<i)for(;c<i-2;){if(n=t.charCodeAt(c),r=t.charCodeAt(c+1),o=t.charCodeAt(c+2),c+=3,255<n||255<r||255<o)throw Error("INVALID_CHARACTER_ERR");s+=a[n>>2&63]+a[r>>4&15|n<<4&63]+a[o>>6&3|r<<2&63]+a[63&o]}if(c<i){if(255<(n=t.charCodeAt(c++)))throw Error("INVALID_CHARACTER_ERR");if(s+=a[n>>2&63],c<i){if(255<(r=t.charCodeAt(c)))throw Error("INVALID_CHARACTER_ERR");s+=a[r>>4&15|n<<4&63]+a[r<<2&63]}else s+=a[n<<4&63]}return 0<(n=4*((i+2)/3|0)-s.length)&&(s+=2===n?"==":"="),s}function t(e){for(var n,r,o=0,i=0,s=e.length,a="",c=0,l=t.b,u=t.c;"="===e.charAt(s-1);)--s;if(1==s%4||0<e.length&&0===s)throw Error("INVALID_CHARACTER_ERR");for(;i<s;){if(-1===(n=256>(r=e.charCodeAt(i++))?u[r]:-1))throw Error("INVALID_CHARACTER_ERR");o=(o<<6)+n,8<=(c+=6)&&(a+=l[r=o>>(c-=8)],o^=r<<c)}return a}e.a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");var n,r=t,o=Array(256);for(n=0;255>n;++n)o[n]=String.fromCharCode(n);r.b=o;var i,s=t,a=e.a,c=new("undefined"!=typeof Int16Array?Int16Array:Array)(256),l=t.b;for(i=0;255>i;++i)c[i]=a.indexOf(l[i]);s.c=c;var u,d,f,p=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(64);for(u=0,d=p.length;u<d;++u)p[u]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(u);for(new("undefined"!=typeof Int16Array?Int16Array:Array)(256),p instanceof Array||Array.prototype.slice.call(p),f=0;255>f;++f);void 0===this.atob&&(this.atob=t),void 0===this.btoa&&(this.btoa=e)}.call(this),t("polyfills/base64_polyfill.min",(function(){})),function(e){"use strict";var t=void 0;function n(e){switch(typeof e){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===e?"null":"object"}}function r(e){return Object.prototype.toString.call(e).replace(/^\[object *|\]$/g,"")}function o(e){return"function"==typeof e}function i(e){if(null===e||e===t)throw TypeError();return Object(e)}function s(e){return 0|e}function a(e){return e>>>0}var c,l,u=Math.LN2,d=Math.abs,f=Math.floor,p=Math.log,h=Math.max,m=Math.min,g=Math.pow,_=Math.round;function v(e,t){var n=32-t;return e<<n>>n}function b(e,t){var n=32-t;return e<<n>>>n}function y(e){return[255&e]}function w(e){return v(e[0],8)}function S(e){return[255&e]}function E(e){return b(e[0],8)}function T(e){return[(e=_(Number(e)))<0?0:e>255?255:255&e]}function A(e){return[e>>8&255,255&e]}function x(e){return v(e[0]<<8|e[1],16)}function L(e){return[e>>8&255,255&e]}function P(e){return b(e[0]<<8|e[1],16)}function k(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function C(e){return v(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function R(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function G(e){return b(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function F(e,t,n){var r,o,i,s,a,c,l,h=(1<<t-1)-1;function _(e){var t=f(e),n=e-t;return n<.5?t:n>.5||t%2?t+1:t}for(e!=e?(o=(1<<t)-1,i=g(2,n-1),r=0):e===1/0||e===-1/0?(o=(1<<t)-1,i=0,r=e<0?1:0):0===e?(o=0,i=0,r=1/e==-1/0?1:0):(r=e<0,(e=d(e))>=g(2,1-h)?(o=m(f(p(e)/u),1023),(i=_(e/g(2,o)*g(2,n)))/g(2,n)>=2&&(o+=1,i=1),o>h?(o=(1<<t)-1,i=0):(o+=h,i-=g(2,n))):(o=0,i=_(e/g(2,1-h-n)))),a=[],s=n;s;s-=1)a.push(i%2?1:0),i=f(i/2);for(s=t;s;s-=1)a.push(o%2?1:0),o=f(o/2);for(a.push(r?1:0),a.reverse(),c=a.join(""),l=[];c.length;)l.push(parseInt(c.substring(0,8),2)),c=c.substring(8);return l}function I(e,t,n){var r,o,i,s,a,c,l,u,d=[];for(r=e.length;r;r-=1)for(i=e[r-1],o=8;o;o-=1)d.push(i%2?1:0),i>>=1;return d.reverse(),s=d.join(""),a=(1<<t-1)-1,c=parseInt(s.substring(0,1),2)?-1:1,l=parseInt(s.substring(1,1+t),2),u=parseInt(s.substring(1+t),2),l===(1<<t)-1?0!==u?NaN:c*(1/0):l>0?c*g(2,l-a)*(1+u/g(2,n)):0!==u?c*g(2,-(a-1))*(u/g(2,n)):c<0?-0:0}function D(e){return I(e,11,52)}function N(e){return F(e,11,52)}function M(e){return I(e,8,23)}function O(e){return F(e,8,23)}c=Object.defineProperty,l=!function(){try{return Object.defineProperty({},"x",{})}catch(e){return!1}}(),c&&!l||(Object.defineProperty=function(e,t,n){if(c)try{return c(e,t,n)}catch(e){}if(e!==Object(e))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(e,t,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(e,t,n.set),"value"in n&&(e[t]=n.value),e}),function(){function c(e){if((e=s(e))<0)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:e}),Object.defineProperty(this,"_bytes",{value:Array(e)});for(var t=0;t<e;t+=1)this._bytes[t]=0}function l(){if(!arguments.length||"object"!=typeof arguments[0])return function(e){if((e=s(e))<0)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:e}),Object.defineProperty(this,"byteLength",{value:e*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new c(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&arguments[0]instanceof l)return function(e){if(this.constructor!==e.constructor)throw TypeError();var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new c(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var n=0;n<this.length;n+=1)this._setter(n,e._getter(n))}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&!(arguments[0]instanceof l)&&!(arguments[0]instanceof c||"ArrayBuffer"===r(arguments[0])))return function(e){var t=e.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new c(t)}),Object.defineProperty(this,"byteLength",{value:t}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:e.length});for(var n=0;n<this.length;n+=1){var r=e[n];this._setter(n,Number(r))}}.apply(this,arguments);if(arguments.length>=1&&"object"===n(arguments[0])&&(arguments[0]instanceof c||"ArrayBuffer"===r(arguments[0])))return function(e,n,r){if((n=a(n))>e.byteLength)throw RangeError("byteOffset out of range");if(n%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(r===t){var o=e.byteLength-n;if(o%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");r=o/this.BYTES_PER_ELEMENT}else o=(r=a(r))*this.BYTES_PER_ELEMENT;if(n+o>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:o}),Object.defineProperty(this,"byteOffset",{value:n}),Object.defineProperty(this,"length",{value:r})}.apply(this,arguments);throw TypeError()}e.ArrayBuffer=e.ArrayBuffer||c,Object.defineProperty(l,"from",{value:function(e){return new this(e)}}),Object.defineProperty(l,"of",{value:function(){return new this(arguments)}});var u={};function p(e,t,n){var r=function(){Object.defineProperty(this,"constructor",{value:r}),l.apply(this,arguments),function(e){if(e.length>1e5)throw RangeError("Array too large for polyfill");function t(t){Object.defineProperty(e,t,{get:function(){return e._getter(t)},set:function(n){e._setter(t,n)},enumerable:!0,configurable:!1})}var n;for(n=0;n<e.length;n+=1)t(n)}(this)};"__proto__"in r?r.__proto__=l:(r.from=l.from,r.of=l.of),r.BYTES_PER_ELEMENT=e;var o=function(){};return o.prototype=u,r.prototype=new o,Object.defineProperty(r.prototype,"BYTES_PER_ELEMENT",{value:e}),Object.defineProperty(r.prototype,"_pack",{value:t}),Object.defineProperty(r.prototype,"_unpack",{value:n}),r}l.prototype=u,Object.defineProperty(l.prototype,"_getter",{value:function(e){if(arguments.length<1)throw SyntaxError("Not enough arguments");if((e=a(e))>=this.length)return t;var n,r,o=[];for(n=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)o.push(this.buffer._bytes[r]);return this._unpack(o)}}),Object.defineProperty(l.prototype,"get",{value:l.prototype._getter}),Object.defineProperty(l.prototype,"_setter",{value:function(e,t){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(!((e=a(e))>=this.length)){var n,r,o=this._pack(t);for(n=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)this.buffer._bytes[r]=o[n]}}}),Object.defineProperty(l.prototype,"constructor",{value:l}),Object.defineProperty(l.prototype,"copyWithin",{value:function(e,n){var r=arguments[2],o=i(this),c=a(o.length);c=h(c,0);var l,u=s(e);l=u<0?h(c+u,0):m(u,c);var d,f,p,g=s(n);d=g<0?h(c+g,0):m(g,c),p=(f=r===t?c:s(r))<0?h(c+f,0):m(f,c);var _,v=m(p-d,c-l);for(d<l&&l<d+v?(_=-1,d=d+v-1,l=l+v-1):_=1;v>0;)o._setter(l,o._getter(d)),d+=_,l+=_,v-=1;return o}}),Object.defineProperty(l.prototype,"every",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();for(var i=arguments[1],s=0;s<r;s++)if(!e.call(i,n._getter(s),s,n))return!1;return!0}}),Object.defineProperty(l.prototype,"fill",{value:function(e){var n=arguments[1],r=arguments[2],o=i(this),c=a(o.length);c=h(c,0);var l,u,d,f=s(n);for(l=f<0?h(c+f,0):m(f,c),d=(u=r===t?c:s(r))<0?h(c+u,0):m(u,c);l<d;)o._setter(l,e),l+=1;return o}}),Object.defineProperty(l.prototype,"filter",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();for(var i=[],s=arguments[1],c=0;c<r;c++){var l=n._getter(c);e.call(s,l,c,n)&&i.push(l)}return new this.constructor(i)}}),Object.defineProperty(l.prototype,"find",{value:function(e){var n=i(this),r=a(n.length);if(!o(e))throw TypeError();for(var s=arguments.length>1?arguments[1]:t,c=0;c<r;){var l=n._getter(c),u=e.call(s,l,c,n);if(Boolean(u))return l;++c}return t}}),Object.defineProperty(l.prototype,"findIndex",{value:function(e){var n=i(this),r=a(n.length);if(!o(e))throw TypeError();for(var s=arguments.length>1?arguments[1]:t,c=0;c<r;){var l=n._getter(c),u=e.call(s,l,c,n);if(Boolean(u))return c;++c}return-1}}),Object.defineProperty(l.prototype,"forEach",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();for(var i=arguments[1],s=0;s<r;s++)e.call(i,n._getter(s),s,n)}}),Object.defineProperty(l.prototype,"indexOf",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(0===r)return-1;var o=0;if(arguments.length>0&&((o=Number(arguments[1]))!=o?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(o>0||-1)*f(d(o)))),o>=r)return-1;for(var i=o>=0?o:h(r-d(o),0);i<r;i++)if(n._getter(i)===e)return i;return-1}}),Object.defineProperty(l.prototype,"join",{value:function(e){if(this===t||null===this)throw TypeError();for(var n=Object(this),r=a(n.length),o=Array(r),i=0;i<r;++i)o[i]=n._getter(i);return o.join(e===t?",":e)}}),Object.defineProperty(l.prototype,"lastIndexOf",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(0===r)return-1;var o=r;arguments.length>1&&((o=Number(arguments[1]))!=o?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(o>0||-1)*f(d(o))));for(var i=o>=0?m(o,r-1):r-d(o);i>=0;i--)if(n._getter(i)===e)return i;return-1}}),Object.defineProperty(l.prototype,"map",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();var i=[];i.length=r;for(var s=arguments[1],c=0;c<r;c++)i[c]=e.call(s,n._getter(c),c,n);return new this.constructor(i)}}),Object.defineProperty(l.prototype,"reduce",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var i,s=0;for(i=arguments.length>=2?arguments[1]:n._getter(s++);s<r;)i=e.call(t,i,n._getter(s),s,n),s++;return i}}),Object.defineProperty(l.prototype,"reduceRight",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var i,s=r-1;for(i=arguments.length>=2?arguments[1]:n._getter(s--);s>=0;)i=e.call(t,i,n._getter(s),s,n),s--;return i}}),Object.defineProperty(l.prototype,"reverse",{value:function(){if(this===t||null===this)throw TypeError();for(var e=Object(this),n=a(e.length),r=f(n/2),o=0,i=n-1;o<r;++o,--i){var s=e._getter(o);e._setter(o,e._getter(i)),e._setter(i,s)}return e}}),Object.defineProperty(l.prototype,"set",{value:function(e,t){if(arguments.length<1)throw SyntaxError("Not enough arguments");var n,r,o,i,s,c,l,u,d,f;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(n=arguments[0],(o=a(arguments[1]))+n.length>this.length)throw RangeError("Offset plus length of array is out of range");if(u=this.byteOffset+o*this.BYTES_PER_ELEMENT,d=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(f=[],s=0,c=n.byteOffset;s<d;s+=1,c+=1)f[s]=n.buffer._bytes[c];for(s=0,l=u;s<d;s+=1,l+=1)this.buffer._bytes[l]=f[s]}else for(s=0,c=n.byteOffset,l=u;s<d;s+=1,c+=1,l+=1)this.buffer._bytes[l]=n.buffer._bytes[c]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw TypeError("Unexpected argument type(s)");if(i=a((r=arguments[0]).length),(o=a(arguments[1]))+i>this.length)throw RangeError("Offset plus length of array is out of range");for(s=0;s<i;s+=1)c=r[s],this._setter(o+s,Number(c))}}}),Object.defineProperty(l.prototype,"slice",{value:function(e,n){for(var r=i(this),o=a(r.length),c=s(e),l=c<0?h(o+c,0):m(c,o),u=n===t?o:s(n),d=u<0?h(o+u,0):m(u,o),f=d-l,p=new(0,r.constructor)(f),g=0;l<d;){var _=r._getter(l);p._setter(g,_),++l,++g}return p}}),Object.defineProperty(l.prototype,"some",{value:function(e){if(this===t||null===this)throw TypeError();var n=Object(this),r=a(n.length);if(!o(e))throw TypeError();for(var i=arguments[1],s=0;s<r;s++)if(e.call(i,n._getter(s),s,n))return!0;return!1}}),Object.defineProperty(l.prototype,"sort",{value:function(e){if(this===t||null===this)throw TypeError();for(var n=Object(this),r=a(n.length),o=Array(r),i=0;i<r;++i)o[i]=n._getter(i);for(e?o.sort(e):o.sort(),i=0;i<r;++i)n._setter(i,o[i]);return n}}),Object.defineProperty(l.prototype,"subarray",{value:function(e,t){function n(e,t,n){return e<t?t:e>n?n:e}e=s(e),t=s(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)}});var g=p(1,y,w),_=p(1,S,E),v=p(1,T,E),b=p(2,A,x),F=p(2,L,P),I=p(4,k,C),B=p(4,R,G),H=p(4,O,M),U=p(8,N,D);e.Int8Array=e.Int8Array||g,e.Uint8Array=e.Uint8Array||_,e.Uint8ClampedArray=e.Uint8ClampedArray||v,e.Int16Array=e.Int16Array||b,e.Uint16Array=e.Uint16Array||F,e.Int32Array=e.Int32Array||I,e.Uint32Array=e.Uint32Array||B,e.Float32Array=e.Float32Array||H,e.Float64Array=e.Float64Array||U}(),function(){function n(e,t){return o(e.get)?e.get(t):e[t]}var i,s=(i=new Uint16Array([4660]),18===n(new Uint8Array(i.buffer),0));function c(e,n,o){if(!(e instanceof ArrayBuffer||"ArrayBuffer"===r(e)))throw TypeError();if((n=a(n))>e.byteLength)throw RangeError("byteOffset out of range");if(n+(o=o===t?e.byteLength-n:a(o))>e.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:e}),Object.defineProperty(this,"byteLength",{value:o}),Object.defineProperty(this,"byteOffset",{value:n})}function l(e){return function(t,r){if((t=a(t))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");t+=this.byteOffset;for(var o=new Uint8Array(this.buffer,t,e.BYTES_PER_ELEMENT),i=[],c=0;c<e.BYTES_PER_ELEMENT;c+=1)i.push(n(o,c));return Boolean(r)===Boolean(s)&&i.reverse(),n(new e(new Uint8Array(i).buffer),0)}}function u(e){return function(t,r,o){if((t=a(t))+e.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var i,c=new e([r]),l=new Uint8Array(c.buffer),u=[];for(i=0;i<e.BYTES_PER_ELEMENT;i+=1)u.push(n(l,i));Boolean(o)===Boolean(s)&&u.reverse(),new Uint8Array(this.buffer,t,e.BYTES_PER_ELEMENT).set(u)}}Object.defineProperty(c.prototype,"getUint8",{value:l(Uint8Array)}),Object.defineProperty(c.prototype,"getInt8",{value:l(Int8Array)}),Object.defineProperty(c.prototype,"getUint16",{value:l(Uint16Array)}),Object.defineProperty(c.prototype,"getInt16",{value:l(Int16Array)}),Object.defineProperty(c.prototype,"getUint32",{value:l(Uint32Array)}),Object.defineProperty(c.prototype,"getInt32",{value:l(Int32Array)}),Object.defineProperty(c.prototype,"getFloat32",{value:l(Float32Array)}),Object.defineProperty(c.prototype,"getFloat64",{value:l(Float64Array)}),Object.defineProperty(c.prototype,"setUint8",{value:u(Uint8Array)}),Object.defineProperty(c.prototype,"setInt8",{value:u(Int8Array)}),Object.defineProperty(c.prototype,"setUint16",{value:u(Uint16Array)}),Object.defineProperty(c.prototype,"setInt16",{value:u(Int16Array)}),Object.defineProperty(c.prototype,"setUint32",{value:u(Uint32Array)}),Object.defineProperty(c.prototype,"setInt32",{value:u(Int32Array)}),Object.defineProperty(c.prototype,"setFloat32",{value:u(Float32Array)}),Object.defineProperty(c.prototype,"setFloat64",{value:u(Float64Array)}),e.DataView=e.DataView||c}()}(this),t("polyfills/typedarray",(function(){})),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},o=n.prototype,i=r.prototype,s=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=c.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,f=u.revokeObjectURL,p=u,h=e.btoa,m=e.atob,g=e.ArrayBuffer,_=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=i.fake=!0;l--;)a.prototype[c[l]]=l+1;return u.createObjectURL||(p=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(v),n.origin=t&&t[1])),n}),p.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof r?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(u,e)},o.append=function(e){var n=this.data;if(_&&(e instanceof g||e instanceof _)){for(var o="",i=new _(e),c=0,l=i.length;c<l;c++)o+=String.fromCharCode(i[c]);n.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new a("NOT_READABLE_ERR");var u=new s;n.push(u.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,n){var o=arguments.length;return o<3&&(n=null),new r(this.data.slice(e,o>1?t:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var r=n&&n.type||"",o=new t;if(e)for(var i=0,s=e.length;i<s;i++)o.append(e[i]);return o.getBlob(r)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),t("polyfills/Blob",(function(){}));var n=function(){var e,t,r,o,i,s,a="undefined",c="object",l="Shockwave Flash",u="application/x-shockwave-flash",d="SWFObjectExprInst",f="onreadystatechange",p=window,h=document,m=navigator,g=!1,_=[function(){g?function(){var e=h.getElementsByTagName("body")[0],t=O(c);t.setAttribute("type",u);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=a){var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),T.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,P()}()}else P()}():P()}],v=[],b=[],y=[],w=!1,S=!1,E=!0,T=function(){var e=typeof h.getElementById!=a&&typeof h.getElementsByTagName!=a&&typeof h.createElement!=a,t=m.userAgent.toLowerCase(),n=m.platform.toLowerCase(),r=/win/.test(n||t),o=/mac/.test(n||t),i=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s=!1,d=[0,0,0],f=null;if(typeof m.plugins!=a&&typeof m.plugins[l]==c)!(f=m.plugins[l].description)||typeof m.mimeTypes!=a&&m.mimeTypes[u]&&!m.mimeTypes[u].enabledPlugin||(g=!0,s=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),d[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),d[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof p.ActiveXObject!=a)try{var _=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");_&&(f=_.GetVariable("$version"))&&(s=!0,f=f.split(" ")[1].split(","),d=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(e){}return{w3:e,pv:d,wk:i,ie:s,win:r,mac:o}}();function A(){if(!w){try{var e=h.getElementsByTagName("body")[0].appendChild(O("span"));e.parentNode.removeChild(e)}catch(e){return}w=!0;for(var t=_.length,n=0;n<t;n++)_[n]()}}function x(e){w?e():_[_.length]=e}function L(e){if(typeof p.addEventListener!=a)p.addEventListener("load",e,!1);else if(typeof h.addEventListener!=a)h.addEventListener("load",e,!1);else if(typeof p.attachEvent!=a)!function(e,t,n){e.attachEvent(t,n),y[y.length]=[e,t,n]}(p,"onload",e);else if("function"==typeof p.onload){var t=p.onload;p.onload=function(){t(),e()}}else p.onload=e}function P(){var e=v.length;if(e>0)for(var t=0;t<e;t++){var n=v[t].id,r=v[t].callbackFn,o={success:!1,id:n};if(T.pv[0]>0){var i=M(n);if(i)if(!B(v[t].swfVersion)||T.wk&&T.wk<312)if(v[t].expressInstall&&C()){var s={};s.data=v[t].expressInstall,s.width=i.getAttribute("width")||"0",s.height=i.getAttribute("height")||"0",i.getAttribute("class")&&(s.styleclass=i.getAttribute("class")),i.getAttribute("align")&&(s.align=i.getAttribute("align"));for(var c={},l=i.getElementsByTagName("param"),u=l.length,d=0;d<u;d++)"movie"!=l[d].getAttribute("name").toLowerCase()&&(c[l[d].getAttribute("name")]=l[d].getAttribute("value"));R(s,c,n,r)}else G(i),r&&r(o);else U(n,!0),r&&(o.success=!0,o.ref=k(n),r(o))}else if(U(n,!0),r){var f=k(n);f&&typeof f.SetVariable!=a&&(o.success=!0,o.ref=f),r(o)}}}function k(e){var t=null,n=M(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=a)t=n;else{var r=n.getElementsByTagName(c)[0];r&&(t=r)}return t}function C(){return!S&&B("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function R(n,i,s,c){S=!0,r=c||null,o={success:!1,id:s};var l=M(s);if(l){"OBJECT"==l.nodeName?(e=F(l),t=null):(e=l,t=s),n.id=d,(typeof n.width==a||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==a||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),h.title=h.title.slice(0,47)+" - Flash Player Installation";var u=T.ie&&T.win?"ActiveX":"PlugIn",f="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+h.title;if(typeof i.flashvars!=a?i.flashvars+="&"+f:i.flashvars=f,T.ie&&T.win&&4!=l.readyState){var m=O("div");s+="SWFObjectNew",m.setAttribute("id",s),l.parentNode.insertBefore(m,l),l.style.display="none",function(){4==l.readyState?l.parentNode.removeChild(l):setTimeout(arguments.callee,10)}()}I(n,i,s)}}function G(e){if(T.ie&&T.win&&4!=e.readyState){var t=O("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(F(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(F(e),e)}function F(e){var t=O("div");if(T.win&&T.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(c)[0];if(n){var r=n.childNodes;if(r)for(var o=r.length,i=0;i<o;i++)1==r[i].nodeType&&"PARAM"==r[i].nodeName||8==r[i].nodeType||t.appendChild(r[i].cloneNode(!0))}}return t}function I(e,t,n){var r,o=M(n);if(T.wk&&T.wk<312)return r;if(o)if(typeof e.id==a&&(e.id=n),T.ie&&T.win){var i="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?i+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(i+=" "+s+'="'+e[s]+'"'));var l="";for(var d in t)t[d]!=Object.prototype[d]&&(l+='<param name="'+d+'" value="'+t[d]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+l+"</object>",b[b.length]=e.id,r=M(e.id)}else{var f=O(c);for(var p in f.setAttribute("type",u),e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?f.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&f.setAttribute(p,e[p]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&D(f,h,t[h]);o.parentNode.replaceChild(f,o),r=f}return r}function D(e,t,n){var r=O("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function N(e){var t=M(e);t&&"OBJECT"==t.nodeName&&(T.ie&&T.win?(t.style.display="none",function(){4==t.readyState?function(e){var t=M(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function M(e){var t=null;try{t=h.getElementById(e)}catch(e){}return t}function O(e){return h.createElement(e)}function B(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function H(e,t,n,r){if(!T.ie||!T.mac){var o=h.getElementsByTagName("head")[0];if(o){var l=n&&"string"==typeof n?n:"screen";if(r&&(i=null,s=null),!i||s!=l){var u=O("style");u.setAttribute("type","text/css"),u.setAttribute("media",l),i=o.appendChild(u),T.ie&&T.win&&typeof h.styleSheets!=a&&h.styleSheets.length>0&&(i=h.styleSheets[h.styleSheets.length-1]),s=l}T.ie&&T.win?i&&typeof i.addRule==c&&i.addRule(e,t):i&&typeof h.createTextNode!=a&&i.appendChild(h.createTextNode(e+" {"+t+"}"))}}}function U(e,t){if(E){var n=t?"visible":"hidden";w&&M(e)?M(e).style.visibility=n:H("#"+e,"visibility:"+n)}}function j(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=a?encodeURIComponent(e):e}return T.w3&&((typeof h.readyState!=a&&"complete"==h.readyState||typeof h.readyState==a&&(h.getElementsByTagName("body")[0]||h.body))&&A(),w||(typeof h.addEventListener!=a&&h.addEventListener("DOMContentLoaded",A,!1),T.ie&&T.win&&(h.attachEvent(f,(function(){"complete"==h.readyState&&(h.detachEvent(f,arguments.callee),A())})),p==top&&function(){if(!w){try{h.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}A()}}()),T.wk&&function(){w||(/loaded|complete/.test(h.readyState)?A():setTimeout(arguments.callee,0))}(),L(A))),T.ie&&T.win&&window.attachEvent("onunload",(function(){for(var e=y.length,t=0;t<e;t++)y[t][0].detachEvent(y[t][1],y[t][2]);for(var r=b.length,o=0;o<r;o++)N(b[o]);for(var i in T)T[i]=null;for(var s in T=null,n)n[s]=null;n=null})),{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=n,o.callbackFn=r,v[v.length]=o,U(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return k(e)},embedSWF:function(e,t,n,r,o,i,s,l,u,d){var f={success:!1,id:t};T.w3&&!(T.wk&&T.wk<312)&&e&&t&&n&&r&&o?(U(t,!1),x((function(){n+="",r+="";var p={};if(u&&typeof u===c)for(var h in u)p[h]=u[h];p.data=e,p.width=n,p.height=r;var m={};if(l&&typeof l===c)for(var g in l)m[g]=l[g];if(s&&typeof s===c)for(var _ in s)typeof m.flashvars!=a?m.flashvars+="&"+_+"="+s[_]:m.flashvars=_+"="+s[_];if(B(o)){var v=I(p,m,t);p.id==t&&U(t,!0),f.success=!0,f.ref=v}else{if(i&&C())return p.data=i,void R(p,m,t,d);U(t,!0)}d&&d(f)}))):d&&d(f)},switchOffAutoHideShow:function(){E=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:B,createSWF:function(e,t,n){return T.w3?I(e,t,n):void 0},showExpressInstall:function(e,t,n,r){T.w3&&C()&&R(e,t,n,r)},removeSWF:function(e){T.w3&&N(e)},createCSS:function(e,t,n,r){T.w3&&H(e,t,n,r)},addDomLoadEvent:x,addLoadEvent:L,getQueryParamValue:function(e){var t=h.location.search||h.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return j(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return j(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var n=M(d);n&&e&&(n.parentNode.replaceChild(e,n),t&&(U(t,!0),T.ie&&T.win&&(e.style.display="block")),r&&r(o)),S=!1}}}}();return t("swfobject",(function(){})),t("flash-recorder",["./timer","./polyfills/base64_polyfill.min","./polyfills/typedarray","./polyfills/Blob","./swfobject"],(function(e){return function(t,i,s){var a,c,l,u,d,f,p,h,m=Math.floor(11.025),g=o.Deferred();function _(e){i.recorderId===e.recorderId&&t.trigger("audioEncodedToB64",e.data)}function v(e,n,r){var o;h=r,o={level:c.getMicLevel(),recorderId:i.recorderId},i.recorderId===o.recorderId&&t.trigger("micSampleData",o.level)}function b(e,t){h=null}function y(n){i.recorderId===n.recorderId&&(t.trigger("audioenabled"),h=e.start(i.totalRecordingTime+1,20,v,b))}function w(e){i.recorderId===e.recorderId&&t.trigger("flashReceivedInput")}function S(e){i.recorderId===e.recorderId&&(l.removeEventListener("flashReady",S),l.numRecordersLoading--,0===l.numRecordersLoading&&o(document).trigger("TN8.FlashRecorderLoadingComplete"))}function E(e){if(i.recorderId===e.recorderId&&d!==e.state)switch(u=d,d=e.state){case"init":case"denied":case"allowed":case"reset":case"record":A(!1);break;case"permission":A(!0);break;case"play":break;case"stop":"record"!==u&&"play"!==u||c.stopEither()}}function T(e){e.success?(c=e.ref,a=o(c)):(r.error("Audio recorder > Flash plug-in <object> DOM creation failed"),s.setAsUnsupportedPlatfrom())}function A(e){(e?a.addClass:a.removeClass).call(a,"shown")}return window.TN8=window.TN8||{},window.TN8.flashRecorder=window.TN8.flashRecorder||{types:{},event:function(e){var t=this.types[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)},addEventListener:function(e,t){this.types[e]||(this.types[e]=[]),this.types[e].push(t)},removeEventListener:function(e,t){if(this.types[e]){var n=this.types[e].indexOf(t);n>=0&&this.types[e].splice(n,1)}}},(l=window.TN8.flashRecorder).addEventListener("flashReady",S),l.addEventListener("setState",E),l.addEventListener("micActivityStarted",y),l.addEventListener("finalAudio",_),l.addEventListener("receivedInput",w),isNaN(l.numRecordersLoading)?l.numRecordersLoading=1:l.numRecordersLoading++,o(document).one("TN8.FlashRecorderLoadingComplete",(function(){g.resolve(c)})),function(){var e=t.attr("id")+"-swfobject";o('<div id="'+e+'"><p>Flash Audio Recorder</p></div>').appendTo(t);var r={id:e,recorderId:i.recorderId,id:e,rate:m,gain:85,wavsamplerate:11025,wavbitrate:i.wavbitrate,sendbuffers:false,wavencodebuffers:false},s={id:e,name:e,class:"recorder-swf"};n.embedSWF(i.baseURL+"public/javascripts/recorder/AudioRecordPlay.swf",e,"215","138","10.3",!1,r,{allowscriptaccess:"always",wmode:"transparent"},s,T)}(),{initDeferred:g,startRecording:function(){c.record()},stopRecording:function(){null!==h&&(e.stop(h),h=null),E({state:"stop",recorderId:i.recorderId})},setDataForPlayback:function(e){var t=Array.prototype.slice.call(e);c.setDataForPlayback(t)},getRawData:function(e){return e?f:function(e,t){for(var n=new Float32Array(t),r=0,o=0;o<e.length;o++){var i=e[o];n.set(i,r),r+=i.length}return n}(f,p)},hasRawData:function(){return void 0!==f&&"[object Array]"===Object.prototype.toString.call(f)&&f.length>0&&p>0},onAudioRemoved:function(){f=[],p=0,c.clearRecording()},finalize:function(){l&&(l.removeEventListener("flashReady",S),l.removeEventListener("setState",E),l.removeEventListener("micActivityStarted",y),l.removeEventListener("finalAudio",_),l.removeEventListener("receivedInput",w)),c&&c.finalize(),$flash=null,c=null,l=null,g=null},getSampleRate:function(){return c.getSampleRate()},usingMediaRecorder:function(){return!1}}}})),t("ios-recorder",[],(function(){return function(e,t){var n,i,s=!1,a=!1,c=function(e){var t=e;if("string"!=typeof t||t.length<=0){t="";var n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(n=0;n<8;n++)t+=r.charAt(Math.floor(Math.random()*(0===n?52:62)))}return t}(),l=null,u=null,d=o.Deferred();try{i=new AudioRecorder,_(c,"> Created new AudioRecorder"),i&&(_(c,"> init"),i.init((function(e){_(c,"> init >> Done"),f()}),(function(e){_(c,"> init >> ERROR, fail result:",e)})))}catch(e){_(c,"> Error creating AudioRecorder, probably because not in TN8 client"),d.resolve()}function f(){i&&(_(c,"> prepareToRecord"),i.prepareToRecord((function(e){_(c,"> prepareToRecord >> Done"),d&&d.resolve()}),(function(e){_(c,"> prepareToRecord >> ERROR, fail result:",e)})))}function p(){i.averagePower((function(t){var n=Math.abs((Math.max(t,-60)- -60)/60);l?l(n):e&&e.length>0&&e.trigger("micSampleData",100*n)}),(function(e){_(c,"> reportAmplitude >> ERROR, fail result:",e)}))}function h(e){i&&(_(c,"> deleteRecordedFile"),i.deleteRecording((function(t){_(c,"> deleteRecordedFile >> Done"),t&&(s=!1),e||f()}),(function(e){_(c,"> deleteRecordedFile >> ERROR, fail result:",e)})))}function m(){return!(!s||a)}function g(){u&&(window.clearInterval(u),u=null)}function _(){var e=["iOSRecorder >"].concat(Array.prototype.slice.call(arguments));r.log.apply(r,e),TN8.log(e.join(" "),TN8.IMPORTANT)}return{initDeferred:d,startRecording:function(){_(c,"> startRecording"),i.record((function(t){_(c,"> startRecording >> Done"),e.trigger("audioenabled"),s=!0,n=1,g(),u=window.setInterval(p,50)}),(function(e){_(c,"> startRecording >> ERROR, fail result:",e)}))},stopRecording:function(e,t){1==n&&(n=3,g(),_(c,"> stopRecording"),i.stop((function(n){_(c,"> stopRecording >> Done"),e&&h(!!t)}),(function(e){_(c,"> stopRecording >> ERROR, fail result:",e)})))},setRecordingCallback:function(e){l=e&&"function"==typeof e?e:null},deleteRecordedFile:h,getRawData:function(){return m()?[1]:[]},getSampleRate:function(){return 16e3},hasRawData:m,onAudioRemoved:function(){},encodeM4AB64:function(){var e=o.Deferred();return a=!0,_(c,"> encodeM4AB64"),i.getData((function(t){_(c,"> encodeM4AB64 >> Done");var n=";base64,",r=t.indexOf(n)+8,o=t.slice(r,t.length);e.resolve(o),e=null,a=!1,s=!1}),(function(t){_(c,"> encodeM4AB64 >> ERROR, fail result:",t),e.reject(),e=null})),e},finalize:function(e,t){_(c,"> finalize"),g(),e||h(!!t),l=null,d=null,_encodeDeferred=null,_(c,"> dispose"),i.dispose((function(e){_(c,"> dispose >> Done")}),(function(e){_(c,"> dispose >> ERROR, fail result:",e)})),i=null,_(c,"> finalize >> Done")},usingMediaRecorder:function(){return!1}}}})),t("js-player",[],(function(){return function(e,t,n,i,s){var a=300,c=o('<audio preload="auto"></audio>').appendTo(e).on("playing",(function(){c.off("timeupdate",d),u()?s.animPlaybackMarker("play"):c.on("timeupdate",d),s.onPlaybackStart()})).on("pause",(function(){c.off("timeupdate",d),s.onPlaybackStop()})).on("ended",(function(){c.off("timeupdate",d),s.onPlaybackEnd()})).on("error",(function(){l.error.code,l.error.message})),l=c[0];function u(){var e=v();return!isNaN(e)&&e>0}function d(){u(),l.duration,u()&&(c.off("timeupdate",d),s.animPlaybackMarker("play"))}function f(e,r){c.html("");var o=s.getResponseAudioData();if("string"==typeof o&&o.length>0){t.codec;var a="playBase64";switch(t.codec){case"opus":t.platformInfo.isIdevice&&(a="decodeToWav");break;case"vorbis":t.platformInfo.isIdevice&&(a="none")}"decodeToWav"===a||r?(s.setState("pending"),i.decode(t.codec,o).then((function(t){n.encode("wav","data",t).then((function(t){p(t,!!e)}))}))):"playBase64"===a?p(o,!!e):s.showPlaybackError()}}function p(e,o){var i,a=Object.prototype.toString.call(e);"[object ArrayBuffer]"===a?i=_("wav",n.encodeB64(new Uint8Array(e))):"[object String]"===a?i=_(t.codec,e):r.error("Audio Recorder > JS Player > prepareForPlayback, data type:",a," is not supported"),i&&i.attr("src")?o?h(i):m(i):s.showPlaybackError()}function h(e){e&&m(e),c.one("canplaythrough",(function(){"chrome"===t.platformInfo.browser&&l.duration===1/0?(l.currentTime=a+1,o(this).one("durationchange",(function(){l.currentTime=0,l.play(),s.setState("play")}))):(l.currentTime=0,l.play(),s.setState("play"))})),l.load()}function m(e){e.on("error",(function(e){c[0].networkState===c[0].NETWORK_NO_SOURCE&&("audio/ogg"===o(this).attr("type")?f(!1,!0):s.showPlaybackError(e))})),c.html(e),"record"===s.getState()&&s.stopRecord(),s.setState("stop")}function g(){var e=c.find("source");return e&&e.length>0&&!!e.attr("src")}function _(e,t){var n=o("<source/>");switch(e){case"opus":n="G"===t.charAt(0)?o('<source src="data:audio/webm;base64,'+t+'" type="audio/webm" />'):o('<source src="data:audio/ogg;base64,'+t+'" type="audio/ogg" />');break;case"vorbis":n=o('<source src="data:audio/ogg;base64,'+t+'" type="audio/ogg" />');break;case"wav":n=o('<source src="data:audio/wav;base64,'+t+'" type="audio/wav" />');break;case"m4a":n=o('<source src="data:audio/x-m4a;base64,'+t+'" type="audio/mp4" />');break;case"mp4":n=o('<source src="data:audio/mp4;base64,'+t+'" type="audio/mp4" />');break;default:r.error("ERROR > AudioRecorder > JSPlayer, unknown codec:",e)}return n}function v(){var e=0;return g()&&l&&l.duration&&(e=l.duration),e}return{play:function(){g()?h():f(!0)},stop:function(){c.off("timeupdate",d),l.pause(),l.currentTime=0,s.onPlaybackStop(),s.setState("stop")},finalize:function(){c.off(),l&&(l.src=""),c.remove(),c=null,l=null},getRecordingDuration:v,hasValidRecordingDuration:u,prepareForPlayback:p,onAudioRemoved:function(){c.html("")},setPlaybackData:f}}})),function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-e}}}(),t("polyfills/performance-now-polyfill",(function(){})),t("flash-player",["./polyfills/performance-now-polyfill"],(function(){return function(e,t,n,i,s,a){var c=0,l=0,u=window.TN8.flashRecorder,d=!1;function f(e){t.recorderId===e.recorderId&&g()}function p(e){if(t.recorderId===e.recorderId){var n=Math.round(100*e.progress);s.setDebugValue({decodeProgress:n+"%"}),s.updateDecodeProgress(n)}}function h(e){t.recorderId===e.recorderId&&(d?_():s.setState("stop"),s.setDebugValue({decodeTime:((window.performance.now()-l)/1e3).toFixed(3)+"s"}))}function m(e){t.recorderId===e.recorderId&&s.setDebugValue({base64DecodeTime:e.base64DecodeTime/1e3+"s"})}function g(){s.setState("stop"),s.onPlaybackStop("stop")}function _(){d=!1,a.play(),s.setState("play"),s.onPlaybackStart(),s.animPlaybackMarker("play")}function v(n){if(t.options.flashAudioDebug){var i=e.find("#aud");0===i.length&&(i=o('<audio id="aud" controls style="margin-top:10px;"></audio>').appendTo(e)),i.html(function(e,t){var n=o("<source/>");switch(e){case"opus":case"vorbis":n=o('<source src="data:audio/ogg;base64,'+t+'" type="audio/ogg" />');break;case"wav":n=o('<source src="data:audio/wav;base64,'+t+'" type="audio/wav" />');break;case"m4a":n=o('<source src="data:audio/x-m4a;base64,'+t+'" type="audio/mp4" />');break;default:r.error("ERROR > AudioRecorder > JSPlayer, unknown codec:",e)}return n}(t.codec,n)),i[0].load()}}return u.addEventListener("flashPlaybackComplete",f),u.addEventListener("flashDecodeProgress",p),u.addEventListener("flashDecodeComplete",h),u.addEventListener("flashBase64DecodeComplete",m),{play:function(){if(a.hasPlaybackSource())c=a.getRecordingDuration(),_();else{var e=s.getResponseAudioData();("vorbis"===t.codec||"wav"===t.codec)&&"string"==typeof e&&e.length>0?(v(e),l=window.performance.now(),s.updateDecodeProgress(0),c=a.setDataForPlayback(e,t.codec)):s.showPlaybackError()}},stop:function(){a.stopEither(),g()},finalize:function(){u&&(u.removeEventListener("flashPlaybackComplete",f),u.removeEventListener("flashDecodeProgress",p),u.removeEventListener("flashDecodeComplete",h),u.removeEventListener("flashBase64DecodeComplete",m)),a&&a.finalize(),u=null,a=null},getRecordingDuration:function(){var e=0;return a.hasPlaybackSource()&&c&&(e=c),e},onAudioRemoved:function(){},setPlaybackData:function(e){d=!!e;var n=s.getResponseAudioData();("vorbis"===t.codec||"wav"===t.codec)&&"string"==typeof n&&n.length>0?(v(n),l=window.performance.now(),s.updateDecodeProgress(0),c=a.setDataForPlayback(n,t.codec)):s.showPlaybackError()}}}})),t("../utils/platform-utils",[],(function(){"use strict";var e=navigator.userAgent.toLowerCase();r.log(e);var t={isIdevice:function(){return/iphone|ipad|ipod/i.test(navigator.platform)},isAndroid:function(){},canTouch:function(){return"ontouchstart"in document.documentElement},hasMsTouch:function(){return window.navigator.msPointerEnabled||!1},usingSafari:function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&!this.isIdevice()},usingFF:function(){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)},usingChrome:function(){return/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)},isRealize:function(){return!!window.TN8&&!!window.TN8.Realize},isTestNav:function(){return!!window.TestEngine&&!t.isRealize()},isLinuxOS:function(){return-1!==e.indexOf("linux")&&-1===e.indexOf("android")},isMacOS:function(){return"mac"===this.getOS()},isAndroidOS:function(){return-1!==e.indexOf("android")&&-1===e.indexOf("cros")},isChromeOS:function(){return-1===e.indexOf("android")&&-1!==e.indexOf("cros")},isIOS:function(){return/iphone|ipad|ipod/i.test(e)||t.isIdevice()},isWindowsOS:function(){return"windows"===this.getOS()},getOS:function(){var n;return-1!==e.indexOf("windows")?n="windows":-1===e.indexOf("mac os x")||t.isIOS()?t.isLinuxOS()?n="linux":t.isIOS()?n="ios":t.isAndroidOS()?n="android":t.isChromeOS()&&(n="chrome"):n="mac",n},using:function(t){return-1!==e.indexOf(t)},getBrowserAndVersion:function(){var e={browser:void 0,version:void 0};return t.using("firefox")?(e.browser="firefox",e.version=t.getVersionUsingRegEx(/firefox[\/\s](\d+\.\d+)/)):t.using("msie")?(e.browser="ie",e.version=t.getVersionUsingRegEx(/msie[\s](\d+\.\d+);/)):t.using("trident")?(e.browser="ie",e.version=t.getVersionUsingRegEx(/rv:(\d+\.\d+)/)):t.using("edge")?(e.browser="edge",e.version=t.getVersionUsingRegEx(/edge[\/\s](\d+\.\d+)/)):t.using("chrome")?(e.browser="chrome",e.version=t.getVersionUsingRegEx(/chrome[\/\s](\d+\.\d+)/)):t.using("safari")&&!t.using("android")&&(e.browser="safari",e.version=t.getVersionUsingRegEx(/version[\/\s](\d+\.\d+)/)),e},getVersionUsingRegEx:function(t){var n;try{n=parseInt(t.exec(e)[1],10)}catch(e){}return n},getOSVersion:function(){var e=-1;return"windows"===this.getOS()&&6===(e=this.getVersionUsingRegEx(/windows nt (\d+.\d+)/))&&(e+=1),e},getInfo:function(){var n,r,o,i=t.getBrowserAndVersion(),s=t.isTestNav(),a=s&&TestEngine._isAppMode();return s?(n=TestEngine.isAndroidOS(),r=TestEngine.isIdevice(),o=TestEngine.isChromeOS()):(n=t.isAndroidOS(),r=t.isIOS(),o=t.isChromeOS()),{userAgent:e,platform:navigator.platform.toLowerCase(),os:t.getOS(),osVersion:t.getOSVersion(),browser:i.browser,version:i.version,testNavMode:s?"testNav":"notTestNav",isAppMode:a,isAndroidOS:n,isIdevice:r,isChromeOS:o,isMacOS:t.isMacOS(),isWindowsOS:t.isWindowsOS(),usingSafari:t.usingSafari(),usingFF:t.usingFF(),usingChrome:t.usingChrome(),isDA:s&&a&&!n&&!r&&!o,securityLevel:s&&TestEngine.getTestDefine()?parseInt(TestEngine.getTestDefine().getTestSecurityLevel(),10):3}},isSupported:function(){for(var e=!1,n=t.getInfo(),r=t.supportsRecordingTests[n.testNavMode][n.os],o=0;o<r.length&&!1===e;o++)!0===(0,r[o])(n)&&(e=!0);return t.logPlatformInfo(n,"\n\trecording supported:"+e,!1),e},logPlatformInfo:function(e,t,n){t=t||"",e.userAgent,e.platform,e.os,e.browser,e.version,e.testNavMode,e.isAppMode,e.isAndroidOS,e.isIdevice,e.isChromeOS,e.isDA,e.securityLevel},supportsRecordingTests:{testNav:{windows:[function(e){return e.isDA},function(e){return"firefox"===e.browser&&52===e.version},function(e){return 3===e.securityLevel&&"chrome"===e.browser&&e.version>=50},function(e){return 3===e.securityLevel&&"firefox"===e.browser&&e.version>=52}],mac:[function(e){return e.isDA},function(e){return"firefox"===e.browser&&52===e.version},function(e){return 3===e.securityLevel&&"chrome"===e.browser&&e.version>=50},function(e){return 3===e.securityLevel&&"firefox"===e.browser&&e.version>=52},function(e){return 3===e.securityLevel&&"safari"===e.browser&&e.version>=11}],linux:[function(e){return!1}],chrome:[function(e){return e.version>=43}],android:[function(e){return e.isAndroidOS&&e.isAppMode}],ios:[function(e){return e.isIdevice&&e.isAppMode}]},notTestNav:{windows:[function(e){return"ie"===e.browser&&11===e.version},function(e){return"edge"===e.browser},function(e){return"firefox"===e.browser&&e.version>=45},function(e){return"chrome"===e.browser&&e.version>=43}],mac:[function(e){return"safari"===e.browser&&e.version>=8},function(e){return"firefox"===e.browser&&e.version>=45},function(e){return"chrome"===e.browser&&e.version>=43}],linux:[function(e){return!1}],chrome:[function(e){return"chrome"===e.browser&&e.version>=43}],android:[function(e){return!1}],ios:[function(e){return!1}]}}};return t})),t("recorder",["./encoder","./decoder","./webrtc-recorder","./flash-recorder","./ios-recorder","./js-player","./flash-player","../utils/platform-utils"],(function(e,t,n,i,s,a,c,l){return function(u,d){var f,p,h,m,g,_,v,b,y,w,S,E,T,A,x,L,P,k,C,R,G,F,I,D,N,M,O,B,H,U,j,V,W,z,q,$=o.i18n?o.i18n.t("audioRecorder:recordingComplete"):"Recording complete.",X='<i class="icon-warning-sign before-text"></i>'+(o.i18n?o.i18n.t("audioRecorder:recordingNotSupported"):"Your device does not support recording audio."),K='<i class="icon-warning-sign before-text"></i>'+(o.i18n?o.i18n.t("audioRecorder:playbackNotSupported"):"Your device does not support audio playback."),Y='<i class="icon-warning-sign before-text"></i>'+(o.i18n?o.i18n.t("audioRecorder:playbackMp4NotSupported"):"This TestNav app does not support playback of audio responses that were recorded using the Safari browser. Please use a supported browser (Chrome, Safari, Firefox, or Edge) or the TestNav Chrome App to playback this recording."),J=(o.i18n?o.i18n.t("audioRecorder:remainingAttempts"):"Remaining attempts:")+" ",Z='<i class="icon-warning-sign before-text" aria-hidden="true"></i><span class="sr-only">'+(o.i18n?o.i18n.t("warning"):"Warning")+"</span><span>"+(o.i18n?o.i18n.t("audioRecorder:deleteRecording"):"Delete the current recording?")+"</span>",Q='<i class="icon-ban-circle before-text"></i>'+(o.i18n?o.i18n.t("cancel"):"Cancel"),ee='<i class="icon-trash before-text"></i>'+(o.i18n?o.i18n.t("delete"):"Delete"),te=o.i18n?o.i18n.t("audioRecorder:scribeInstructions"):"Type spoken text here...",ne=300,re=1e3,oe=1,ie=2,se=3,ae=0,ce=0,le=!1,ue=0,de=null,fe=!1,pe=!1,he=!1,me=!1,ge=!1,_e=null,ve=null,be=0,ye=!0,we=!0,Se=!1,Ee=!1,Te=!0,Ae=!1,xe=!1,Le="",Pe="undefined"!=typeof TN8&&TN8.utils&&"safari ipad"===TN8.utils.detectBrowser(),ke="",Ce=null,Re=null,Ge=!1,Fe="touchend click",Ie="undefined"!=typeof TestEngine&&TestEngine.getAuthentication().getSession().getUnsubmitted();function De(e){o(document).off("record-start.VoiceRecorder playback-start.VoiceRecorder",Ne),e&&o(document).on("record-start.VoiceRecorder playback-start.VoiceRecorder recorder.multiRecording",Ne)}function Ne(e,t){y!==t&&("play"===Ce||"record"===Ce)&&je()}function Me(e,t){t=t||"";var n="testNav"===k.testNavMode||Ae?"opus":"vorbis";return e?n=e:Le&&""!==Le?n=Le:T===ie?n="wav":T===se?n="m4a":T===oe&&k.usingSafari&&(n="mp4"),ke=u.codec=n,Te="opus"===ke||"vorbis"===ke,n}function Oe(n){if(f=new e(d,u),p=new t(d,u),u.allowReview&&("ActiveXObject"in window||T===ie?(m=new c(d,u,f,p,this,n),Ee=!0):m=new a(d,u,f,p,this)),gt("init"),o(document).off("tn.ews.on tn.error.fatal timerTimeout",je),o(document).on("tn.ews.on tn.error.fatal timerTimeout",je),o(document).one("tn.nav.start",(function(){le=!0})),u.recordingOptions.sampleRate||(u.recordingOptions.sampleRate=h.getSampleRate()),o(document).on("Used.JWPlayerAudio Used.JWPlayerVideo",o.proxy(st,this)),fe){var r=o('<div class="debug"><label>Encode Time:<span class="encode"></span></label><label>Decode Time:<span class="decode"></span></label><label>Audio duration:<span class="audio"></span></label><label>Progressive Encode:<span class="progressive"></span></label><label>Quick Playback:<span class="quick-playback"></span></label><label>Flash Record:<span class="flash-record"></span></label><label>Flash Playback:<span class="flash-playback"></span></label></div>').appendTo(d);_t("progressive",Te),_t("quick-playback",we),_t("flash-record",Se),_t("flash-playback",Ee),we&&Ee&&r.find(".decode").parent().remove()}}function Be(){return pe||""!==(e=Pt())&&null!==e;var e}function He(){var e=!1;b&&!0===pe?e=!0:kt()&&(mt()||Ct())?(ge=!0,We()):mt()?(ge=!0,ze()):e=!0;e&&(o.each(["recorderId","blob"],(function(e,t){b.hasOwnProperty(t)&&delete b[t]})),0===u.attempts?(delete b.remainingAttempts,delete b.remainingOverrideAttempts):(b.remainingAttempts=S,Ie&&(b.remainingOverrideAttempts=E)),b.totalAttemptsUsed=ue,o(document).trigger("TN8.Application.RecorderResponse",[w,b]),ge=!1,ve&&"pending"===ve.state()&&ve.reject())}function Ue(e,t){var n=u.platformInfo.isIdevice,r=t&&t.codec;je(),Ge?pe&&(n&&"m4a"!==r&&"mp4"!==r||!n&&"m4a"===r)?Et(!0):pe&&(pt(!0),m?(gt("pending"),m.setPlaybackData()):(gt("stop"),At("stop"))):Et(e&&pe)}function je(){switch(Ce){case"record":We();break;case"play":Ye()}}function Ve(){o(document).trigger("recorder.multiRecording",w),me&&(k.isIdevice||Pe)?TN8.throw("Cannot record audio: TTS is playing.",TN8.errorType.MULTIPLE_MEDIA_WARNING):(gt("pending"),d.trigger("record-pending.VoiceRecorder",y),_t("encode",""),_t("audio",""),pt(),u.recordingOptions.hasOwnProperty("sampleRate")||(u.recordingOptions.sampleRate=h.getSampleRate()),h.startRecording(),nt())}function We(){window.clearTimeout(x),T===se&&null!==de&&window.clearTimeout(de),de=null,v.width=v.width,h.stopRecording(),Lt(v.getContext("2d")),gt("stop"),d.trigger("record-stop.VoiceRecorder",y),be=window.performance.now(),m&&T===oe&&!Xe(ke)&&(gt("pending"),f.encode("wav","data",h.getRawData()).then((function(e){m.prepareForPlayback(e,void 0,window.performance.now()),gt("stop")}))),mt()?ze():Ct()?gt("pending"):S<0&&0!==u.attempts?rt():(gt("reset"),ge&&(He(),ge=!1)),A&&tt()}function ze(){switch(T){case oe:case ie:if(Ke(ke)){f.encode(ke,"b64",void 0,!0,!0);_e&&_e.then((function(e,t){_e=null,$e(e)}),(function(){pt(!0),ge?(He(),ge=!1):gt("reset")}))}else f.encode(u.codec,"b64",[h.getRawData()]).then($e);break;case se:ve=h.encodeM4AB64().then($e)}}function qe(e,t){t?$e(t):(gt("reset"),ge&&(He(),ge=!1))}function $e(e){""!==e&&(_t("encode",((window.performance.now()-be)/1e3).toFixed(3)),pt(!0),d.trigger("audio-encoded.VoiceRecorder"),pe=!0,b={data:e,answered:Be(),codec:u.codec,scribe:Pt()},ge&&(He(),ge=!1),u&&(m&&Xe(ke)?m.prepareForPlayback(e):("record"===Ce&&We(),gt("stop")),ht()))}function Xe(e){var t=!0;switch(e){case"opus":case"vorbis":k.isIdevice&&(t=!1)}return t}function Ke(e){var t=!1;switch(e){case"opus":case"vorbis":t=!0}return t}function Ye(){m&&m.stop()}function Je(){d.trigger("record-start.VoiceRecorder",y),Se?d.one("flashReceivedInput",ct):window.setTimeout(ct,1e3),at(),T===se&&(de=window.setTimeout(We,g.totalRecordingTime)),gt("record")}function Ze(e,t){var n=t;if(it(3*function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t/e.length)}(n)),Ke(ke)&&!Ct()){var r=f.encode(ke,"b64",[n],!0,!1);void 0!==r&&(_e=r)}}function Qe(e){b.scribe=Pt(),ht()}function et(e){kt()&&!L&&0===e?(L=!0,window.clearTimeout(A),A=window.setTimeout(rt,3e3)):0!==e&&tt()}function tt(){window.clearTimeout(A),L=!1}function nt(){window.clearTimeout(x),x=window.setTimeout(rt,3e3)}function rt(){o(document).trigger("mic-error-fatal.VoiceRecorder",w)}function ot(e,t){it(t/100)}function it(e){g.startTime||(g.startTime=window.performance.now(),g.intervalTime=g.startTime,g.micMuteIntervalTime=g.startTime),"record"===Ce&&nt();var t=window.performance.now()-g.intervalTime;t>=17&&(g.intervalTime=t+g.intervalTime,(_=g.intervalTime-g.startTime)/g.totalRecordingTime*100>=100&&(_=g.totalRecordingTime,We()),function(e,t){kt()&&(Lt(e),function(e,t){var n=28,r=5,o=3;t>.05&&(e.fillStyle="#30F07C",e.save(),e.globalAlpha=.4,e.fillRect(0,7*r,n,o),t>.15&&(e.restore(),e.globalAlpha=.5,e.fillRect(0,6*r,n,o),t>.25&&(e.restore(),e.globalAlpha=.65,e.fillRect(0,5*r,n,o),t>.35&&(e.restore(),e.globalAlpha=.85,e.fillRect(0,4*r,n,o),t>.45&&(e.restore(),e.fillStyle="#30E67C",e.fillRect(0,3*r,n,o),t>.55&&(e.fillStyle="#FCEE21",e.fillRect(0,2*r,n,o),t>.65&&(e.fillStyle="#F7931E",e.fillRect(0,1*r,n,o),t>.85&&(e.fillStyle="#F15A24",e.fillRect(0,0*r,n,o)))))))))}(e,t))}(v.getContext("2d"),e)),ae+=e,ce++;var n=window.performance.now()-g.micMuteIntervalTime;n>=50&&(ae/=ce,ce=0,g.micMuteIntervalTime=n+g.micMuteIntervalTime,ae<1e-5&&(ae=0),et(ae))}function st(e,t){switch(t.attr){case"buffer":case"play":"play"===t.attr&&(P=t.id),je(),at();break;case"pause":case"idle":P===t.id&&(P=void 0,ct())}}function at(){G.attr({"aria-disabled":!0,tabindex:-1}),G.off(Fe,lt)}function ct(){G.removeAttr("aria-disabled"),G.removeAttr("tabindex"),G.off(Fe),G.on(Fe,lt)}function lt(e){if(le)return e.stopPropagation(),void e.preventDefault();switch("touchend"===e.type&&e.preventDefault(),Ce){case"record":We();break;case"play":Ye();break;case"stop":gt("pending"),function(){if(me&&(k.isIdevice||Pe))return gt("stop"),void TN8.throw("Cannot play recorded audio: TTS is playing.",TN8.errorType.MULTIPLE_MEDIA_WARNING);u.recordingOptions.hasOwnProperty("sampleRate")||(u.recordingOptions.sampleRate=h.getSampleRate()),m&&(d.trigger("playback-pending.VoiceRecorder",y),m.play())}();break;case"init":case"allowed":case"reset":Ve()}}function ut(e){"touchend"===e.type&&e.preventDefault(),St(!0)}function dt(e){e&&"touchend"===e.type&&e.preventDefault(),Ye(),pt(),gt("reset"),St(!1)}function ft(e){"touchend"===e.type&&e.preventDefault(),St(!1)}function pt(e){f&&f.terminateAll(),p&&p.terminateAll(),h&&h.onAudioRemoved(),g&&g.hasOwnProperty("startTime")&&delete g.startTime,!0!==e&&(m&&m.onAudioRemoved&&m.onAudioRemoved(),Me(void 0,"fromRemoveAudio"),pe=!1,b={data:"",answered:Be(),codec:ke,scribe:Pt()},ht())}function ht(){u.micCheck||(b.answered=Be(),he!==b.answered&&(he=b.answered,o(document).trigger("ItemResponseChanged")))}function mt(){return!!h&&h.hasRawData()}function gt(e){switch(Re=Ce,Ce=e,G.removeClass("visibily-hidden"),G.show(),D.hide(),I.hide(),R.hide(),e){case"init":case"denied":case"allowed":case"reset":vt("record"),bt("record"),wt(C),"reset"===e&&(at(),M.css("width","100%"),M.one("transitionend",function(){P||ct(),d.trigger("reset-complete.VoiceRecorder",y)}.bind(this))),At("reset");break;case"record":I.show(),At("play"),vt("stop"),bt("stop"),yt(F,"recording started");break;case"play":vt("stop"),bt("stop"),wt(C);break;case"stop":At("stop"),"record"===Re&&(0!==u.attempts&&(S>0&&S--,Ie&&E--,ue++),wt(F),yt(C,o.i18n?o.i18n.t("audioRecorder:recordingComplete"):"recording complete")),u.allowReview?(ct(),vt("play"),bt("play"),D.toggle(S>0||0===u.attempts||Ie&&E>0)):S>0||0===u.attempts||Ie&&E>0?(vt("record"),bt("record"),G.addClass("visibily-hidden"),D.show()):Tt($);break;case"pending":G.hide(),R.show()}U.hide(),j.hide(),kt()?(d.addClass("recording"),G.addClass("btn-inverse")):(d.removeClass("recording"),G.removeClass("btn-inverse"),b&&(!0===pe||mt())&&U.show(),u.attempts>1&&(j.show(),Ie?j.text(J+E):j.text(J+S))),H.toggle(kt())}function _t(e,t){fe&&d.find("."+e).text(t)}function vt(e){F.removeClass("play pause record stop").addClass(e)}function bt(e){G.attr("aria-label",e)}function yt(e,t){e.attr("aria-label",t),e.attr("role","alert")}function wt(e){e.removeAttr("aria-label"),e.removeAttr("role")}function St(e){e?(M.addClass("visibily-hidden"),G.addClass("visibily-hidden"),D.addClass("visibily-hidden"),B.addClass("visibily-hidden"),V.show()):(M.removeClass("visibily-hidden"),u.allowReview&&void 0!==G.find(".play")[0]&&G.removeClass("visibily-hidden"),D.removeClass("visibily-hidden"),B.removeClass("visibily-hidden"),V.hide())}function Et(e){Tt(e?K:X),C.removeClass("complete"),G.removeClass("visibily-hidden"),at(),vt(e?"play":"record"),N.show(),j.hide(),D.hide()}function Tt(e){C.addClass("complete"),G.addClass("visibily-hidden"),R.hide(),d.removeClass("recording"),N.hide(),D.hide(),j.hide(),U.html(e).show(),e===K&&0!==u.attempts&&(S>0||Ie&&E>0)&&(D.show(),u.attempts>1&&j.show())}function At(e){switch(M.removeClass("playing stopped reset decoding"),M.css("width",""),e){case"play":M.attr("style",Gt().join(":"+Rt(!0)+"s;")).addClass("playing");break;case"stop":M.addClass("stopped");break;case"reset":M.addClass("reset")}}function xt(e){switch(O.removeClass("playing reset"),e){case"play":var t=Gt().join(":"+Rt(!1)+"s;");O.attr("style",t).addClass("playing");break;case"reset":O.addClass("reset")}}function Lt(e){e.clearRect(0,0,v.width,v.height)}function Pt(){return void 0!==q?q.val():""}function kt(){return"record"===Ce}function Ct(){return T===oe&&h.usingMediaRecorder()}function Rt(e){var t=_/1e3;return e?t=g.totalRecordingTime/1e3:m&&m.getRecordingDuration()>0&&(t=m.getRecordingDuration()),t}function Gt(){return["-webkit-transition-duration","-moz-transition-duration","-o-transition-duration","transition-duration",""].slice(0)}return{initialize:function(){var e,t,a,c;navigator.getUserMedia=navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||null,Ae=window.location.pathname.indexOf("/tei/")>-1,xe=window.location.pathname.indexOf("/client/")>-1,k=l.getInfo(),Ge=l.isSupported(k),y=function(){var e=d.attr("id"),t=0;"string"!=typeof e&&e.length<=0&&(e="",t=8);var n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*(0===n?r.length-10:r.length)));return e}(),void 0===(c=d.attr("data-identifier"))&&(c=d.attr("responseIdentifier")),w=c,a={attempts:1,recordingLength:120,allowReview:!1,codec:ke,recorderId:y,spxQuality:9,vorbisQuality:0,teiRepo:!1,useBlob:!1,wavbitrate:16,recordingOptions:{bufferSize:2048,numInputChannels:1,numOutputChannels:1,encoderSampleRate:48e3},options:{micGain:25,oggPlayback:!0}},u.options=u.options||{},ye&&o.each(u.options,(function(e,t){switch(e){case"quickPlayback":we=t;break;case"flashRecord":Se=t;break;case"flashPlayback":Ee=t;break;case"useFlashEncoding":break;case"progressiveEncode":Te=t;break;case"codec":ke=Le=t}})),u=o.extend(!0,{},a,u),Se||Ee?T=ie:k.isIdevice&&k.isAppMode?T=se:navigator.getUserMedia?T=oe:k.isIdevice||(T=ie),Me(void 0,"fromInit"),S=u.attempts,Ie&&(E=u.attempts),b={data:"",answered:!1,codec:ke,scribe:""},g={totalRecordingTime:(e=u.recordingLength,t=parseInt(e),isNaN(t)&&(t=ne),1e3*Math.min(ne,t))},u.totalRecordingTime=g.totalRecordingTime,u.platformInfo=k,u.teiRepo=Ae,u.inClient=xe,u.hasAudioBaseUrl=!1,u.recorderType=T;var f=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");window.TN8&&window.TN8.hasOwnProperty("audioBaseUrl")?(u.hasAudioBaseUrl=!0,u.baseURL=window.TN8.audioBaseUrl):u.teiRepo?u.baseURL=window.TN8&&window.TN8.hasOwnProperty("baseUrl")&&window.TN8.baseUrl?window.TN8.baseUrl:f+"/tei/":window.TN8?(u.baseURL=window.TN8.baseUrl?window.TN8.baseUrl:f+"/client/",u.useBlob=xe):r.error("ERROR! in TN8 client and window.TN8 does not exist"),!0===u.useBlob&&-1===u.baseURL.indexOf("http")&&-1===u.baseURL.indexOf("//")&&(u.baseURL=f+u.baseURL),function(){d.addClass("tn8-recorder").attr("aria-label","Audio Recorder"),d.on("audioinput",Ze).on("audioenabled",Je).on("micSampleData",ot).on("audioEncodedToB64",qe),C=o('<div class="main" aria-live="assertive" aria-atomic="true"></div>').appendTo(d),G=o('<button aria-label="Record" id="control-button-id" class="control-button btn"><div class="btn-icon"></div></button>').appendTo(C).on(Fe,lt),R=o('<div class="spinner"></div>').appendTo(C),F=G.find(".btn-icon"),B=o('<div class="status-display"></div>').appendTo(C),H=o('<div class="speaker-icon"></div>').appendTo(B).hide(),U=o('<div class="message">'+$+"</div>").appendTo(B).hide(),j=o('<div class="attempts">'+J+u.attempts+"</div>").appendTo(B).hide(),D=o('<button class="clear-button btn"><i class="icon-trash" style="line-height:16px"></i></button>').attr("aria-label",o.i18n?o.i18n.t("delete"):"Delete").appendTo(C).hide().on(Fe,ut),I=o('<canvas class="input-meter" />').appendTo(C),(v=I[0]).width=28,v.height=40,N=o('<div class="progress"><div class="bar reset"></div><div class="marker"></div></div>').appendTo(d),M=N.find(".bar"),O=N.find(".marker");var e=(V=o('<div class="delete-dialog"><div class="delete-message">'+Z+'</div><div class="button-holder"></div>').appendTo(C).hide()).find(".button-holder");W=o('<button class="cancel-button btn">'+Q+"</button>").appendTo(e).on(Fe,ft),z=o('<button class="confirm-button btn">'+ee+"</button>").appendTo(e).on(Fe,dt),TN8.PnpController&&TN8.PnpController.isScribeEnabled&&TN8.PnpController.isScribeEnabled()&&!u.micCheck&&(q=o('<textarea class="scribe"/>').appendTo(d).attr({spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",placeholder:te,maxlength:re}).on("input",Qe))}(),Ge?(T===oe?h=new n(d,u,this):T===ie?(Se=!0,h=new i(d,u,this)):T===se?h=new s(d,u):(r.error("Recorder init failed, platform not supported."),d.trigger("not-supported.VoiceRecorder"),Tt(X)),h&&(De(!0),gt("pending"),h.initDeferred.done(o.proxy(Oe,this)))):(d.trigger("not-supported.VoiceRecorder"),Et()),o(document).on("tts.start.VoiceRecorder",o.proxy((function(){me=!0}),this)),o(document).on("tts.stop.VoiceRecorder tts.pause.VoiceRecorder tts.end.VoiceRecorder",o.proxy((function(){me=!1}),this))},getResponseData:He,setResponseData:function(e){he=e&&e.answered;var t=!!e&&e.hasOwnProperty("data")&&e.hasOwnProperty("answered")&&"[object Object]"===Object.prototype.toString.call(e);t&&(b={data:"",answered:!1,codec:ke,scribe:""},e.data&&e.data.length>0&&(b.data=e.data,pe=!0),e.hasOwnProperty("scribe")&&void 0!==q&&(b.scribe=e.scribe,q.val(b.scribe)),b.answered=Be(),e.hasOwnProperty("remainingOverrideAttempts")&&null!==e.remainingOverrideAttempts&&(E=e.remainingOverrideAttempts),e.hasOwnProperty("remainingAttempts")&&(S=e.remainingAttempts),Ie?j.text(J+E):j.text(J+S),e.hasOwnProperty("totalAttemptsUsed")&&(ue=e.totalAttemptsUsed),e.hasOwnProperty("codec")&&(b.codec=Me(e.codec,"fromSetResponse"))),h&&h.initDeferred&&"resolved"!==h.initDeferred.state()?h.initDeferred.done(o.proxy(Ue,this,t,e)):Ue(t,e)},isAnswered:Be,finalize:function(){tt(),window.clearTimeout(x),o(document).off("tn.ews.on tn.error.fatal timerTimeout",je),De(!1),o(document).off("Used.JWPlayerAudio Used.JWPlayerVideo",o.proxy(st,this)),o(document).off("tts.start.VoiceRecorder tts.stop.VoiceRecorder tts.pause.VoiceRecorder tts.end.VoiceRecorder recorder.multiRecording"),o.each([h,f,p,m],(function(e,t){t&&t.finalize&&t.finalize()})),o.each([d,G,D,W,z],(function(e,t){t&&t.off&&"function"==typeof t.off&&t.off()})),ve=null,h=null,f=null,p=null,m=null,v=null,u=null},onPlaybackStart:function(){_t("audio",Rt(!1).toFixed(3)),d.trigger("playback-start.VoiceRecorder",y)},onPlaybackStop:function(){xt("reset"),d.trigger("playback-stop.VoiceRecorder")},onPlaybackEnd:function(){gt("stop")},startRecord:Ve,stopRecord:We,stop:je,getState:function(){return Ce},setState:gt,getResponseAudioData:function(e){var t;return function(e){var t=b&&b.hasOwnProperty("data")&&"string"==typeof b.data&&b.data.length>0;return"blob"===e&&(t=t&&b.hasOwnProperty("blob")&&"[object Blob]"===Object.prototype.toString.call(b.blob)),t}(e)&&(t="blob"===e?b.blob:b.data),t},getRecorder:function(){return h},getRecorderType:function(){return T},setDebugValue:_t,showPlaybackError:function(e){void 0!==e&&e.target&&"audio/mp4"===e.target.type?Tt(Y):Tt(K)},animPlaybackMarker:xt,confirmDelete:dt,setBase64Encoding:function(e){u.base64Encoding=e},updateDecodeProgress:function(e){0===e&&(M.removeClass("playing stopped reset decoding"),M.addClass("decoding")),M.css("width",e+"%")},setAsUnsupportedPlatfrom:Et,triggerMicFailureError:rt,WEBRTC:oe,FLASH:ie,CORDOVA:se}}})),t("jquery.widget.recorder",["./recorder"],(function(e){o.widget("pearson.recorder",{_createdTime:null,_startRecordingTime:null,_endRecordingTime:null,_create:function(){this._recorder=new e(this.options,this.element),this.element.on("record-start.VoiceRecorder",o.proxy(this._handleRecordingStart,this)),this.element.on("record-stop.VoiceRecorder",o.proxy(this._handleRecordingStop,this)),this.element.on("not-supported.VoiceRecorder",o.proxy(this._handleNotSupported,this)),this._recorder.initialize(),this._createdTime=Date.now()},getResponseData:function(){this._recorder.getResponseData()},deleteRecording:function(){this._recorder.confirmDelete()},setResponseData:function(e){this._recorder.setResponseData(e)},getAnswered:function(){return this._recorder.isAnswered()},getRecorder:function(){return this._recorder},stop:function(){this._recorder.stop()},setBase64Encoding:function(e){this._recorder.setBase64Encoding(e)},destroy:function(){if(this._stopRecordingTime){var e=(Date.now()-this._stopRecordingTime)/1e3;this._recordAnalytics("PostRecordingTime",e)}this.element.off(".VoiceRecorder"),this._recorder.finalize(),o.Widget.prototype.destroy.call(this)},_handleRecordingStart:function(e){this._startRecordingTime=Date.now();var t=(this._startRecordingTime-this._createdTime)/1e3;this._recordAnalytics("PreRecordingTime",t)},_handleRecordingStop:function(e){this._stopRecordingTime=Date.now();var t=(this._stopRecordingTime-this._startRecordingTime)/1e3;this._recordAnalytics("RecordingTime",t)},_handleNotSupported:function(e){this._recordAnalytics("NotSupported","")},_recordAnalytics:function(e,t){window.ga&&(t=Math.round(t),ga("send","event","VoiceRecorder",e,"",t),r.log("ga analytics: action = "+e+", value = "+t))}})})),e("jquery.widget.recorder")}()},3841:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__(3270);window.WhiteNoiseAPI={init:function(){var compiledTemplates={modalContent:'<div class="noiseControls">\n    <div class="noisetypes">\n      <button class="loading wavesDiv noiseBtn" data="river.mp3" disabled><span class="wave"></span></button>\n      <button class="loading soundWaveDiv noiseBtn" data="brown.mp3" disabled><span class="soundWave"></span></button>\n      <button class="loading windDiv noiseBtn" data="windy.mp3" disabled><span class="wind"></span></button>\n    </div>\n    <div class="noiseCntlBtnGroup">\n        <% if(!_isIOS){ %>\n            <button id="noisePlayBtn" disabled class="icon-play" role="presentation" data-toggle="tooltip">\n            </button>\n            <div class="volumeControls">\n                <button id="noiseVolumeBtn" disabled class="icon-volume-up" role="presentation" data-toggle="tooltip">\n                </button>\n                <div id="slider"></div>\n            </div>\n        <% } else { %>\n            <button id="noisePlayBtn" disabled class="icon-play singleBtn" role="presentation" data-toggle="tooltip">\n            </button>\n        <% } %>\n    </div>\n\n</div>\n'};return $.widget("pearson.whiteNoise",{_create:function(){this._tooltips={waves:$.i18n?$.i18n.t("whiteNoise:waves"):"Waves",whiteNoise:$.i18n?$.i18n.t("whiteNoise:whiteNoiseTitle"):"White Noise",wind:$.i18n?$.i18n.t("whiteNoise:wind"):"Wind",playBtnPlay:$.i18n?$.i18n.t("whiteNoise:playButtonPlay"):"Play",volumeBtnMute:$.i18n?$.i18n.t("whiteNoise:volumeButtonMute"):"Mute",playBtnStop:$.i18n?$.i18n.t("whiteNoise:playButtonStop"):"Stop",volumeBtnUnmute:$.i18n?$.i18n.t("whiteNoise:volumeButtonUnmute"):"Unmute"},this._ASSETS_PATH="./public/sounds/",this._SOUNDS={river:this._ASSETS_PATH+"river.wav",wind:this._ASSETS_PATH+"windy.wav",wave:this._ASSETS_PATH+"brown.wav"},this._defaultVolume=60,this._modalId="noiseToolModal",this._modal=this._getWhiteNoiseModal(),this._createSlider(),this._attachListeners(),this._soundsLoaded=0,this._$currentNoiseEl,this.wave,this.wind,this.soundWave,this._currentNoiseInstance=void 0,this._currentNoisePlaying=void 0,this._registerSounds(),TestEngine.isIdevice()&&$(".noiseBtn").css("background-image","none")},_logWhiteNoise:function(e){"undefined"!=typeof TN8&&TN8.log("WHITE NOISE: "+e)},_onLoaded:function(e){switch(this._logWhiteNoise("Sound "+e+" is loaded successfully!"),this._soundsLoaded++>=2&&($("#noisePlayBtn").removeAttr("disabled"),$("#noiseVolumeBtn").removeAttr("disabled")),e){case this._SOUNDS.wave:this._modal.find(".wavesDiv").removeClass("loading").removeAttr("disabled");break;case this._SOUNDS.wind:this._modal.find(".windDiv").removeClass("loading").removeAttr("disabled");break;case this._SOUNDS.river:this._modal.find(".soundWaveDiv").removeClass("loading").removeAttr("disabled")}},_createProps:function(e){var t={src:[e],autoplay:!1,loop:!0,volume:this._getCurrentVolume(),onplayerror:(e,t)=>{this._logWhiteNoise("Playing "+e+" was Unsuccessful!"),this._logWhiteNoise("Error :"+t)},onplay:()=>{this._logWhiteNoise("Playing "+e+" was Successful!"),this._stopAllOtherNoisesOnPlay(),$(".noiseBtn").prop("disabled",!1)},onpause:()=>{$(".noiseBtn").prop("disabled",!1)},onstop:()=>{$(".noiseBtn").prop("disabled",!1)},onmute:()=>{$(".noiseBtn").prop("disabled",!1)},onplayerror:(e,t)=>{this._logWhiteNoise("Playing "+e+" was Successful!"),this._logWhiteNoise("Error :"+t)},onloaderror:()=>{this._logWhiteNoise("Error in loading "+e)},onload:()=>{this._onLoaded(e)}};return this._isIOS()&&(this._logWhiteNoise("It is iOS, using Howlerjs HTML5, preload is set to metadata"),t.html5=!0,t.preload="metadata",t.sprite={main:[0,12e3,!0]}),t},_registerSounds:function(){void 0!==typeof Howl?(this.wind=new Howl(this._createProps(this._SOUNDS.wind)),this.wave=new Howl(this._createProps(this._SOUNDS.river)),this.soundWave=new Howl(this._createProps(this._SOUNDS.wave))):this._logWhiteNoise("Howler is Not Supported!!!")},_getWhiteNoiseModal:function(){var e;return 0==$("#noiseToolModal").length?(e=this._buildModal(),this._addTooltips(this._tooltips)):e=$("#noiseToolModal"),e},_buildModal:function(){var e=$('<div id="'+this._modalId+'"></div>');$("#main_panel").append(e);var t=template(compiledTemplates.modalContent,{_isIOS:this._isIOS()});return e.modalize({title:$.i18n?$.i18n.t("whiteNoise:whiteNoiseTitle"):"White Noise",content:t,isResizable:!1,recenterAlways:!1,minimizable:!0,cssProperties:{width:"fit-content",height:"163px",position:"fixed"},minimizeHandler:function(){$(document).trigger("whiteNoise_modal_minimized")}}),e},_isIOS:function(){return/(iPhone|iPod|iPad)./i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&"ontouchstart"in window},_addTooltips:function(e){$(".wavesDiv").attr("aria-label",e.waves).tooltip({title:e.waves,placement:"bottom"}),$(".soundWaveDiv").attr("aria-label",e.whiteNoise).tooltip({title:e.whiteNoise,placement:"top"}),$(".windDiv").attr("aria-label",e.wind).tooltip({title:e.wind,placement:"bottom"}),$("#noisePlayBtn").attr("aria-label",e.playBtnPlay).tooltip({title:e.playBtnPlay,placement:"bottom"}),$("#noiseVolumeBtn").attr("aria-label",e.volumeBtnMute).tooltip({title:e.volumeBtnMute,placement:"bottom"})},_createSlider:function(){$("#slider").slider({value:this._defaultVolume,orientation:"horizontal",range:"min",min:0,max:100}),$("#slider .ui-slider-handle").length>0&&$("#slider .ui-slider-handle").attr("aria-label",this._defaultVolume+"%")},_attachListeners:function(){this._modal.find(".close").click("click",$.proxy(this._handleOnClose,this)),$("#noisePlayBtn").off("click",$.proxy(this._handleNoisePlayBtn,this)).on("click",$.proxy(this._handleNoisePlayBtn,this)),$("#noiseVolumeBtn").off("click",$.proxy(this._handleVolMuteBtnClick,this)).on("click",$.proxy(this._handleVolMuteBtnClick,this)),$("#slider").off("slide",$.proxy(this._handleVolumeChange,this)).on("slide",$.proxy(this._handleVolumeChange,this)),this._modal.find(".close").off("click",$.proxy(this.hideModal,this)).on("click",$.proxy(this.hideModal,this)),$(".noiseBtn").off("click",$.proxy(this._handleNoiseBtnClick,this)).on("click",$.proxy(this._handleNoiseBtnClick,this)),$(document).on("tn.navigate.logout",$.proxy(this.destroy,this)),$(document).on("navigate.submitTest",$.proxy(this.destroy,this)),$(document).on("whiteNoise_modal_minimized",$.proxy(this._handleOnMinimized,this)),$(window).off("resize",$.proxy(this._checkPosition,this)).on("resize",$.proxy(this._checkPosition,this))},_handleOnMinimized:function(e){this.hideModal()},_handleNoisePlayBtn:function(e){let t;$(e.currentTarget).toggleClass("icon-play icon-stop"),void 0===this._$currentNoiseEl&&(this._$currentNoiseEl=$(".noisetypes").find(".wavesDiv")),$(e.currentTarget).hasClass("icon-stop")?($(document).trigger("Used.WhiteNoise"),t=this._tooltips.playBtnStop,this._playAudio({currentTarget:this._$currentNoiseEl}),this._$currentNoiseEl.addClass("active")):(t=this._tooltips.playBtnPlay,this._stopCurrentNoise()),$(e.currentTarget).data("tooltip").destroy(),$(e.currentTarget).attr("aria-label",t).tooltip({title:t,placement:"bottom"})},_handleOnClose:function(e){$("#noisePlayBtn").removeClass("icon-stop").addClass("icon-play"),$("#noisePlayBtn").data("tooltip").destroy(),$("#noisePlayBtn").attr("aria-label",this._tooltips.playBtnPlay).tooltip({title:this._tooltips.playBtnPlay,placement:"bottom"}),this._stopAndResetAll()},_stopCurrentNoise:function(){this._currentNoiseInstance&&this._currentNoiseInstance.stop(),this._modal&&0!=this._modal.find(".active").length&&this._modal.find(".active").removeClass("active"),this._logWhiteNoise("CurrentNoiseInstance is stopped!")},_stopAll:function(){this.wave.stop(),this.soundWave.stop(),this.wind.stop()},_stopAndResetAll:function(){this._currentNoiseInstance&&this._currentNoiseInstance.stop()&&Howler&&Howler.stop(),this._modal&&0!=this._modal.find(".active").length&&this._modal.find(".active").removeClass("active"),this._logWhiteNoise("Howler stopped!")},_handleVolumeChange:function(e,t){this._setVolume(t.value)},_setMute:function(e){this.wind.mute(e),this.soundWave.mute(e),this.wave.mute(e)},_setVolume:function(e){this._setMute(!1),$("#noiseVolumeBtn").removeClass("icon-volume-off"),$("#noiseVolumeBtn").addClass("icon-volume-up"),$("#noiseVolumeBtn").data("tooltip").destroy(),$("#noiseVolumeBtn").attr("aria-label",this._tooltips.volumeBtnMute).tooltip({title:this._tooltips.volumeBtnMute,placement:"bottom"}),e=void 0!==e?e:$("#slider").slider("option","value"),this.wind.volume(e/100),this.soundWave.volume(e/100),this.wave.volume(e/100);var t=parseFloat(e.toFixed(2));$("#slider .ui-slider-handle").data("tooltip")&&$("#slider .ui-slider-handle").data("tooltip").destroy(),$("#slider .ui-slider-handle").attr("data-original-title",t+"%").attr("aria-label",t+"%").tooltip("show")},_getCurrentVolume:function(){return this._isIOS()?1:$("#slider").slider("option","value")/100},hideModal:function(){this._modal.modalize("hide"),TN8.Dispatcher.trigger("enableMenuItem",{id:"dropdown_whiteNoise",enabled:!1}),$(document).off("deepZoomLevel.enter",$.proxy(this.hideModal,this))},_handleNoiseBtnClick:function(e){$(".noiseBtn").prop("disabled",!0),$("#noisePlayBtn").data("tooltip").destroy(),$("#noisePlayBtn").attr("aria-label",this._tooltips.playBtnPlay).tooltip({title:this._tooltips.playBtnPlay,placement:"bottom"});let t=$(e.currentTarget),n=t.parent().find(".active");0!==n.length&&n.removeClass("active"),t.is(n)?($("#noisePlayBtn").toggleClass("icon-play icon-stop"),this._stopAll()):($(document).trigger("Used.WhiteNoise"),this._playAudio(e))},_isMuted:function(){return $("#noiseVolumeBtn").hasClass("icon-volume-off")},_stopAllOtherNoisesOnPlay:function(){switch(this._currentNoisePlaying){case"wave":this.wind.stop(),this.soundWave.stop();break;case"soundWave":this.wave.stop(),this.wind.stop();break;case"wind":this.wave.stop(),this.soundWave.stop();break;default:this._stopAll()}},_playAudio:function(evt){this._$currentNoiseEl=$(evt.currentTarget);let soundId=$(evt.currentTarget).find("span").attr("class");eval("this._currentNoiseInstance = this."+soundId),this._currentNoisePlaying=soundId,this._play(soundId),!$("#noisePlayBtn").hasClass("icon-stop")&&$("#noisePlayBtn").toggleClass("icon-play icon-stop"),$(evt.currentTarget).addClass("active")},_play:function(e){let t=this._isIOS()?"main":void 0;switch(e){case"wave":this.wave.play(t);break;case"wind":this.wind.play(t);break;case"soundWave":this.soundWave.play(t)}},_handleVolMuteBtnClick:function(e){$(e.currentTarget).toggleClass("icon-volume-up icon-volume-off"),$(e.currentTarget).data("tooltip").destroy(),$(e.currentTarget).hasClass("icon-volume-off")?(this._setMute(!0),$(e.currentTarget).attr("aria-label",this._tooltips.volumeBtnUnmute).tooltip({title:this._tooltips.volumeBtnUnmute,placement:"bottom"})):(this._setMute(!1),$(e.currentTarget).attr("aria-label",this._tooltips.volumeBtnMute).tooltip({title:this._tooltips.volumeBtnMute,placement:"bottom"}))},destroy:function(){$("#"+this._modalId).remove(),this._modal=null,$.Widget.prototype.destroy.call(this),$(document).off("deepZoomLevel.enter",$.proxy(this.hideModal,this)),$(document).off("tn.navigate.logout",$.proxy(this.destroy,this)),$(document).off("navigate.submitTest",$.proxy(this.destroy,this)),$(document).off("whiteNoise_modal_minimized",$.proxy(this._handleOnMinimized,this)),$(window).off("resize",$.proxy(this._checkPosition,this)),this._stopAndResetAll()},showModal:function(){this._modal.modalize("show"),$(document).trigger("deepZoomLayer.getStatus",$.proxy(this._handleDeepZoomStatus,this)),$(document).on("deepZoomLevel.enter",$.proxy(this.hideModal,this))},_handleDeepZoomStatus:function(e){e&&this._doDeepZoomCoupling()},_doDeepZoomCoupling:function(){$(document).trigger("deepZoomLayer.setCoupling",{title:$.i18n?$.i18n.t("whiteNoise:whiteNoiseTitle"):"White Noise",html:"#noiseToolModal",hideCallback:$.proxy(this.hideModal,this)})},_checkPosition:function(){var e=$("#noiseToolModal"),t=parseInt(e.css("top")),n=parseInt(e.css("left")),r=this._getViewport();n+130>r.width&&e.css("left",n-130),t+100>r.height&&e.css("top",t-100)},_getViewport:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},isWhiteNoisePlaying:function(){$(".noisetypes").find(".active").length>0&&$(document).trigger("Used.WhiteNoise")}}),{templates:compiledTemplates}}},window.WhiteNoiseAPI.init()},8090:function(e,t,n){var r,o=n(6763);window.createjs=window.createjs||{},(r=createjs.SoundJS=createjs.SoundJS||{}).version="1.0.0",r.buildDate="Thu, 12 Oct 2017 16:34:05 GMT",this.K=this.K||{},createjs.extend=function(e,t){"use strict";function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.K=this.K||{},createjs.promote=function(e,t){"use strict";var n=e.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(r)for(var o in n[(t+="_")+"constructor"]=r.constructor,r)n.hasOwnProperty(o)&&"function"==typeof r[o]&&(n[t+o]=r[o]);return e},this.K=this.K||{},createjs.deprecate=function(e,t){"use strict";return function(){var n="Deprecated property or method '"+t+"'. See docs for info.";return o&&(o.warn?o.warn(n):o.log(n)),e&&e.apply(this,arguments)}},this.K=this.K||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1},this.K=this.K||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.K=this.K||{},function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var t=e.agent=window.navigator.userAgent;e.isWindowPhone=t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,e.isFirefox=t.indexOf("Firefox")>-1,e.isOpera=null!=window.opera,e.isChrome=t.indexOf("Chrome")>-1,e.isIOS=(t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&!e.isWindowPhone,e.isAndroid=t.indexOf("Android")>-1&&!e.isWindowPhone,e.isBlackberry=t.indexOf("Blackberry")>-1,createjs.BrowserDetect=e}(),this.K=this.K||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var r,o=(r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[e];return o&&this.removeEventListener(e,t,n),(o=r[e])?o.push(t):r[e]=[t],t},t.on=function(e,t,n,r,o,i){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,(function(e){t.call(n,e,o),r&&e.remove()}),i)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var o=r[e];if(o)for(var i=0,s=o.length;s>i;i++)if(o[i]==t){1==s?delete r[e]:o.splice(i,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var r=this._listeners;if(!(t||r&&r[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var o=this,i=[o];o.parent;)i.push(o=o.parent);var s,a=i.length;for(s=a-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;a>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r,o=2>=t?this._captureListeners:this._listeners;if(e&&o&&(r=o[e.type])&&(n=r.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,r=r.slice();for(var i=0;n>i&&!e.immediatePropagationStopped;i++){var s=r[i];s.handleEvent?s.handleEvent(e):s(e),e.removed&&(this.off(e.type,s,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)},createjs.EventDispatcher=e}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.Event_constructor("error"),this.title=e,this.message=t,this.data=n}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.K=this.K||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.K=this.K||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=n.LOAD_TIMEOUT_DEFAULT}var t=e.prototype={},n=e;n.LOAD_TIMEOUT_DEFAULT=8e3,n.create=function(t){if("string"==typeof t){var r=new e;return r.src=t,r}if(t instanceof n)return t;if(t instanceof Object&&t.src)return null==t.loadTimeout&&(t.loadTimeout=n.LOAD_TIMEOUT_DEFAULT),t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=n}(),this.K=this.K||{},createjs.Methods={POST:"POST",GET:"GET"},this.K=this.K||{},createjs.Types={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"},function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(e){return document.createTextNode(e)},el:function(e){return document.createElement(e)}};createjs.Elements=e}(),function(){var e={container:null,appendToHead:function(t){e.getHead().appendChild(t)},appendToBody:function(t){if(null==e.container){e.container=document.createElement("div"),e.container.id="preloadjs-container";var n=e.container.style;n.visibility="hidden",n.position="absolute",n.width=e.container.style.height="10px",n.overflow="hidden",n.transform=n.msTransform=n.webkitTransform=n.oTransform="translate(-10px, -10px)",e.getBody().appendChild(e.container)}e.container.appendChild(t)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(e){e.parent&&e.parent.removeChild(e)},isImageTag:function(e){return e instanceof HTMLImageElement},isAudioTag:function(e){return!!window.HTMLAudioElement&&e instanceof HTMLAudioElement},isVideoTag:function(e){return!!window.HTMLVideoElement&&e instanceof HTMLVideoElement}};createjs.DomUtils=e}(),function(){var e={isBinary:function(e){switch(e){case createjs.Types.IMAGE:case createjs.Types.BINARY:return!0;default:return!1}},isText:function(e){switch(e){case createjs.Types.TEXT:case createjs.Types.JSON:case createjs.Types.MANIFEST:case createjs.Types.XML:case createjs.Types.CSS:case createjs.Types.SVG:case createjs.Types.JAVASCRIPT:case createjs.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(e){if(null==e)return createjs.Types.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.Types.IMAGE;case"ogg":case"mp3":case"webm":return createjs.Types.SOUND;case"mp4":case"webm":case"ts":return createjs.Types.VIDEO;case"json":return createjs.Types.JSON;case"xml":return createjs.Types.XML;case"css":return createjs.Types.CSS;case"js":return createjs.Types.JAVASCRIPT;case"svg":return createjs.Types.SVG;default:return createjs.Types.TEXT}}};createjs.RequestUtils=e}(),function(){var e={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[.\/]*?\//i,EXTENSION_PATT:/\/?[^\/]+\.(\w{1,5})$/i,parseURI:function(t){var n={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(null==t)return n;var r=createjs.Elements.a();for(var o in r.href=t,n)o in r&&(n[o]=r[o]);var i,s=t.indexOf("?");return s>-1&&(t=t.substr(0,s)),e.ABSOLUTE_PATT.test(t)?n.absolute=!0:e.RELATIVE_PATT.test(t)&&(n.relative=!0),(i=t.match(e.EXTENSION_PATT))&&(n.extension=i[1].toLowerCase()),n},formatQueryString:function(e,t){if(null==e)throw new Error("You must specify data.");var n=[];for(var r in e)n.push(r+"="+escape(e[r]));return t&&(n=n.concat(t)),n.join("&")},buildURI:function(e,t){if(null==t)return e;var n=[],r=e.indexOf("?");if(-1!=r){var o=e.slice(r+1);n=n.concat(o.split("&"))}return-1!=r?e.slice(0,r)+"?"+this.formatQueryString(t,n):e+"?"+this.formatQueryString(t,n)},isCrossDomain:function(e){var t=createjs.Elements.a();t.href=e.src;var n=createjs.Elements.a();return n.href=location.href,""!=t.hostname&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname)},isLocal:function(e){var t=createjs.Elements.a();return t.href=e.src,""==t.hostname&&"file:"==t.protocol}};createjs.URLUtils=e}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=n,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),n=e;try{Object.defineProperties(n,{POST:{get:createjs.deprecate((function(){return createjs.Methods.POST}),"AbstractLoader.POST")},GET:{get:createjs.deprecate((function(){return createjs.Methods.GET}),"AbstractLoader.GET")},BINARY:{get:createjs.deprecate((function(){return createjs.Types.BINARY}),"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate((function(){return createjs.Types.CSS}),"AbstractLoader.CSS")},FONT:{get:createjs.deprecate((function(){return createjs.Types.FONT}),"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate((function(){return createjs.Types.FONTCSS}),"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate((function(){return createjs.Types.IMAGE}),"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate((function(){return createjs.Types.JAVASCRIPT}),"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate((function(){return createjs.Types.JSON}),"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate((function(){return createjs.Types.JSONP}),"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate((function(){return createjs.Types.MANIFEST}),"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate((function(){return createjs.Types.SOUND}),"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate((function(){return createjs.Types.VIDEO}),"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate((function(){return createjs.Types.SPRITESHEET}),"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate((function(){return createjs.Types.SVG}),"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate((function(){return createjs.Types.TEXT}),"AbstractLoader.TEXT")},XML:{get:createjs.deprecate((function(){return createjs.Types.XML}),"AbstractLoader.XML")}})}catch(e){}t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this);t instanceof Function?t.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+e.type.toUpperCase()+"_ERROR"))}},t._resultFormatSuccess=function(e){this._result=e,this._sendComplete()},t._resultFormatFailed=function(e){this._sendError(e)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(e,t,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._updateXHR=function(e){e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var t=window.URL||window.webkitURL,n=e.getResult(!0);e.getTag().src=t.createObjectURL(n)}return e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.K=this.K||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(createjs.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleError=function(){this._clean(),this.dispatchEvent("error")},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},t._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.K=this.K||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){var e=createjs.proxy(this._handleStalled,this);this._stalledCallback=e;var t=createjs.proxy(this._handleProgress,this);this._handleProgress=t,this._tag.addEventListener("stalled",e),this._tag.addEventListener("progress",t),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.K=this.K||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(createjs.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}}else this._handleError()},t.setResponseType=function(e){"blob"===e&&(e=window.URL?"blob":"arraybuffer",this._responseType=e),this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(e){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===e.name&&window.BlobBuilder){var t=new BlobBuilder;t.append(this._response),this._response=t.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);return e>=400&&599>=e?new Error(e):0==e&&/^https?:/.test(location.protocol)?new Error(0):null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t,n=createjs.URLUtils.isCrossDomain(e),r={},o=null;if(window.XMLHttpRequest)o=new XMLHttpRequest,n&&void 0===o.withCredentials&&window.XDomainRequest&&(o=new XDomainRequest);else{for(var i=0,a=s.ACTIVEX_VERSIONS.length;a>i;i++){var c=s.ACTIVEX_VERSIONS[i];try{o=new ActiveXObject(c);break}catch(e){}}if(null==o)return!1}if(null==e.mimeType&&createjs.RequestUtils.isText(e.type)&&(e.mimeType="text/plain; charset=utf-8"),e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof o.responseType?2:1,t=e.method==createjs.Methods.GET?createjs.URLUtils.buildURI(e.src,e.values):e.src,o.open(e.method||createjs.Methods.GET,t,!0),n&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&(r.Origin=location.origin),e.values&&e.method==createjs.Methods.POST&&(r["Content-Type"]="application/x-www-form-urlencoded"),n||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var l in e.headers)r[l]=e.headers[l];for(l in r)o.setRequestHeader(l,r[l]);return o instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(o.withCredentials=e.withCredentials),this._request=o,!0},t._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.K=this.K||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.Types.SOUND),createjs.DomUtils.isAudioTag(e)||createjs.DomUtils.isAudioTag(e.src)?this._tag=e:createjs.DomUtils.isAudioTag(e.tag)&&(this._tag=createjs.DomUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader);e.canLoadItem=function(e){return e.type==createjs.Types.SOUND},t._createTag=function(e){var t=createjs.Elements.audio();return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.K=this.K||{},function(){"use strict";var e=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},t=e.prototype={},n=e;n.create=function(e){if("string"==typeof e)return o&&(o.warn||o.log)("Deprecated behaviour. Sound.play takes a configuration object instead of individual arguments. See docs for info."),(new createjs.PlayPropsConfig).set({interrupt:e});if(null==e||e instanceof n||e instanceof Object)return(new createjs.PlayPropsConfig).set(e);if(null==e)throw new Error("PlayProps configuration not recognized.")},t.set=function(e){if(null!=e)for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=n}(),this.K=this.K||{},function(){"use strict";function e(){throw"Sound cannot be instantiated"}function t(e,t){this.init(e,t)}var n=e;n.INTERRUPT_ANY="any",n.INTERRUPT_EARLY="early",n.INTERRUPT_LATE="late",n.INTERRUPT_NONE="none",n.PLAY_INITED="playInited",n.PLAY_SUCCEEDED="playSucceeded",n.PLAY_INTERRUPTED="playInterrupted",n.PLAY_FINISHED="playFinished",n.PLAY_FAILED="playFailed",n.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],n.EXTENSION_MAP={m4a:"mp4"},n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.defaultInterruptBehavior=n.INTERRUPT_NONE,n.alternateExtensions=[],n.activePlugin=null,n._masterVolume=1,n._getMasterVolume=function(){return this._masterVolume},n.getVolume=createjs.deprecate(n._getMasterVolume,"Sound.getVolume"),n._setMasterVolume=function(e){if(null!=Number(e)&&(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e)))for(var t=this._instances,r=0,o=t.length;o>r;r++)t[r].setMasterVolume(e)},n.setVolume=createjs.deprecate(n._setMasterVolume,"Sound.setVolume"),n._masterMute=!1,n._getMute=function(){return this._masterMute},n.getMute=createjs.deprecate(n._getMute,"Sound.getMute"),n._setMute=function(e){if(null!=e&&(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e)))for(var t=this._instances,n=0,r=t.length;r>n;n++)t[n].setMasterMute(e)},n.setMute=createjs.deprecate(n._setMute,"Sound.setMute"),n._getCapabilities=function(){return null==n.activePlugin?null:n.activePlugin._capabilities},n.getCapabilities=createjs.deprecate(n._getCapabilities,"Sound.getCapabilities"),Object.defineProperties(n,{volume:{get:n._getMasterVolume,set:n._setMasterVolume},muted:{get:n._getMute,set:n._setMute},capabilities:{get:n._getCapabilities}}),n._pluginsRegistered=!1,n._lastID=0,n._instances=[],n._idHash={},n._preloadHash={},n._defaultPlayPropsHash={},n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,createjs.EventDispatcher.initialize(n),n.getPreloadHandlers=function(){return{callback:createjs.proxy(n.initLoad,n),types:["sound"],extensions:n.SUPPORTED_EXTENSIONS}},n._handleLoadComplete=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,o=n._preloadHash[t].length;o>r;r++){var i=n._preloadHash[t][r];n._preloadHash[t][r]=!0,n.hasEventListener("fileload")&&((e=new createjs.Event("fileload")).src=i.src,e.id=i.id,e.data=i.data,e.sprite=i.sprite,n.dispatchEvent(e))}},n._handleLoadError=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,o=n._preloadHash[t].length;o>r;r++){var i=n._preloadHash[t][r];n._preloadHash[t][r]=!1,n.hasEventListener("fileerror")&&((e=new createjs.Event("fileerror")).src=i.src,e.id=i.id,e.data=i.data,e.sprite=i.sprite,n.dispatchEvent(e))}},n._registerPlugin=function(e){return!!e.isSupported()&&(n.activePlugin=new e,!0)},n.registerPlugins=function(e){n._pluginsRegistered=!0;for(var t=0,r=e.length;r>t;t++)if(n._registerPlugin(e[t]))return!0;return!1},n.initializeDefaultPlugins=function(){return null!=n.activePlugin||!n._pluginsRegistered&&!!n.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},n.isReady=function(){return null!=n.activePlugin},n.initLoad=function(e){return"video"==e.type||n._registerSound(e)},n._registerSound=function(e){if(!n.initializeDefaultPlugins())return!1;var r;if(e.src instanceof Object?(r=n._parseSrc(e.src)).src=e.path+r.src:r=n._parsePath(e.src),null==r)return!1;e.src=r.src,e.type="sound";var o=e.data,i=null;if(null!=o&&(isNaN(o.channels)?isNaN(o)||(i=parseInt(o)):i=parseInt(o.channels),o.audioSprite))for(var s,a=o.audioSprite.length;a--;)s=o.audioSprite[a],n._idHash[s.id]={src:e.src,startTime:parseInt(s.startTime),duration:parseInt(s.duration)},s.defaultPlayProps&&(n._defaultPlayPropsHash[s.id]=createjs.PlayPropsConfig.create(s.defaultPlayProps));null!=e.id&&(n._idHash[e.id]={src:e.src});var c=n.activePlugin.register(e);return t.create(e.src,i),null!=o&&isNaN(o)?e.data.channels=i||t.maxPerChannel():e.data=i||t.maxPerChannel(),c.type&&(e.type=c.type),e.defaultPlayProps&&(n._defaultPlayPropsHash[e.src]=createjs.PlayPropsConfig.create(e.defaultPlayProps)),c},n.registerSound=function(e,t,r,o,i){var s={src:e,id:t,data:r,defaultPlayProps:i};e instanceof Object&&e.src&&(o=t,s=e),(s=createjs.LoadItem.create(s)).path=o,null==o||s.src instanceof Object||(s.src=o+s.src);var a=n._registerSound(s);if(!a)return!1;if(n._preloadHash[s.src]||(n._preloadHash[s.src]=[]),n._preloadHash[s.src].push(s),1==n._preloadHash[s.src].length)a.on("complete",this._handleLoadComplete,this),a.on("error",this._handleLoadError,this),n.activePlugin.preload(a);else if(1==n._preloadHash[s.src][0])return!0;return s},n.registerSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,o=e.length;o>r;r++)n[r]=createjs.Sound.registerSound(e[r].src,e[r].id,e[r].data,t,e[r].defaultPlayProps);return n},n.removeSound=function(e,r){if(null==n.activePlugin)return!1;var o;if(e instanceof Object&&e.src&&(e=e.src),e instanceof Object?o=n._parseSrc(e):(e=n._getSrcById(e).src,o=n._parsePath(e)),null==o)return!1;for(var i in e=o.src,null!=r&&(e=r+e),n._idHash)n._idHash[i].src==e&&delete n._idHash[i];return t.removeSrc(e),delete n._preloadHash[e],n.activePlugin.removeSound(e),!0},n.removeSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,o=e.length;o>r;r++)n[r]=createjs.Sound.removeSound(e[r].src,t);return n},n.removeAllSounds=function(){n._idHash={},n._preloadHash={},t.removeAll(),n.activePlugin&&n.activePlugin.removeAllSounds()},n.loadComplete=function(e){if(!n.isReady())return!1;var t=n._parsePath(e);return e=t?n._getSrcById(t.src).src:n._getSrcById(e).src,null!=n._preloadHash[e]&&1==n._preloadHash[e][0]},n._parsePath=function(e){"string"!=typeof e&&(e=e.toString());var t=e.match(n.FILE_PATTERN);if(null==t)return!1;for(var r=t[4],o=t[5],i=n.capabilities,s=0;!i[o];)if(o=n.alternateExtensions[s++],s>n.alternateExtensions.length)return null;return{name:r,src:e=e.replace("."+t[5],"."+o),extension:o}},n._parseSrc=function(e){var t={name:void 0,src:void 0,extension:void 0},r=n.capabilities;for(var o in e)if(e.hasOwnProperty(o)&&r[o]){t.src=e[o],t.extension=o;break}if(!t.src)return!1;var i=t.src.lastIndexOf("/");return t.name=-1!=i?t.src.slice(i+1):t.src,t},n.play=function(e,t){var r=createjs.PlayPropsConfig.create(t),o=n.createInstance(e,r.startTime,r.duration);return n._playInstance(o,r)||o._playFailed(),o},n.createInstance=function(e,r,o){if(!n.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(e,r,o);var i=n._defaultPlayPropsHash[e];e=n._getSrcById(e);var s=n._parsePath(e.src),a=null;return null!=s&&null!=s.src?(t.create(s.src),null==r&&(r=e.startTime),a=n.activePlugin.create(s.src,r,o||e.duration),(i=i||n._defaultPlayPropsHash[s.src])&&a.applyPlayProps(i)):a=new createjs.DefaultSoundInstance(e,r,o),a.uniqueId=n._lastID++,a},n.stop=function(){for(var e=this._instances,t=e.length;t--;)e[t].stop()},n.setDefaultPlayProps=function(e,t){e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]=createjs.PlayPropsConfig.create(t)},n.getDefaultPlayProps=function(e){return e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]},n._playInstance=function(e,t){var r=n._defaultPlayPropsHash[e.src]||{};if(null==t.interrupt&&(t.interrupt=r.interrupt||n.defaultInterruptBehavior),null==t.delay&&(t.delay=r.delay||0),null==t.offset&&(t.offset=e.position),null==t.loop&&(t.loop=e.loop),null==t.volume&&(t.volume=e.volume),null==t.pan&&(t.pan=e.pan),0==t.delay){if(!n._beginPlaying(e,t))return!1}else{var o=setTimeout((function(){n._beginPlaying(e,t)}),t.delay);e.delayTimeoutId=o}return this._instances.push(e),!0},n._beginPlaying=function(e,n){if(!t.add(e,n.interrupt))return!1;if(!e._beginPlaying(n)){var r=createjs.indexOf(this._instances,e);return r>-1&&this._instances.splice(r,1),!1}return!0},n._getSrcById=function(e){return n._idHash[e]||{src:e}},n._playFinished=function(e){t.remove(e);var n=createjs.indexOf(this._instances,e);n>-1&&this._instances.splice(n,1)},createjs.Sound=e,t.channels={},t.create=function(e,n){return null==t.get(e)&&(t.channels[e]=new t(e,n),!0)},t.removeSrc=function(e){var n=t.get(e);return null!=n&&(n._removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e]._removeAll();t.channels={}},t.add=function(e,n){var r=t.get(e.src);return null!=r&&r._add(e,n)},t.remove=function(e){var n=t.get(e.src);return null!=n&&(n._remove(e),!0)},t.maxPerChannel=function(){return r.maxDefault},t.get=function(e){return t.channels[e]};var r=t.prototype;r.constructor=t,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(e,t){this.src=e,this.max=t||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},r._get=function(e){return this._instances[e]},r._add=function(e,t){return!!this._getSlot(t,e)&&(this._instances.push(e),this.length++,!0)},r._remove=function(e){var t=createjs.indexOf(this._instances,e);return-1!=t&&(this._instances.splice(t,1),this.length--,!0)},r._removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},r._getSlot=function(t){var n,r;if(t!=e.INTERRUPT_NONE&&null==(r=this._get(0)))return!0;for(var o=0,i=this.max;i>o;o++){if(null==(n=this._get(o)))return!0;if(n.playState==e.PLAY_FINISHED||n.playState==e.PLAY_INTERRUPTED||n.playState==e.PLAY_FAILED){r=n;break}t!=e.INTERRUPT_NONE&&(t==e.INTERRUPT_EARLY&&n.position<r.position||t==e.INTERRUPT_LATE&&n.position>r.position)&&(r=n)}return null!=r&&(r._interrupt(),this._remove(r),!0)},r.toString=function(){return"[Sound SoundChannel]"}}(),this.K=this.K||{},function(){"use strict";var e=function(e,t,n,r){this.EventDispatcher_constructor(),this.src=e,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this._getVolume,set:this._setVolume}),this.getVolume=createjs.deprecate(this._getVolume,"AbstractSoundInstance.getVolume"),this.setVolume=createjs.deprecate(this._setVolume,"AbstractSoundInstance.setVolume"),this._pan=0,Object.defineProperty(this,"pan",{get:this._getPan,set:this._setPan}),this.getPan=createjs.deprecate(this._getPan,"AbstractSoundInstance.getPan"),this.setPan=createjs.deprecate(this._setPan,"AbstractSoundInstance.setPan"),this._startTime=Math.max(0,t||0),Object.defineProperty(this,"startTime",{get:this._getStartTime,set:this._setStartTime}),this.getStartTime=createjs.deprecate(this._getStartTime,"AbstractSoundInstance.getStartTime"),this.setStartTime=createjs.deprecate(this._setStartTime,"AbstractSoundInstance.setStartTime"),this._duration=Math.max(0,n||0),Object.defineProperty(this,"duration",{get:this._getDuration,set:this._setDuration}),this.getDuration=createjs.deprecate(this._getDuration,"AbstractSoundInstance.getDuration"),this.setDuration=createjs.deprecate(this._setDuration,"AbstractSoundInstance.setDuration"),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this._getPlaybackResource,set:this._setPlaybackResource}),!1!==r&&!0!==r&&this._setPlaybackResource(r),this.getPlaybackResource=createjs.deprecate(this._getPlaybackResource,"AbstractSoundInstance.getPlaybackResource"),this.setPlaybackResource=createjs.deprecate(this._setPlaybackResource,"AbstractSoundInstance.setPlaybackResource"),this._position=0,Object.defineProperty(this,"position",{get:this._getPosition,set:this._setPosition}),this.getPosition=createjs.deprecate(this._getPosition,"AbstractSoundInstance.getPosition"),this.setPosition=createjs.deprecate(this._setPosition,"AbstractSoundInstance.setPosition"),this._loop=0,Object.defineProperty(this,"loop",{get:this._getLoop,set:this._setLoop}),this.getLoop=createjs.deprecate(this._getLoop,"AbstractSoundInstance.getLoop"),this.setLoop=createjs.deprecate(this._setLoop,"AbstractSoundInstance.setLoop"),this._muted=!1,Object.defineProperty(this,"muted",{get:this._getMuted,set:this._setMuted}),this.getMuted=createjs.deprecate(this._getMuted,"AbstractSoundInstance.getMuted"),this.setMuted=createjs.deprecate(this._setMuted,"AbstractSoundInstance.setMuted"),this._paused=!1,Object.defineProperty(this,"paused",{get:this._getPaused,set:this._setPaused}),this.getPaused=createjs.deprecate(this._getPaused,"AbstractSoundInstance.getPaused"),this.setPaused=createjs.deprecate(this._setPaused,"AbstractSoundInstance.setPaused")},t=createjs.extend(e,createjs.EventDispatcher);t.play=function(e){var t=createjs.PlayPropsConfig.create(e);return this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(t),void(this._paused&&this._setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,t),this)},t.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},t.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},t.applyPlayProps=function(e){return null!=e.offset&&this._setPosition(e.offset),null!=e.loop&&this._setLoop(e.loop),null!=e.volume&&this._setVolume(e.volume),null!=e.pan&&this._setPan(e.pan),null!=e.startTime&&(this._setStartTime(e.startTime),this._setDuration(e.duration)),this},t.toString=function(){return"[AbstractSoundInstance]"},t._getPaused=function(){return this._paused},t._setPaused=function(e){return!0!==e&&!1!==e||this._paused==e||1==e&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=e,e?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},t._setVolume=function(e){return e==this._volume||(this._volume=Math.max(0,Math.min(1,e)),this._muted||this._updateVolume()),this},t._getVolume=function(){return this._volume},t._setMuted=function(e){return!0===e||!1===e?(this._muted=e,this._updateVolume(),this):void 0},t._getMuted=function(){return this._muted},t._setPan=function(e){return e==this._pan||(this._pan=Math.max(-1,Math.min(1,e)),this._updatePan()),this},t._getPan=function(){return this._pan},t._getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},t._setPosition=function(e){return this._position=Math.max(0,e),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},t._getStartTime=function(){return this._startTime},t._setStartTime=function(e){return e==this._startTime||(this._startTime=Math.max(0,e||0),this._updateStartTime()),this},t._getDuration=function(){return this._duration},t._setDuration=function(e){return e==this._duration||(this._duration=Math.max(0,e||0),this._updateDuration()),this},t._setPlaybackResource=function(e){return this._playbackResource=e,0==this._duration&&this._playbackResource&&this._setDurationFromSource(),this},t._getPlaybackResource=function(){return this._playbackResource},t._getLoop=function(){return this._loop},t._setLoop=function(e){null!=this._playbackResource&&(0!=this._loop&&0==e?this._removeLooping(e):0==this._loop&&0!=e&&this._addLooping(e)),this._loop=e},t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},t._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},t._beginPlaying=function(e){return this._setPosition(e.offset),this._setLoop(e.loop),this._setVolume(e.volume),this._setPan(e.pan),null!=e.startTime&&(this._setStartTime(e.startTime),this._setDuration(e.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},t._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},t._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},t._handleSoundReady=function(){},t._updateVolume=function(){},t._updatePan=function(){},t._updateStartTime=function(){},t._updateDuration=function(){},t._setDurationFromSource=function(){},t._calculateCurrentPosition=function(){},t._updatePosition=function(){},t._removeLooping=function(){},t._addLooping=function(){},t._pause=function(){},t._resume=function(){},t._handleStop=function(){},t._handleCleanUp=function(){},t._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(e,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.K=this.K||{},function(){"use strict";var e=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},t=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},t.register=function(e){var t=this._loaders[e.src];return t&&!t.canceled?this._loaders[e.src]:(this._audioSources[e.src]=!0,this._soundInstances[e.src]=[],(t=new this._loaderClass(e)).on("complete",this._handlePreloadComplete,this),this._loaders[e.src]=t,t)},t.preload=function(e){e.on("error",this._handlePreloadError,this),e.load()},t.isPreloadStarted=function(e){return null!=this._audioSources[e]},t.isPreloadComplete=function(e){return!(null==this._audioSources[e]||1==this._audioSources[e])},t.removeSound=function(e){if(this._soundInstances[e]){for(var t=this._soundInstances[e].length;t--;)this._soundInstances[e][t].destroy();delete this._soundInstances[e],delete this._audioSources[e],this._loaders[e]&&this._loaders[e].destroy(),delete this._loaders[e]}},t.removeAllSounds=function(){for(var e in this._audioSources)this.removeSound(e)},t.create=function(e,t,n){this.isPreloadStarted(e)||this.preload(this.register(e));var r=new this._soundInstanceClass(e,t,n,this._audioSources[e]);return this._soundInstances[e]&&this._soundInstances[e].push(r),r.setMasterVolume&&r.setMasterVolume(createjs.Sound.volume),r.setMasterMute&&r.setMasterMute(createjs.Sound.muted),r},t.setVolume=function(e){return this._volume=e,this._updateVolume(),!0},t.getVolume=function(){return this._volume},t.setMute=function(){return this._updateVolume(),!0},t.toString=function(){return"[AbstractPlugin]"},t._handlePreloadComplete=function(e){var t=e.target.getItem().src;this._audioSources[t]=e.result;for(var n=0,r=this._soundInstances[t].length;r>n;n++)this._soundInstances[t][n].playbackResource=this._audioSources[t],this._soundInstances[t]=null},t._handlePreloadError=function(){},t._updateVolume=function(){},createjs.AbstractPlugin=e}(),this.K=this.K||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.Types.SOUND)}var t=createjs.extend(e,createjs.AbstractLoader);e.context=null,t.toString=function(){return"[WebAudioLoader]"},t._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},t._sendComplete=function(){e.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},t._handleAudioDecoded=function(e){this._result=e,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(e,"AbstractLoader")}(),this.K=this.K||{},function(){"use strict";function e(e,t,r,o){this.AbstractSoundInstance_constructor(e,t,r,o),this.gainNode=n.context.createGain(),this.panNode=n.context.createPanner(),this.panNode.panningModel=n._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var t=createjs.extend(e,createjs.AbstractSoundInstance),n=e;n.context=null,n._scratchBuffer=null,n.destinationNode=null,n._panningModel="equalpower",t.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},t.toString=function(){return"[WebAudioSoundInstance]"},t._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},t._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},t._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},t._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},t._cleanUpAudioNode=function(e){if(e){if(e.stop(0),e.disconnect(0),createjs.BrowserDetect.isIOS)try{e.buffer=n._scratchBuffer}catch(e){}e=null}return e},t._handleSoundReady=function(){this.gainNode.connect(n.destinationNode);var e=.001*this._duration,t=Math.min(.001*Math.max(0,this._position),e);this.sourceNode=this._createAndPlayAudioNode(n.context.currentTime-e,t),this._playbackStartTime=this.sourceNode.startTime-t,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-t)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._createAndPlayAudioNode=function(e,t){var r=n.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var o=.001*this._duration;return r.startTime=e+o,r.start(r.startTime,t+.001*this._startTime,o-t),r},t._pause=function(){this._position=1e3*(n.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},t._resume=function(){this._handleSoundReady()},t._updateVolume=function(){var e=this._muted?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},t._calculateCurrentPosition=function(){return 1e3*(n.context.currentTime-this._playbackStartTime)},t._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},t._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},t._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.K=this.K||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=n._panningModel,this.context=n.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=n._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n._capabilities=null,n._panningModel="equalpower",n.context=null,n._scratchBuffer=null,n._unlocked=!1,n.DEFAULT_SAMPLE_RATE=44100,n.isSupported=function(){var e=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!e&&!this._isFileXHRSupported())&&(n._generateCapabilities(),null!=n.context)},n.playEmptySound=function(){if(null!=n.context){var e=n.context.createBufferSource();e.buffer=n._scratchBuffer,e.connect(n.context.destination),e.start(0,0,0)}},n._isFileXHRSupported=function(){var e=!0,t=new XMLHttpRequest;try{t.open("GET","WebAudioPluginTest.fail",!1)}catch(t){return e=!1}t.onerror=function(){e=!1},t.onload=function(){e=404==this.status||200==this.status||0==this.status&&""!=this.response};try{t.send()}catch(t){e=!1}return e},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;if(null==n.context&&(n.context=n._createAudioContext(),null==n.context))return null;null==n._scratchBuffer&&(n._scratchBuffer=n.context.createBuffer(1,1,22050)),n._compatibilitySetUp(),"ontouchstart"in window&&"running"!=n.context.state&&(n._unlock(),document.addEventListener("mousedown",n._unlock,!0),document.addEventListener("touchstart",n._unlock,!0),document.addEventListener("touchend",n._unlock,!0)),n._capabilities={panning:!0,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,o=0,i=t.length;i>o;o++){var s=t[o],a=r[s]||s;n._capabilities[s]="no"!=e.canPlayType("audio/"+s)&&""!=e.canPlayType("audio/"+s)||"no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)}n.context.destination.numberOfChannels<2&&(n._capabilities.panning=!1)}},n._createAudioContext=function(){var e=window.AudioContext||window.webkitAudioContext;if(null==e)return null;var t=new e;if(/(iPhone|iPad)/i.test(navigator.userAgent)&&t.sampleRate!==n.DEFAULT_SAMPLE_RATE){var r=t.createBuffer(1,1,n.DEFAULT_SAMPLE_RATE),o=t.createBufferSource();o.buffer=r,o.connect(t.destination),o.start(0),o.disconnect(),t.close(),t=new e}return t},n._compatibilitySetUp=function(){if(n._panningModel="equalpower",!n.context.createGain){n.context.createGain=n.context.createGainNode;var e=n.context.createBufferSource();e.__proto__.start=e.__proto__.noteGrainOn,e.__proto__.stop=e.__proto__.noteOff,n._panningModel=0}},n._unlock=function(){n._unlocked||(n.playEmptySound(),"running"==n.context.state&&(document.removeEventListener("mousedown",n._unlock,!0),document.removeEventListener("touchend",n._unlock,!0),document.removeEventListener("touchstart",n._unlock,!0),n._unlocked=!0))},t.toString=function(){return"[WebAudioPlugin]"},t._addPropsToClasses=function(){var e=this._soundInstanceClass;e.context=this.context,e._scratchBuffer=n._scratchBuffer,e.destinationNode=this.gainNode,e._panningModel=this._panningModel,this._loaderClass.context=this.context},t._updateVolume=function(){var e=createjs.Sound._masterMute?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},createjs.WebAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),this.K=this.K||{},function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}function t(){this._tags=[]}var n=e;n._tags={},n._tagPool=new t,n._tagUsed={},n.get=function(e){var t=n._tags[e];return null==t?(t=n._tags[e]=n._tagPool.get()).src=e:n._tagUsed[e]?(t=n._tagPool.get()).src=e:n._tagUsed[e]=!0,t},n.set=function(e,t){t==n._tags[e]?n._tagUsed[e]=!1:n._tagPool.set(t)},n.remove=function(e){var t=n._tags[e];return null!=t&&(n._tagPool.set(t),delete n._tags[e],delete n._tagUsed[e],!0)},n.getDuration=function(e){var t=n._tags[e];return null!=t&&t.duration?1e3*t.duration:0},createjs.HTMLAudioTagPool=e;var r=t.prototype;r.constructor=t,r.get=function(){var e;return null==(e=0==this._tags.length?this._createTag():this._tags.pop()).parentNode&&document.body.appendChild(e),e},r.set=function(e){-1==createjs.indexOf(this._tags,e)&&(this._tags.src=null,this._tags.push(e))},r.toString=function(){return"[TagPool]"},r._createTag=function(){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e}}(),this.K=this.K||{},function(){"use strict";function e(e,t,n,r){this.AbstractSoundInstance_constructor(e,t,n,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),n?this._audioSpriteStopTime=.001*(t+n):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var t=createjs.extend(e,createjs.AbstractSoundInstance);t.setMasterVolume=function(){this._updateVolume()},t.setMasterMute=function(){this._updateVolume()},t.toString=function(){return"[HTMLAudioSoundInstance]"},t._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},t._handleCleanUp=function(){var e=this._playbackResource;if(null!=e){e.pause(),e.loop=!1,e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{e.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.set(this.src,e),this._playbackResource=null}},t._beginPlaying=function(e){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(e)},t._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},t._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},t._pause=function(){this._playbackResource.pause()},t._resume=function(){this._playbackResource.play()},t._updateVolume=function(){if(null!=this._playbackResource){var e=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;e!=this._playbackResource.volume&&(this._playbackResource.volume=e)}},t._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},t._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(e){this._handleSetPositionSeek(null)}},t._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},t._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},t._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},t._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.K=this.K||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._capabilities=n._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n.MAX_INSTANCES=30,n._AUDIO_READY="canplaythrough",n._AUDIO_ENDED="ended",n._AUDIO_SEEKED="seeked",n._AUDIO_STALLED="stalled",n._TIME_UPDATE="timeupdate",n._capabilities=null,n.isSupported=function(){return n._generateCapabilities(),null!=n._capabilities},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;n._capabilities={panning:!1,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,o=0,i=t.length;i>o;o++){var s=t[o],a=r[s]||s;n._capabilities[s]="no"!=e.canPlayType("audio/"+s)&&""!=e.canPlayType("audio/"+s)||"no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)}}},t.register=function(e){var t=createjs.HTMLAudioTagPool.get(e.src),n=this.AbstractPlugin_register(e);return n.setTag(t),n},t.removeSound=function(e){this.AbstractPlugin_removeSound(e),createjs.HTMLAudioTagPool.remove(e)},t.create=function(e,t,n){var r=this.AbstractPlugin_create(e,t,n);return r.playbackResource=null,r},t.toString=function(){return"[HTMLAudioPlugin]"},t.setVolume=t.getVolume=t.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(e,"AbstractPlugin")}()},2634:()=>{},9169:()=>{},6833:()=>{}}]);